<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>kubernetesì—ì„œ locustë¥¼ ì´ìš©í•´ ë¶€í•˜í…ŒìŠ¤íŠ¸í•´ë³´ê¸° - Unreasonable Effectiveness</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Unreasonable Effectiveness"><meta name="msapplication-TileImage" content="/img/small_geul.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Unreasonable Effectiveness"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Locustë¥¼ ì´ìš©í•œ ë¶€í•˜í…ŒìŠ¤íŠ¸ë¥¼ K8Së¥¼ ì‚¬ìš©í•´ì„œ ì§„í–‰í•´ë³´ì•˜ìŠµë‹ˆë‹¤."><meta property="og:type" content="blog"><meta property="og:title" content="kubernetesì—ì„œ locustë¥¼ ì´ìš©í•´ ë¶€í•˜í…ŒìŠ¤íŠ¸í•´ë³´ê¸°"><meta property="og:url" content="http://tkdguq05.github.io/2023/02/25/locust-on-kubernetes/"><meta property="og:site_name" content="Unreasonable Effectiveness"><meta property="og:description" content="Locustë¥¼ ì´ìš©í•œ ë¶€í•˜í…ŒìŠ¤íŠ¸ë¥¼ K8Së¥¼ ì‚¬ìš©í•´ì„œ ì§„í–‰í•´ë³´ì•˜ìŠµë‹ˆë‹¤."><meta property="og:locale" content="en_US"><meta property="og:image" content="https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iqIAS7UBfyf0/v0/1200x660.jpg"><meta property="article:published_time" content="2023-02-25T12:20:50.000Z"><meta property="article:modified_time" content="2023-12-08T06:48:29.277Z"><meta property="article:author" content="SangHyub Lee, Jose"><meta property="article:tag" content="engineering"><meta property="article:tag" content="locust"><meta property="article:tag" content="kuburnetes"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iqIAS7UBfyf0/v0/1200x660.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://tkdguq05.github.io/2023/02/25/locust-on-kubernetes/"},"headline":"kubernetesì—ì„œ locustë¥¼ ì´ìš©í•´ ë¶€í•˜í…ŒìŠ¤íŠ¸í•´ë³´ê¸°","image":["https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iqIAS7UBfyf0/v0/1200x660.jpg"],"datePublished":"2023-02-25T12:20:50.000Z","dateModified":"2023-12-08T06:48:29.277Z","author":{"@type":"Person","name":"SangHyub Lee, Jose"},"publisher":{"@type":"Organization","name":"Unreasonable Effectiveness","logo":{"@type":"ImageObject"}},"description":"Locustë¥¼ ì´ìš©í•œ ë¶€í•˜í…ŒìŠ¤íŠ¸ë¥¼ K8Së¥¼ ì‚¬ìš©í•´ì„œ ì§„í–‰í•´ë³´ì•˜ìŠµë‹ˆë‹¤."}</script><link rel="canonical" href="http://tkdguq05.github.io/2023/02/25/locust-on-kubernetes/"><link rel="icon" href="/img/small_geul.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/monokai.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Unreasonable Effectiveness</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iqIAS7UBfyf0/v0/1200x660.jpg" alt="kubernetesì—ì„œ locustë¥¼ ì´ìš©í•´ ë¶€í•˜í…ŒìŠ¤íŠ¸í•´ë³´ê¸°"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-02-25T12:20:50.000Z" title="2023. 2. 25. ì˜¤í›„ 9:20:50">2023-02-25</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-12-08T06:48:29.277Z" title="2023. 12. 8. ì˜¤í›„ 3:48:29">2023-12-08</time></span><span class="level-item"><a class="link-muted" href="/categories/engineering/">engineering</a><span>Â /Â </span><a class="link-muted" href="/categories/engineering/kuburnetes/">kuburnetes</a></span><span class="level-item">21 minutes read (About 3203 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">kubernetesì—ì„œ locustë¥¼ ì´ìš©í•´ ë¶€í•˜í…ŒìŠ¤íŠ¸í•´ë³´ê¸°</h1><div class="content"><p>Locustë¥¼ ì´ìš©í•œ ë¶€í•˜í…ŒìŠ¤íŠ¸ë¥¼ K8Së¥¼ ì‚¬ìš©í•´ì„œ ì§„í–‰í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>
<span id="more"></span>
<h2 id="Locust"><a href="#Locust" class="headerlink" title="Locust"></a>Locust</h2><p>LocustëŠ” íŒŒì´ì¬ìœ¼ë¡œ ë¶€í•˜í…ŒìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ì…ë‹ˆë‹¤. ì›¹ì´ë‚˜ ì•±ì—ì„œ ì‹œìŠ¤í…œì´ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë™ì‹œ ì‚¬ìš©ì ìˆ˜ë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ê³ , ì„œë²„ê°€ ê°ë‹¹í•  ìˆ˜ ìˆëŠ” TPS/RPS(Transaction Per Second/Request Per Second)ë¥¼ ëŒ€ëµì ìœ¼ë¡œ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>Locust ë§ê³ ë„ Jmeterë‚˜ nGrinderì™€ ê°™ì€ ë¶€í•˜í…ŒìŠ¤íŠ¸ ë„êµ¬ê°€ ìˆìŠµë‹ˆë‹¤ë§Œ, ì¢€ ë” ì‰½ê³  ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ìˆê³  pythonìœ¼ë¡œ ê°„í¸í•˜ê²Œ ì‘ì—…í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ì¢‹ë‹¤ê³  ìƒê°ë˜ë„¤ìš”.</p>
<blockquote>
<p>Locustë€ ë§ì˜ ëœ»ì€ ì¸ë„¤ì¼ì—ì„œ ë³´ì´ë“¯ì´ ë©”ëšœê¸°ë–¼ë¥¼ ë§í•©ë‹ˆë‹¤!<br>ê·¸ë˜ì„œ Locustì—ì„œ ë¶€í•˜ë¥¼ ì£¼ëŠ” ê²ƒì„ swarmingì´ë¼ê³  í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
</blockquote>
<p>locustë¥¼ ë³´í†µ ì„œë²„ì— ì˜¬ë ¤ì„œ ì‚¬ìš©í•˜ì§€ë§Œ Kubernetesë¥¼ ì‚¬ìš©í•˜ëŠ” í™˜ê²½ì´ë¼ë©´ ì´ê²ƒì„ k8sì— ì„¤ì¹˜í•´ì„œ ë¶€í•˜í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë²„ì— ì˜¬ë ¤ì„œ ì„¤ì¹˜í•œë‹¤ë©´ ì›Œì»¤ ìˆ˜ë‚˜ ìœ ì € ìˆ˜ë¥¼ ëŠ˜ë ¸ì„ ë•Œ ë¦¬ì†ŒìŠ¤ì˜ í•œê³„ê°€ ìˆê¸° ë§ˆë ¨ì¸ë°, k8së¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì›í•˜ëŠ” ë§Œí¼ ìœ ì €ì™€ ë¶€í•˜ë¥¼ ëŠ˜ë ¤ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.(ì‚¬ì‹¤ ì„œë²„ì— ì˜¬ë ¤ì ¸ìˆëŠ” ë‹¤ë¥¸ íˆ´ì„ ì‚¬ìš©í•˜ë‹¤ê°€ ì›í•˜ëŠ” ë§Œí¼ ë¶€í•˜ë¥¼ ì£¼ì§€ ëª»í•´ì„œ k8së¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆë‹µë‹ˆë‹¤.)</p>
<p><br></br></p>
<h2 id="Kubernetes-in-Locust"><a href="#Kubernetes-in-Locust" class="headerlink" title="Kubernetes in Locust"></a>Kubernetes in Locust</h2><p>Locustë¥¼ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì„¤ì¹˜í•˜ê¸° ìœ„í•´ì„œ Helmì°¨íŠ¸ë¥¼ ì°¾ì•„ë³´ì•˜ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê³µì‹ ì°¨íŠ¸ëŠ” ë”°ë¡œ ì—†ëŠ” ê²ƒ ê°™ì•˜ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ <code>Delivery Hero</code> ì—ì„œ ì œê³µí•˜ëŠ” Helm ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. ì‚´í´ë³´ë‹ˆ ë‚˜ë¦„ ì‚¬ìš©í•  ë§Œ í–ˆê³  ìµœê·¼ ì»¤ë°‹ë„ 4ê°œì›” ì „ì— ìˆì—ˆìŠµë‹ˆë‹¤. ë˜ ê°„ë‹¨í•˜ê²Œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì ìš©í•´ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ìˆì—ˆê¸° ë•Œë¬¸ì— ì´ ì°¨íŠ¸ë¡œ ì„¤ì¹˜í•´ì„œ ì§„í–‰í•´ë³´ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.</p>
<h3 id="Locust-Helm-Chart"><a href="#Locust-Helm-Chart" class="headerlink" title="Locust Helm Chart"></a>Locust Helm Chart</h3><p>Helm ChartëŠ” <a target="_blank" rel="noopener" href="https://github.com/deliveryhero/helm-charts/tree/master/stable/locust">ì—¬ê¸°</a>ì— ì œê³µë˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ ë§í¬ë¡œ ê°€ë©´ ì–´ë–»ê²Œ ì°¨íŠ¸ë¥¼ ì„¤ì¹˜í•˜ê³  ì‚¬ìš©í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œ ë‚˜ì™€ìˆìŠµë‹ˆë‹¤. ë¨¼ì € helm ì°¨íŠ¸ë¥¼ ë“±ë¡í•˜ê³  ì„¤ì¹˜í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>
<p><code>helm repo add deliveryhero https://charts.deliveryhero.io/</code> </p>
<p><code>helm install deliveryhero/locust</code></p>
<p><code>helm install my-release deliveryhero/locust</code></p>
<p>ì»¤ìŠ¤í…€í•˜ê²Œ values.yamlë¥¼ ì‘ì„±í•´ì„œ ì„¤ì¹˜í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. í•œ ë²ˆ ì„¤ì¹˜í•œ ë‹¤ìŒ ì»¤ìŠ¤í…€í•  ê°’ì´ ìˆë‹¤ë©´ ì´ë ‡ê²Œ ì„¤ì¹˜í•˜ëŠ” ê²ƒë„ ì¢‹ì•„ë³´ì´ë„¤ìš”!</p>
<p><code>helm install my-release deliveryhero/locust -f values.yaml</code></p>
<p>Locustìš© namespaceë¥¼ ë§Œë“¤ì–´ ë†“ê³  ì„¤ì¹˜í•˜ëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤. í•´ë‹¹ namespaceì— ë¦¬ì†ŒìŠ¤ë¥¼ ë§ì´ ì¤˜ì•¼í•˜ëŠ” ìƒí™©ì´ ìˆì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— k8sì— ì„¤ì¹˜ëœ ë‹¤ë¥¸ ì•±ë“¤ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê¸°ìœ„í•´ì„œë¼ë„ namespaceë¥¼ ë³„ë„ë¡œ ì‚¬ìš©í•´ì£¼ì„¸ìš”.</p>
<p><br></br></p>
<h3 id="Chart-êµ¬ì„±"><a href="#Chart-êµ¬ì„±" class="headerlink" title="Chart êµ¬ì„±"></a>Chart êµ¬ì„±</h3><p>ì´ ì°¨íŠ¸ì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ConfigMapì„ ì‚¬ìš©í•´ì„œ ë¶€í•˜í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤. ìƒ˜í”Œë¡œ ì œê³µë˜ì–´ ìˆëŠ” íŒŒì¼ì€ main.pyì™€ libì— ìˆëŠ” example_functions.py ì…ë‹ˆë‹¤. ì „ìëŠ” ì‹¤ì œ ì‹¤í–‰í•˜ëŠ” locust ìŠ¤í¬ë¦½íŠ¸ì´ê³ , ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ì—¬ê¸°ì— ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë˜ê² ìŠµë‹ˆë‹¤.</p>
<h4 id="main-py"><a href="#main-py" class="headerlink" title="main.py"></a>main.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> locust <span class="keyword">import</span> HttpUser, task, between</span><br><span class="line"><span class="keyword">from</span> lib.example_functions <span class="keyword">import</span> choose_random_page</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">default_headers = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WebsiteUser</span>(<span class="title class_ inherited__">HttpUser</span>):</span><br><span class="line">    wait_time = between(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @task(<span class="params"><span class="number">1</span></span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_index</span>(<span class="params">self</span>):</span><br><span class="line">        self.client.get(<span class="string">&quot;/&quot;</span>, headers=default_headers)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @task(<span class="params"><span class="number">3</span></span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_random_page</span>(<span class="params">self</span>):</span><br><span class="line">        self.client.get(choose_random_page(), headers=default_headers)</span><br></pre></td></tr></table></figure>
<p>main.pyë¥¼ ë¨¼ì € ì‚´í´ë³´ë©´ ì •ë§ ê°„ë‹¨í•˜ê²Œ ì§œì—¬ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¨¼ì € libì—ì„œ example_functionsë¥¼ ê°–ê³ ì™€ì„œ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ ë³´ì…ë‹ˆë‹¤. ê·¸ ì´í›„ì—ëŠ” í—¤ë”ë¥¼ ì§€ì •í•˜ê³ , ê·¸ ë°‘ ë¶€ë¶„ë¶€í„°ëŠ” locust ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±í•˜ëŠ” ê²ƒê³¼ ë˜‘ê°™ìŠµë‹ˆë‹¤. locustì˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±ì€ ê°œë…ë§Œ ì´í•´í•˜ê³  ìˆë‹¤ë©´ ì „í˜€ ì–´ë ¤ìš´ê²Œ ì—†ì–´ì„œ ê°œë…ë§Œ ìµíˆê³  ì›í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤. ê°„ë‹¨í•˜ê²Œ ì•„ë˜ì— ì‘ì„±í–ˆìœ¼ë‹ˆ, ì°¸ê³ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>
<p><br></br></p>
<h4 id="Locust-file-ì‘ì„±í•˜ê¸°"><a href="#Locust-file-ì‘ì„±í•˜ê¸°" class="headerlink" title="Locust file ì‘ì„±í•˜ê¸°"></a>Locust file ì‘ì„±í•˜ê¸°</h4><ul>
<li><p><strong>HttpUser</strong></p>
<ul>
<li>ë¶€í•˜ë¥¼ ê°€í•  ìœ ì €ë¥¼ ëœ»í•œë‹¤.</li>
<li>ì´ ìœ ì €ëŠ” tasks ì• íŠ¸ë¦¬ë·°íŠ¸ì— ì„ ì–¸ëœ ì‘ì—… ë˜ëŠ” @task ë°ì½”ë ˆì´í„°ê°€ ë¶™ì—¬ì§„ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.</li>
</ul>
</li>
<li><p><strong>TaskSet</strong></p>
<ul>
<li>ìœ ì €ê°€ ìˆ˜í–‰í•  ì‘ì—…ë“¤ì„ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´, tasks ì• íŠ¸ë¦¬ë·°íŠ¸ì— ì„ ì–¸ëœ ì‘ì—…ë“¤ ë˜ëŠ” @task ë°ì½”ë ˆì´í„°ê°€ ë¶™ì—¬ì§„ ì‘ì—…ë“¤ ì¤‘ ëœë¤ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤.</li>
</ul>
</li>
<li><p><strong>task</strong></p>
<ul>
<li><p>HttpUserëŠ” @task ë°ì½”ë ˆì´í„°ê°€ ë¶™ì€ ë©”ì„œë“œë¥¼ ì°¾ì•„ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤.</p>
</li>
<li><p>weight íŒŒë¼ë¯¸í„°ë¥¼ ë„£ì–´ì£¼ë©´ ê° í…ŒìŠ¤í¬ë§ˆë‹¤ ê°€ì¤‘ì¹˜ë¥¼ ë¶€ì—¬í•  ìˆ˜ ìˆë‹¤.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@task(<span class="params">weight=<span class="number">1</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">first_task</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@task(<span class="params">weight=<span class="number">2</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">second_task</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<ul>
<li>second_taskê°€ ì‹¤í–‰ë  í™•ë¥ ì€ first_taskì˜ ë‘ ë°° ì´ë‹¤.</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>between</strong></p>
<ul>
<li>HttpUserë‚˜ TaskSetì˜ wait_time ì• íŠ¸ë¦¬ë·°íŠ¸ë¥¼ ì‚¬ìš©í•  ë•Œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
<li>wait_time = between(1, 4) ì„ ì–¸í•´ì£¼ë©´ 1ì´ˆ ~ 4ì´ˆ ì‚¬ì´ ê°„ê²©ìœ¼ë¡œ ëœë¤í•˜ê²Œ ì‘ì—…ì´ ìˆ˜í–‰ëœë‹¤ëŠ” ëœ»ì´ë‹¤.</li>
<li>ë‹¹ì—°í•˜ê²Œ constantë¼ëŠ” ì´ë¦„ì˜ í•¨ìˆ˜ë„ ì œê³µí•´ì„œ ì¼ì •í•œ ê°„ê²©ìœ¼ë¡œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.</li>
<li>wait_time = constant(5) ëŠ” 5ì´ˆë§ˆë‹¤ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.</li>
</ul>
</li>
</ul>
<p><br></br></p>
<h4 id="lib-example-functions-py"><a href="#lib-example-functions-py" class="headerlink" title="lib/example_functions.py"></a>lib/example_functions.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">choose_random_page</span>():</span><br><span class="line">    pages = [</span><br><span class="line">        <span class="string">&#x27;/policies/privacy/&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;/contact/&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;/about/&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;/search/howsearchworks/crawling-indexing/&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;/search/howsearchworks/algorithms/&#x27;</span></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> random.choice(pages)</span><br></pre></td></tr></table></figure>
<p>example_functions.pyì—ëŠ” ì›í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ë†“ìœ¼ë©´ ë©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” í…ŒìŠ¤íŠ¸í•  í˜ì´ì§€ë“¤ì„ ë‚˜ì—´í•´ë†“ì•˜ë„¤ìš”.</p>
<p><br></br></p>
<p>ì´ë ‡ê²Œ main.pyì™€ example_functions.pyë¥¼ ì‘ì„±í–ˆë‹¤ë©´ ì´ê²ƒì„ í•´ë‹¹ namespaceì— configmapìœ¼ë¡œ ë“±ë¡í•´ì¤ë‹ˆë‹¤. kubectlëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. configmapê³¼ locustë¥¼ í•¨ê»˜ ì„¤ì¹˜í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<p><code>helm install locust -n &#123;namespace&#125;  deliveryhero/locust \
  --set loadtest.name=loadtest \
  --set loadtest.locust_locustfile_configmap=my-loadtest-locustfile \
  --set loadtest.locust_lib_configmap=my-loadtest-lib</code> </p>
<p>ì´ë ‡ê²Œ ì„¤ì¹˜ë˜ë©´ locustì˜ masterì™€ workerê°€ ì˜¬ë¼ì˜¤ê²Œ ë˜ëŠ”ë°, ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì—ˆë‹¤ë©´ ë°”ë¡œ UIì— ì ‘ì†í•´ì„œ ë¶€í•˜í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p>ê·¸ëŸ°ë° ê¶ê¸ˆí•œ ì ì€ ì´ê²Œ ì–´ë–»ê²Œ podë¡œ ì „ë‹¬ë˜ì–´ì„œ ë¶€í•˜í…ŒìŠ¤íŠ¸ê°€ ì§„í–‰ë˜ëŠ”ì§€ì…ë‹ˆë‹¤. configmapìœ¼ë¡œ ë“±ë¡ë˜ì—ˆëŠ”ë° ì´ê²Œ ì–´ë–»ê²Œ Podì— ë“¤ì–´ê°ˆ ìˆ˜ ìˆê²Œ ë˜ëŠ” ê±¸ê¹Œìš”? ë°”ë¡œ configmapì„ volume mountì‹œí‚¤ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>
<p>podì˜ yamlë¥¼ í™•ì¸í•˜ë©´ ì–´ë–»ê²Œ ì´ ì½”ë“œë“¤ì´ ì‹¤í–‰ë˜ëŠ”ì§€ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ëŠ” ì œê°€ ìƒì„±í•œ locust worker íŒŒë“œì˜ yaml ì¼ë¶€ ì…ë‹ˆë‹¤.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">volumeMounts:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/mnt/locust</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">locustfile</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/mnt/locust/lib</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">lib</span></span><br></pre></td></tr></table></figure>
<p>ë³´ì‹œë©´ volumeMountsê°€ ë˜ì–´ìˆëŠ” ê²ƒì´ ë‚˜ì™€ìˆê³  íŒŒë“œì˜ /mnt/locustì— configmapìœ¼ë¡œ ì¡ì€ locustfileê³¼ libê°€ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">volumes:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">configMap:</span></span><br><span class="line">    <span class="attr">defaultMode:</span> <span class="number">420</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">my-loadtest-lib</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">lib</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">configMap:</span></span><br><span class="line">    <span class="attr">defaultMode:</span> <span class="number">420</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">my-loadtest-locustfile</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">locustfile</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">configMap:</span></span><br><span class="line">    <span class="attr">defaultMode:</span> <span class="number">420</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">locust-config</span></span><br></pre></td></tr></table></figure>
<p>volumeì€ configMapìœ¼ë¡œ ì•„ê¹Œ ì „ì— ì§€ì •í•œ my-loadtest-libê³¼ my-loadtest-locustfile ì…ë‹ˆë‹¤. ì´ë ‡ê²Œ ë˜ë©´ ë°©ê¸ˆ configMapìœ¼ë¡œ ì§€ì •í•œ ì½”ë“œë“¤ì´ volumeìœ¼ë¡œ ìƒì„±ë˜ê³  íŒŒë“œê°€ ë§Œë“¤ì–´ì§€ë©´ì„œ /mnt/locust ê²½ë¡œì— ë§ˆìš´íŠ¸ ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ ë§ˆìš´íŠ¸ ë˜ì—ˆë‹¤ë©´, í•´ë‹¹ ê²½ë¡œì—ì„œ ì½”ë“œë“¤ì´ ì‹¤í–‰ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<p><br></br></p>
<h3 id="UI-ì ‘ì†ë°©ë²•"><a href="#UI-ì ‘ì†ë°©ë²•" class="headerlink" title="UI ì ‘ì†ë°©ë²•"></a>UI ì ‘ì†ë°©ë²•</h3><p>ë„ì›Œì§„ Podì— ì ‘ê·¼í•˜ëŠ” ì—¬ëŸ¬ ë°©ë²•ì´ ìˆê² ì§€ë§Œ, port forwardingí•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.  load balancerë¥¼ ë¶™ì—¬ì„œ ë„ìš°ëŠ” ê±´ ê·¸ë‹¥ ì¶”ì²œí•˜ì§€ ì•ŠëŠ” ë°©ë²•ì¸ë° ê·¸ ì´ìœ ëŠ” ë¡œë“œ í…ŒìŠ¤íŠ¸ ìš© íˆ´ì¸ë° ì•„ë¬´ì—ê²Œë‚˜ ì ‘ì†ë˜ëŠ” ì ì´ ì¢‹ì•„ë³´ì´ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë¶€í•˜í…ŒìŠ¤íŠ¸ ì£¼ì†Œë¥¼ ëˆ„êµ°ê°€ ì•Œì•„ë‚¸ë‹¤ë©´ ì›í•˜ì§€ ì•ŠëŠ” ê³³ìœ¼ë¡œ Ddos ê³µê²©ì„ í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì´ ì¡°ì„±ë˜ì–´ ë²„ë¦½ë‹ˆë‹¤. ê·¸ë˜ì„œ! port forwardë¥¼ ì‚¬ìš©í•´ì„œ ì ‘ì†í•´ë³´ê² ìŠµë‹ˆë‹¤. </p>
<p>locustì˜ í¬íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ 8089ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ values.yamlë¥¼ ìˆ˜ì •í•´ì„œ ì¬ë°°í¬í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>
<p><code>kubectl --namespace &#123;namespace&#125; port-forward service/locust 8089:8089</code></p>
<p><img src="https://docs.locust.io/en/stable/_images/webui-splash-screenshot.png" alt="Locust UI"></p>
<p><strong>Start swarming</strong>ì„ í•˜ë©´ ë©”ëšœê¸° ë–¼ë“¤ì´ ëª°ë ¤ë“¤ê¸° ì‹œì‘í•©ë‹ˆë‹¤! ğŸ¦—ğŸ¦—ğŸ¦—ğŸ¦—</p>
<p>ì•„ë˜ëŠ” ì‹¤í—˜ ê²°ê³¼ì— ëŒ€í•œ ê·¸ë˜í”„ë“¤ì…ë‹ˆë‹¤.</p>
<p><img src="https://docs.locust.io/en/stable/_images/total_requests_per_second.png" alt="Locust ì‹¤í—˜ ê²°ê³¼ - TPS"></p>
<p><img src="https://docs.locust.io/en/stable/_images/response_times.png" alt="Locust ì‹¤í—˜ ê²°ê³¼ - Response Time"></p>
<p><img src="https://docs.locust.io/en/stable/_images/number_of_users.png" alt="Locust ì‹¤í—˜ ê²°ê³¼ - Users"></p>
<p><br></br></p>
<h3 id="ì‚½ì§ˆí•˜ë©´ì„œ-ì–»ì–´ë‚¸-ê¿€-íŒ"><a href="#ì‚½ì§ˆí•˜ë©´ì„œ-ì–»ì–´ë‚¸-ê¿€-íŒ" class="headerlink" title="ì‚½ì§ˆí•˜ë©´ì„œ ì–»ì–´ë‚¸ ê¿€ íŒ"></a>ì‚½ì§ˆí•˜ë©´ì„œ ì–»ì–´ë‚¸ ê¿€ íŒ</h3><h4 id="ë¼ì´ë¸ŒëŸ¬ë¦¬-ì„¤ì¹˜í•˜ê¸°"><a href="#ë¼ì´ë¸ŒëŸ¬ë¦¬-ì„¤ì¹˜í•˜ê¸°" class="headerlink" title="ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜í•˜ê¸°"></a>ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜í•˜ê¸°</h4><p>ë°”ë¡œ ì‚¬ìš©í•˜ë©´ ì¢‹ê² ì§€ë§Œ, locust ìŠ¤í¬ë¦½íŠ¸ì— ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤ë©´ ì–´ë–¨ê¹Œìš”? ì•„ë§ˆ locust íŒŒë“œë“¤ì´ ì œëŒ€ë¡œ ì˜¬ë¼ì˜¤ì§€ ëª»í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. crashloopbackoffê°€ ê³„ì† ë³´ì´ê²Œ ë˜ê² ìŠµë‹ˆë‹¤â€¦ ë§Œì•½ ì„¤ì¹˜ê°€ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆë‹¤ë©´ ì„¤ì¹˜ëœ namespaceì˜ configmapì„ ì˜ ì‚´í´ë³´ì‹œê¸¸ ë°”ëë‹ˆë‹¤. </p>
<p>namespaceì˜ configmapì—ëŠ” locust-configì˜ ì´ë¦„ìœ¼ë¡œ ë“±ë¡ëœ ê²ƒì´ ìˆëŠ”ë° ì—¬ê¸°ì—ëŠ” docker-entrypoint.shì´ë¼ëŠ” ì‰˜ íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤. ì´ íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì´ ì§œì—¬ì ¸ ìˆëŠ”ë°ìš”,</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line">set -eu</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">exec /opt/venv/bin/locust $@</span><br></pre></td></tr></table></figure>
<p>ì—„ì²­ë‚˜ê²Œ ê°„ë‹¨í•˜ê²Œ ì§œì—¬ì ¸ ìˆëŠ” ì½”ë“œì…ë‹ˆë‹¤. ë‹¨ìˆœíˆ locustë¥¼ ì‹¤í–‰í•˜ëŠ” ì‰˜ íŒŒì¼ì¸ ê²ƒì…ë‹ˆë‹¤. ë§Œì•½ pandasë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line">set -eu</span><br><span class="line"></span><br><span class="line">pip3 install pandas</span><br><span class="line"></span><br><span class="line">exec /opt/venv/bin/locust $@</span><br></pre></td></tr></table></figure>
<p>locustê°€ pythonìœ¼ë¡œ ë™ì‘í•˜ë¯€ë¡œ ë³„ë„ë¡œ pipë¥¼ ì„¤ì¹˜í•´ ì¤„ í•„ìš”ê°€ ì—†ì–´ì„œ ì´ë ‡ê²Œë§Œ ë„£ì–´ì£¼ë©´, locustê°€ ì˜¬ë¼ì˜¬ë•Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ëœ ì±„ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.</p>
<p><br></br></p>
<h4 id="Locust-ì¡°ì •"><a href="#Locust-ì¡°ì •" class="headerlink" title="Locust ì¡°ì •"></a>Locust ì¡°ì •</h4><p>Locustë¡œ ì—„ì²­ ë§ì€ ë¶€í•˜ë¥¼ ì£¼ê³  ì‹¶ì€ ë§ˆìŒì€ êµ´ëšê°™ìŠµë‹ˆë‹¤ë§Œ ì‹¤ì œë¡œ ìœ ì €ë¥¼ 1000, 2000ì”© ì£¼ê²Œë˜ë©´ ì›Œì»¤ë“¤ì´ ì£½ê¸° ì‹œì‘í•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì›Œì»¤ê°€ ë‹¤ì‹œ ì˜¬ë¼ì˜¬ë•Œê¹Œì§€ Request Timeì´ ì¦ê°€í•˜ê²Œ ë˜ì–´ ì‹¤í—˜ ê²°ê³¼ë¥¼ ì˜¤ì—¼ì‹œì¼œë²„ë¦¬ê²Œ ë˜ëŠ”ë°ìš”, ì´ë¥¼ ë¯¸ë¦¬ ë§‰ê¸° ìœ„í•´ ì›Œì»¤ë“¤ì„ ëŠ˜ë ¤ì„œ ì§€ì •í•œ ìœ ì €ë¥¼ ë‚˜ëˆ ì„œ ì‹¤í–‰í•˜ë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤. ì›Œì»¤ë“¤ì€ deploymentì˜ replicasë¥¼ ì°¾ì•„ì„œ ì›í•˜ëŠ” ë§Œí¼ ëŠ˜ë ¤ì£¼ë©´ ë©ë‹ˆë‹¤. master ë˜í•œ ìˆ˜ ë§ì€ ì›Œì»¤ë“¤ì˜ ê²°ê³¼ë¥¼ ì·¨í•©í•˜ë‹¤ë³´ë©´ íŒŒë“œê°€ í„°ì ¸ë²„ë ¤ì„œ UIê°€ ë™ì‘í•˜ì§€ ì•Šê¸°ë„ í•˜ê³  ê²°ê³¼ ê°’ ìì²´ë¥¼ ìƒì–´ë²„ë¦¬ê¸°ë„ í•©ë‹ˆë‹¤. masterë„ ìˆ«ìë¥¼ ëŠ˜ë ¤ì„œ í•´ê²°í•˜ë©´ ë˜ì§€ ì•Šì„ê¹Œ ì‹¶ì§€ë§Œ, masterëŠ” í•˜ë‚˜ë¡œ ìš´ì˜í•˜ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤. í•˜ë‚˜ë¡œ ì•ˆì „í•˜ê²Œ ìš´ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì¶©ë¶„íˆ ë§ì´ ëŠ˜ë ¤ì£¼ë©´ ë©ë‹ˆë‹¤. ì—­ì‹œ masterì˜ deploymentë¥¼ ì°¾ì•„ì„œ resourceë¥¼ ì›í•˜ëŠ” ë§Œí¼ ì¡°ì •í•˜ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">resources:</span></span><br><span class="line">  <span class="attr">requests:</span></span><br><span class="line">    <span class="attr">cpu:</span> <span class="string">500m</span></span><br><span class="line">    <span class="attr">memory:</span> <span class="string">1000Mi</span></span><br></pre></td></tr></table></figure>
<p>ì•„ë§ˆ resourceê°€ yamlì— ì‘ì„±ë˜ì–´ ìˆì§€ ì•Šì„í…ë°, ê±±ì •í•˜ì§€ ë§ˆì‹œê³  resource ë¶€ë¶„ì„ ë„£ì–´ì„œ ì‹¤í–‰í•´ì£¼ì„¸ìš”. ì›Œì»¤ë„ ë˜í•œ í• ë‹¹ëœ ìœ ì €ë¥¼ ì œëŒ€ë¡œ ì†Œí™”í•˜ì§€ ëª»í•œë‹¤ë©´ ìœ„ì™€ ê°™ì´ ë¦¬ì†ŒìŠ¤ë¥¼ ëŠ˜ë ¤ì£¼ë©´ í•´ê²°ë©ë‹ˆë‹¤.</p>
<p><br></br></p>
<h3 id="K8Së¥¼-ì‚¬ìš©í• -ë•Œ-ì£¼ì˜í• -ì "><a href="#K8Së¥¼-ì‚¬ìš©í• -ë•Œ-ì£¼ì˜í• -ì " class="headerlink" title="K8Së¥¼ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í•  ì "></a>K8Së¥¼ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í•  ì </h3><p>ìœ„ì—ì„œ ì„¤ì •í•œëŒ€ë¡œ ì˜ ë˜ë©´ ì¢‹ê² ì§€ë§Œ ë§ˆìŠ¤í„°ì™€ ì›Œì»¤ì— ë¦¬ì†ŒìŠ¤ë¥¼ ëŠ˜ë ¤ì„œ ì‚¬ìš©í•˜ë‹¤ë³´ë©´, k8sì— ìˆëŠ” ë…¸ë“œì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ë‹¤ ì¨ë²„ë¦¬ê²Œ ë©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ë…¸ë“œì— node pressureê°€ ì¼ì–´ë‚˜ë©´ì„œ ë‹¤ë¥¸ ì•±ë“¤ì— ì¥ì• ê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ìš”ì†Œê°€ ìƒê²¨ë²„ë¦¬ê²Œ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ ë§‰ê¸° ìœ„í•´ ë…¸ë“œë¥¼ ì¶©ë¶„íˆ ëŠ˜ë ¤ì£¼ê³  í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì¶©ë¶„í•œ ë…¸ë“œê°€ ì—†ë‹¤ë©´ ë¦¬ì†ŒìŠ¤ë¥¼ Locust ì›Œì»¤ë“¤ì´ ì­‰ì­‰ ì†Œë¹„í•˜ê²Œ ë˜ë©´ì„œ ë…¸ë“œì— ì¥ì• ê°€ ë°œìƒí•˜ê³ , ë‹¤ë¥¸ ì•±ë“¤ì— ì˜í–¥ì´ ê°€ê²Œ ë©ë‹ˆë‹¤. í° ë…¸ë“œë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ ë†“ê³  íƒœê·¸ë¥¼ ë¶™ì¸ë‹¤ìŒ, í•´ë‹¹ íƒœê·¸ê°€ ìˆëŠ” ê³³ì—ë§Œ locust íŒŒë“œë“¤ì´ ëœ¨ë„ë¡ affinity ë˜ëŠ” node selectorë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒë„ ë°©ë²•ì´ ë˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ê·¸ë¦¬ê³  ì‹¤í—˜ì´ ì¢…ë£Œë˜ë©´ ê¼­ ë…¸ë“œë“¤ì„ ì •ë¦¬í•´ì£¼ì„¸ìš”!</p>
<p><br></br></p>
<hr>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/deliveryhero/helm-charts/tree/master/stable/locust">https://github.com/deliveryhero/helm-charts/tree/master/stable/locust</a></li>
<li><a target="_blank" rel="noopener" href="https://wookkl.tistory.com/67">https://wookkl.tistory.com/67</a></li>
<li><a target="_blank" rel="noopener" href="https://suen0904.tistory.com/m/24">https://suen0904.tistory.com/m/24</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.locust.io/en/stable/index.html">https://docs.locust.io/en/stable/index.html</a></li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>kubernetesì—ì„œ locustë¥¼ ì´ìš©í•´ ë¶€í•˜í…ŒìŠ¤íŠ¸í•´ë³´ê¸°</p><p><a href="http://tkdguq05.github.io/2023/02/25/locust-on-kubernetes/">http://tkdguq05.github.io/2023/02/25/locust-on-kubernetes/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>SangHyub Lee, Jose</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2023-02-25</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2023-12-08</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/engineering/">engineering</a><a class="link-muted mr-2" rel="tag" href="/tags/locust/">locust</a><a class="link-muted mr-2" rel="tag" href="/tags/kuburnetes/">kuburnetes</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="https://www.buymeacoffee.com/sanghyublee" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2023/05/10/gabozagu/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">ì§€ë‚œ 5ê°œì›”ì— ëŒ€í•œ íšŒê³ </span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2023/02/12/geultto-8/"><span class="level-item">ê¸€ë˜ 8ê¸°ì™€ 2022ë…„ íšŒê³  ë° 23ë…„ ë‹¤ì§</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'http://tkdguq05.github.io/2023/02/25/locust-on-kubernetes/';
            this.page.identifier = '2023/02/25/locust-on-kubernetes/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'https-tkdguq05-github-io' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><!--!--><div class="column column-right is-3-tablet is-3-desktop is-3-widescreen  order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Locust"><span class="level-left"><span class="level-item">1</span><span class="level-item">Locust</span></span></a></li><li><a class="level is-mobile" href="#Kubernetes-in-Locust"><span class="level-left"><span class="level-item">2</span><span class="level-item">Kubernetes in Locust</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Locust-Helm-Chart"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">Locust Helm Chart</span></span></a></li><li><a class="level is-mobile" href="#Chart-êµ¬ì„±"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">Chart êµ¬ì„±</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#main-py"><span class="level-left"><span class="level-item">2.2.1</span><span class="level-item">main.py</span></span></a></li><li><a class="level is-mobile" href="#Locust-file-ì‘ì„±í•˜ê¸°"><span class="level-left"><span class="level-item">2.2.2</span><span class="level-item">Locust file ì‘ì„±í•˜ê¸°</span></span></a></li><li><a class="level is-mobile" href="#lib-example-functions-py"><span class="level-left"><span class="level-item">2.2.3</span><span class="level-item">lib/example_functions.py</span></span></a></li></ul></li><li><a class="level is-mobile" href="#UI-ì ‘ì†ë°©ë²•"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">UI ì ‘ì†ë°©ë²•</span></span></a></li><li><a class="level is-mobile" href="#ì‚½ì§ˆí•˜ë©´ì„œ-ì–»ì–´ë‚¸-ê¿€-íŒ"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">ì‚½ì§ˆí•˜ë©´ì„œ ì–»ì–´ë‚¸ ê¿€ íŒ</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#ë¼ì´ë¸ŒëŸ¬ë¦¬-ì„¤ì¹˜í•˜ê¸°"><span class="level-left"><span class="level-item">2.4.1</span><span class="level-item">ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜í•˜ê¸°</span></span></a></li><li><a class="level is-mobile" href="#Locust-ì¡°ì •"><span class="level-left"><span class="level-item">2.4.2</span><span class="level-item">Locust ì¡°ì •</span></span></a></li></ul></li><li><a class="level is-mobile" href="#K8Së¥¼-ì‚¬ìš©í• -ë•Œ-ì£¼ì˜í• -ì "><span class="level-left"><span class="level-item">2.5</span><span class="level-item">K8Së¥¼ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í•  ì </span></span></a></li><li><a class="level is-mobile" href="#Reference"><span class="level-left"><span class="level-item">2.6</span><span class="level-item">Reference</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Unreasonable Effectiveness</a><p class="is-size-7"><span>&copy; 2024 SangHyub Lee, Jose</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">Â© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>