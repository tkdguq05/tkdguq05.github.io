<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>ubuntu를 이용한 딥러닝 Server 설치하기 2 - Unreasonable Effectiveness</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Unreasonable Effectiveness"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Unreasonable Effectiveness"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="서버에 원격 접속하기와 원격 파일 전송하기"><meta property="og:type" content="article"><meta property="og:title" content="ubuntu를 이용한 딥러닝 Server 설치하기 2"><meta property="og:url" content="http://tkdguq05.github.io/2019/11/22/ununtu2/"><meta property="og:site_name" content="Unreasonable Effectiveness"><meta property="og:description" content="서버에 원격 접속하기와 원격 파일 전송하기"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://tkdguq05.github.io/images/ubuntu_logo.png"><meta property="article:published_time" content="2019-11-22T08:18:37.000Z"><meta property="article:modified_time" content="2020-02-24T10:21:09.000Z"><meta property="article:author" content="SangHyub Lee, Jose"><meta property="article:tag" content="linux"><meta property="article:tag" content="ubuntu"><meta property="article:tag" content="server"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://tkdguq05.github.io/images/ubuntu_logo.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://tkdguq05.github.io/2019/11/22/ununtu2/"},"headline":"ubuntu를 이용한 딥러닝 Server 설치하기 2","image":["http://tkdguq05.github.io/images/ubuntu_logo.png"],"datePublished":"2019-11-22T08:18:37.000Z","dateModified":"2020-02-24T10:21:09.000Z","author":{"@type":"Person","name":"SangHyub Lee, Jose"},"publisher":{"@type":"Organization","name":"Unreasonable Effectiveness","logo":{"@type":"ImageObject"}},"description":"서버에 원격 접속하기와 원격 파일 전송하기"}</script><link rel="canonical" href="http://tkdguq05.github.io/2019/11/22/ununtu2/"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-1-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Unreasonable Effectiveness</a></div><div class="navbar-menu"><div class="navbar-end"></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-12"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-11-22T08:18:37.000Z" title="2019. 11. 22. 오후 5:18:37">2019-11-22</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-02-24T10:21:09.000Z" title="2020. 2. 24. 오후 7:21:09">2020-02-24</time></span><span class="level-item"><a class="link-muted" href="/categories/ubuntu/">ubuntu</a><span> / </span><a class="link-muted" href="/categories/ubuntu/troubleshooting/">troubleshooting</a></span></div></div><h1 class="title is-3 is-size-4-mobile">ubuntu를 이용한 딥러닝 Server 설치하기 2</h1><div class="content"><p>서버에 원격 접속하기와 원격 파일 전송하기</p>
<a id="more"></a>
<h1 id="Installation-of-Ubuntu-18-04-LTS-for-Deep-Learning-Computer-2"><a href="#Installation-of-Ubuntu-18-04-LTS-for-Deep-Learning-Computer-2" class="headerlink" title="Installation of Ubuntu 18.04 LTS for Deep Learning Computer -2"></a>Installation of Ubuntu 18.04 LTS for Deep Learning Computer -2</h1><h2 id="Ubuntu-with-mac-원격-접속-연결하기"><a href="#Ubuntu-with-mac-원격-접속-연결하기" class="headerlink" title="Ubuntu with mac, 원격 접속 연결하기"></a>Ubuntu with mac, 원격 접속 연결하기</h2><p>간밤에 평안하셨습니까? 지난번까지는 ubuntu설치를 열심히 했고, 원격 접속은 쉽게 해결할 것이라고 생각하며 가볍게 노트북을 열어서 신나게 원격접속 연결을 시도했습니다. 퇴근 후에 저녁을 먹고 여유롭게 9시부터 만지기 시작했는데, 어느새 11시가 넘어가고 새벽 1시가 넘어가곤 했습니다. 그렇게 며칠을 지내고서야 맥북으로 ubuntu서버에 접속을 할 수 있었습니다. </p>
<p>이번 글을 쓰기 까지 간밤에 한 일들은 다음과 같습니다.</p>
<ul>
<li>ubuntu 인터넷 연결 </li>
<li>KT 공유기 고정 아이피 설정</li>
<li>포트 포워딩</li>
<li>원격 접속 </li>
<li>원격 파일 전송 </li>
<li>nvidia 그래픽 드라이버 설치</li>
<li>Cuda 설치</li>
<li>CuDnn 설치</li>
<li>tensorflow, keras 설치</li>
<li>jupyter notebook 연결</li>
</ul>
<p>각 단계에서 다음 단계로 넘어가기 까지 우여곡절이 많았는데, 해결할때마다 은근 쾌감이 있어서 기분 좋았습니다. 리눅스, 그러니까 검은 화면만 보면 겁을 실컷 먹었었는데, 그 두려움을 극복해가는 스스로가 대견스럽다고 생각을 해봅니다. </p>
<p>이번 글은 ubuntu 인터넷 연결부터 원격 파일 전송까지가 되겠습니다. 가장 힘들었던 부분은 네트워크를 이해하지 못해서 삽질을 여러번해서 애먹었던 부분입니다. 이 부분은 KT 공유기 고정 아이피 설정에서 민낯을 샅샅이 밝힐 예정입니다.</p>
<h2 id="1-ubuntu-인터넷-연결"><a href="#1-ubuntu-인터넷-연결" class="headerlink" title="1. ubuntu 인터넷 연결"></a>1. ubuntu 인터넷 연결</h2><p>저는 공유기에 있는 랜선을 서버용 컴퓨터에 끼워주면 알아서 인터넷 연결이 될 줄 알았지만 그렇지 않았습니다. 그런 것은 검은 화면이 아닌 곳에서나 가능하다는 것을 왜 그때는 제대로 깨닫지 못했을까요? </p>
<p>ubuntu 서버 화면으로 넘어가서 vi 편집기를 이용해 다음 명령어를 날려줍니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/network/interfaces</span><br></pre></td></tr></table></figure>

<p>그러면 무언가 입력할 것이 있는 창이 하나 나와 있을 것 입니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This file describes the network interfaces available on your system</span></span><br><span class="line"><span class="comment"># and how to activate them. For more information, see interfaces(5).</span></span><br><span class="line"><span class="comment"># The loopback network interface</span></span><br><span class="line">auto lo</span><br><span class="line"></span><br><span class="line"><span class="comment"># The primary network interface</span></span><br><span class="line">auto eth0</span><br></pre></td></tr></table></figure>
<p>저의 경우에는 이렇게 들어있는 내용이 얼마 없었던 걸로 기억합니다.(당시에 경황이 없어서 화면 사진을 하나도 찍지 못했네요ㅜㅜ)<br><code>ifconfig</code>명령어를 이용해 현재 이더넷의 주소를 알아내야합니다. 저의 경우에는 enpxxxx이었습니다. 이 값을 기억해두고 다시 interface로 들어가서</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This file describes the network interfaces available on your system</span></span><br><span class="line"><span class="comment"># and how to activate them. For more information, see interfaces(5).</span></span><br><span class="line"><span class="comment"># The loopback network interface</span></span><br><span class="line">auto lo</span><br><span class="line">iface lo inet loopback</span><br><span class="line"></span><br><span class="line"><span class="comment"># The primary network interface</span></span><br><span class="line">auto enpxxxx</span><br><span class="line">iface enpxxxx inet dhcp</span><br></pre></td></tr></table></figure>
<p>이런식으로 입력해 줍니다. 이 방식은 유동 ip일때 사용하는 방식이기는 하지만, 일단 인터넷 연결이 되어야 ubuntu 라이브러리를 받을 수 있기 때문에 설정해 줍니다.</p>
<p>설정이 다 되었다면 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service networking restart</span><br></pre></td></tr></table></figure>
<p>를 이용해서 network를 재시작해 반영시켜줍니다.</p>
<h2 id="2-KT-공유기-고정-ip-설정"><a href="#2-KT-공유기-고정-ip-설정" class="headerlink" title="2. KT 공유기 고정 ip 설정"></a>2. KT 공유기 고정 ip 설정</h2><p>이제 KT공유기의 ip를 고정시켜줄 차례입니다. 고정 아이피를 잡아주는 이유는 간단합니다. 외부 통신을 통해(예를 들어 맥북을 통해) 서버로 접속한다고 했을 때, 고정 ip가 잡혀있지 않다면, 동적 아이피로 인해 서버의 ip 주소는 계속 바뀔 것이고 결국 접속이 안될 것입니다. </p>
<p>정말 간단하게 설정할 수 있기 때문에 제가 보고 설정한 링크를 첨부해 놓겠습니다.<br><a target="_blank" rel="noopener" href="https://extrememanual.net/12155#%EC%95%84%EC%9D%B4%ED%94%BC_%EC%88%98%EB%8F%99_%EC%84%A4%EC%A0%95">KT 공유기 고정IP 설정</a></p>
<p>이렇게 고정 ip를 잡아주고 난 뒤에 서버 컴퓨터로 와서 ifconfig 명령어를 쳐서 ip를 확인하고 설정한 ip대로 나온다면 성공입니다.</p>
<p>이제 아까 dhcp설정을 static으로 고쳐줄 차례입니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/network/interfaces</span><br></pre></td></tr></table></figure>
<p>명령어를 통해 수정할 부분으로 가서</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The primary network interface</span></span><br><span class="line">auto enpxxxx</span><br><span class="line">iface enpxxxx inet static</span><br></pre></td></tr></table></figure>
<p>이렇게 고쳐줍니다.</p>
<h2 id="3-포트포워딩"><a href="#3-포트포워딩" class="headerlink" title="3. 포트포워딩"></a>3. 포트포워딩</h2><p>포트포워딩을 하는 이유는 외부에서 접속을 하게 될 때 공유기로 인해 내가 접속하고 싶은 컴퓨터를 제대로 연결을 못 해주게 됩니다. 공유기가 많은 컴퓨터에 대해서 ip를 뿌려주고 있기 때문입니다. 그래서 어떤 포트로 접속을 해줘야 내가 원하는 컴퓨터에 연결이 되는지를 알려줘야 제대로 연결을 할 수 있게 됩니다. 따라서 포트포워딩은 특정 컴퓨터에게 특정 포트로 연결해 주는 작업을 말하는 것입니다. 포트가 일종의 이정표 역할을 하게 되겠습니다. </p>
<p>다시 KT 홈허브 관리페이지로 가서 장치 설정에 트래픽 관리로 가면 바로 포트포워딩을 볼 수 있습니다. 포트 포워딩 설정에서 다른 건 건드리지 않고 외부/내부 포트, 내부 ip 주소만 작성해줍니다. 외부/내부 포트에는 내가 열고 싶은 포트 번호를 입력해주고, 내부 ip에서는 고정 ip를 넣어줍니다. 일단 8888포트를 열어줍니다.(jupyter notebook이 켜지는 포트가 주로 8888이니까 이렇게 설정을 했습니다)<br><img src="/images/portforwarding.jpg" alt="포트포워딩 화면"><br><a target="_blank" rel="noopener" href="https://m.blog.naver.com/PostView.nhn?blogId=hiho33&logNo=40206570339&proxyReferer=https%3A%2F%2Fwww.google.com%2F">사진출처</a></p>
<h2 id="4-원격접속"><a href="#4-원격접속" class="headerlink" title="4. 원격접속"></a>4. 원격접속</h2><p>원격접속을 위해서 우리가 연결할 포트가 필요합니다. ssh접속은 22번 포트를 사용하고, 보통 처음 산 컴퓨터에는 이런 설정이 제대로 되어있지 않은 경우가 많습니다. 그렇기 때문에 직접 포트를 열어주도록 하겠습니다.</p>
<p>서버컴퓨터로 돌아와서</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>
<p>명령어를 입력해 줍니다. 여기서 sshd_config가 없다면, </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install openssh-server</span><br></pre></td></tr></table></figure>
<p>를 통해 ssh를 설치해주면 됩니다.</p>
<p>sshd_config를 보면 Port라고 써있는 부분이 있습니다. 해당 라인이 #로 주석 처리 되어 있거나, 포트 넘버가 적혀있지 않은 경우에는, i를 눌러 insert모드로 바꾸고 port에 22를 넣어줍니다. 그리고 esc를 누르고 :wq(저장 후 종료)로 빠져나옵니다. 그러면 원격접속을 위한 준비는 끝났습니다.</p>
<p>이제 맥북으로 돌아와 터미널을 열어줍니다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p 22 [servername]@[ip address]</span><br></pre></td></tr></table></figure>
<p>이 명령어를 입력해주면 연결이 됩니다. ssh로 22번 포트에 접속해 준다는 것이고, 설정한 서버이름과 서버가 사용하는 ip주소를 입력해주고 설정한 비밀번호를 입력해주면<br><img src="/images/connect_server.png" alt="연결 성공!!"><br>연결에 성공하게 됩니다.<br>(*주의, 혹시 집에서 노트북도 같은 아이피를 쓰고 있는 상태에서 연결을 시도하게 되면 100% 연결 성공했다고 나오게 된다. 공유기를 통해 내부적으로 연결이 되어 있기 때문이다. 정확한 확인을 위해서 잠시 노트북의 wifi를 끄고 테더링을 걸어서 다시 확인해보자, 이렇게 해서 연결이 된다면 진짜 된 것이다.)</p>
<h2 id="5-원격-파일-전송"><a href="#5-원격-파일-전송" class="headerlink" title="5. 원격 파일 전송"></a>5. 원격 파일 전송</h2><p>원격 파일 전송은 로컬에 있는 파일을 서버에 보내고 싶을 때 혹은 서버에 있는 파일을 로컬로 가져오고 싶을 때 사용할 수 있습니다. 특히 Nvidia 그래픽 드라이버를 서버에 보내서 설치하고 싶을 때 아주 유용하게 사용할 수 있습니다.</p>
<p>scp를 사용해도 되고, sftp를 사용해도 된다.</p>
<p>개인적으로 sftp를 더 선호하기 때문에 sftp로 파일 전송하는 법을 간략히 설명해보면,<br>아까 원격접속을 했던 것과 마찬가지로</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sftp [servername]@[ip_address]</span><br></pre></td></tr></table></figure>
<p>앞에만 sftp로 바꿔주고 나머지는 똑같이 입력한다. 그러면 패스워드를 입력하라고 나오고 정상적으로 패스워드를 입력했다면 sftp&gt; 로 시작하는 간단한 화면이 등장한다. sftp는 쉘을 오픈한 폴더 위치에서 시작하게 되므로 파일이 있는 위치로 이동한 다음 쉘을 여는 것을 권장한다. </p>
<p>여기서 <code>put</code>명령어를 입력하고 보낼 파일이름을 끝까지 적으면, 서버에 파일이 전달되는 것을 확인할 수 있다.</p>
<hr>
<p>이제 진짜 딥러닝 PC를 만들기 위한 기본 세팅이 끝났다. 퇴근 하고 집에와서 잠도 적게 자면서 연결했는데 생각보다 금방 끝나서, 그리고 회사에서도 연결이 되어서 뿌듯했었다. 이제 간밤에 악몽을 꾸게 만든 Nvidia 그래픽 드라이버 설치, CUDA 설치 그리고 CuDNN 설치가 남았다. </p>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/linux/">linux</a><a class="link-muted mr-2" rel="tag" href="/tags/ubuntu/">ubuntu</a><a class="link-muted mr-2" rel="tag" href="/tags/server/">server</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2019/12/08/ubuntu3/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">ubuntu를 이용한 딥러닝 Server 설치하기 3</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2019/11/10/ubuntu/"><span class="level-item">ubuntu를 이용한 딥러닝 Server 설치하기 1</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><!--!--><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Unreasonable Effectiveness</a><p class="is-size-7"><span>&copy; 2023 SangHyub Lee, Jose</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><!--!--><script src="/js/main.js" defer></script><!--!--></body></html>