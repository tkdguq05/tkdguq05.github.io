<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>linux top 10 명령어들을 정리해봤다 - Unreasonable Effectiveness</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Unreasonable Effectiveness"><meta name="msapplication-TileImage" content="/img/small_geul.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Unreasonable Effectiveness"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="자주 사용하지만 잘 까먹게 되는 명령어들을 정리해봤습니다."><meta property="og:type" content="blog"><meta property="og:title" content="linux top 10 명령어들을 정리해봤다"><meta property="og:url" content="http://tkdguq05.github.io/2021/12/04/linux-top10/"><meta property="og:site_name" content="Unreasonable Effectiveness"><meta property="og:description" content="자주 사용하지만 잘 까먹게 되는 명령어들을 정리해봤습니다."><meta property="og:locale" content="en_US"><meta property="og:image" content="https://cdn.inflearn.com/public/courses/327827/cover/cfac94c0-2832-4e80-a6f9-3496c7bec5b8/327827-eng.png"><meta property="article:published_time" content="2021-12-04T12:58:45.000Z"><meta property="article:modified_time" content="2023-12-08T06:48:29.256Z"><meta property="article:author" content="SangHyub Lee, Jose"><meta property="article:tag" content="linux"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://cdn.inflearn.com/public/courses/327827/cover/cfac94c0-2832-4e80-a6f9-3496c7bec5b8/327827-eng.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://tkdguq05.github.io/2021/12/04/linux-top10/"},"headline":"linux top 10 명령어들을 정리해봤다","image":["https://cdn.inflearn.com/public/courses/327827/cover/cfac94c0-2832-4e80-a6f9-3496c7bec5b8/327827-eng.png"],"datePublished":"2021-12-04T12:58:45.000Z","dateModified":"2023-12-08T06:48:29.256Z","author":{"@type":"Person","name":"SangHyub Lee, Jose"},"publisher":{"@type":"Organization","name":"Unreasonable Effectiveness","logo":{"@type":"ImageObject"}},"description":"자주 사용하지만 잘 까먹게 되는 명령어들을 정리해봤습니다."}</script><link rel="canonical" href="http://tkdguq05.github.io/2021/12/04/linux-top10/"><link rel="icon" href="/img/small_geul.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/monokai.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Unreasonable Effectiveness</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://cdn.inflearn.com/public/courses/327827/cover/cfac94c0-2832-4e80-a6f9-3496c7bec5b8/327827-eng.png" alt="linux top 10 명령어들을 정리해봤다"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-12-04T12:58:45.000Z" title="2021. 12. 4. 오후 9:58:45">2021-12-04</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-12-08T06:48:29.256Z" title="2023. 12. 8. 오후 3:48:29">2023-12-08</time></span><span class="level-item"><a class="link-muted" href="/categories/linux/">linux</a><span> / </span><a class="link-muted" href="/categories/linux/engineering/">engineering</a></span><span class="level-item">32 minutes read (About 4845 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">linux top 10 명령어들을 정리해봤다</h1><div class="content"><p>자주 사용하지만 잘 까먹게 되는 명령어들을 정리해봤습니다.</p>
<span id="more"></span>
<h1 id="Top-10-Linux-명령어-정리"><a href="#Top-10-Linux-명령어-정리" class="headerlink" title="Top 10. Linux 명령어 정리"></a>Top 10. Linux 명령어 정리</h1><p>유튜브 영상을 보다가 자주 사용하는 명령어에 대한 것을 보게 되었고, 그 동안 사용했던 명려어와 관련 내용들을 정리해보면 좋겠다는 생각에 글을 작성하게 되었습니다.</p>
<p>원본 유튜브 영상 주소는 <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=u9RukvKZJZM">https://www.youtube.com/watch?v=u9RukvKZJZM</a> 여기 입니다!</p>
<p><br></br></p>
<h2 id="1-Server-접속하기"><a href="#1-Server-접속하기" class="headerlink" title="1. Server 접속하기"></a>1. Server 접속하기</h2><p>보통 쉘을 통해 서버로 접속할 때, ssh을 많이 사용합니다. 단순히 ssh를 사용해 서버에 접속하는 것, 그 이상으로 ssh가 무엇인지, 또 어떤 도구로까지 활용할 수 있는지 안다면, ssh를 더 잘 사용한다고 할 수 있을 것입니다.</p>
<p>ssh는 <code>secured shell</code> 로 암호화 된 채널이기 때문에 보안 상 사용하는 것이 좋습니다. ssh는 사용할 때 붙일 수 있는 다양한 옵션들이 있습니다. AWS에서 특정 서버로 접속할때, pem파일을 사용해서 접속을 한다면 항상 붙이는 <code>-i</code> 옵션이 있습니다. 이것은 무엇에 관한 옵션일까요?</p>
<ul>
<li><p>-i 옵션?</p>
<p><code>-i</code> 는 id_rsa 옵션으로 어떤 암호키가 있다면 이것을 넘겨서 사용하겠다는 의미입니다. 그래서 pem파일 등 암호화된 파일을 사용해서 인증을 하다면 이 옵션을 통해서 인증에 사용할 파일을 지정하는 것입니다.</p>
</li>
<li><p>rsa키 인증 방식의 원리?</p>
<p>잠깐 rsa키 인증 방식에 대해서 짚고 넘어가겠습니다. rsa가 가끔 등장하곤 하는데, 어떤 것인지 제대로 확인하고 넘어간 적이 없었거든요. </p>
<p>rsa키 인증 방식은 private, public key 두 키를 이용해서 인증 작업을 합니다. user/.ssh 에 있는 authorized_keys를 보면 pem키(private key)의 pair인 public key가 서버에 저장되어 있는 것을 볼 수 있습니다. 그래서 private키를 갖고와서 서버에 저장되어 있는 public key와 대조해, 일치한다면 인증이 된 것입니다. 즉, 서버에 접속이 가능해지는 것입니다.</p>
<p>이를 <code>key - pair</code> 방식 이라고 합니다. 일반적으로 패스워드 인증방식을 많이 사용하고 친숙하겠지만, 패스워드 방식보다 좀 더 안정한 방식이라고 볼 수 있습니다.</p>
</li>
<li><p>(MAC) ssh-add</p>
<p>이것은 키를 미리 입력해주는 명렁어입니다. pem 키를 포워딩 하는 것으로서, -i옵션을 굳이 붙여 접속하지 않아도 됩니다. 귀찮은 작업이 좀 덜어지겠죠?, -A를 사용한다면, 다음 접속지에서도 같은 키로 그대로 접속할 수 있어, 편하게 사용할 수 있습니다.</p>
</li>
<li><p>포트 넣기</p>
<p>만약 포트를 지정하고 싶다면 <code>-p</code> 를 사용 하면 됩니다. 일반적으로 ssh는 기본 포트를 사용합니다. 22이번이죠. 하지만 보안 이론에는  well known port를 사용하지 말아야 한다는 것이 있습니다. 그래서 /etc/ssh/sshd_config를 통해서 ssh 포트 정보를 변경해서 사용하는 경우가 있습니다. 나만 알고있는 접속가능한 포트를 만들어서 접근을 하겠다는 것입니다. 이렇게 설정을 한다면, 다른 사람은 일반적인 접근 경로가 22번이니까, 자연스럽게 들어오게 되었을 때, 모두 차단할 수 있게 되겠습니다.</p>
<p><br></br></p>
</li>
</ul>
<h2 id="2-IP를-확인하는-리눅스-명령어-자신의-public-ip-확인"><a href="#2-IP를-확인하는-리눅스-명령어-자신의-public-ip-확인" class="headerlink" title="2. IP를 확인하는 리눅스 명령어, 자신의 public ip 확인?"></a>2. IP를 확인하는 리눅스 명령어, 자신의 public ip 확인?</h2><p>현재 사용하고 있는 서버의 IP를 알고 싶은 경우가 은근히 자주 있습니다. Private IP 확인하고 싶다면 ifconfig를 사용해서 알ㅇ아낼 수 있습니다. 그런데 이 서버의 Public IP를 알고싶다면 어떻게 해야할까요?</p>
<p>이 서버의 Public IP를 알고싶다면 <code>curl ifconfig.co</code> 를 사용하면 됩니다. </p>
<p><br></br></p>
<h2 id="3-웹-사이트가-잘-동작하는지-체크할때"><a href="#3-웹-사이트가-잘-동작하는지-체크할때" class="headerlink" title="3. 웹 사이트가 잘 동작하는지 체크할때?"></a>3. 웹 사이트가 잘 동작하는지 체크할때?</h2><p>띄워놓은 웹 사이트나 서비스를 체크하는 데 어떤 명령어를 사용해야할지 모르는 경우가 있습니다. 주로 curl을 사용하게 되는데, curl에는 다양한 옵션들이 있습니다.</p>
<ul>
<li>curl의 다양한 옵션<ul>
<li>X : 사용할 방식 메소드 선택하기</li>
<li>d : 함께 전달할 파라미터값 설정하기</li>
<li>G : 전송할 사이트 url 및 ip 주소</li>
<li>H : 헤더 정보를 전달하기</li>
<li>I : 사이트의 Header 정보만 가져오기</li>
<li>i : 사이트의 Header와 바디 정보를 함께 가져오기</li>
<li>u : 사용자 정보</li>
</ul>
</li>
</ul>
<p>이것들을 잘 활용하면 API서버에 GET, POST방식을 선택하고 헤더를 더해서 데이터를 넣어 던지는 것을 만들어 볼 수 있습니다.</p>
<p><code>curl -X POST -H &quot;Content-Type: application/json&quot;  -d &#39;&#123;&quot;data&quot;:1&#125;&#39; &#123;IP Address&#125;</code> 이런식으로 명령어를 보내서 API가 잘 동작하는지 점검할 수 있습니다.</p>
<p><br></br></p>
<h2 id="4-도메인의-IP를-조회하는-방법"><a href="#4-도메인의-IP를-조회하는-방법" class="headerlink" title="4. 도메인의 IP를 조회하는 방법"></a>4. 도메인의 IP를 조회하는 방법</h2><p>도메인의 IP를 확인하고 싶다면 네임서버에 등록된 정보를 조회할 수 있어야 합니다. <code>nslookup</code> 명령어를 잘 사용해야 관련 정보를 갖고 올 수 있을 것입니다. 기본적으로 <code>nslookup &#123;IP Address&#125;</code> 를 하면 도메인의 IP 정보를 알 수 있습니다.</p>
<p>이를 넘어서 도메인 서버의 동작 원리를 한 번 알아보고 넘어가 보겠습니다.</p>
<ol>
<li><p>웹 브라우저에 www.naver.com을 입력하면 먼저 Local DNS에게 “www.naver.com”이라는 hostname”에 대한 IP 주소를 질의하여 Local DNS에 없으면 다른 DNS name 서버 정보를 받음(Root DNS 정보 전달 받음)</p>
</li>
<li><p>Root DNS 서버에 “www.naver.com” 질의</p>
</li>
<li><p>Root DNS 서버로 부터 “com 도메인”을 관리하는 TLD (Top-Level Domain) 이름 서버 정보 전달 받음</p>
</li>
<li><p>TLD에 “www.naver.com” 질의</p>
</li>
<li><p>TLD에서 “name.com” 관리하는 DNS 정보 전달</p>
</li>
<li><p>“naver.com” 도메인을 관리하는 DNS 서버에 “www.naver.com” 호스트네임에 대한 IP 주소 질의</p>
</li>
<li><p>Local DNS 서버에게 “응! www.naver.com에 대한 IP 주소는 222.122.195.6 응답 </p>
</li>
<li><p>Local DNS는 www.naver.com에 대한 IP 주소를 캐싱을 하고 IP 주소 정보 전달 </p>
</li>
</ol>
<p><br></br></p>
<h2 id="5-웹-서버-혹은-DB같은-서버들을-확인하는-방법"><a href="#5-웹-서버-혹은-DB같은-서버들을-확인하는-방법" class="headerlink" title="5. 웹 서버 혹은 DB같은 서버들을 확인하는 방법?"></a>5. 웹 서버 혹은 DB같은 서버들을 확인하는 방법?</h2><p>특정 프로세스들의 동작여부를 확인하고 싶을 때, 일반적으로 알고 있는 ping을 사용하게 됩니다. 그런데, ping으로는 이게 실제로 살아있는지, 동작하는지를 알기는 어렵습니다. 물론 그에 앞서서 웹서버가 뜨면 어떤 tcp로 올라오는지, 어떤 포트로 뜨는지는 미리 알고 있어야겠습니다. </p>
<p>이런 경우에는 telnet을 주로 사용하게 됩니다.</p>
<ul>
<li><p>ping? telnet?</p>
<p>ping은 단순 체크라 mysql, redis등이 살아있는지 알기가 어렵습니다. 반면에 telnet에 ip와 port를 넣어서 체크를 한다면 적합한 포트넘버로 신호를 보냈을 때, 관련된 프로세스가 살아있는지 여부를 알 수 있습니다.</p>
<p><code>telnet [ip] [port]</code> 로 명령어를 보낼 수 있습니다. telnet은 udp 지원을 안하는 것을 유념하시기 바랍니다.</p>
</li>
</ul>
<p><br></br></p>
<h2 id="6-서버가-잘-떠있는지-DB커넥션-확인"><a href="#6-서버가-잘-떠있는지-DB커넥션-확인" class="headerlink" title="6. 서버가 잘 떠있는지, DB커넥션 확인"></a>6. 서버가 잘 떠있는지, DB커넥션 확인</h2><p>포트가 잘 열려있는지 확인을 해야할 일이 자주 발생합니다. 저의 경우에는 airflow를 예로 들자면, 8793포트나 3306, 6379 등의 포트를 확인하는 경우가 많았습니다. 특히 로그의 전송을 담당하는 8793포트를 자주 확인했었습니다. airflow를 사용하면서 UI에서 로그를 확인하려고 하는데, 연결이 되지 않아 로그를 볼 수 없는 경우가 종종 있었기 때문입니다. 그렇다면, 포트가 열려있는지를 봤었어야 했는데, 어떻게 확인하면 좋을까요?</p>
<ul>
<li><p>netstat 명령어</p>
<p>nltp 명령어를 사용해서 원하는 포트의 상태를 확인할 수 있습니다. 주로 <code>netstat -nltp|grep &#123;port&#125;</code>를 통해서 포트가 열려있는지를 봤습니다.</p>
</li>
<li><p>netstat 옵션</p>
<p>-a : 현재다른PC와 연결(Established)되어 있거나 대기(Listening)중인 모든 포트 번호를 확인 </p>
<p>-r : 라우팅 테이블 확인 및 커넥션되어 있는 포트번호를 확인 </p>
<p>-n : 현재 다른PC와 연결되어 있는 포트번호를 확인</p>
<p>-e : 랜카드에서 송수한 패킷의 용량 및 종류를 확인 </p>
<p>-s : IP, ICMP, UDP프로토콜별의 상태 확인</p>
<p>-t : tcp protocol </p>
<p>-u : udp protocol </p>
<p>-p : 프로토콜 사용 Process ID 노출</p>
<p>-c : 1초 단위로 보여줌</p>
<p><br></br></p>
</li>
</ul>
<h2 id="7-process-확인"><a href="#7-process-확인" class="headerlink" title="7. process 확인?"></a>7. process 확인?</h2><p>아까 airflow의 예를 다시 한번 사용해보자면, 현재 서버에 워커가 죽었는지 살았는지를 보고 싶을 때가 있습니다. 이런 경우에는 워커 프로세스의 상태를 확인하면 될 것입니다. 이럴 때 사용하는 명령어가 <code>ps</code> 입니다.</p>
<ul>
<li><p>ps 명령어</p>
<p>ps명령어는 기본적으로 해당 사용자 소유의 프로세스만 보여줍니다. ps를 치게되면 나오는 정보는 다음과 같습니다.</p>
<ul>
<li>PID: 프로세스 아이디</li>
<li>TTY: 프로세스와 연결된 터미널 포트</li>
<li>TIME: 프로세스에서 사용한 CPU시간</li>
<li>CMD: 명령어</li>
</ul>
</li>
<li><p><code>ps -ef |grep &#123;PROCESS&#125;</code></p>
<p>아마 가장 많이 사용하는 명령어이지 않을까 싶습니다. e는 모든 프로세스 상태 출력한다는 의미이고, f는 full format으로 보여달라는 옵션입니다.</p>
</li>
<li><p><code>ps -aux|grep</code></p>
<p>이 역시 많이 사용하는 명령어 입니다.</p>
<ul>
<li><p>a: 모든 사용자의 프로세스를 출력하는 옵션</p>
</li>
<li><p>u: 특정 사용자의 프로세스 정보 확인, 지정하지 않으면 현재 사용자 기준</p>
</li>
<li><p>x: 자신의 터미널이 없는 프로세스도 출력하는 옵션</p>
<p><img src="/images/linux_top10/스크린샷_2021-11-18_오후_2.56.20.png" alt=""></p>
</li>
</ul>
</li>
</ul>
<p><br></br></p>
<h2 id="8-Linux-CPU-MEM-DISK-시스템-정보-확인"><a href="#8-Linux-CPU-MEM-DISK-시스템-정보-확인" class="headerlink" title="8. Linux CPU, MEM, DISK 시스템 정보 확인"></a>8. Linux CPU, MEM, DISK 시스템 정보 확인</h2><p>서버의 리소스를 보고 모니터링을 하거나, 상태가 어떤지 보고 싶을 때는 보통 <code>top</code>을 많이 사용합니다. 이외에도 htop, sar도 자주 사용합니다.</p>
<ul>
<li><p>top</p>
<p><img src="/images/linux_top10/Untitled.png" alt=""></p>
<ul>
<li><p>Load Average 는 <strong>CPU Load의 이동 평균를 표시</strong>합니다.</p>
</li>
<li><p>Tasks는 현재 프로세스들의 상태를 보여줍니다.</p>
<ul>
<li>실행(Runnable) - CPU에 의해서 명령어가 실행중인 Process</li>
<li>준비(Ready) - CPU의 명령어 실행을 기다리는 Process</li>
<li>대기(Waiting) - I/O operation이 끝나기를 기다리는 Process</li>
<li>종료(Terminated) - Ctrl + Z 등의 signal로 종료된 Process</li>
<li>Zombie - Process는 root Process로 부터 뿌리내린 자식 Process의 형식으로 트리구조를 형성합니다. 이 때 부모가 먼저 종료된 다면 root process로 부터 닿을 수 없는 Process가 생깁니다. 이를 zombie process라고 부릅니다.</li>
</ul>
</li>
<li><p>CPU 사용량은 <strong>CPU가 어떻게 사용되고 있는지 그 사용율을 보여주는 영역</strong>입니다.</p>
<ul>
<li>us : 프로세스의 유저 영역에서의 CPU 사용률</li>
<li>sy : 프로세스의 커널 영역에서의 CPU 사용률</li>
<li>ni : 프로세스의 우선순위(priority) 설정에 사용하는 CPU 사용률</li>
<li>id : 사용하고 있지 않는 비율</li>
<li>wa : IO가 완료될때까지 기다리고 있는 CPU 비율</li>
<li>hi : 하드웨어 인터럽트에 사용되는 CPU 사용률</li>
<li>si : 소프트웨어 인터럽트에 사용되는 CPU 사용률</li>
<li>st : CPU를 VM에서 사용하여 대기하는 CPU 비율</li>
</ul>
</li>
<li><p>메모리 사용량, MEM</p>
<ul>
<li>total : 총 메모리 양</li>
<li>free : 사용가능한 메모리 양</li>
<li>used : 사용중인 메모리 양</li>
</ul>
<p><br></br></p>
</li>
</ul>
</li>
<li><p>htop (top보다 더 자세한 정보, 편하게 확인 가능)</p>
<p><img src="/images/linux_top10/스크린샷_2021-11-18_오후_2.59.58.png" alt=""></p>
<p><br></br></p>
</li>
<li><p>sar (System Activity Reporter)</p>
<ul>
<li>user : 사용자 레벨(application level) 에서 실행중일때의 CPU 사용률 (%)</li>
<li>nice : 사용자 레벨(appliaction level) 에서 nice 가중치를 준 CPU 사용률(%)</li>
<li>system : 시스템레벨(kernel) 에서 실행중일때의 CPU 사용률(%)</li>
<li>iowait : system이 I/O요청을 처리하지 못한 상태에서의 CPU의 idle 상태인 시간의 비율(%)</li>
<li>steal : virtual processer에 의한 작업이 진행되는 동안 virtual CPU에 의해 뜻하지 않는 대기시간이 생기는 시간의 비율(%)</li>
<li>idle : CPU가 쉬고있는 시간의 %</li>
<li>Average : 마지막 라인에 출력되며, 각 값의 평균치 이다.</li>
</ul>
<p><br></br></p>
</li>
<li><p>free</p>
<ul>
<li><strong>[total] :</strong> 설치된 총 메모리 크기 / 설정된 스왑 총 크기</li>
<li><strong>[used] :</strong> total에서 free, buff/cache를 뺀 사용중인 메모리. / 사용중인 스왑 크기</li>
<li><strong>[free] :</strong> total에서 used와 buff/cahce를 뺀 실제 사용 가능한 여유 있는 메모리량 / 사용되지 않은 스왑 크기</li>
<li><strong>[shared] :</strong> tmpfs(메모리 파일 시스템), ramfs 등으로 사용되는 메모리. 여러 프로세스에서 사용할 수 있는 공유 메모리</li>
<li><strong>[buffers] :</strong> 커널 버퍼로 사용중인 메모리</li>
<li><strong>[cache] :</strong> 페이지 캐시와 slab으로 사용중인 메모리</li>
<li><strong>[buff/cache] :</strong> 버퍼와 캐시를 더한 사용중인 메모리</li>
<li><strong>[available] :</strong> swapping 없이 새로운 프로세스에서 할당 가능한 메모리의 예상 크기. (예전의 -/+ buffers/cache이 사라지고 새로 생긴 컬럼)</li>
</ul>
</li>
</ul>
<p><code>/proc/meminfo</code>를 사용하는 경우도 있는데 free 자체가 /proc/meminfo를 갖고 오는 것이기 때문에 따로 작성하지 않았습니다.</p>
<p><br></br></p>
<ul>
<li><p>df는 사용 가능한 디스크 공간의 양을 알 수 있습니다.</p>
<p>| 옵션 | Long옵션            | 설명                                                         |<br>| — | ————————— | —————————————————————————————- |<br>|  -a  | —all               | 0 블록의 파일 시스템을 포함하여, 모든 파일시스템을 출력      |<br>|  -B  | —block-size=SIZE   | 지정한 크기(SIZE)를 블록 단위로 정하여 용량을 표시(예:—block-size=1m) |<br>|      | —total             | 총계를 출력                                                  |<br>|  -h  | —human-readable    | 사람이 읽을 수 있는 형태의 크기로 출력(예:1K, 512M, 4G)      |<br>|  -H  | —si                | 1KB는 1,024Byte지만 사용자가 보기 편하도록 1,000단위로 용량을 표시 |<br>|  -i  | —inodes            | inode의 남은 공간, 사용 공간, 사용 퍼센트를 출력             |<br>|  -k  |                     | —block-size=1K와 같은 의미                                  |<br>|  -l  | —local             | 출력하는 목록을 로컬 파일 시스템으로 제한                    |<br>|      | —no-sync           | 사용 정보를 얻기 전에 싱크를 하지 않음(디폴트 값)            |<br>|  -P  | —portability       | POSIX에서 사용되는 형태로 출력                               |<br>|      | —sync              | 사용 정보를 얻기 전에 싱크                                   |<br>|  -t  | —type=TYPE         | 보여주는 목록을 파일 시스템의 타입(TYPE)으로 제한            |<br>|  -T  | —print-type        | 파일 시스템의 형태를 추가하여 각각의 파티션 정보를 출력      |<br>|  -x  | —exclude-type=TYPE | 지정한 형태(TYPE)를 제외하고 나머지 모든 파일 시스템 정보를 출력 |</p>
</li>
</ul>
<p><br></br></p>
<h2 id="9-service-관리"><a href="#9-service-관리" class="headerlink" title="9. service 관리"></a>9. service 관리</h2><p>서버가 시작할 때 뜨는 프로세스를 관리하고 싶을 때가 있습니다. 그럴때는 daemon이나 service를 살펴보면 됩니다.</p>
<p>리눅스 서비스 관리하는 명령어는 service와 systemctl이 있습니다.</p>
<p>서비스를 등록할 때는 이런 파일을 하나 작성합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Service Desceiption</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">ExecStart=/path/to/shellscript.sh</span><br><span class="line">Restart=on-failure</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Unit</span><br><span class="line">  - Description: 해당 유닛에 대한 설명</span><br><span class="line">  - Requires : 상위 의존성 구성, 포함하는 유닛이 정상적이어야 실행</span><br><span class="line">  - RequiresOverridable : 상위 의존성 구성이며 이것이 실패하더라도 무시하고 유닛을 시작</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">Service</span><br><span class="line">  - Type: [simple | forking | oneshot | notify | dbus] 유닛의 타입</span><br><span class="line">  - Environment: 해당 유닛에서 사용할 환경 변수 선언</span><br><span class="line">  - ExecStart: 시작 명령을 정의</span><br><span class="line">  - ExecStop: 중지 명령을 정의</span><br><span class="line"></span><br><span class="line">Install</span><br><span class="line">  - WantedBy: 유닛을 등록하기 위한 종속성 검사. 유닛을 등록할 때 등록에 필요한 유닛을 지정</span><br></pre></td></tr></table></figure>
<ul>
<li>Before=, After=<ul>
<li>유닛 시작의 전후 관계를 설정합니다. 해당 설정은 “Requires=” 설정과는 독립적입니다. “Before=” 에 나열된 유닛이 시작되기 전에 실행하고 “After=” 은 해당 유닛이 시작된 이후 나열된 유닛이 실행합니다.</li>
<li>이 설정은 시스템이 종료(shutdown) 될때는 역으로 작동하게 됩니다.</li>
</ul>
</li>
<li>[Install] 섹션<ul>
<li>systemctl enable [service name] 으로 VM 구동시 서비스가 자동으로 구동되도록 할 때 이용하는 섹션입니다.</li>
<li>[Install]은 해당 서비스를 등록할 때 사용되는 설정이다. 같이 등록/해지할 서비스나 필요한 서비스등을 지정해줄 수 있습니다.</li>
</ul>
</li>
<li>[WantedBy]<ul>
<li>서비스가 어떤 전제조건 하에서 실행되는 지를 결정하는 프로퍼티입니다.</li>
<li>WantedBy는 해당 install한 서비스가 설치되어 있어야 본 서비스를 설치한다는 뜻입니다.</li>
</ul>
</li>
</ul>
<p>이렇게 만들어진 파일을 /usr/lib/systemd/system에 넣어주고(리눅수 버전이나 종류별로 상이할 수 있음)  서비스를 start해주고 실행이 되고 enable까지 해주면 서버가 재시작 되더라도, 서비스가 실행됩니다. </p>
<ul>
<li>service start : <code>systemctl start servicename</code> </li>
<li>service enable :  <code>systemctl start servicename</code> </li>
</ul>
<p><br></br></p>
<h2 id="10-리눅스-파일-권한-체계"><a href="#10-리눅스-파일-권한-체계" class="headerlink" title="10. 리눅스 파일 권한 체계"></a>10. 리눅스 파일 권한 체계</h2><p>어떤 파일을 실행하고 사용할 때, 권한이 없다는 에러가 나와서 실행이 되지 않는 경우가 아주 많은 것을 아실 겁니다. 이런 경우에는 파일의 권한을 풀어주면 해결이 되곤 합니다. 이럴 때 주로 사용하는 명령어는 <code>chmod</code>그리고 <code>chown</code>입니다.</p>
<ul>
<li><p>chmod</p>
<ul>
<li><p>파일이나 폴더의 권한(읽기, 쓰기, 실행)를 변경</p>
</li>
<li><p>권한들을 <strong>mode</strong>라고 부른다</p>
<p><img src="/images/linux_top10/스크린샷_2021-11-18_오후_3.11.55.png" alt=""></p>
<p><img src="/images/linux_top10/스크린샷_2021-11-18_오후_3.12.17.png" alt=""></p>
</li>
</ul>
</li>
<li><p>chown</p>
<ul>
<li>파일, 또는 폴더의 소유권을 변경하는 명령어</li>
</ul>
</li>
<li><p>ls -l을 했을때 나오는 정보에 대한 이해</p>
<ul>
<li>long listing format</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">user@user_group:~/exp$</span> <span class="string">ls</span> <span class="string">-l</span></span><br><span class="line"><span class="string">drwxrwxr-x</span>  <span class="number">2</span> <span class="string">user</span> <span class="string">user_group</span> <span class="number">4096 </span><span class="string">Sep</span> <span class="number">17</span> <span class="number">06</span><span class="string">:39</span> <span class="string">dir1</span></span><br><span class="line"><span class="string">drwxrwxr-x</span>  <span class="number">2</span> <span class="string">user</span> <span class="string">user_group</span> <span class="number">4096 </span><span class="string">Sep</span> <span class="number">17</span> <span class="number">06</span><span class="string">:39</span> <span class="string">dir2</span></span><br><span class="line"><span class="string">-rw-rw-r--</span>  <span class="number">1</span> <span class="string">user</span> <span class="string">user_group</span>    <span class="number">0</span> <span class="string">Sep</span> <span class="number">17</span> <span class="number">06</span><span class="string">:39</span> <span class="string">file1</span></span><br></pre></td></tr></table></figure>
<ul>
<li>첫번째 블락이 <strong>권한 문자열(Permission string)</strong></li>
<li>두번째 블락이 해당 디렉토리 내부의 파일과 디렉토리 갯수,</li>
<li>세번째 블락이 소유주,</li>
<li>네번째가 소유주가 속한 그룹,</li>
<li>다섯번째가 크기,</li>
<li>6,7,8번째는 마지막으로 파일/디렉토리에 접근한 시각,</li>
<li>아홉번째가 파일/디렉토리의 이름을 의미한다.</li>
</ul>
</li>
</ul>
<p>root와 chmod 777 는 full 권한을 부여하는 것이므로 사용을 지양합니다.</p>
<p><br></br></p>
<hr>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.whatap.io/ko/blog/37/">https://www.whatap.io/ko/blog/37/</a></li>
<li><a target="_blank" rel="noopener" href="https://sabarada.tistory.com/146">https://sabarada.tistory.com/146</a></li>
<li><a target="_blank" rel="noopener" href="https://happist.com/557995/%EC%84%9C%EB%B2%84-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8-htop-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95-ubuntu">https://happist.com/557995/서버-모니터링-프로그램-htop-사용-방법-ubuntu</a></li>
<li><a target="_blank" rel="noopener" href="https://csjung.tistory.com/50">https://csjung.tistory.com/50</a></li>
<li><a target="_blank" rel="noopener" href="https://jhnyang.tistory.com/268">https://jhnyang.tistory.com/268</a></li>
<li><a target="_blank" rel="noopener" href="https://muckycode.blogspot.com/2016/09/linux-chown-vs-chmod.html">https://muckycode.blogspot.com/2016/09/linux-chown-vs-chmod.html</a></li>
<li><a target="_blank" rel="noopener" href="https://ijbgo.tistory.com/27">https://ijbgo.tistory.com/27</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.voidmainvoid.net/201">https://blog.voidmainvoid.net/201</a></li>
<li><a target="_blank" rel="noopener" href="https://springboot.cloud/16">https://springboot.cloud/16</a></li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>linux top 10 명령어들을 정리해봤다</p><p><a href="http://tkdguq05.github.io/2021/12/04/linux-top10/">http://tkdguq05.github.io/2021/12/04/linux-top10/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>SangHyub Lee, Jose</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2021-12-04</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2023-12-08</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/linux/">linux</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="https://www.buymeacoffee.com/sanghyublee" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/12/19/kafka-101/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">kafka 첫번째, 개념 정리</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/11/18/Moving/"><span class="level-item">이직의 과정, 그리고 얻은 것</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'http://tkdguq05.github.io/2021/12/04/linux-top10/';
            this.page.identifier = '2021/12/04/linux-top10/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'https-tkdguq05-github-io' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><!--!--><div class="column column-right is-3-tablet is-3-desktop is-3-widescreen  order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Top-10-Linux-명령어-정리"><span class="level-left"><span class="level-item">1</span><span class="level-item">Top 10. Linux 명령어 정리</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1-Server-접속하기"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">1. Server 접속하기</span></span></a></li><li><a class="level is-mobile" href="#2-IP를-확인하는-리눅스-명령어-자신의-public-ip-확인"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">2. IP를 확인하는 리눅스 명령어, 자신의 public ip 확인?</span></span></a></li><li><a class="level is-mobile" href="#3-웹-사이트가-잘-동작하는지-체크할때"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">3. 웹 사이트가 잘 동작하는지 체크할때?</span></span></a></li><li><a class="level is-mobile" href="#4-도메인의-IP를-조회하는-방법"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">4. 도메인의 IP를 조회하는 방법</span></span></a></li><li><a class="level is-mobile" href="#5-웹-서버-혹은-DB같은-서버들을-확인하는-방법"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">5. 웹 서버 혹은 DB같은 서버들을 확인하는 방법?</span></span></a></li><li><a class="level is-mobile" href="#6-서버가-잘-떠있는지-DB커넥션-확인"><span class="level-left"><span class="level-item">1.6</span><span class="level-item">6. 서버가 잘 떠있는지, DB커넥션 확인</span></span></a></li><li><a class="level is-mobile" href="#7-process-확인"><span class="level-left"><span class="level-item">1.7</span><span class="level-item">7. process 확인?</span></span></a></li><li><a class="level is-mobile" href="#8-Linux-CPU-MEM-DISK-시스템-정보-확인"><span class="level-left"><span class="level-item">1.8</span><span class="level-item">8. Linux CPU, MEM, DISK 시스템 정보 확인</span></span></a></li><li><a class="level is-mobile" href="#9-service-관리"><span class="level-left"><span class="level-item">1.9</span><span class="level-item">9. service 관리</span></span></a></li><li><a class="level is-mobile" href="#10-리눅스-파일-권한-체계"><span class="level-left"><span class="level-item">1.10</span><span class="level-item">10. 리눅스 파일 권한 체계</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Reference"><span class="level-left"><span class="level-item">1.10.1</span><span class="level-item">Reference</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Unreasonable Effectiveness</a><p class="is-size-7"><span>&copy; 2024 SangHyub Lee, Jose</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>