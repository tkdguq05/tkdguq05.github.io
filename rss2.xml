<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Unreasonable Effectiveness</title>
    <link>http://tkdguq05.github.io/</link>
    <atom:link href="/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description></description>
    <pubDate>Wed, 03 Nov 2021 06:03:28 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>EKS-workshop</title>
      <link>http://tkdguq05.github.io/2021/11/03/EKS-workshop/</link>
      <guid>http://tkdguq05.github.io/2021/11/03/EKS-workshop/</guid>
      <pubDate>Wed, 03 Nov 2021 05:40:24 GMT</pubDate>
      <description>
      
        &lt;p&gt;EKSë¥¼ ë‹¤ë¤„ë³´ê³  GitOpsê¹Œì§€ ì‹¤ìŠµí•´ë´¤ìŠµë‹ˆë‹¤.&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>EKSë¥¼ ë‹¤ë¤„ë³´ê³  GitOpsê¹Œì§€ ì‹¤ìŠµí•´ë´¤ìŠµë‹ˆë‹¤.</p><a id="more"></a><ul><li><p>ì‹¤ìŠµ ë§í¬ : <a href="https://aws-eks-web-application.workshop.aws/ko/10-intro.html">https://aws-eks-web-application.workshop.aws/ko/10-intro.html</a></p><p>ì‹¤ìŠµ ì˜ìƒ : <a href="https://www.youtube.com/watch?v=kb6s0Tmp2CA&ab_channel=AWS%ED%95%9C%EA%B5%AD%EC%82%AC%EC%9A%A9%EC%9E%90%EB%AA%A8%EC%9E%84-AWSKRUG">https://www.youtube.com/watch?v=kb6s0Tmp2CA&amp;ab_channel=AWSí•œêµ­ì‚¬ìš©ìëª¨ì„-AWSKRUG</a></p><blockquote><p>AWS ì›Œí¬ìƒµì—ì„œëŠ” ë‹¤ìŒ ë‚´ìš©ì„ ë‹¤ë£¹ë‹ˆë‹¤.</p></blockquote><ul><li>AWS Cloud9ì„ í†µí•œ ì‹¤ìŠµ í™˜ê²½ êµ¬ì¶•</li><li>ë„ì»¤ë¥¼ ì´ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ìƒì„±</li><li>ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ECRì— ì—…ë¡œë“œ</li><li>Amazon EKS í´ëŸ¬ìŠ¤í„° êµ¬ì¶• ë° ì„œë¹„ìŠ¤ ë°°í¬</li><li>Container Insights ì‚¬ìš©í•´ë³´ê¸°</li><li>íŒŒë“œ ë° í´ëŸ¬ìŠ¤í„° ì˜¤í†  ìŠ¤ì¼€ì¼ë§</li><li>AWS Fargateë¡œ ì„œë¹„ìŠ¤ ì˜¬ë¦¬ê¸°</li></ul><p><br></br></p><h2 id="Kubernetes-k8s"><a href="#Kubernetes-k8s" class="headerlink" title="Kubernetes(k8s)"></a>Kubernetes(k8s)</h2><ul><li>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆí™”ëœ ì›Œí¬ë¡œë“œì™€ ì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì´ì‹ì„±ì´ ìˆê³ , í™•ì¥ê°€ëŠ¥í•œ ì˜¤í”ˆì†ŒìŠ¤ í”Œë«í¼ì…ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì„ ì–¸ì  êµ¬ì„±ê³¼ ìë™í™”ë¥¼ ëª¨ë‘ ìš©ì´í•˜ê²Œ í•´ì£¼ëŠ” ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ íˆ´ì…ë‹ˆë‹¤.</li></ul><blockquote><p>ğŸŒ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ëŒ€í•´ ë” ìì„¸íˆ ì•Œê³  ì‹¶ë‹¤ë©´ <a href="https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/">ì—¬ê¸°</a> ë¥¼ í´ë¦­í•˜ì„¸ìš”.</p></blockquote><p><img src="/images/eks-workshop/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2021-10-29_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.59.24.png" alt="ì¿ ë²„ë„¤í‹°ìŠ¤_ì•„í‚¤í…ì³"></p><ul><li>ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ë°°í¬í•˜ë©´ <strong>í´ëŸ¬ìŠ¤í„°</strong>ë¥¼ ì–»ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ í´ëŸ¬ìŠ¤í„°ëŠ” <strong>ë…¸ë“œë“¤ì˜ ì§‘í•©</strong>ì…ë‹ˆë‹¤. ë…¸ë“œë“¤ì€ í¬ê²Œ ë‘ ê°€ì§€ ìœ í˜•ìœ¼ë¡œ ë‚˜ëˆ ì§€ëŠ”ë°, ê°ê°ì´ <strong>ì»¨íŠ¸ë¡¤ í”Œë ˆì¸</strong>ê³¼ <strong>ë°ì´í„° í”Œë ˆì¸</strong>ì…ë‹ˆë‹¤.<ul><li>ì»¨íŠ¸ë¡¤ í”Œë ˆì¸(Control Plane)ì€ ì›Œì»¤ ë…¸ë“œì™€ í´ëŸ¬ìŠ¤í„° ë‚´ íŒŒë“œë¥¼ ê´€ë¦¬í•˜ê³  ì œì–´í•©ë‹ˆë‹¤.</li><li>ë°ì´í„° í”Œë ˆì¸(Data Plane)ì€ <strong>ì›Œì»¤ ë…¸ë“œë“¤</strong>ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©° ì»¨í…Œì´ë„ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì„± ìš”ì†Œì¸ <strong>íŒŒë“œ</strong>ë¥¼ í˜¸ìŠ¤íŠ¸í•©ë‹ˆë‹¤.</li></ul></li></ul><p><br></br></p><h2 id="Kubernetes-Objects"><a href="#Kubernetes-Objects" class="headerlink" title="Kubernetes Objects"></a>Kubernetes Objects</h2><ul><li>ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì˜¤ë¸Œì íŠ¸ëŠ” <strong>ë°”ë¼ëŠ” ìƒíƒœ(desired state)ë¥¼ ë‹´ì€ ë ˆì½”ë“œ</strong>ì…ë‹ˆë‹¤. ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì—ì„œ ì˜¤ë¸Œì íŠ¸ì˜ <strong>í˜„ì¬ ìƒíƒœ(current state)</strong> ì™€ ë°”ë¼ëŠ” ìƒíƒœë¥¼ ì¼ì¹˜ì‹œí‚¤ê¸° ìœ„í•´ ëŠì„ì—†ì´ ê´€ë¦¬í•©ë‹ˆë‹¤.</li><li>ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì˜¤ë¸Œì íŠ¸ì—ëŠ” íŒŒë“œ(pod), ì„œë¹„ìŠ¤(service), ë””í”Œë¡œì´ë¨¼íŠ¸(Deployment) ë“±ì´ ìˆìŠµë‹ˆë‹¤.</li></ul></li></ul><p>  <br></br></p><h2 id="EKS"><a href="#EKS" class="headerlink" title="EKS"></a>EKS</h2><ul><li><p><a href="https://docs.aws.amazon.com/eks/latest/userguide/what-is-eks.html">Amazon EKS</a>ëŠ” Kubernetesë¥¼ ì‰½ê²Œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. Amazon EKSë¥¼ ì‚¬ìš©í•˜ì‹œë©´ AWS í™˜ê²½ì—ì„œ Kubernetes ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë˜ëŠ” ë…¸ë“œë¥¼ ì§ì ‘ ì„¤ì¹˜, ìš´ì˜ ë° ìœ ì§€í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.</p></li><li><p>Amazon EKSëŠ” ì—¬ëŸ¬ ê°€ìš© ì˜ì—­ì—ì„œ Kubernetes ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•˜ì—¬ ê³ ê°€ìš©ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤. ë˜í•œ, ë¹„ì •ìƒ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ê°ì§€í•˜ê³  êµì²´í•˜ë©° ìë™í™”ëœ ë²„ì „ ì—…ê·¸ë ˆì´ë“œ ë° íŒ¨ì¹˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p></li><li><p>Amazon EKSëŠ” ë‹¤ì–‘í•œ AWS ì„œë¹„ìŠ¤ë“¤ê³¼ ì—°ë™í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ í™•ì¥ì„± ë° ë³´ì•ˆì„ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p><ul><li>ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ì €ì¥ì†Œì¸ <strong>Amazon ECR(Elastic Container Registry)</strong></li><li>ë¡œë“œ ë¶„ì‚°ì„ ìœ„í•œ <strong>AWS ELB(Elastic Load Balancing)</strong></li><li>ì¸ì¦ì„ ìœ„í•œ <strong>AWS IAM</strong></li><li>ê²©ë¦¬ëœ <strong>Amazon VPC</strong></li></ul></li><li><p>Amazon EKSëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ Kubernetes ì†Œí”„íŠ¸ì›¨ì–´ì˜ ìµœì‹  ë²„ì „ì„ ì‹¤í–‰í•˜ë¯€ë¡œ <strong>Kubernetes ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ì‚¬ìš©ë˜ëŠ” í”ŒëŸ¬ê·¸ì¸ê³¼ íˆ´ì„ ëª¨ë‘ ì‚¬ìš©</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜¨í”„ë ˆë¯¸ìŠ¤ ë°ì´í„° ì„¼í„°ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ì§€ í¼ë¸”ë¦­ í´ë¼ìš°ë“œì—ì„œ ì‹¤í–‰ ì¤‘ì¸ì§€ì— ìƒê´€ì—†ì´, Amazon EKSì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ í‘œì¤€ Kubernetes í™˜ê²½ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì™„ë²½í•˜ê²Œ í˜¸í™˜ë©ë‹ˆë‹¤. ì¦‰, ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  í‘œì¤€ Kubernetes ì• í”Œë¦¬ì¼€ì´ì…˜ì„ Amazon EKSë¡œ ì†ì‰½ê²Œ ë§ˆì´ê·¸ë ˆì´ì…˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></li><li><p>ì´ ì›Œí¬ìƒµì„ ìœ„í•´ì„œëŠ” administrator IAM  ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.</p><p><br></br></p><h2 id="Cloud9"><a href="#Cloud9" class="headerlink" title="Cloud9"></a>Cloud9</h2></li><li><p>AWS Cloud9ì€ ë¸Œë¼ìš°ì €ë§Œìœ¼ë¡œë„ ì½”ë“œë¥¼ ì‘ì„±, ì‹¤í–‰ ë° ë””ë²„ê¹…í•  ìˆ˜ ìˆëŠ” IDEì…ë‹ˆë‹¤. ì½”ë“œ í¸ì§‘ê¸°, ë””ë²„ê±° ë° í„°ë¯¸ë„ì´ í¬í•¨ë˜ì–´ ìˆìœ¼ë©° ë§ì´ ì‚¬ìš©ë˜ëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¥¼ ìœ„í•œ í•„ìˆ˜ ë„êµ¬ê°€ ì‚¬ì „ì— íŒ¨í‚¤ì§•ë˜ì–´ ì œê³µë˜ë¯€ë¡œ, ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ê¸° ìœ„í•´ íŒŒì¼ì„ ì„¤ì¹˜í•˜ê±°ë‚˜ ê°œë°œ ë¨¸ì‹ ì„ êµ¬ì„±í•  í•„ìš”ê°€ ì—†ë‹¤ëŠ” íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</p><p><br></br></p><h3 id="kubectl"><a href="#kubectl" class="headerlink" title="kubectl"></a>kubectl</h3></li><li><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ëª…ë ¹ì„ ë‚´ë¦¬ëŠ” CLIì…ë‹ˆë‹¤.</p></li><li><p>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì˜¤ë¸Œì íŠ¸ ìƒì„±, ìˆ˜ì • í˜¹ì€ ì‚­ì œì™€ ê´€ë ¨í•œ ë™ì‘ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ <strong>ì¿ ë²„ë„¤í‹°ìŠ¤ API</strong>ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë•Œ, kubectl CLIë¥¼ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ ëª…ë ¹ì–´ê°€ ì¿ ë²„ë„¤í‹°ìŠ¤ APIë¥¼ í˜¸ì¶œí•´ ê´€ë ¨ ë™ì‘ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p><p><br></br></p><h3 id="eksctl"><a href="#eksctl" class="headerlink" title="eksctl"></a>eksctl</h3></li><li><p><a href="https://eksctl.io/">eksctl</a>ì´ë€ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ì‰½ê²Œ ìƒì„± ë° ê´€ë¦¬í•˜ëŠ” CLI íˆ´ì…ë‹ˆë‹¤. Go ì–¸ì–´ë¡œ ì“°ì—¬ ìˆìœ¼ë©° CloudFormation í˜•íƒœë¡œ ë°°í¬ë©ë‹ˆë‹¤.</p><h3 id="eksctlë¡œ-í´ëŸ¬ìŠ¤í„°-ìƒì„±í•˜ê¸°"><a href="#eksctlë¡œ-í´ëŸ¬ìŠ¤í„°-ìƒì„±í•˜ê¸°" class="headerlink" title="eksctlë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„±í•˜ê¸°"></a>eksctlë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„±í•˜ê¸°</h3></li><li><p>eksctlì„ ì‚¬ìš©í•˜ì—¬ ì•„ë¬´ ì„¤ì • ê°’ì„ ì£¼ì§€ ì•Šê³  ì´ ëª…ë ¹ì–´(<code>eksctl create cluster</code>)ë¥¼ ì‹¤í–‰í•˜ë©´ default parameterë¡œ í´ëŸ¬ìŠ¤í„°ê°€ ë°°í¬ë©ë‹ˆë‹¤.</p></li><li><p>ì›í•˜ëŠ” ì„¤ì •ì´ ìˆë‹¤ë©´ yamlíŒŒì¼ì„ ë§Œë“¤ì–´ì„œ ë°°í¬í•˜ë©´ ë©ë‹ˆë‹¤.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;</span> <span class="string">EOF</span> <span class="string">&gt; eks-demo-cluster.yaml</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string"></span><span class="attr">apiVersion:</span> <span class="string">eksctl.io/v1alpha5</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterConfig</span></span><br><span class="line"></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">eks-demo</span> <span class="comment"># ìƒì„±í•  EKS í´ëŸ¬ìŠ¤í„°ëª…</span></span><br><span class="line"><span class="attr">  region:</span> <span class="string">$&#123;AWS_REGION&#125;</span> <span class="comment"># í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•  ë¦¬ì ¼</span></span><br><span class="line"><span class="attr">  version:</span> <span class="string">"1.21"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">vpc:</span></span><br><span class="line"><span class="attr">  cidr:</span> <span class="string">"192.168.0.0/16"</span> <span class="comment"># í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©í•  VPCì˜ CIDR</span></span><br><span class="line"></span><br><span class="line"><span class="attr">managedNodeGroups:</span></span><br><span class="line"><span class="attr">  - name:</span> <span class="string">node-group</span> <span class="comment"># í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œ ê·¸ë£¹ëª…</span></span><br><span class="line"><span class="attr">    instanceType:</span> <span class="string">m5.large</span> <span class="comment"># í´ëŸ¬ìŠ¤í„° ì›Œì»¤ ë…¸ë“œì˜ ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…</span></span><br><span class="line"><span class="attr">    desiredCapacity:</span> <span class="number">3</span> <span class="comment"># í´ëŸ¬ìŠ¤í„° ì›Œì»¤ ë…¸ë“œì˜ ê°¯ìˆ˜</span></span><br><span class="line"><span class="attr">    volumeSize:</span> <span class="number">10</span>  <span class="comment"># í´ëŸ¬ìŠ¤í„° ì›Œì»¤ ë…¸ë“œì˜ EBS ìš©ëŸ‰ (ë‹¨ìœ„: GiB)</span></span><br><span class="line"><span class="attr">    ssh:</span></span><br><span class="line"><span class="attr">      enableSsm:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    iam:</span></span><br><span class="line"><span class="attr">      withAddonPolicies:</span></span><br><span class="line"><span class="attr">        imageBuilder:</span> <span class="literal">true</span> <span class="comment"># AWS ECRì— ëŒ€í•œ ê¶Œí•œ ì¶”ê°€</span></span><br><span class="line">        <span class="comment"># albIngress: true  # albIngressì— ëŒ€í•œ ê¶Œí•œ ì¶”ê°€</span></span><br><span class="line"><span class="attr">        cloudWatch:</span> <span class="literal">true</span> <span class="comment"># cloudWatchì— ëŒ€í•œ ê¶Œí•œ ì¶”ê°€</span></span><br><span class="line"><span class="attr">        autoScaler:</span> <span class="literal">true</span> <span class="comment"># auto scalingì— ëŒ€í•œ ê¶Œí•œ ì¶”ê°€</span></span><br><span class="line"></span><br><span class="line"><span class="attr">cloudWatch:</span></span><br><span class="line"><span class="attr">  clusterLogging:</span></span><br><span class="line"><span class="attr">    enableTypes:</span> <span class="string">["*"]</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li><li><p><code>eksctl create cluster -f eks-demo-cluster.yaml</code> ë¡œ ë°°í¬</p></li><li><p>ë…¸ë“œ í™•ì¸</p><ul><li><p><code>kubectl get nodes</code></p><p><img src="/images/eks-workshop/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2021-10-29_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_1.17.55.png" alt="EKSí´ëŸ¬ìŠ¤í„° êµ¬ì„±"></p><ul><li>ê¸°ë³¸ì ì¸ EKS í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì€ ëë‚¬ê³ , ë³¸ê²©ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•˜ê³ , ìœ ì €ê°€ ë“¤ì–´ì˜¤ëŠ” í†µë¡œì¸ ì¸ê·¸ë ˆìŠ¤ë¥¼ ì„¤ì •í•´ ë´…ì‹œë‹¤.</li></ul></li></ul></li><li><p>ì´ ìƒíƒœì—ì„œëŠ” í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œë¥¼ UIì—ì„œ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. Console Credientialì„ ë”í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.</p></li><li><p>Cloud9ì˜ IAM credentialì„ í†µí•´, í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ì˜€ê¸° ë•Œë¬¸ì— <a href="https://console.aws.amazon.com/eks">Amazon EKS ì½˜ì†”ì°½</a>ì—ì„œ í•´ë‹¹ í´ëŸ¬ìŠ¤í„° ì •ë³´ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” ì‹¤ì œ ì½˜ì†”ì— ì ‘ê·¼í•  IAM entity(ì‚¬ìš©ì ë˜ëŠ” ì—­í• )ì˜ AWS Console credentialì„ í´ëŸ¬ìŠ¤í„°ì— ì¶”ê°€í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤.</p><ul><li><code>rolearn=$(aws cloud9 describe-environment-memberships --environment-id=$C9_PID | jq -r &#39;.memberships[].userArn&#39;)</code></li><li><code>assumedrolename=$(echo ${rolearn} | awk -F/ &#39;{print $(NF-1)}&#39;)rolearn=$(aws iam get-role --role-name ${assumedrolename} --query Role.Arn --output text)</code> rolearnì— ìì‹ ì˜ arnì„ ë„£ì–´ì£¼ë„ë¡ í•©ì‹œë‹¤.</li><li>echo ${rolearn}</li><li><code>eksctl create iamidentitymapping --cluster eks-demo --arn ${rolearn} --group system:masters --username admin</code> identity ë§µí•‘</li><li>kubectl describe configmap -n kube-system aws-auth ì ìš© í™•ì¸</li></ul><p><br></br></p><h2 id="Ingress-Controller"><a href="#Ingress-Controller" class="headerlink" title="Ingress Controller"></a>Ingress Controller</h2></li><li><p><strong>AWS Load Balancer Controller</strong>ëŠ” <strong>êµ¬ AWS ALB Ingress Controller</strong>ì—ì„œ ë¦¬ë¸Œëœë“œëœ ê°œë…ì…ë‹ˆë‹¤.</p></li><li><p><strong>ì¸ê·¸ë ˆìŠ¤(Ingress)</strong> ëŠ” ì£¼ë¡œ <strong>í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì—ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë‚´ë¶€</strong>ë¡œ ì ‘ê·¼í•  ë•Œ, ìš”ì²­ë“¤ì„ ì–´ë–»ê²Œ ì²˜ë¦¬í• ì§€ ì •ì˜í•´ë†“ì€ ê·œì¹™ì´ì ë¦¬ì†ŒìŠ¤ ì˜¤ë¸Œì íŠ¸ì…ë‹ˆë‹¤. í•œë§ˆë””ë¡œ ì™¸ë¶€ì˜ ìš”ì²­ì´ ë‚´ë¶€ë¡œ ì ‘ê·¼í•˜ê¸° ìœ„í•œ ê´€ë¬¸ì˜ ì—­í• ì„ í•˜ëŠ” ê²ƒì´ì£ . ì™¸ë¶€ ìš”ì²­ì— ëŒ€í•œ ë¡œë“œ ë°¸ëŸ°ì‹±, TLS/SSL ì¸ì¦ì„œ ì²˜ë¦¬, HTTP ê²½ë¡œì— ëŒ€í•œ ë¼ìš°íŒ… ë“±ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¸ê·¸ë ˆìŠ¤ëŠ” L7 ì˜ì—­ì˜ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p></li><li><p>ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì„œë¹„ìŠ¤ íƒ€ì… ì¤‘, NodePort í˜¹ì€ LoadBalancerë¡œë„ ì™¸ë¶€ë¡œ ë…¸ì¶œí•  ìˆ˜ ìˆì§€ë§Œ ì¸ê·¸ë ˆìŠ¤ ì—†ì´ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ê²½ìš°, ëª¨ë“  ì„œë¹„ìŠ¤ì—ê²Œ ë¼ìš°íŒ… ê·œì¹™ ë° TLS/SSL ë“±ì˜ ìƒì„¸í•œ ì˜µì…˜ë“¤ì„ ì ìš©í•´ì•¼ ë˜ì£ . ê·¸ë˜ì„œ ì¸ê·¸ë ˆìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p><p><img src="/images/eks-workshop/Untitled.png" alt="Ingress"></p></li><li><p>ì¸ê·¸ë ˆìŠ¤ëŠ” ì™¸ë¶€ ìš”ì²­ ì²˜ë¦¬ì— ëŒ€í•œ ê·œì¹™ë“¤ì„ ì„¤ì •í•´ë†“ì€ ê²ƒì„ ì˜ë¯¸í•˜ë©°, ì´ëŸ° ì„¤ì •ì´ ë™ì‘í•˜ê¸° ìœ„í•´ì„œ í•„ìš”í•œ ê²ƒì´ <strong>ì¸ê·¸ë ˆìŠ¤ ì»¨íŠ¸ë¡¤ëŸ¬</strong>ì…ë‹ˆë‹¤. kube-controller-managerì˜ ì¼ë¶€ë¡œ ì‹¤í–‰ë˜ëŠ” ë‹¤ë¥¸ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë‹¬ë¦¬ ì¸ê·¸ë ˆìŠ¤ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” í´ëŸ¬ìŠ¤í„°ì™€ í•¨ê»˜ ìƒì„±ë˜ì§„ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.</p><h3 id="AWS-Load-Balancer-ë§Œë“¤ê¸°"><a href="#AWS-Load-Balancer-ë§Œë“¤ê¸°" class="headerlink" title="AWS Load Balancer ë§Œë“¤ê¸°"></a>AWS Load Balancer ë§Œë“¤ê¸°</h3></li><li><p><a href="https://docs.aws.amazon.com/eks/latest/userguide/alb-ingress.html">Amazon EKSì˜ Application Load Balancing</a>ì´ë€ í´ëŸ¬ìŠ¤í„°ì— ì¸ê·¸ë ˆìŠ¤ ìì›ì´ ìƒì„±ë  ë•Œì— ALB(Application Load Balancer) ë° í•„ìš”í•œ ìì›ì´ ìƒì„±ë˜ë„ë¡ íŠ¸ë¦¬ê±°í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì…ë‹ˆë‹¤. ì¸ê·¸ë ˆìŠ¤ ìì›ë“¤ì€ ALBë¥¼ êµ¬ì„±í•˜ì—¬ HTTP ë˜ëŠ” HTTPS íŠ¸ë˜í”½ì„ í´ëŸ¬ìŠ¤í„° ë‚´ íŒŒë“œë¡œ ë¼ìš°íŒ…í•©ë‹ˆë‹¤.</p><ul><li>ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ <code>Ingress</code>ì˜ ê²½ìš°, <code>Application Load Balancers</code>ìœ¼ë¡œ í”„ë¡œë¹„ì €ë‹ë©ë‹ˆë‹¤.</li><li>ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ <code>Service</code>ì˜ ê²½ìš°, <code>Network Load Balancers</code>ìœ¼ë¡œ í”„ë¡œë¹„ì €ë‹ë©ë‹ˆë‹¤.</li></ul></li><li><p>AWS Load Balancer ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì§€ì›í•˜ëŠ” <strong>íŠ¸ë˜í”½ ëª¨ë“œ</strong>ëŠ” ì•„ë˜ì˜ ë‘ ê°€ì§€ì…ë‹ˆë‹¤.</p><ul><li>Instance(default): í´ëŸ¬ìŠ¤í„° ë‚´ ë…¸ë“œë¥¼ ALBì˜ ëŒ€ìƒìœ¼ë¡œ ë“±ë¡í•©ë‹ˆë‹¤. ALBì— ë„ë‹¬í•˜ëŠ” íŠ¸ë˜í”½ì€ NodePortë¡œ ë¼ìš°íŒ…ëœ ë‹¤ìŒ íŒŒë“œë¡œ í”„ë¡ì‹œë©ë‹ˆë‹¤.</li><li>IP: íŒŒë“œë¥¼ ALB ëŒ€ìƒìœ¼ë¡œ ë“±ë¡í•©ë‹ˆë‹¤. ALBì— ë„ë‹¬í•˜ëŠ” íŠ¸ë˜í”½ì€ íŒŒë“œë¡œ <strong>ì§ì ‘</strong> ë¼ìš°íŒ…ë©ë‹ˆë‹¤. í•´ë‹¹ íŠ¸ë˜í”½ ëª¨ë“œë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  <strong>ingress.yaml íŒŒì¼ì— ì£¼ì„ì„ ì‚¬ìš©í•˜ì—¬ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•´ì•¼</strong> í•©ë‹ˆë‹¤.</li></ul><p>![Instance Mode, IP Mode](/images/eks-workshop/Untitled 1.png)</p><ul><li>ê°ì¢… ë°°í¬ë“¤ì— ì‚¬ìš©í•  manifests ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ì–´ë†“ê³  ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.</li></ul></li><li><p>AWS Load Balancer ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë°°í¬í•˜ê¸° ì „, ìš°ë¦¬ëŠ” ëª‡ ê°€ì§€ ì‘ì—…ì„ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. controllerê°€ ì›Œì»¤ ë…¸ë“œ ìœ„ì—ì„œ ë™ì‘ë˜ê¸° ë•Œë¬¸ì— IAM permissionsë¥¼ í†µí•´, AWS ALB/NLB ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤. IAM permissionsëŠ” ServiceAccountë¥¼ ìœ„í•œ IAM rolesë¥¼ ì„¤ì¹˜í•˜ê±°ë‚˜ ì›Œì»¤ ë…¸ë“œì˜ IAM rolesì— ì§ì ‘ì ìœ¼ë¡œ ë¶™ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></li><li><p>ë¨¼ì €, í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ <strong>IAM OIDC(OpenID Connect) identity Provider</strong>ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. Podì™€ ê°™ì€ í´ëŸ¬ìŠ¤í„° ë‚´ ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ìƒì„±í•œ í•­ëª©ì´ API Server ë˜ëŠ” ì™¸ë¶€ ì„œë¹„ìŠ¤ì— ì¸ì¦í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” <strong><a href="https://kubernetes.io/ko/docs/reference/access-authn-authz/service-accounts-admin/">service account</a></strong>ì— IAM roleì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´, ìƒì„±í•œ í´ëŸ¬ìŠ¤í„°(í˜„ì¬ ì‹¤ìŠµì—ì„œì˜ <em>eks-demo</em>)ì— <strong>IAM OIDC provider</strong>ê°€ ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤.</p><ul><li><p>eksctl utils associate-iam-oidc-provider <br>â€“region ${AWS_REGION} <br>â€“cluster eks-demo <br>â€“approve</p></li><li><p>OIDC provider URL</p><ul><li>aws eks describe-cluster â€“name eks-demo â€“query â€œcluster.identity.oidc.issuerâ€ â€“output text</li><li>output: <a href="https://oidc.eks.ap-northeast-2.amazonaws.com/id/8A6E78112D7F1C4DC352B1B511DD13CF">https://oidc.eks.ap-northeast-2.amazonaws.com/id/8A6E78112D7F1C4DC352B1B511DD13CF</a><ul><li>ë’¤ì— id ë¶€ë¶„ì„ ë³µì‚¬í•´ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•©ë‹ˆë‹¤.</li><li>aws iam list-open-id-connect-providers | grep 8A6E78112D7F1C4DC352B1B511DD13CF</li><li>ê²°ê³¼ ê°’ì´ ì¶œë ¥ë˜ë©´ <strong>IAM OIDC identity provider</strong>ê°€ í´ëŸ¬ìŠ¤í„°ì— ìƒì„±ì´ ëœ ê²ƒì´ê³ , ì•„ë¬´ ê°’ë„ ë‚˜íƒ€ë‚˜ì§€ ì•Šìœ¼ë©´ ìƒì„± ì‘ì—…ì„ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.</li></ul></li></ul></li><li><p>AWS Load Balancer Controllerì— ë¶€ì—¬í•  IAM Policyë¥¼ ìƒì„±í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p><ul><li>aws iam create-policy <br>â€“policy-name AWSLoadBalancerControllerIAMPolicy <br>â€“policy-document <a href="https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/main/docs/install/iam_policy.json">https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/main/docs/install/iam_policy.json</a></li></ul></li><li><p>AWS Load Balancer Controllerë¥¼ ìœ„í•œ ServiceAccountë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p><ul><li>eksctl create iamserviceaccount <br>â€“cluster eks-demo <br>â€“namespace kube-system <br>â€“name aws-load-balancer-controller <br>â€“attach-policy-arn arn:aws:iam::$ACCOUNT_ID:policy/AWSLoadBalancerControllerIAMPolicy <br>â€“override-existing-serviceaccounts <br>â€“approve</li></ul></li><li><p>AWS Load Balancer controllerë¥¼ í´ëŸ¬ìŠ¤í„°ì— ì¶”ê°€í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë¨¼ì €, ì¸ì¦ì„œ êµ¬ì„±ì„ ì›¹í›…ì— ì‚½ì…í•  ìˆ˜ ìˆë„ë¡ <strong><a href="https://github.com/jetstack/cert-manager">cert-manager</a></strong>ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. <strong>Cert-manager</strong>ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ TLSì¸ì¦ì„œë¥¼ ìë™ìœ¼ë¡œ í”„ë¡œë¹„ì €ë‹ ë° ê´€ë¦¬í•˜ëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ì…ë‹ˆë‹¤.</p><ul><li>kubectl apply â€“validate=false -f <a href="https://github.com/jetstack/cert-manager/releases/download/v1.4.1/cert-manager.yaml">https://github.com/jetstack/cert-manager/releases/download/v1.4.1/cert-manager.yaml</a></li></ul></li><li><p>load balancer controller yaml</p><ul><li>wget <a href="https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.2.1/docs/install/v2_2_1_full.yaml">https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.2.1/docs/install/v2_2_1_full.yaml</a></li></ul></li><li><p>yaml íŒŒì¼ì—ì„œ í´ëŸ¬ìŠ¤í„°ì˜ <code>cluster-name</code>ì„ í¸ì§‘í•©ë‹ˆë‹¤. ë³¸ ì‹¤ìŠµì—ì„œëŠ” <strong>eks-demo</strong>ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.</p><ul><li>spec:<br>containers:</li><li>args:</li><li>â€“cluster-name=eks-demo # ìƒì„±í•œ í´ëŸ¬ìŠ¤í„° ì´ë¦„ì„ ì…ë ¥</li><li>â€“ingress-class=alb<br>image: amazon/aws-alb-ingress-controller:v2.2.0</li></ul></li><li><p>ServiceAccount yaml spec ì‚­ì œ</p><ul><li>apiVersion: v1<br>kind: ServiceAccount<br>metadata:<br>labels:<br><a href="http://app.kubernetes.io/component:">app.kubernetes.io/component:</a> controller<br><a href="http://app.kubernetes.io/name:">app.kubernetes.io/name:</a> aws-load-balancer-controller<br>name: aws-load-balancer-controller<br>namespace: kube-system</li></ul><hr></li></ul></li><li><p>ë°°í¬</p><ul><li><code>kubectl apply -f v2_2_1_full.yaml</code></li><li>í™•ì¸ kubectl get deployment -n kube-system aws-load-balancer-controller</li><li>ì„œë¹„ìŠ¤ ì–´ì¹´ìš´ë“œ í™•ì¸ kubectl get sa aws-load-balancer-controller -n kube-system -o yaml</li></ul></li><li><p>í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œ í•„ìš”í•œ ê¸°ëŠ¥ë“¤ì„ ìœ„í•´ ì‹¤í–‰ë˜ëŠ” íŒŒë“œë“¤ì„ <strong>ì• ë“œì˜¨(Addon)</strong> ì´ë¼ê³  í•©ë‹ˆë‹¤. ì• ë“œì˜¨ì— ì‚¬ìš©ë˜ëŠ” íŒŒë“œë“¤ì€ ë””í”Œë¡œì´ë¨¼íŠ¸, ë¦¬í”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ ë“±ì— ì˜í•´ ê´€ë¦¬ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ ì• ë“œì˜¨ì´ ì‚¬ìš©í•˜ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ê°€ <strong>kube-system</strong>ì…ë‹ˆë‹¤. Yaml íŒŒì¼ì—ì„œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ kube-systemìœ¼ë¡œ ëª…ì‹œí–ˆê¸°ì— ìœ„ì˜ ëª…ë ¹ì–´ë¡œ íŒŒë“œ ì´ë¦„ì´ ë„ì¶œë˜ë©´ ì •ìƒì ìœ¼ë¡œ ë°°í¬ëœ ê²ƒì…ë‹ˆë‹¤. ë˜í•œ, ì•„ë˜ì˜ ëª…ë ¹ì–´ë¡œ ê´€ë ¨ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><ul><li>kubectl logs -n kube-system $(kubectl get po -n kube-system | egrep -o â€œaws-load-balancer[a-zA-Z0-9-]+â€)</li><li>ALBPOD=$(kubectl get pod -n kube-system | egrep -o â€œaws-load-balancer[a-zA-Z0-9-]+â€)</li><li>kubectl describe pod -n kube-system ${ALBPOD}</li></ul><p><br></br></p><h2 id="ì„œë¹„ìŠ¤-ë°°í¬"><a href="#ì„œë¹„ìŠ¤-ë°°í¬" class="headerlink" title="ì„œë¹„ìŠ¤ ë°°í¬"></a>ì„œë¹„ìŠ¤ ë°°í¬</h2></li><li><p>ì„œë¹„ìŠ¤ ë°°í¬í•˜ëŠ” ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p><p>![ì„œë¹„ìŠ¤ ë°°í¬ ìˆœì„œ](/images/eks-workshop/Untitled 2.png)</p></li><li><p>ì†ŒìŠ¤ ì½”ë“œ ë‹¤ìš´ë¡œë“œ</p></li><li><p>Amazon ECRì— ê° ì„œë¹„ìŠ¤ì— ëŒ€í•œ ë¦¬í¬ì§€í† ë¦¬ ìƒì„±</p></li><li><p>Dockerfileì„ í¬í•¨í•œ ì†ŒìŠ¤ ì½”ë“œ ìœ„ì¹˜ì—ì„œ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ë¹Œë“œ í›„, ë¦¬í¬ì§€í† ë¦¬ì— í‘¸ì‹œ</p></li><li><p>ê° ì„œë¹„ìŠ¤ì— ëŒ€í•œ Deployment, Service, Ingress ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ë° ë°°í¬</p></li><li><p>ì‚¬ìš©ìê°€ ì‹¤ì œ ì„œë¹„ìŠ¤ë¥¼ ì ‘ê·¼í•˜ëŠ” ìˆœì„œ</p><p>![ì‚¬ìš©ìê°€ ì ‘ê·¼í•˜ëŠ” ìˆœì„œ](/images/eks-workshop/Untitled 3.png)</p></li><li><p>ìš°ë¦¬ì˜ ì„œë¹„ìŠ¤ëŠ” ë‘ ê°œì˜ ë°±ì—”ë“œê°€ ì¡´ì¬í•©ë‹ˆë‹¤.</p><ul><li>Flask</li><li>Node.js</li></ul></li><li><p>ê° ë°±ì—”ë“œì˜ APIê°€ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ê³  í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬ë¡œ ë„˜ì–´ê°€ë´…ì‹œë‹¤.</p></li></ul><p>  <br></br></p><h3 id="Flask-ë°°í¬"><a href="#Flask-ë°°í¬" class="headerlink" title="Flask ë°°í¬"></a>Flask ë°°í¬</h3><ul><li><p>cd ~/environment/manifests/</p></li><li><p>deploy manifest</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">flask-deployment.yaml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">demo-flask-backend</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  replicas:</span> <span class="number">3</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    matchLabels:</span></span><br><span class="line"><span class="attr">      app:</span> <span class="string">demo-flask-backend</span></span><br><span class="line"><span class="attr">  template:</span></span><br><span class="line"><span class="attr">    metadata:</span></span><br><span class="line"><span class="attr">      labels:</span></span><br><span class="line"><span class="attr">        app:</span> <span class="string">demo-flask-backend</span></span><br><span class="line"><span class="attr">    spec:</span></span><br><span class="line"><span class="attr">      containers:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">demo-flask-backend</span></span><br><span class="line"><span class="attr">          image:</span> <span class="string">$ACCOUNT_ID.dkr.ecr.$AWS_REGION.amazonaws.com/demo-flask-backend:latest</span></span><br><span class="line"><span class="attr">          imagePullPolicy:</span> <span class="string">Always</span></span><br><span class="line"><span class="attr">          ports:</span></span><br><span class="line"><span class="attr">            - containerPort:</span> <span class="number">8080</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li><li><p><strong>service manifest</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">flask-service.yaml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">demo-flask-backend</span></span><br><span class="line"><span class="attr">  annotations:</span></span><br><span class="line">    <span class="string">alb.ingress.kubernetes.io/healthcheck-path:</span> <span class="string">"/contents/aws"</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">     app:</span> <span class="string">demo-flask-backend</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">NodePort</span></span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="attr">    - port:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">      targetPort:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">      protocol:</span> <span class="string">TCP</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li><li><p><strong>Ingress manifest</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">ingress.yaml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">"backend-ingress"</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">  annotations:</span></span><br><span class="line">    <span class="string">kubernetes.io/ingress.class:</span> <span class="string">alb</span></span><br><span class="line">    <span class="string">alb.ingress.kubernetes.io/scheme:</span> <span class="string">internet-facing</span></span><br><span class="line">    <span class="string">alb.ingress.kubernetes.io/target-type:</span> <span class="string">ip</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  rules:</span></span><br><span class="line"><span class="attr">    - http:</span></span><br><span class="line"><span class="attr">        paths:</span></span><br><span class="line"><span class="attr">          - path:</span> <span class="string">/contents</span></span><br><span class="line"><span class="attr">            pathType:</span> <span class="string">Prefix</span></span><br><span class="line"><span class="attr">            backend:</span></span><br><span class="line"><span class="attr">              service:</span></span><br><span class="line"><span class="attr">                name:</span> <span class="string">"demo-flask-backend"</span></span><br><span class="line"><span class="attr">                port:</span></span><br><span class="line"><span class="attr">                  number:</span> <span class="number">8080</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li><li><p>ìˆœì„œëŒ€ë¡œ ë°°í¬</p></li><li><p><code>kubectl apply -f flask-deployment.yamlkubectl apply -f flask-service.yamlkubectl apply -f ingress.yaml</code></p></li><li><p>echo <a href="http://%24/">http://$</a>(kubectl get ingress/backend-ingress -o jsonpath=â€™{.status.loadBalancer.ingress[*].hostname}â€™)/contents/aws ì—¬ê¸°ì„œ ë‚˜ì˜¨ ì£¼ì†Œë¡œ í™•ì¸</p><ul><li>ingress objectê°€ ë°°í¬ë˜ëŠ” ë™ì•ˆ ê¸°ë‹¤ë¦¬ê³  ì£¼ì†Œë¡œ ì ‘ì†</li></ul><p>![flask ë°±ì—”ë“œ ë°°í¬](/images/eks-workshop/Untitled 4.png)</p><p><br></br></p><h3 id="node-js-ë°°í¬"><a href="#node-js-ë°°í¬" class="headerlink" title="node.js ë°°í¬"></a>node.js ë°°í¬</h3></li><li><p><strong>deploy manifest</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">nodejs-deployment.yaml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">demo-nodejs-backend</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  replicas:</span> <span class="number">3</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    matchLabels:</span></span><br><span class="line"><span class="attr">      app:</span> <span class="string">demo-nodejs-backend</span></span><br><span class="line"><span class="attr">  template:</span></span><br><span class="line"><span class="attr">    metadata:</span></span><br><span class="line"><span class="attr">      labels:</span></span><br><span class="line"><span class="attr">        app:</span> <span class="string">demo-nodejs-backend</span></span><br><span class="line"><span class="attr">    spec:</span></span><br><span class="line"><span class="attr">      containers:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">demo-nodejs-backend</span></span><br><span class="line"><span class="attr">          image:</span> <span class="string">public.ecr.aws/y7c9e1d2/joozero-repo:latest</span></span><br><span class="line"><span class="attr">          imagePullPolicy:</span> <span class="string">Always</span></span><br><span class="line"><span class="attr">          ports:</span></span><br><span class="line"><span class="attr">            - containerPort:</span> <span class="number">3000</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li><li><p><strong>service manifest</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">nodejs-service.yaml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">demo-nodejs-backend</span></span><br><span class="line"><span class="attr">  annotations:</span></span><br><span class="line">    <span class="string">alb.ingress.kubernetes.io/healthcheck-path:</span> <span class="string">"/services/all"</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">     app:</span> <span class="string">demo-nodejs-backend</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">NodePort</span></span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="attr">    - port:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">      targetPort:</span> <span class="number">3000</span></span><br><span class="line"><span class="attr">      protocol:</span> <span class="string">TCP</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li><li><p><strong>ingress manifest</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">ingress.yaml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">"backend-ingress"</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">  annotations:</span></span><br><span class="line">    <span class="string">kubernetes.io/ingress.class:</span> <span class="string">alb</span></span><br><span class="line">    <span class="string">alb.ingress.kubernetes.io/scheme:</span> <span class="string">internet-facing</span></span><br><span class="line">    <span class="string">alb.ingress.kubernetes.io/target-type:</span> <span class="string">ip</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  rules:</span></span><br><span class="line"><span class="attr">    - http:</span></span><br><span class="line"><span class="attr">        paths:</span></span><br><span class="line"><span class="attr">          - path:</span> <span class="string">/contents</span></span><br><span class="line"><span class="attr">            pathType:</span> <span class="string">Prefix</span></span><br><span class="line"><span class="attr">            backend:</span></span><br><span class="line"><span class="attr">              service:</span></span><br><span class="line"><span class="attr">                name:</span> <span class="string">"demo-flask-backend"</span></span><br><span class="line"><span class="attr">                port:</span></span><br><span class="line"><span class="attr">                  number:</span> <span class="number">8080</span></span><br><span class="line"><span class="comment"># ì¶”ê°€ëœ ë¶€ë¶„ í™•ì¸</span></span><br><span class="line"><span class="attr">          - path:</span> <span class="string">/services</span></span><br><span class="line"><span class="attr">            pathType:</span> <span class="string">Prefix</span></span><br><span class="line"><span class="attr">            backend:</span></span><br><span class="line"><span class="attr">              service:</span></span><br><span class="line"><span class="attr">                name:</span> <span class="string">"demo-nodejs-backend"</span></span><br><span class="line"><span class="attr">                port:</span></span><br><span class="line"><span class="attr">                  number:</span> <span class="number">8080</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li><li><p>ìˆœì„œëŒ€ë¡œ ë°°í¬</p><ul><li><p><code>kubectl apply -f nodejs-deployment.yamlkubectl apply -f nodejs-service.yamlkubectl apply -f ingress.yaml</code></p></li><li><p>echo <a href="http://%24/">http://$</a>(kubectl get ingress/backend-ingress -o jsonpath=â€™{.status.loadBalancer.ingress[*].hostname}â€™)/services/all</p><p>![node.js ë°±ì—”ë“œ ë°°í¬](/images/eks-workshop/Untitled 5.png)</p></li></ul><p><br></br></p><h3 id="í”„ë¡ íŠ¸ì—”ë“œ-ë°°í¬"><a href="#í”„ë¡ íŠ¸ì—”ë“œ-ë°°í¬" class="headerlink" title="í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬"></a>í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬</h3></li><li><p>í”„ë¡ íŠ¸ì—”ë“œ ì†ŒìŠ¤ ë‹¤ìš´</p><p>cd /home/ec2-user/environment<br>git clone <a href="https://github.com/joozero/amazon-eks-frontend.git">https://github.com/joozero/amazon-eks-frontend.git</a></p></li><li><p>ecr repository ìƒì„±</p><p>aws ecr create-repository <br>â€“repository-name demo-frontend <br>â€“image-scanning-configuration scanOnPush=true <br>â€“region ${AWS_REGION}</p></li><li><p>í”„ë¡ íŠ¸ì—”ë“œ ì†ŒìŠ¤ì—ì„œ urlì„ ë°±ì—”ë“œì˜ ingress ì£¼ì†Œë¡œ ë³€ê²½\</p><ul><li>App.js<ul><li>echo <a href="http://%24/">http://$</a>(kubectl get ingress/backend-ingress -o jsonpath=â€™{.status.loadBalancer.ingress[*].hostname}â€™)/contents/â€˜${search}â€™</li></ul></li><li>page/UpperPage.js<ul><li>echo <a href="http://%24/">http://$</a>(kubectl get ingress/backend-ingress -o jsonpath=â€™{.status.loadBalancer.ingress[*].hostname}â€™)/services/all</li></ul></li></ul></li><li><p>cd /home/ec2-user/environment/amazon-eks-frontend<br>npm install<br>npm run build</p></li><li><p>npm audit fixë¥¼ í•´ë„ ì•ˆëœë‹¤ë©´</p><ul><li><code>export NODE_OPTIONS=--openssl-legacy-provider</code></li></ul></li><li><p>ECR demo-fronted ë¡œ ë„¤ì´ë° í•œ ë’¤, í‘¸ì‰¬</p><ul><li>docker build -t demo-frontend .</li><li>docker tag demo-frontend:latest$ACCOUNT_ID.dkr.ecr.$AWS_REGION.amazonaws.com/demo-frontend:latest</li><li>docker push $ACCOUNT_ID.dkr.ecr.$AWS_REGION.amazonaws.com/demo-frontend:latest</li></ul></li><li><p><strong>frontedë°°í¬ manifest</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cd</span> <span class="string">/home/ec2-user/environment/manifests</span></span><br><span class="line"></span><br><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">frontend-deployment.yaml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">demo-frontend</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  replicas:</span> <span class="number">3</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    matchLabels:</span></span><br><span class="line"><span class="attr">      app:</span> <span class="string">demo-frontend</span></span><br><span class="line"><span class="attr">  template:</span></span><br><span class="line"><span class="attr">    metadata:</span></span><br><span class="line"><span class="attr">      labels:</span></span><br><span class="line"><span class="attr">        app:</span> <span class="string">demo-frontend</span></span><br><span class="line"><span class="attr">    spec:</span></span><br><span class="line"><span class="attr">      containers:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">demo-frontend</span></span><br><span class="line"><span class="attr">          image:</span> <span class="string">$ACCOUNT_ID.dkr.ecr.$AWS_REGION.amazonaws.com/demo-frontend:latest</span></span><br><span class="line"><span class="attr">          imagePullPolicy:</span> <span class="string">Always</span></span><br><span class="line"><span class="attr">          ports:</span></span><br><span class="line"><span class="attr">            - containerPort:</span> <span class="number">80</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li><li><p><strong>service</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">frontend-service.yaml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">demo-frontend</span></span><br><span class="line"><span class="attr">  annotations:</span></span><br><span class="line">    <span class="string">alb.ingress.kubernetes.io/healthcheck-path:</span> <span class="string">"/"</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    app:</span> <span class="string">demo-frontend</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">NodePort</span></span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="attr">    - protocol:</span> <span class="string">TCP</span></span><br><span class="line"><span class="attr">      port:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">      targetPort:</span> <span class="number">80</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li><li><p>ingress ë°°í¬</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">ingress.yaml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">"backend-ingress"</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">  annotations:</span></span><br><span class="line">    <span class="string">kubernetes.io/ingress.class:</span> <span class="string">alb</span></span><br><span class="line">    <span class="string">alb.ingress.kubernetes.io/scheme:</span> <span class="string">internet-facing</span></span><br><span class="line">    <span class="string">alb.ingress.kubernetes.io/target-type:</span> <span class="string">ip</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  rules:</span></span><br><span class="line"><span class="attr">    - http:</span></span><br><span class="line"><span class="attr">        paths:</span></span><br><span class="line"><span class="attr">          - path:</span> <span class="string">/contents</span></span><br><span class="line"><span class="attr">            pathType:</span> <span class="string">Prefix</span></span><br><span class="line"><span class="attr">            backend:</span></span><br><span class="line"><span class="attr">              service:</span></span><br><span class="line"><span class="attr">                name:</span> <span class="string">"demo-flask-backend"</span></span><br><span class="line"><span class="attr">                port:</span></span><br><span class="line"><span class="attr">                  number:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">          - path:</span> <span class="string">/services</span></span><br><span class="line"><span class="attr">            pathType:</span> <span class="string">Prefix</span></span><br><span class="line"><span class="attr">            backend:</span>  </span><br><span class="line"><span class="attr">              service:</span></span><br><span class="line"><span class="attr">                name:</span> <span class="string">"demo-nodejs-backend"</span></span><br><span class="line"><span class="attr">                port:</span></span><br><span class="line"><span class="attr">                  number:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">          - path:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">            pathType:</span> <span class="string">Prefix</span></span><br><span class="line"><span class="attr">            backend:</span></span><br><span class="line"><span class="attr">              service:</span></span><br><span class="line"><span class="attr">                name:</span> <span class="string">"demo-frontend"</span></span><br><span class="line"><span class="attr">                port:</span></span><br><span class="line"><span class="attr">                  number:</span> <span class="number">80</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li><li><p>ë°°í¬</p><ul><li><code>kubectl apply -f frontend-deployment.yamlkubectl apply -f frontend-service.yamlkubectl apply -f ingress.yaml</code></li></ul><p>![í”„ë¡ íŠ¸ê¹Œì§€ ë°°í¬ ì™„ë£Œ](/images/eks-workshop/Untitled 6.png)</p><img src="/images/eks-workshop/Untitled 7.png" alt="ëª¨ë“  ë°°í¬ê°€ ì™„ë£Œëœ ëª¨ìŠµ" style="zoom:80%;" /><p><br></br></p><h2 id="Fargate"><a href="#Fargate" class="headerlink" title="Fargate"></a>Fargate</h2></li></ul><p>  <strong>AWS Fargate</strong>ëŠ” ì»¨í…Œì´ë„ˆì— ì í•©í•œ ì„œë²„ë¦¬ìŠ¤ ì»´í“¨íŒ… ì—”ì§„ìœ¼ë¡œ Amazon Elastic Container Service(ECS) ë° Amazon Elastic Kubernetes Service(EKS)ì—ì„œ ëª¨ë‘ ì‘ë™í•©ë‹ˆë‹¤. FargateëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹Œë“œí•˜ëŠ” ë° ë³´ë‹¤ ì‰½ê²Œ ì´ˆì ì„ ë§ì¶œ ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤. Fargateì—ì„œëŠ” ì„œë²„ë¥¼ í”„ë¡œë¹„ì €ë‹í•˜ê³  ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ë³„ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì§€ì •í•˜ê³  ê´€ë ¨ ë¹„ìš©ì„ ì§€ë¶ˆí•  ìˆ˜ ìˆìœ¼ë©°, ê³„íšì ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê²©ë¦¬í•¨ìœ¼ë¡œì¨ ë³´ì•ˆ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><ul><li><p>í´ëŸ¬ìŠ¤í„°ì— Fargateë¡œ podë¥¼ ë°°í¬í•˜ê¸° ìœ„í•´ì„œëŠ” podê°€ ì‹¤í–‰ë  ë•Œ ì‚¬ìš©í•˜ëŠ” í•˜ë‚˜ ì´ìƒì˜ fargate profileì„ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤. ì¦‰, fargate profileì´ë€ fargateë¡œ podë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ ì¡°ê±´ì„ ëª…ì‹œí•´ë†“ì€ í”„ë¡œíŒŒì¼ì´ë¼ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cd</span> <span class="string">/home/ec2-user/environment/manifestscat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">eks-demo-fargate-profile.yaml---apiVersion:</span> <span class="string">eksctl.io/v1alpha5kind:</span> <span class="attr">ClusterConfigmetadata:</span>  <span class="attr">name:</span> <span class="string">eks-demo</span>  <span class="attr">region:</span> <span class="string">$&#123;AWS_REGION&#125;fargateProfiles:</span>  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">frontend-fargate-profile</span>    <span class="attr">selectors:</span>      <span class="bullet">-</span> <span class="attr">namespace:</span> <span class="string">default</span>        <span class="attr">labels:</span>          <span class="attr">app:</span> <span class="string">frontend-fargateEOF</span></span><br></pre></td></tr></table></figure><ul><li>yaml íŒŒì¼ì—ì„œ <strong>selectors</strong>ì— ê¸°ì¬ëœ ì¡°ê±´ì— ë¶€í•©í•˜ëŠ” podì˜ ê²½ìš°, fargateë¡œ ë°°í¬ë©ë‹ˆë‹¤.</li></ul></li><li><p>ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´, fargate profileì„ í”„ë¡œë¹„ì €ë‹í•©ë‹ˆë‹¤.</p><ul><li>eksctl create fargateprofile -f eks-demo-fargate-profile.yaml</li><li>ì •ìƒ ë™ì‘ í™•ì¸<ul><li>eksctl get fargateprofile â€“cluster eks-demo -o json</li></ul></li></ul></li><li><p>ë°°í¬í•œ 3ê°œì˜ pod ì¤‘, í”„ë¡ íŠ¸ì•¤ë“œ podë¥¼ fargateë¡œ í”„ë¡œë¹„ì €ë‹í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•˜ê² ìŠµë‹ˆë‹¤. ë¨¼ì €, ê¸°ì¡´ì˜ podë¥¼ ì‚­ì œí•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ yaml íŒŒì¼ì´ ìœ„ì¹˜í•œ í´ë”ì—ì„œ ì‘ì—…í•©ë‹ˆë‹¤.</p><ul><li>kubectl delete -f frontend-deployment.yaml</li></ul></li><li><p>ê·¸ë¦¬ê³  frontend-deployment.yaml íŒŒì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤. ì´ yamlíŒŒì¼ì—ì„œ ë¯¸ë¦¬ ë“±ë¡í•œ fargate profileì„ ë„£ì–´ì£¼ê² ìŠµë‹ˆë‹¤. labelê°’ì„ frontend-fargateë¡œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤. 1ë²ˆì—ì„œ key ê°’ì´ appì´ê³  value ê°’ì´ frontend-fargateì´ë©° namespaceê°€ defaultì¼ ë•Œ, podë¥¼ fargateë¡œ ë°°í¬í•˜ê² ë‹¤ëŠ” ì¡°ê±´ì„ ë§ì¶”ê¸° ìœ„í•´ ê°’ì„ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cd</span> <span class="string">/home/ec2-user/environment/manifestscat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">frontend-deployment.yaml---apiVersion:</span> <span class="string">apps/v1kind:</span> <span class="attr">Deploymentmetadata:</span>  <span class="attr">name:</span> <span class="string">demo-frontend</span>  <span class="attr">namespace:</span> <span class="attr">defaultspec:</span>  <span class="attr">replicas:</span> <span class="number">3</span>  <span class="attr">selector:</span>    <span class="attr">matchLabels:</span>      <span class="attr">app:</span> <span class="string">frontend-fargate</span>  <span class="attr">template:</span>    <span class="attr">metadata:</span>      <span class="attr">labels:</span>        <span class="attr">app:</span> <span class="string">frontend-fargate</span>    <span class="attr">spec:</span>      <span class="attr">containers:</span>        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">demo-frontend</span>          <span class="attr">image:</span> <span class="string">$ACCOUNT_ID.dkr.ecr.$AWS_REGION.amazonaws.com/demo-frontend:latest</span>          <span class="attr">imagePullPolicy:</span> <span class="string">Always</span>          <span class="attr">ports:</span>            <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li><li><p>frontend-service.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">frontend-service.yaml---apiVersion:</span> <span class="attr">v1kind:</span> <span class="attr">Servicemetadata:</span>  <span class="attr">name:</span> <span class="string">demo-frontend</span>  <span class="attr">annotations:</span>    <span class="string">alb.ingress.kubernetes.io/healthcheck-path:</span> <span class="string">"/"</span><span class="attr">spec:</span>  <span class="attr">selector:</span>    <span class="attr">app:</span> <span class="string">frontend-fargate</span>  <span class="attr">type:</span> <span class="string">NodePort</span>  <span class="attr">ports:</span>    <span class="bullet">-</span> <span class="attr">protocol:</span> <span class="string">TCP</span>      <span class="attr">port:</span> <span class="number">80</span>      <span class="attr">targetPort:</span> <span class="number">80</span><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li><li><p>ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ë°°í¬</p><p><code>kubectl apply -f frontend-deployment.yamlkubectl apply -f frontend-service.yaml</code></p></li><li><p>ë°°í¬ ìƒíƒœ í™•ì¸</p><ul><li>kubectl get po -o wide</li></ul></li><li><p>ì´ì „ê³¼ ê°™ì€ ìƒíƒœì¸ì§€ ì›¹ í™•ì¸</p><ul><li>echo <a href="http://%24/">http://$</a>(kubectl get ingress/backend-ingress -o jsonpath=â€™{.status.loadBalancer.ingress[*].hostname}â€™)</li></ul><p><br></br></p><h2 id="GitOps"><a href="#GitOps" class="headerlink" title="GitOps?"></a>GitOps?</h2></li><li><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ CI/CDë¥¼ ìœ„í•´ì„œëŠ” Gitê³¼ ì›Œí¬í”Œë¡œìš° íˆ´ì˜ ì—°ê²°ì´ í•„ìš”í•˜ê³ , ì´ë¥¼ í†µí•´ì„œ ìë™í™” í•˜ëŠ” ë°©ì•ˆì´ í•„ìš”í•©ë‹ˆë‹¤.</p></li><li><p>ì¼ì¼ì´ ìˆ˜ì •í•˜ëŠ” ê²ƒì€ ë„ˆë¬´ë‚˜ ë²ˆê±°ë¡­ìŠµë‹ˆë‹¤.</p></li><li><p>ê·¸ë˜ì„œ ë“±ì¥í•œ ê²ƒì´ GitOpsì…ë‹ˆë‹¤.</p></li><li><p>Github Action, Kustomize, Helm Chart, Argo CDë¥¼ í™œìš©í•´ GitOpsë¥¼ ì²´í—˜í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><p><br></br></p><h2 id="GitOps-ì „ì—-ì•Œì•„ì•¼-í• -ê°œë…ë“¤"><a href="#GitOps-ì „ì—-ì•Œì•„ì•¼-í• -ê°œë…ë“¤" class="headerlink" title="GitOps ì „ì— ì•Œì•„ì•¼ í•  ê°œë…ë“¤"></a>GitOps ì „ì— ì•Œì•„ì•¼ í•  ê°œë…ë“¤</h2></li><li><p>ì•ì„œ ì†Œê°œí•œ Kustomizeë‚˜ Argo CDë“±ì€ ì¡°ê¸ˆ ìƒì†Œí•´ ë³´ì…ë‹ˆë‹¤.</p></li><li><p>ì´í•´ë¥¼ ìœ„í•´ ë¯¸ë¦¬ í•œë²ˆ ì •ë¦¬ë¥¼ í•˜ê³  ë„˜ì–´ê°€ë³´ê² ìŠµë‹ˆë‹¤.</p><h3 id="Kustomize"><a href="#Kustomize" class="headerlink" title="Kustomize"></a>Kustomize</h3></li><li><p>Kubernetesì—ì„œ appì„ ë°°í¬ë¥¼ í• ë•Œ manifest íŒŒì¼ì„ ì‘ì„±í•œë‹¤</p></li><li><p>staging í™˜ê²½ì— ë°°í¬í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì´ ë°œìƒí•˜ê³ , ìˆ˜ì •ì‚¬í•­ì´ ê³„ì† ë°œìƒí•œë‹¤ë©´, ì‘ì—…ì„ ë°˜ë³µí•´ì•¼ í•˜ëŠ” ì´ìŠˆê°€ ìƒê¸´ë‹¤</p></li><li><p>ê´€ë¦¬í•´ì•¼í•  manifestíŒŒì¼ì´ 3ë°°ê°€ ë˜ì–´ë²„ë¦¼</p></li><li><p>ê²¹ì¹˜ëŠ” ë‚´ìš©ì´ ëŒ€ë¶€ë¶„ì¸ë°, ì´ê²ƒì„ baseë¼ê³  í•˜ê³ , í™˜ê²½ë§ˆë‹¤ ì°¨ì´ê°€ ë‚˜ëŠ” ë¶€ë¶„ì„ overlayë¡œ ê´€ë¦¬í•´ë³´ì</p></li><li><p>kustomizeëŠ” ì´ë ‡ê²Œ, ê³µí†µ ë¶€ë¶„ê³¼ ì°¨ì´ê°€ ë‚˜ëŠ” ë¶€ë¶„ì„ ë¶„ë¦¬í•˜ëŠ” ê²ƒì—ì„œ ì‹œì‘í•œë‹¤.</p></li><li><p>baseì™€ overlayë¥¼ ë¨¸ì§€í•˜ë©´ì„œ í™˜ê²½ë§ˆë‹¤ ë‹¤ë¥¸ specì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•˜ê²Œ ëœë‹¤.</p></li><li><p>ê°œë°œ í™˜ê²½ë§ˆë‹¤ ì†ŒìŠ¤ êµ¬ë¶„í•˜ì—¬ configmap, secretìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤</p></li><li><p>resourceì´ë¦„ì— prefixë¥¼ ì¶”ê°€í•˜ëŠ” ê¸°ëŠ¥ë„ ì œê³µí•œë‹¤</p></li><li><p>Kustomizeë¥¼ ì ìš©í•´ì„œ ì§ì ‘ ìˆ˜ë™ìœ¼ë¡œ ë°°í¬í•  ìˆ˜ë„ ìˆë‹¤</p><ul><li>GitOpsë¡œ ArgoCDë‚˜ Fluxë“±ì„ ì‚¬ìš©í•´ì„œ ë°°í¬ê³¼ì •ì„ ìë™í™” í•œë‹¤.</li><li>Flux ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ê°€ ì„¤ì • ì†ŒìŠ¤(git..)ì™€ ë™ê¸°í™”ëœ ìƒíƒœë¥¼ ìœ ì§€í•˜ê³  ìƒˆ ì½”ë“œê°€ ì¶”ê°€ë˜ë©´ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•´ì£¼ëŠ” ë„êµ¬</li></ul><p><br></br></p><h3 id="Helm"><a href="#Helm" class="headerlink" title="Helm"></a>Helm</h3></li><li><p>ì¿ ë²„ë„¤í‹°ìŠ¤ íŒ¨í‚¤ì§€ ê´€ë¦¬ë¥¼ ë„ì™€ì¤Œ</p><ul><li>npm, pipì™€ ë¹„ìŠ·í•œ ì—­í• </li></ul></li><li><p>Chart: í—¬ë¦„ íŒ¨í‚¤ì§€</p><ul><li>kubernetesë¥¼ ì„¤ëª…í•˜ëŠ” íŒŒì¼ë“¤ì˜ ì§‘í•©</li><li>kubernetesì—ì„œ appì´ ë™ì‘í•˜ê¸° ìœ„í•œ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë“¤ì´ í¬í•¨ë˜ì–´ ìˆìŒ</li></ul></li><li><p>Repository</p><ul><li>ì°¨íŠ¸ ì €ì¥ì†Œ, ì°¨íŠ¸ë¥´ ëª¨ì•„ë‘ê³  ê³µìœ í•¨</li></ul></li><li><p>Release</p><ul><li>kubernetes í´ëŸ¬ìŠ¤í„°ì—ì„œ êµ¬ë™ë˜ëŠ” ì°¨íŠ¸ ì¸ìŠ¤í„´ìŠ¤</li><li>ë™ì¼í•œ ì°¨íŠ¸ë¥¼ ì—¬ëŸ¬ë²ˆ ì„¤ì¹˜í•  ìˆ˜ ìˆê³  ì´ëŠ” ìƒˆ ë¦´ë¦¬ì¦ˆë¡œ ê´€ë¦¬ë©ë‹ˆë‹¤.</li><li>ë¦´ë¦¬ì¦ˆ ë  ë•Œ íŒ¨í‚¤ì§€ëœ ì°¨íŠ¸ì™€ configê°€ ê²°í•©ë˜ì–´ ì •ìƒ ì‹¤í–‰ ë©ë‹ˆë‹¤</li></ul></li><li><p>ì‘ì—… ìˆœì„œ</p><ul><li>Helm ì°¨íŠ¸ë¥¼ ì›í•˜ëŠ” ë ˆí¬ì—ì„œ ê²€ìƒ‰ í›„ ì„¤ì¹˜ â†’ ê° ì„¤ì¹˜ì— ë”°ë¥¸ ìƒˆë¡œìš´ ë¦´ë¦¬ì¦ˆ ìƒì„±</li></ul><p><br></br></p><h3 id="Argo-CD"><a href="#Argo-CD" class="headerlink" title="Argo CD"></a>Argo CD</h3></li><li><p>Continuous Delivery</p><ul><li>ì§€ì†ì  í†µí•©ì„ í†µí•´ í…ŒìŠ¤íŠ¸ ë˜ê³  ë¹Œë“œëœ ì½”ë“œë¥¼ ì§€ì†ì ìœ¼ë¡œ ì „ë‹¬í•˜ì—¬ ì œí’ˆì˜ ì§ˆì  í–¥ìƒì„ í–¥í•˜ëŠ” ê²ƒ</li></ul></li><li><p>ì¿ ë²„ë„¤í‹°ìŠ¤ ìš´ì˜ê³¼ ê´€ë ¨ëœ manifest íŒŒì¼ ê´€ë¦¬í•˜ê³  ìˆëŠ” ì›ê²© ë ˆí¬ì§€í† ë¦¬ë¥¼ ì¡°íšŒ</p></li><li><p>ë³€ê²½ ë‚´ì—­ì´ ê°ì§€ë˜ë©´ ì´ë¥¼ ë°˜ì˜í•˜ì—¬ ë°°í¬í•¨(Auto Sync ì˜µì…˜)</p></li><li><p>íˆìŠ¤í† ë¦¬ë¥¼ ì €ì¥í•˜ê³ , ë¡¤ë°±ì´ ê°€ëŠ¥í•¨</p><p><img src="/images/eks-workshop/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2021-11-03_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.46.28.png" alt="Dev, Ops Pipeline"></p></li><li><p>argoì˜ ì¥ì </p><ul><li>ì‹¤í–‰ ë‹¨ìœ„ê°€ ì»¨í…Œì´ë„ˆê¸° ë•Œë¬¸ì— ê³ ë¦½ì„±ì´ ë†’ë‹¤<ul><li>ê°œë³„ ì‘ì—…ë§ˆë‹¤ ì‹¤í–‰í™˜ê²½ì´ ë‹¤ì–‘í•œ ê²½ìš° ì‹¤í–‰í™˜ê²½ì´ ì„ì´ì§€ ì•Šê³  ë‹¨ë…ì ì¸ í™˜ê²½ì„ ì œê³µí•  ìˆ˜ ìˆë‹¤.</li><li>í•˜ë‚˜ì˜ ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” Jobì„ ë‹¨ì¼í•˜ê²Œ ê°œë°œí•  ìˆ˜ ìˆì–´ ì¬ì‚¬ìš©ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.<ul><li>ë°ì´í„° ì…ì¶œë§Œ ì˜ ë§ì¶° ë†“ìœ¼ë©´ ë‹¨ì¼ ì—­í• ì„ í•˜ëŠ” Jobì„ ì—¬ëŸ¬ê°œ ë§Œë“¤ê³ , ë¸”ë¡ì²˜ëŸ¼ ìŒ“ì„ ìˆ˜ ìˆë‹¤.</li></ul></li></ul></li></ul></li><li><p>argoì˜ ë‹¨ì </p><ul><li>Podë¥¼ ìƒì„±í•˜ê³  ì‚­ì œí•˜ëŠ” ë¹„ìš©ì´ í¬ë‹¤.<ul><li>ê°„ë‹¨í•œ ì‘ì—…ì´ë¼ë©´ í”„ë¡œì„¸ìŠ¤ ë˜ëŠ” ìŠ¤ë ˆë“œ ë ˆë²¨ì—ì„œ ì²˜ë¦¬í•˜ëŠ” ê²Œ íš¨ìœ¨ì ì¼ ë•Œê°€ ìˆë‹¤</li></ul></li><li>ê° ìŠ¤í…ë§ˆë‹¤ ê°œë³„ì ì¸ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•´ì„œ Jobê°„ì— ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ê³µìœ í•˜ëŠ” ê²ƒì´ í˜ë“¤ë‹¤.<ul><li>Pod ë‚´ë¶€ ì»¨í…Œì´ë„ˆ ê°„ì—ë§Œ volumeê³µìœ ê°€ ê°€ëŠ¥í•˜ë‹¤</li></ul></li></ul></li><li><p>ë°ì´í„° íŒŒì´í”„ë¼ì¸ ë° ê¸°ê³„í•™ìŠµ ëª¨ë¸ í›ˆë ¨ì— í™œìš© ê°€ëŠ¥</p><ul><li>ë°ì´í„° íƒ€ì…ì— ë”°ë¼ ì¶”ì¶œí•˜ëŠ” ì†ŒìŠ¤ì— ë”°ë¼ ìƒì´í•œ ì‹¤í–‰í™˜ê²½<ul><li>ë°ì´í„° ì¶”ì¶œ - Apache sqoop(Java runtime, hadoop ë¼ì´ë¸ŒëŸ¬ë¦¬ í•„ìš”)<ul><li>S3 - aws cli, boto3â€¦</li></ul></li><li>ML<ul><li>python</li><li>R</li></ul></li></ul></li><li>ê³ ë¦½ì„±ì´ êµ‰ì¥íˆ ì¢‹ê¸° ë•Œë¬¸ì— MLì›Œí¬í”Œë¡œìš° íˆ´ë¡œë„ í™œìš©ì´ ê°€ëŠ¥í•¨</li></ul><p><br></br></p><h2 id="GitOps-ì‹¤ìŠµ"><a href="#GitOps-ì‹¤ìŠµ" class="headerlink" title="GitOps ì‹¤ìŠµ"></a>GitOps ì‹¤ìŠµ</h2></li><li><p>ëª©í‘œí•˜ëŠ” CI/CD íŒŒì´í”„ë¼ì¸ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p><img src="/images/eks-workshop/Untitled 8.png" alt="CI/CD" style="zoom:50%;" /></li><li><p>ê°œë°œì—ì„œ ì‘ì—…í•œ ë‚´ìš©ì€ Github Actionì„ í†µí•´ ECRì— ì—…ë¡œë“œ ë˜ê³ , ì´ê²ƒì„ í´ëŸ¬ìŠ¤í„° Opsìª½ì—ì„œ Pullì„ ë°›ì•„ k8sì— argo CDë¥¼ ì‚¬ìš©í•´ ë°°í¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.</p></li><li><p>í•„ìš”í•œ ë ˆí¬ëŠ” ë‘ ê°€ì§€ ì…ë‹ˆë‹¤. applicationìš©ê³¼ k8s ë©”ë‹ˆí˜ìŠ¤íŠ¸ ê´€ë¦¬ìš© ë ˆí¬ì…ë‹ˆë‹¤.</p><ul><li><strong><em>front-app-repo</em></strong>: Frontend ì†ŒìŠ¤ê°€ ìœ„ì¹˜í•œ ë ˆíŒŒì§€í† ë¦¬</li><li><strong><em>k8s-manifest-repo</em></strong>: K8S ê´€ë ¨ ë©”ë‹ˆí˜ìŠ¤íŠ¸ê°€ ìœ„ì¹˜í•œ ë ˆíŒŒì§€í† ë¦¬</li></ul></li><li><p>git remoteë¥¼ ìœ„í•´ì„œ cloud9ì— ìˆëŠ” amazon-eks-frontend ë””ë ‰í† ë¦¬ gitì„ ì´ˆê¸°í™” í•©ë‹ˆë‹¤.</p><ul><li>cd ~/environment/amazon-eks-frontend<br>rm -rf .git</li><li>ì†ŒìŠ¤ íŒŒì¼ë“¤ì„ í‘¸ì‹œí•©ë‹ˆë‹¤.<ul><li>cd ~/environment/amazon-eks-frontend<br>git init<br>git add .<br>git commit -m â€œfirst commitâ€<br>git branch -M main<br>git remote add origin <a href="https://github.com/jinseo-jang/front-app-repo.git">https://github.com/jinseo-jang/front-app-repo.git</a><br>git push -u origin main</li></ul></li></ul></li><li><p>CI/CD íŒŒì´í”„ë¼ì¸ì„ ìœ„í•´ì„œëŠ” ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.</p><ul><li><p>front appì„ ë¹Œë“œí•˜ê³  docker imageë¡œ ë§Œë“¤ì–´ì§€ë©´, ì´ê²ƒì„ ECRë¡œ í‘¸ì‹œí•´ì•¼ í•©ë‹ˆë‹¤.</p></li><li><p>ì´ ê³¼ì •ì€ github Actionìœ¼ë¡œ ì´ë£¨ì–´ì§€ê¸° ë•Œë¬¸ì— ìµœì†Œí•œì˜ ê¶Œí•œì„ ë„£ì–´ì¤ë‹ˆë‹¤.</p><ul><li><p>IAM  user ìƒì„±</p><ul><li>aws iam create-user â€“user-name github-action</li></ul></li><li><p>ECR policy ìƒì„±</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cd</span> <span class="string">~/environmentcat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">ecr-policy.json&#123;</span>    <span class="string">"Version"</span><span class="string">:</span> <span class="string">"2012-10-17"</span><span class="string">,</span>    <span class="string">"Statement"</span><span class="string">:</span> <span class="string">[</span>        <span class="string">&#123;</span>            <span class="string">"Sid"</span><span class="string">:</span> <span class="string">"AllowPush"</span><span class="string">,</span>            <span class="string">"Effect"</span><span class="string">:</span> <span class="string">"Allow"</span><span class="string">,</span>            <span class="string">"Action"</span><span class="string">:</span> <span class="string">[</span>                <span class="string">"ecr:GetDownloadUrlForLayer"</span><span class="string">,</span>                <span class="string">"ecr:BatchGetImage"</span><span class="string">,</span>                <span class="string">"ecr:BatchCheckLayerAvailability"</span><span class="string">,</span>                <span class="string">"ecr:PutImage"</span><span class="string">,</span>                <span class="string">"ecr:InitiateLayerUpload"</span><span class="string">,</span>                <span class="string">"ecr:UploadLayerPart"</span><span class="string">,</span>                <span class="string">"ecr:CompleteLayerUpload"</span>            <span class="string">],</span>            <span class="string">"Resource"</span><span class="string">:</span> <span class="string">"arn:aws:ecr:ap-northeast-2:$&#123;ACCOUNT_ID&#125;:repository/demo-frontend"</span>        <span class="string">&#125;,</span>        <span class="string">&#123;</span>            <span class="string">"Sid"</span><span class="string">:</span> <span class="string">"GetAuthorizationToken"</span><span class="string">,</span>            <span class="string">"Effect"</span><span class="string">:</span> <span class="string">"Allow"</span><span class="string">,</span>            <span class="string">"Action"</span><span class="string">:</span> <span class="string">[</span>                <span class="string">"ecr:GetAuthorizationToken"</span>            <span class="string">],</span>            <span class="string">"Resource"</span><span class="string">:</span> <span class="string">"*"</span>        <span class="string">&#125;</span>    <span class="string">]&#125;EOF</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>ì´ íŒŒì¼ì„ ì‚¬ìš©í•´ IAM ì •ì±…ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ë¦„ì€ <code>ecr-policy</code> ì…ë‹ˆë‹¤.</p><ul><li>aws iam create-policy â€“policy-name ecr-policy â€“policy-document file://ecr-policy.json</li></ul></li><li><p>ë§Œë“  ì •ì±…ì„ IAM ìœ ì €ì—ê²Œ ë„£ì–´ì¤ë‹ˆë‹¤.</p><ul><li>aws iam attach-user-policy â€“user-name github-action â€“policy-arn arn:aws:iam::${ACCOUNT_ID}:policy/ecr-policy</li></ul></li></ul></li><li><p>Github Secret ìƒì„±</p><ul><li>ì´ì œ github actionì—ì„œ ì‚¬ìš©í•  AWS credential, github tokenì„ ì„¤ì •í•´ì¤ë‹ˆë‹¤.</li><li>AWS credential ìƒì„±<ul><li>ì´ ë˜í•œ ìµœì†Œí•œì˜ ê¶Œí•œì„ ê°–ëŠ” ìœ ì €ë¥¼ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. ì´ë¦„ì€ <code>github-action</code>ì…ë‹ˆë‹¤.</li><li>aws iam create-access-key â€“user-name github-action</li><li>ìƒì„±ëœ accesskeyì™€ secretkeyë¥¼ ì €ì¥í•´ë†“ìŠµë‹ˆë‹¤.</li></ul></li><li>Githubìœ¼ë¡œ ë“¤ì–´ê°€ì„œ PATë¥¼ ìƒì„±í•´ì£¼ê³  ì €ì¥í•´ë†“ìŠµë‹ˆë‹¤.</li><li>front-app-repoë¡œ ë“¤ì–´ê°€ Settingsì— Secretì„ ì„ íƒí•©ë‹ˆë‹¤.<ul><li>ì´ ë ˆí¬ì˜ secretì„ ë„£ì–´ì¤ë‹ˆë‹¤.</li><li>Nameì€ <code>ACTION_TOKEN</code></li><li>ValueëŠ” PATë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤.</li><li>ë§ˆì°¬ê°€ì§€ë¡œ <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code> ë„ ë„£ì–´ì¤ë‹ˆë‹¤.</li></ul></li></ul></li><li><p>Github Actionì„ ìœ„í•œ workflow ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p><ul><li><p>github actionì„ ìƒì„±í•˜ë©´ .github/workflowsì— ë§Œë“¤ì–´ì§€ê¸° ë•Œë¬¸ì— ê°™ì€ ë””ë ‰í† ë¦¬ë¥¼ ë¨¼ì € ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.</p><ul><li>cd ~/environment/amazon-eks-frontend<br>mkdir -p ./.github/workflows</li></ul></li><li><p>ì‹¤ì œ build ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. <code>build.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cd</span> <span class="string">~/environment/amazon-eks-frontend/.github/workflowscat</span> <span class="string">&gt; build.yaml &lt;&lt;EOFname: Build Fronton:  push:    branches: [ main ]jobs:  build:    runs-on: ubuntu-latest    steps:      - name: Checkout source code        uses: actions/checkout@v2      - name: Check Node v        run: node -v      - name: Build front        run: |          npm install          npm run build      - name: Configure AWS credentials        uses: aws-actions/configure-aws-credentials@v1        with:          aws-access-key-id: \$<span class="template-variable">&#123;&#123; secrets.AWS_ACCESS_KEY_ID &#125;&#125;</span>          aws-secret-access-key: \$<span class="template-variable">&#123;&#123; secrets.AWS_SECRET_ACCESS_KEY &#125;&#125;</span>          aws-region: $AWS_REGION      - name: Login to Amazon ECR        id: login-ecr        uses: aws-actions/amazon-ecr-login@v1      - name: Get image tag(verion)        id: image        run: |          VERSION=\$(echo \$<span class="template-variable">&#123;&#123; github.sha &#125;&#125;</span> | cut -c1-8)          echo VERSION=\$VERSION          echo "::set-output name=version::\$VERSION"      - name: Build, tag, and push image to Amazon ECR        id: image-info        env:          ECR_REGISTRY: \$<span class="template-variable">&#123;&#123; steps.login-ecr.outputs.registry &#125;&#125;</span>          ECR_REPOSITORY: demo-frontend          IMAGE_TAG: \$<span class="template-variable">&#123;&#123; steps.image.outputs.version &#125;&#125;</span>        run: |          echo "::set-output name=ecr_repository::\$ECR_REPOSITORY"          echo "::set-output name=image_tag::\$IMAGE_TAG"          docker build -t \$ECR_REGISTRY/\$ECR_REPOSITORY:\$IMAGE_TAG .          docker push \$ECR_REGISTRY/\$ECR_REPOSITORY:\$IMAGE_TAGEOF</span></span><br></pre></td></tr></table></figure><ul><li>IMAGE_TAGê°’ì€ ëœë¤ìœ¼ë¡œ ìƒì„±ë˜ì–´ ECRë¡œ Pushë©ë‹ˆë‹¤.<ul><li>$</li></ul></li></ul></li><li><p>github actionì´ ì˜ ë™ì‘í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•©ë‹ˆë‹¤.</p><ul><li>cd ~/environment/amazon-eks-frontend<br>git add .<br>git commit -m â€œAdd github action build scriptâ€<br>git push origin main</li><li></li></ul></li></ul></li><li><p>Kustomize ì‚¬ìš©ì„ ìœ„í•œ k8s manifest êµ¬ì¡°í™”</p><ul><li><p>ì•ì„œ ì„¤ëª…í•œ ëŒ€ë¡œ, kustomizeëŠ” manifestë¥¼ baseì™€ overlaysë¡œ ë‚˜ë‰˜ì–´ ê´€ë¦¬í•©ë‹ˆë‹¤.</p></li><li><p>ì´ êµ¬ì¡°ë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cd</span> <span class="string">~/environmentmkdir</span> <span class="bullet">-p</span> <span class="string">./k8s-manifest-repo/basemkdir</span> <span class="bullet">-p</span> <span class="string">./k8s-manifest-repo/overlays/devcd</span> <span class="string">~/environment/manifestscp</span> <span class="string">*.yaml</span> <span class="string">../k8s-manifest-repo/basecd</span> <span class="string">../k8s-manifest-repo/basels</span> <span class="bullet">-rlt</span></span><br></pre></td></tr></table></figure></li><li><p><em><code>base</code></em> : kubernetes manifest ì›ë³¸ì´ ìœ„ì¹˜í•œ ë””ë ‰í† ë¦¬ ì…ë‹ˆë‹¤. ì´ ì•ˆì— ìœ„ì¹˜í•œ manifest ë“¤ì€ <em><code>overlays</code></em> ì•„ë˜ì— ìœ„ì¹˜í•œ <strong>kustomize.yaml</strong> íŒŒì¼ì— ë‹´ê¸´ <strong>ì‚¬ìš©ì ì§€ì • ì„¤ì •</strong> ë‚´ìš©ì— ë”°ë¼ ë³€ê²½ë©ë‹ˆë‹¤.</p></li><li><p><em><code>overlays</code></em> : <strong>ì‚¬ìš©ì ì…ë§›ì— ë§ëŠ”</strong> ì„¤ì • ê°’ì´ ìœ„ì¹˜í•œ ë””ë ‰í† ë¦¬ ì…ë‹ˆë‹¤. ì´ ì„¤ì •ì€ <strong>kustomize.yaml</strong> ì— ë‹´ìŠµë‹ˆë‹¤. ì´ í•˜ìœ„ì— ìˆëŠ” <em><code>dev</code></em> ë””ë ‰í† ë¦¬ëŠ” ì‹¤ìŠµì„ ìœ„í•´ ë§Œë“  ê²ƒìœ¼ë¡œ, ê°œë°œ í™˜ê²½ì— ì ìš©í•  ì„¤ì • íŒŒì¼ì„ ëª¨ì•„ ë‘ê¸° ìœ„í•¨ ì…ë‹ˆë‹¤.</p></li></ul></li><li><p>Kustomize manifest ìƒì„±</p><ul><li><p>frontend appì— ëŒ€í•œ ë°°í¬ êµ¬ì„±ì„ í•  ê²ƒì´ê¸° ë•Œë¬¸ì— frontendë¶€ë¶„ë§Œ ì‘ì—… í•˜ê² ìŠµë‹ˆë‹¤.</p><ul><li>frontend-deployment.yaml ê³¼ frontend-service.yaml íŒŒì¼ì„ kustomize ë¥¼ í†µí•´ ë°°í¬ ì‹œì ì— ì˜ë„í•œ ê°’(e.g. Image Tag)ì„ ë°˜ì˜ í• ê²ë‹ˆë‹¤</li><li>ë°˜ì˜ë  ê°’<ul><li><strong><code>metadata.labels</code>:</strong> <code>&quot;env: dev&quot;</code>ì„ frontend-deployment.yaml, frontend-service.yaml ì— ì¼ê´„ ë°˜ì˜ í•©ë‹ˆë‹¤.</li><li><strong><code>spec.selector</code></strong> : <code>&quot;select.app: frontend-fargate&quot;</code> ë¥¼ frontend-deployment.yaml, frontend-service.yaml ì— ì¼ê´„ ë°˜ì˜ í•©ë‹ˆë‹¤.</li><li><strong><code>spec.template.spec.containers.image</code></strong> : <code>&quot;image: &quot;</code> ê°’ì„ ìƒˆë¡­ê²Œ ë³€ê²½ëœ Image Tag ì •ë³´ë¡œ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.</li></ul></li></ul></li><li><p>kustomize.yaml íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ ê´€ë¦¬ ë³€ê²½í•  manifestëŒ€ìƒì„ ì •ì˜í•©ë‹ˆë‹¤.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cd</span> <span class="string">~/environment/k8s-manifest-repo/base</span></span><br><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">kustomization.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">kustomize.config.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Kustomization</span></span><br><span class="line"><span class="attr">resources:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">frontend-deployment.yaml</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">frontend-service.yaml</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li><li><p>overlays/dev ë¶€ë¶„ì— ë°”ê¿€ ë¶€ë¶„ì„ ì •ì˜í•©ë‹ˆë‹¤.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cd</span> <span class="string">~/environment/k8s-manifest-repo/overlays/dev</span></span><br><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">front-deployment-patch.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">demo-frontend</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    env:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    matchLabels:</span></span><br><span class="line"><span class="attr">      app:</span> <span class="string">frontend-fargate</span></span><br><span class="line"><span class="attr">  template:</span></span><br><span class="line"><span class="attr">    metadata:</span></span><br><span class="line"><span class="attr">      labels:</span></span><br><span class="line"><span class="attr">        app:</span> <span class="string">frontend-fargate</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cd</span> <span class="string">~/environment/k8s-manifest-repo/overlays/devcat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">front-service-patch.yamlapiVersion:</span> <span class="attr">v1kind:</span> <span class="attr">Servicemetadata:</span>  <span class="attr">name:</span> <span class="string">demo-frontend</span>  <span class="attr">annotations:</span>    <span class="string">alb.ingress.kubernetes.io/healthcheck-path:</span> <span class="string">"/"</span>  <span class="attr">labels:</span>    <span class="attr">env:</span> <span class="attr">devspec:</span>  <span class="attr">selector:</span>    <span class="attr">app:</span> <span class="string">frontend-fargateEOF</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>ë§ˆì§€ë§‰ìœ¼ë¡œ ìœ„ì—ì„œ ì„¤ì • í•œ íŒŒì¼ë“¤(ê°’)ì„ ì‚¬ìš©í•˜ê³  frontend app ë¹Œë“œì— ë”°ë¼ ë§Œë“¤ì–´ì§„ ìƒˆë¡œìš´ <strong>Image Tag</strong> ë¥¼ ì‚¬ìš© í•˜ê² ë‹¤ê³  ì •ì˜ í•˜ê² ìŠµë‹ˆë‹¤. êµ¬ì²´ì ìœ¼ë¡œëŠ”, <code>name</code> ì— ì§€ì •ëœ imageëŠ” <code>newName</code>ì˜ imageì™€ <code>newTag</code>ì˜ ê°’ìœ¼ë¡œ ì‚¬ìš© í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ ì…ë‹ˆë‹¤.</p></li><li><p>ì´ë¥¼ í™œìš©í•´ <code>newTag</code> ê°’ì„ ë³€ê²½í•´ ìƒˆë¡œìš´ ë°°í¬ê°€ ì´ë£¨ì–´ì§ˆ ë•Œ ë§ˆë‹¤ ì´ë¥¼ kubernetes í´ëŸ¬ìŠ¤í„°ê¹Œì§€ ë³€ê²½ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cd</span> <span class="string">~/environment/k8s-manifest-repo/overlays/devcat</span> <span class="string">&lt;&lt;EOF&gt;</span> <span class="string">kustomization.yamlapiVersion:</span> <span class="string">kustomize.config.k8s.io/v1beta1kind:</span> <span class="attr">Kustomizationimages:-</span> <span class="attr">name:</span> <span class="string">$&#123;ACCOUNT_ID&#125;.dkr.ecr.ap-northeast-2.amazonaws.com/demo-frontend</span>  <span class="attr">newName:</span> <span class="string">$&#123;ACCOUNT_ID&#125;.dkr.ecr.ap-northeast-2.amazonaws.com/demo-frontend</span>  <span class="attr">newTag:</span> <span class="attr">abcdefgresources:-</span> <span class="string">../../basepatchesStrategicMerge:-</span> <span class="string">front-deployment-patch.yaml-</span> <span class="string">front-service-patch.yamlEOF</span></span><br></pre></td></tr></table></figure><ul><li>ì´ìƒ -patch.yaml íŒŒì¼ì— ì •ì˜í•œ ë‚´ìš©ë“¤ì€ ë°°í¬ ê³¼ì •ì—ì„œ kustomize ì— ì˜í•´ ìë™ìœ¼ë¡œ kubernetes manifest ì— ë°˜ì˜ ë©ë‹ˆë‹¤.</li><li>ì´ë¯¸ì§€ì˜ íƒœê·¸ëª…ì´ abcdefgë¡œ ë‚˜ì˜¤ë©´ ì„±ê³µì…ë‹ˆë‹¤.</li></ul></li><li><p>kubernetes manifest ìš© github repoë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.</p><ul><li>k8s-manifefst-repo <strong>**</strong>ìƒì„±</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cd</span> <span class="string">~/environment/k8s-manifest-repo/git</span> <span class="string">initgit</span> <span class="string">add</span> <span class="string">.git</span> <span class="string">commit</span> <span class="bullet">-m</span> <span class="string">"first commit"</span><span class="string">git</span> <span class="string">branch</span> <span class="bullet">-M</span> <span class="string">maingit</span> <span class="string">remote</span> <span class="string">add</span> <span class="string">origin</span> <span class="attr">https://github.com/jinseo-jang/k8s-manifest-repo.gitgit</span> <span class="string">push</span> <span class="bullet">-u</span> <span class="string">origin</span> <span class="string">main</span></span><br></pre></td></tr></table></figure></li><li><p>Argo CD ì„¤ì¹˜</p><ul><li>kubectl create namespace argocd<br>kubectl apply -n argocd -f <a href="https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml">https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml</a></li></ul></li><li><p>Argo CD cli ì„¤ì¹˜</p><ul><li>cd ~/environment<br>VERSION=$(curl â€“silent â€œ<a href="https://api.github.com/repos/argoproj/argo-cd/releases/latest">https://api.github.com/repos/argoproj/argo-cd/releases/latest</a>â€œ | grep â€˜â€œtag_nameâ€â€˜ | sed -E â€˜s/.*â€([^â€]+)â€.*/\1/â€˜)</li><li>sudo curl â€“silent â€“location -o /usr/local/bin/argocd <a href="https://github.com/argoproj/argo-cd/releases/download/$VERSION/argocd-linux-amd64">https://github.com/argoproj/argo-cd/releases/download/$VERSION/argocd-linux-amd64</a></li><li>sudo chmod +x /usr/local/bin/argocd</li></ul></li><li><p>Argo CDëŠ” í¼ë¸”ë¦­í•˜ê²Œ ë…¸ì¶œë˜ì§€ ì•Šì§€ë§Œ, ELBë¥¼ í†µí•´ ì ‘ì† ê°€ëŠ¥í•˜ë„ë¡ ë§Œë“¤ê² ìŠµë‹ˆë‹¤.</p><ul><li>kubectl patch svc argocd-server -n argocd -p â€˜{â€œspecâ€: {â€œtypeâ€: â€œLoadBalancerâ€}}â€™</li></ul></li><li><p>ì ‘ì†í•  urië¥¼ ì–»ìŠµë‹ˆë‹¤.</p><ul><li>export ARGOCD_SERVER=<code>kubectl get svc argocd-server -n argocd -o json | jq --raw-output .status.loadBalancer.ingress[0].hostname</code><br>echo $ARGOCD_SERVER</li></ul></li><li><p>ê¸°ë³¸ usernameì€ adminì…ë‹ˆë‹¤. passwordëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p><ul><li>ARGO_PWD=<code>kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath=&quot;{.data.password}&quot; | base64 -d</code><br>echo $ARGO_PWD</li></ul></li><li><p>argo login</p><img src="/images/eks-workshop/Untitled 9.png" alt="loginí™”ë©´" style="zoom:60%;" /></li><li><p>ë¡œê·¸ì¸ í›„ ì¢Œ ìƒë‹¨ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • ë©”ë‰´ë¥¼ í´ë¦­í•˜ê³  ìƒˆ applicationì„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.</p></li><li><p><strong>Application Name</strong> ì€ <code>eksworkshop-cd-pipeline</code>, <strong>Project</strong>ëŠ” <code>default</code>ë¥¼ ì…ë ¥ í•©ë‹ˆë‹¤.</p></li><li><p><strong>SOURCE</strong> ì„¹ì…˜ì˜ <strong>Repository URL</strong> ì—ëŠ” ì•ì„œ ìƒì„±í•œ <strong><code>k8s-manifest-repo</code>ì˜ git ì£¼ì†Œ</strong>, <strong>Revision</strong> ì—ëŠ” <code>main</code>, <strong>Path</strong> ì—ëŠ” <code>overlays/dev</code>ë¥¼ ì…ë ¥ í•©ë‹ˆë‹¤.</p></li><li><p><strong>DESTINATION</strong> ì„¹ì…˜ì˜ <strong>Cluster URL</strong>ì—ëŠ” <code>https://kubernetes.default.svc</code>, <strong>Namespace</strong> ì—ëŠ” <code>default</code>ë¥¼ ì…ë ¥ í•˜ê³  ìƒë‹¨ì˜ <strong>Create</strong> ë¥¼ í´ë¦­ í•©ë‹ˆë‹¤.</p></li><li><p>eksworkshop-cd-pipelineì´ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.</p></li><li><p>Kustomize ë¹Œë“œ ë‹¨ê³„ ì¶”ê°€</p><ul><li>github actionì—ì„œ kustomizeë¥¼ ì´ìš©í•˜ì—¬ image tagë¥¼ ì—…ë°ì´íŠ¸ í•œ í›„ k8s-manifest-repoì— ì»¤ë°‹ í‘¸ì‹œí•˜ëŠ” ë‹¨ê³„ë¥¼ ì¶”ê°€ í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.</li><li>ì´ ë‹¨ê³„ê°€ ë™ì‘í•˜ë©´, argo CDê°€ k8s-manifest-repoë¥¼ ì„¼ì‹± í•˜ë‹¤ê°€ ìƒˆë¡œìš´ ë³€ê²½ì‚¬í•­ì´ ê°ì§€ë˜ë©´ Kustomize build ì‘ì—…ì„ ìˆ˜í–‰í•´ ìƒˆë¡œìš´ kubernetes manifestë¥¼ eksí´ëŸ¬ìŠ¤í„°ì— ë°°í¬í•©ë‹ˆë‹¤.</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cd</span> <span class="string">~/environment/amazon-eks-frontend/.github/workflows</span></span><br><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;EOF&gt;&gt;</span> <span class="string">build.yaml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">      - name:</span> <span class="string">Setup</span> <span class="string">Kustomize</span></span><br><span class="line"><span class="attr">        uses:</span> <span class="string">imranismail/setup-kustomize@v1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">      - name:</span> <span class="string">Checkout</span> <span class="string">kustomize</span> <span class="string">repository</span></span><br><span class="line"><span class="attr">        uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line"><span class="attr">        with:</span></span><br><span class="line"><span class="attr">          repository:</span> <span class="string">jinseo-jang/k8s-manifest-repo</span></span><br><span class="line"><span class="attr">          ref:</span> <span class="string">main</span></span><br><span class="line"><span class="attr">          token:</span> <span class="string">\$&#123;&#123;</span> <span class="string">secrets.ACTION_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line"><span class="attr">          path:</span> <span class="string">k8s-manifest-repo</span></span><br><span class="line"></span><br><span class="line"><span class="attr">      - name:</span> <span class="string">Update</span> <span class="string">Kubernetes</span> <span class="string">resources</span></span><br><span class="line"><span class="attr">        run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          echo \$<span class="template-variable">&#123;&#123; steps.login-ecr.outputs.registry &#125;&#125;</span></span></span><br><span class="line"><span class="string">          echo \$<span class="template-variable">&#123;&#123; steps.image-info.outputs.ecr_repository &#125;&#125;</span></span></span><br><span class="line"><span class="string">          echo \$<span class="template-variable">&#123;&#123; steps.image-info.outputs.image_tag &#125;&#125;</span></span></span><br><span class="line"><span class="string">          cd k8s-manifest-repo/overlays/dev/</span></span><br><span class="line"><span class="string">          kustomize edit set image \$<span class="template-variable">&#123;&#123; steps.login-ecr.outputs.registry&#125;&#125;</span>/\$<span class="template-variable">&#123;&#123; steps.image-info.outputs.ecr_repository &#125;&#125;</span>=\$<span class="template-variable">&#123;&#123; steps.login-ecr.outputs.registry&#125;&#125;</span>/\$<span class="template-variable">&#123;&#123; steps.image-info.outputs.ecr_repository &#125;&#125;</span>:\$<span class="template-variable">&#123;&#123; steps.image-info.outputs.image_tag &#125;&#125;</span></span></span><br><span class="line"><span class="string">          cat kustomization.yaml</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span><span class="attr">      - name:</span> <span class="string">Commit</span> <span class="string">files</span></span><br><span class="line"><span class="attr">        run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          cd k8s-manifest-repo</span></span><br><span class="line"><span class="string">          git config --global user.email "github-actions@github.com"</span></span><br><span class="line"><span class="string">          git config --global user.name "github-actions"</span></span><br><span class="line"><span class="string">          git commit -am "Update image tag"</span></span><br><span class="line"><span class="string">          git push -u origin main</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></li><li><p>ì†ŒìŠ¤ë¥¼ ë§Œë“¤ì—ˆìœ¼ë©´, ì»¤ë°‹ í‘¸ì‹œ í•´ì¤ë‹ˆë‹¤.</p><ul><li>cd ~/environment/amazon-eks-frontend<br>git add .<br>git commit -m â€œAdd kustomize image editâ€<br>git push -u origin main</li></ul></li><li><p>github actionì´ ì˜ ë™ì‘í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ê³ , k8s-manifest-repoì— ìƒˆ manifestê°€ ì»¤ë°‹ ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p></li><li><p>ì´ë ‡ê²Œ ìƒˆ manifestê°€ ë°°í¬ë˜ë©´, argo CDì—ì„œ ê°ì§€í•˜ì—¬, Sync Statusê°€ ì—…ë°ì´íŠ¸ ë©ë‹ˆë‹¤.</p><ul><li>ì•„ë¬´ ì„¤ì •ì„ í•˜ì§€ ì•Šì•˜ë‹¤ë©´, <strong>CURRENT SYNC STATUS</strong>ì˜ ê°’ì´ <strong>Out of Synced</strong> ì…ë‹ˆë‹¤.</li><li>git repository ê°€ ë³€ê²½ë˜ë©´ ìë™ìœ¼ë¡œ sync ì‘ì—…ì´ ìˆ˜í–‰ í•˜ë„ë¡ í•˜ë ¤ë©´ <strong>Auto-Sync</strong> ë¥¼ í™œì„±í™” í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ <strong>APP DETAILS</strong> ë¡œ ì´ë™ í•˜ì—¬ <strong>ENABLE AUTO-SYNC</strong> ë²„íŠ¼ì„ ëˆŒëŸ¬ í™œì„±í™” í•©ë‹ˆë‹¤.</li><li>í™œì„±í™” ë˜ì—ˆë‹¤ë©´, ArgoCDì— ì˜í•´ k8s-manifest-repoì˜ ì»¤ë°‹ ë‚´ìš©ì´ ArgoCDì— ì˜í•´ eksí´ëŸ¬ìŠ¤í„°ì— ë°˜ì˜ë©ë‹ˆë‹¤.</li><li>ë§ˆì§€ë§‰ìœ¼ë¡œ ì •ìƒì ìœ¼ë¡œ ìƒˆ manifestê°€ ë°°í¬ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ k8s-manifest-repoì˜ ì»¤ë°‹ íˆìŠ¤í† ë¦¬ë¥¼ í†µí•´ image tagë¥¼ ì‚´í´ë´…ë‹ˆë‹¤.</li><li>abcdefgê°€ ì•„ë‹ˆë¼ ìƒˆë¡œìš´ íƒœê·¸ê°’ìœ¼ë¡œ ë“¤ì–´ê°”ë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤.</li></ul></li><li><p>frontend applicationì— ì½”ë“œë¥¼ ë³€ê²½í•´ì„œ, GitOps íŒŒì´í”„ë¼ì¸ì´ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ë¥¼ ìµœì¢… ì ê²€í•©ë‹ˆë‹¤.</p></li><li><p><strong>amazon-eks-frontend/src/</strong> ë¡œ ì´ë™í•˜ì—¬ <strong><code>App.js</code></strong> ë”ë¸” í´ë¦­í•˜ì—¬ íŒŒì¼ì„ ì˜¤í”ˆ í•©ë‹ˆë‹¤.</p><ul><li><p><strong>line 67</strong>ì˜ ê°’ì„ <strong><code>EKS DEMO Blog version Hyuby</code></strong> ë¡œ ë³€ê²½ í•˜ê³  ì €ì¥ í•©ë‹ˆë‹¤. ì €ì¥ì€ <strong>ctrl+s</strong> ë¥¼ ëˆ„ë¦…ë‹ˆë‹¤.</p></li><li><p>ë³€ê²½ëœ ì†ŒìŠ¤ë¥¼ ì»¤ë°‹ í‘¸ì‹œ í•©ë‹ˆë‹¤.</p><ul><li>cd ~/environment/amazon-eks-frontend<br>git add .<br>git commit -m â€œAdd new blog versionâ€<br>git push -u origin main</li></ul></li><li><p>Syncì‘ì—…ì´ ëª¨ë‘ ëë‚˜ë©´, urlë¡œ ì ‘ì†í•˜ì—¬ ë³€ê²½ì‚¬í•­ì„ í™•ì¸í•©ë‹ˆë‹¤.</p><ul><li>echo <a href="http://%24/">http://$</a>(kubectl get ingress/backend-ingress -o jsonpath=â€™{.status.loadBalancer.ingress[*].hostname}â€™)</li><li>ì§ !</li></ul><p><img src="/images/eks-workshop/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2021-11-03_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.30.12.png" alt="ì •ìƒë™ì‘í™•ì¸!"></p></li></ul><p><br></br></p></li></ul><hr><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul><li><a href="https://daddyprogrammer.org/post/14102/argocd-kubernetes-cluster-deploy/">https://daddyprogrammer.org/post/14102/argocd-kubernetes-cluster-deploy/</a></li><li><a href="https://junghyeonsu.tistory.com/65">https://junghyeonsu.tistory.com/65</a></li><li><a href="https://wookiist.dev/159">https://wookiist.dev/159</a></li><li><a href="https://cwal.tistory.com/23">https://cwal.tistory.com/23</a></li><li>[<a href="https://coffeewhale.com/kubernetes/workflow/argo/2020/02/14/argo-wf/]">https://coffeewhale.com/kubernetes/workflow/argo/2020/02/14/argo-wf/]</a>(</li></ul>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2021/11/03/EKS-workshop/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Docker hub pull limitì´ ë°œìƒí–ˆë‹¤ë©´?</title>
      <link>http://tkdguq05.github.io/2021/10/07/docker-hub-limit/</link>
      <guid>http://tkdguq05.github.io/2021/10/07/docker-hub-limit/</guid>
      <pubDate>Thu, 07 Oct 2021 13:10:16 GMT</pubDate>
      <description>
      
        &lt;p&gt;Docker Hub ì—ì„œ ì‹ ë‚˜ê²Œ pull ë°›ë‹¤ê°€ limit ë•Œë¬¸ì— ë¬¸ì œê°€ ë°œìƒí•œ ê²½ìš°ì™€, ì´ë¥¼ íšŒí”¼í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì‘ì„±í•´ë´¤ìŠµë‹ˆë‹¤.&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>Docker Hub ì—ì„œ ì‹ ë‚˜ê²Œ pull ë°›ë‹¤ê°€ limit ë•Œë¬¸ì— ë¬¸ì œê°€ ë°œìƒí•œ ê²½ìš°ì™€, ì´ë¥¼ íšŒí”¼í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì‘ì„±í•´ë´¤ìŠµë‹ˆë‹¤.</p><a id="more"></a><h2 id="Docker-Hub-Pull-Limit"><a href="#Docker-Hub-Pull-Limit" class="headerlink" title="Docker Hub Pull Limit"></a>Docker Hub Pull Limit</h2><p>Dockerë¥¼ ì‚¬ìš©í•˜ëŠ” ì—¬ëŸ¬ ì´ìœ ê°€ ìˆê² ì§€ë§Œ, ë¬´ì—‡ë³´ë‹¤ë„ Docker Hubì— ìˆëŠ” ì´ë¯¸ì§€ë“¤ì„ ììœ ë¡­ê²Œ ë°›ì•„ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ í° ë§¤ë ¥ ì¤‘ì— í•˜ë‚˜ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ë„ public ì´ë¯¸ì§€ë“¤ì„ ììœ ë¡­ê²Œ ë°›ì•„ì„œ ì‚¬ìš©í•˜ê³  ì´ë¥¼ ìš´ì˜í•˜ëŠ” ì„œë²„ì—ë„ ì ìš©í•´ì„œ ë°°í¬ë¥¼ í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë˜ ì™€ì¤‘ì— ì²­ì²œë²½ë ¥ê°™ì€ ì†Œì‹ì´ ì „í•´ì§‘ë‹ˆë‹¤. </p><blockquote><p>Hello:</p><p>You are receiving this email because of a policy change to Docker products and services you use. On Monday, November 2, 2020 at 9am Pacific Standard Time, Docker will begin enforcing rate limits on container pulls for Anonymous and Free users. Anonymous (unauthenticated) users will be limited to 100 container image pulls every six hours, and Free (authenticated) users will be limited to 200 container image pulls every six hours, when enforcement is fully implemented. Docker Pro and Team subscribers can pull container images from Docker Hub without restriction, as long as the quantities are not excessive or abusive.</p><p>In addition, we are pausing enforcement of the changes to our image-retention policies until mid-2021, when we anticipate incorporating them into usage-based pricing. Two months ago, we announced an update to Docker image-retention policies. As originally stated, this change, which was set to take effect on November 1, 2020, would result in the deletion of images for free Docker account users after six months of inactivity. Todayâ€™s announcement means Docker will not enforce image expiration on November 1, 2020.</p></blockquote><p>ì´ë©”ì¼ì„ í†µí•´ì„œ ë°›ì•˜ì—ˆëŠ”ë°, ë‹¹ì‹œì—ëŠ” ì‚¬ì‹¤ ë°”ë¹ ì„œ ê·¸ëƒ¥ ì½ì§€ë„ ì•Šê³  ë„˜ê²¼ì—ˆìŠµë‹ˆë‹¤. ê·¸ë•ŒëŠ” ë„ì»¤ë„ ìì£¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ë³„ë¡œ ì‹ ê²½ì„ ì“°ì§€ ì•Šì•˜ë˜ ê²ƒì…ë‹ˆë‹¤. Docker Hub Pull Limitì— ëŒ€í•´ì„œëŠ” <a href="https://www.docker.com/increase-rate-limits">ì—¬ê¸°ì„œ ìì„¸íˆ ì•Œì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</a></p><p>ìš”ì•½í•˜ìë©´, <code>ì •ì±…ì´ ë³€ê²½ë˜ì—ˆê³ , ë§˜ê» ì“°ê³  ì‹¶ìœ¼ë©´ ëˆë‚´ê³  ì¨ë¼</code> ì…ë‹ˆë‹¤.</p><p>ê·¸ë¦¬ê³  ì‹œê°„ì´ ì§€ë‚˜, ì´ ì´ë©”ì¼ì„ ë©”ì¼í•¨ì— ë°©ì¹˜í•˜ê³  ìˆë˜ ì™€ì¤‘ì—, ECSì™€ Code Buildë¥¼ í†µí•´ì„œ ë°°í¬ë¥¼ í•˜ë˜ ì™€ì¤‘ì— ì¼ì´ ë°œìƒí•˜ê³ ì•¼ ë§ì•˜ìŠµë‹ˆë‹¤.</p><h2 id="ë°°í¬ì˜-ì‹¤íŒ¨"><a href="#ë°°í¬ì˜-ì‹¤íŒ¨" class="headerlink" title="ë°°í¬ì˜ ì‹¤íŒ¨"></a>ë°°í¬ì˜ ì‹¤íŒ¨</h2><p>ì €í¬ íŒ€ì—ì„œëŠ” Airflowë¥¼ í†µí•´ íŠ¹ì • ì¶”ì²œ ì„œë¹„ìŠ¤ì˜ ì „ì²˜ë¦¬ì™€ í•™ìŠµì„ ì§„í–‰í•˜ê³ , ì´ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ê°œë°œì„œë²„ì— ë¨¼ì € ë°°í¬ë¥¼ í•œ ë’¤ì— ê²°ê³¼ë¥¼ ì¼ë¶€ í™•ì¸í•˜ê³  ìš´ì˜ì„œë²„ì— ë°°í¬í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì–´ëŠë•Œì™€ ê°™ì´ ìƒˆë¡œìš´ ê³ ê°ì‚¬ì— ëŒ€í•´ ì¶”ì²œ ì„œë¹„ìŠ¤ DAGë¥¼ ìƒì„±í•˜ê³  DAGë¥¼ ì¼œì¤¬ìŠµë‹ˆë‹¤. ë³„ ë‹¤ë¥¸ ì´ìƒì´ ì—†ì–´ì„œ ì‹œê³„ë¥¼ í™•ì¸í•˜ê³  ë§ˆì¹¨ í‡´ê·¼ ì‹œê°„ì´ ë˜ì—ˆê¸¸ë˜ ì¹¼í‡´!ë¥¼ í–ˆìŠµë‹ˆë‹¤. ì§€í•˜ì² ì„ íƒ€ëŠ” ìˆœê°„ì— í•¸ë“œí°ì—ì„œ ë¶ˆì•ˆí•œ ì•ŒëŒì´ ì˜¨ ê²ƒì„ ëŠê¼ˆê³ , ê·¸ ë‚´ìš©ì€ DAGê°€ ì‹¤íŒ¨í–ˆë‹¤ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.</p><p>ê·¸ëŸ°ë° ì´ DAGì˜ íƒœìŠ¤í¬ëŠ” ì™ ë§Œí•´ì„œëŠ” ì‹¤íŒ¨ê°€ ë˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì´ì—ˆìŠµë‹ˆë‹¤. í•™ìŠµëœ ë‚´ìš©ì„ ë„ì»¤ ì´ë¯¸ì§€ì— ì‘ì„±í•˜ê³  ì‘ì„±ëœ ì´ë¯¸ì§€ë¥¼ ê·¸ëƒ¥ ë¹Œë“œí•˜ëŠ” ê²ƒì´ì—ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì°œì°œí•´ì„œ ê°€ëŠ” ë‚´ë‚´ ê³ ë¯¼í•˜ë‹¤ê°€, ë‹¤ë¥¸ ë™ë£Œê°€ ë³´ë‚´ì¤€ ì½”ë“œ ë¹Œë“œì—ì„œ ì—ëŸ¬ ë¡œê·¸ë¥¼ ë³´ìë§ˆì ìŠ¤ì¹˜ë“¯ ì§€ë‚˜ê°”ë˜ ê·¸ ë©”ì¼ì´ ìƒê°ë‚¬ìŠµë‹ˆë‹¤.</p><p>ì—ëŸ¬ì˜ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ì•˜ìŠµë‹ˆë‹¤. <code>toomanyrequests: You have reached your pull rate limit. You may increase the limit by authenticating and upgrading: https://www.docker.com/increase-rate-limit</code> </p><p>ëˆì„ ë‚´ë¼ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. </p><p>í•˜ì§€ë§Œ ì €ëŠ” ëˆì„ ë‚´ê¸°ëŠ” ì‹«ì—ˆê³ , 6ì‹œê°„ì„ ê¸°ë‹¤ë ¤ì„œ ì´ˆê¸°í™” ë ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì„œ ë°°í¬ë¥¼ í•´ë³¼ê¹Œ í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê³ ê°ì‚¬ ì¶”ê°€ê°€ ì¦ì•„ì§€ê±°ë‚˜ ë‹¤ë¥¸ ì´ë¯¸ì§€ë“¤ì„ pullí•´ì˜¬ ë•Œ ë˜ ë‹¤ì‹œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆê¸°ì—, ì´ë¥¼ í•œë²ˆ íšŒí”¼í•´ì•¼ ê² ë‹¤ëŠ” ìƒê°ì„ í–ˆìŠµë‹ˆë‹¤. íšŒí”¼í•˜ëŠ” ë°©ë²•ì€ ìƒê°ë³´ë‹¤ ê°„ë‹¨í–ˆìŠµë‹ˆë‹¤.</p><h2 id="ğŸ¤«-pull-limit-ì œí•œ-ì—†ì´-ì“°ê¸°"><a href="#ğŸ¤«-pull-limit-ì œí•œ-ì—†ì´-ì“°ê¸°" class="headerlink" title="ğŸ¤« pull limit ì œí•œ ì—†ì´ ì“°ê¸°"></a>ğŸ¤« pull limit ì œí•œ ì—†ì´ ì“°ê¸°</h2><p>ë§ì€ íšŒì‚¬ë“¤ì—ì„œëŠ” í´ë¼ìš°ë“œ ê¸°ë°˜ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•˜ì‹¤ ê²ƒì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. ì˜¨í”„ë ˆë¯¸ìŠ¤ì—ì„œ ìš´ì˜í•˜ì‹¤ ìˆ˜ë„ ìˆìœ¼ë‚˜, ì €í¬ëŠ” í´ë¼ìš°ë“œ ê¸°ë°˜ì—ì„œ ìš´ì˜í•˜ê¸°ì—, ë˜ AWSë¥¼ ì‚¬ìš©í•˜ê¸°ì— ì´ í™˜ê²½ì— êµ­í•œí•œ ë¬¸ì œ í•´ê²° ë°©ë²•ì„ ì†Œê°œí•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p><p>AWSì—ëŠ” ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì €ì¥ì†Œê°€ ë”°ë¡œ ìˆìŠµë‹ˆë‹¤. <code>ECR</code> ì´ë¼ê³  ë¶ˆë¦½ë‹ˆë‹¤. ì´ ECRì— ë‹¤ì–‘í•œ ì´ë¯¸ì§€ë“¤ì„ ë¹Œë“œí•´ì„œ ì˜¬ë ¤ë†“ê³ , ECSì— ìˆëŠ” TASKë“¤ì˜ ì»¨í…Œì´ë„ˆê°€ ë„ì›Œì§ˆ ë•Œ, ì´ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•´ì„œ ì˜¬ë¼ì˜¤ê²Œ ë©ë‹ˆë‹¤. ECSë§ê³ ë„ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì´ë¯¸ì§€ë“¤ì„ ê°–ê³ ì™€ì„œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆê³ , ë˜ ë‹¤ë¥´ê²Œ ë‹¤ì–‘í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤. </p><p>ê·¸ë˜ì„œ ë‹¤ì–‘í•˜ê²Œ í•œ ë²ˆ ì‚¬ìš©ì„ í•´ë´¤ìŠµë‹ˆë‹¤. í•„ìš”í•œ ì´ë¯¸ì§€ë¥¼ ë°›ì•„ì„œ ë¹Œë“œí•˜ê³  ì´ ì´ë¯¸ì§€ë¥¼ ECRì— ì˜¬ë ¤ë†“ê³ , ì´ ì´ë¯¸ì§€ë¥¼ ë°›ì•„ì„œ í•œë²ˆ ì‚¬ìš©í•´ë³´ëŠ” ê²ë‹ˆë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´ ì´ ì´ë¯¸ì§€ ìì²´ëŠ” ECRì— ì¡´ì¬í•˜ê²Œ ë˜ì–´ì„œ, ECSì—ì„œ íƒœìŠ¤í¬ë¥¼ ë„ìš°ë“ , ë‹¤ë¥¸ ê³³ì—ì„œ ì‚¬ìš©í•˜ë“  ë¬´ì œí•œìœ¼ë¡œ ì´ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë  ê²ƒì…ë‹ˆë‹¤.</p><p>ì €í¬ ìª½ì—ì„œ íŠ¹íˆ ìì£¼ ì‚¬ìš©í•˜ëŠ” ì´ë¯¸ì§€ëŠ” ë°”ë¡œ, python ì´ë¯¸ì§€ì˜€ìŠµë‹ˆë‹¤. <code>python:3.7-slim-buster</code> ë¥¼ íŠ¹íˆ ìì£¼ ì¼ì—ˆë˜ ê²ƒ ê°™ì€ë°, ì´ ì´ë¯¸ì§€ë¥¼ êµ¬ê¸€ì—ì„œ ê²€ìƒ‰í•´ì„œ ì›ë³¸ ì´ë¯¸ì§€ë¥¼ pull í•´ì™”ìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ëŠ” <a href="https://github.com/docker-library/repo-info/blob/master/repos/python/remote/3.7-slim-buster.md">ì´ ê³³</a>ì—ì„œ ì°¾ì•˜ìŠµë‹ˆë‹¤.</p><p>ë‚˜ì™€ìˆëŠ” ëŒ€ë¡œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker pull python@sha256:88e9ed044abd15c15069477046e8c65fb7e97cebd7cf140e901ae35440bfc073</span><br></pre></td></tr></table></figure><p>docker ëª…ë ¹ì–´ë¥¼ í†µí•´ í•„ìš”í•œ ì´ë¯¸ì§€ë¥¼ ë°›ì•„ì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³  <code>docker image ls</code>ë¥¼ í•˜ë©´?</p><blockquote><p>amd64/python                                                             3.7                 7cb3330faa6c        8 days ago          903MB</p></blockquote><p>ì´ë ‡ê²Œ ì˜ ìˆëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p><p>ê·¸ ë‹¤ìŒ ì´ë¯¸ì§€ ì´ë¦„ì— íƒœê·¸ë¥¼ ë‹¬ì•„ì£¼ê³  ì–´ë””ë¡œ ë³´ë‚´ì¤„ ê²ƒì¸ì§€ë¥¼ ì •ì˜í•´ì¤¬ìŠµë‹ˆë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag amd64&#x2F;python:3.7 xxxxxxxxxx.dkr.ecr.ap-northeast-2.amazonaws.com&#x2F;python37_slim_buster</span><br></pre></td></tr></table></figure><p>ê·¸ëŸ°ë° ì´ë•Œ ì¤‘ìš”í•œ ê²ƒì€, ECRì˜ ë ˆí¬ì§€í† ë¦¬ë¥¼ ë¯¸ë¦¬ ë§Œë“¤ì–´ì¤˜ì•¼ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘ì§€ ì•Šìœ¼ë©´, ì•Œì•„ì„œ ë ˆí¬ì§€í† ë¦¬ë¥¼ ë§Œë“¤ì§€ ëª»í•˜ê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë‚˜ì„œ ì‹¤ë§í•˜ê²Œ ë©ë‹ˆë‹¤. í•œ ë²ˆì— ë”²! ëë‚´ê³  ì‹¶ë‹¤ë©´ ë¯¸ë¦¬ ë§Œë“¤ì–´ ë‘ì‹­ì‹œì˜¤.</p><p>íƒœê·¸ë¥¼ í•´ ì¤€ ë‹¤ìŒì—ëŠ” pushë¥¼ í•´ì¤ë‹ˆë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push amd64&#x2F;python:3.7 xxxxxxxxxx.dkr.ecr.ap-northeast-2.amazonaws.com&#x2F;python37_slim_buster</span><br></pre></td></tr></table></figure><p>ì´ë ‡ê²Œ Pushê¹Œì§€ í•˜ê²Œë˜ë©´? ì›í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ ECR ë ˆí¬ì§€í† ë¦¬ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ì´ì œ ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§„ ì´ë¯¸ì§€ì˜ URIë¥¼ ë³µì‚¬í•´ì„œ Dockerfileì˜ FROMì— ì§‘ì–´ë„£ì–´ ì£¼ë©´? ì´ì œ ì œí•œì—†ì´ ë°°í¬ë¥¼ ë§ˆìŒê» í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤!</p><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul><li><a href="https://www.docker.com/increase-rate-limits">https://www.docker.com/increase-rate-limits</a></li><li><a href="https://github.com/docker-library/repo-info/blob/master/repos/python/remote/3.7-slim-buster.md">https://github.com/docker-library/repo-info/blob/master/repos/python/remote/3.7-slim-buster.md</a></li><li><a href="https://subicura.com/k8s/2021/01/02/docker-hub-pull-limit/">https://subicura.com/k8s/2021/01/02/docker-hub-pull-limit/</a></li></ul>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2021/10/07/docker-hub-limit/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Airflowì™€ ì•¼ê·¼í•˜ê¸°</title>
      <link>http://tkdguq05.github.io/2021/09/12/work-overtime-with-airflow/</link>
      <guid>http://tkdguq05.github.io/2021/09/12/work-overtime-with-airflow/</guid>
      <pubDate>Sun, 12 Sep 2021 07:00:11 GMT</pubDate>
      <description>
      
        &lt;p&gt;ì§€ë‚œ ì£¼ì— ì“¸ë°ì—†ì´ ì•¼ê·¼í•œ ì¼ì´ ìˆì–´ ì´ë¥¼ ê¸°ë¡í•´ë‘ê³ ì í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì¬ë°œ ë°©ì§€ë¥¼ ìœ„í•˜ì—¬.&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>ì§€ë‚œ ì£¼ì— ì“¸ë°ì—†ì´ ì•¼ê·¼í•œ ì¼ì´ ìˆì–´ ì´ë¥¼ ê¸°ë¡í•´ë‘ê³ ì í•©ë‹ˆë‹¤.</p><p>ì¬ë°œ ë°©ì§€ë¥¼ ìœ„í•˜ì—¬.</p><a id="more"></a><h2 id="í‰í™”ë¡œìš´-9ì›”-7ì¼-ì˜¤í›„"><a href="#í‰í™”ë¡œìš´-9ì›”-7ì¼-ì˜¤í›„" class="headerlink" title="í‰í™”ë¡œìš´ 9ì›” 7ì¼ ì˜¤í›„"></a>í‰í™”ë¡œìš´ 9ì›” 7ì¼ ì˜¤í›„</h2><p>9ì›” 5ì¼ì— ìŠ¤íŒŒë¥´í†¤ì„ ë§ˆì¹˜ê³  ì»¨ë””ì…˜ì´ í™”ìš”ì¼ê¹Œì§€ ì˜ íšŒë³µì´ ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì›”ìš”ì¼ì—ë„ ì™œì¸ì§€ ì ì„ ì œëŒ€ë¡œ ì´ë£¨ì§€ ëª»í•´ì„œ í™”ìš”ì¼ ì»¨ë””ì…˜ì´ ì¢‹ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë¹ ë¥´ê²Œ í•  ì¼ í•˜ê³  ì¹¼í‡´í•´ì•¼ê² ë‹¤ëŠ” ê²°ì‹¬ì„ í•˜ê³ , ì¶œê·¼ì„ í–ˆìŠµë‹ˆë‹¤. ë‹¹ì¼ì— ê³„íšëœ ì‘ì—…ì€ ECS TASKë¡œ ë³€ê²½í•œ airflowì˜ ì›Œì»¤ ìƒíƒœì™€ main server, metaDBë¥¼ ì ê²€í•˜ê³ ,  airflowì˜ ìŠ¤ì¼€ì¥´ëŸ¬ë¥¼ ì•ˆì •í™” í•˜ê¸° ìœ„í•´ì„œ ì›¹ì„œë²„ì™€ ìŠ¤ì¼€ì¥´ëŸ¬ë¥¼ ë°ëª¬ ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•˜ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ë™ì•ˆ ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•˜ëŠ” ê²ƒì— ëŒ€í•´ì„œ ë§ì„¤ì˜€ì—ˆëŠ”ë°, ê³µì‹ ë¬¸ì„œì—ë„ ì„œë¹„ìŠ¤ ë“±ë¡ì— ëŒ€í•œ ë‚´ìš©ì´ ìˆê¸°ë„ í–ˆê³ , íŒŒì´ì¬ ì½”ë“œë¥¼ í†µí•´ì„œ ìƒíƒœë¥¼ ì ê²€í•˜ëŠ” ê²ƒë³´ë‹¤ ë” ì•ˆì •ì ì¼ ê²ƒì´ë¼ëŠ” ìƒê°ì— ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•˜ëŠ” ê²ƒì— ëŒ€í•´ì„œëŠ” <a href="https://github.com/apache/airflow/tree/main/scripts/systemd">airflow ê³µì‹ github</a>ì— ìˆëŠ” íŒŒì¼ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. </p><p>ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê¸€ì€ ìƒê°ë³´ë‹¤ êµ‰ì¥íˆ ë§ì•˜ìŠµë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í™œìš©í•´ì„œ ìŠ¤ì¼€ì¥´ëŸ¬ë¥¼ ëŒë³´ëŠ”ê²Œ ìš”ì¦˜ íŠ¸ë Œë“œê¸´ í•˜ì§€ë§Œ, ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•  ì •ë„ê°€ ì•„ë‹Œ ì¡°ì§ê°™ì€ ê²½ìš°ì—ëŠ” ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•´ì„œ ë§ì´ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ì•˜ìŠµë‹ˆë‹¤. ì–´ì¨Œë“  ì´ íŒŒì¼ì„ ì´ìš©í•´ì„œ ì„œë¹„ìŠ¤ íŒŒì¼ì„ ë§Œë“¤ì—ˆê³  ì„œë¹„ìŠ¤ì— í•„ìš”í•œ ìš”ì†Œë“¤, ì˜ˆë¥¼ ë“¤ì–´ Unit, Service, Installì— ëŒ€í•´ì„œ ë‹¤ì‹œ í•œë²ˆ ì‚´í´ë´¤ìŠµë‹ˆë‹¤. ê° í•­ëª©ì— ëŒ€í•œ ë‚´ìš©ë“¤ì„ ì‘ì„±í•˜ê³  í™˜ê²½ì— ë§ê²Œ íŠœë‹ì„ ì¡°ê¸ˆ í–ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì—¬ëŸ¬ë²ˆ ì ìš©í•˜ê³  ë‹¤ì‹œ ë“±ë¡í•˜ê³ â€¦ ê²°êµ­ ì„œë¹„ìŠ¤ê°€ ë“±ë¡ë˜ê³  startëœ ê²ƒì´ í™•ì¸ ë˜ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì¡°ê¸ˆ ì´ìƒí–ˆë˜ ê²ƒì€ main ì„œë²„ì˜ CPUì´ìš©ë¥ ì´ ì´ì „ë³´ë‹¤ ì¦ê°€í–ˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. CPUì´ìš©ë¥ ì´ ë²Œì¨ë¶€í„° ì˜¬ë¼ê°€ë©´ ë³„ë¡œ ì¢‹ì§€ ì•Šì„ ê²ƒ ê°™ì•„ì„œ CPUì´ìš©ë¥ ì„ ì¤„ì—¬ë³´ê¸° ìœ„í•´ airflow.cfgë¥¼ ì¡°ê¸ˆ ìˆ˜ì •í•´ì£¼ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. ì˜ˆì „ì— ì‚´í´ë´¤ë˜ ê¸€ì— <a href="https://burning-dba.tistory.com/111">CPUì´ìš©ë¥ ì„ ë‚®ì¶”ëŠ” ì„¤ì •</a>ì´ ê¸°ì–µë‚˜ì„œ ì´ë¥¼ ì ìš©í•´ë³´ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. <code>scheduler_heartbeat_sec = 60</code>, <code>min_file_process_interval =60</code>, <code>max_threads = 1</code> ë¡œ ì„¤ì •ì„ ë³€ê²½í•˜ëŠ” ê²ƒì´ ì£¼ ë‚´ìš©ì´ì—ˆìŠµë‹ˆë‹¤. scheduler_heartbeat_secì€ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ìƒˆë¡œìš´ ì‘ì—…ì„ ì‹¤í–‰í•´ì•¼ í•˜ëŠ” ë¹ˆë„ (ì´ˆ)ë¥¼ ì •ì˜í•˜ëŠ” ì„¤ì •ì…ë‹ˆë‹¤. ì´ ì‹œê°„ì„ ì ê²Œ ì„¤ì •í•œë‹¤ë©´, ë” ìì£¼ ìŠ¤ì¼€ì¥´ëŸ¬ë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ë•Œë¬¸ì— CPUì˜ ì´ìš©ë¥ ì´ ë†’ì•„ì§ˆ ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤. min_file_process_intervalì€ DAG ì—…ë°ì´íŠ¸ ì‹œê°„ì„ ì¡°ì •í•˜ëŠ” ê°’ì…ë‹ˆë‹¤. ìŠ¤ì¼€ì¥´ëŸ¬ì™€ëŠ” í° ê´€ê³„ê°€ ì—†ì§€ë§Œ ì›¹ì„œë²„ì˜ ë¶€í•˜ë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆê¸°ë•Œë¬¸ì— CPUì™€ ì—°ê´€ì´ ìˆìŠµë‹ˆë‹¤. ì´ ë‘ ê°’ì„ ì¡°ì •í•˜ê³  ì ìš©í–ˆìŠµë‹ˆë‹¤. CPUê°€ ì¡°ê¸ˆ ë‚´ë ¤ê°”ìŠµë‹ˆë‹¤. ì„œë¹„ìŠ¤ë„ ë¬¸ì œê°€ ì—†ì—ˆìŠµë‹ˆë‹¤.</p><h2 id="ë¬¸ì œì˜-ë°œìƒ"><a href="#ë¬¸ì œì˜-ë°œìƒ" class="headerlink" title="ë¬¸ì œì˜ ë°œìƒ"></a>ë¬¸ì œì˜ ë°œìƒ</h2><p>ì„œë¹„ìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì–´ì„œ, ì„œë¹„ìŠ¤ ë“±ë¡ì— ëŒ€í•´ì„œ íŒ€ì›ë“¤ì—ê²Œ ê³µìœ í•˜ëŠ” ì‹œê°„ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤. ì—¬ëŸ¬ì €ëŸ¬ ì„¤ëª…ì„ í•˜ê³  airflowì˜ ìŠ¤ì¼€ì¥´ëŸ¬ì˜ ìƒíƒœë¥¼ í™•ì¸ì„ í–ˆìŠµë‹ˆë‹¤. airflowì£¼ì†Œ:8080/health ë©´ ê°„ë‹¨í•˜ê²Œ ë©”íƒ€DBì™€ ìŠ¤ì¼€ì¥´ëŸ¬ì˜ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì—¬ê¸°ì— <code>unhealthy</code> ë¼ê³  ë‚˜ì˜¤ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ë” ì´ìƒí•œ ê²ƒì€, unhealthyí•˜ë‹¤ë©´ last_heartbeat_timeì€ ì£½ì€ ì´í›„ë¶€í„° ì—…ë°ì´íŠ¸ê°€ ë˜ë©´ ì•ˆë˜ëŠ”ë°, ê³„ì†í•´ì„œ ì—…ë°ì´íŠ¸ê°€ ë˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ì‹¬ì‹ ì´ ë§¤ìš° í”¼ê³¤í–ˆë˜ ìƒí™©ì´ì—ˆê¸° ë•Œë¬¸ì— ë©˜íƒˆì´ ê¹¨ì§€ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ê°€ëœ©ì´ë‚˜ ECSì›Œì»¤ë¡œ ë³€ê²½í•œ ë’¤ì— ë¬¸ì œê°€ ì—†ë‚˜ ë…¸ì‹¬ì´ˆì‚¬í•˜ê³  ìˆì—ˆëŠ”ë°, ECSì›Œì»¤ì˜ ì„¤ì •ì´ ë­ê°€ ì˜ëª»ëœ ê²ƒì¸ì§€, ì„œë¹„ìŠ¤ì— ì´ìƒì´ ìˆëŠ” ê±´ì§€ ê°ì´ ì˜ ì¡íˆì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì •ì‹ ì—†ë˜ ì™€ì¤‘ì— í‡´ê·¼ì‹œê°„ì´ ì§€ë‚¬ìŠµë‹ˆë‹¤. </p><h2 id="ì•¼ê·¼ì˜-ì‹œì‘"><a href="#ì•¼ê·¼ì˜-ì‹œì‘" class="headerlink" title="ì•¼ê·¼ì˜ ì‹œì‘"></a>ì•¼ê·¼ì˜ ì‹œì‘</h2><p>ë³¸ê²©ì ìœ¼ë¡œ ì´ˆê³¼ê·¼ë¬´ë¥¼ í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ê¸ˆë°© ëë‚  ê²ƒì´ë¼ê³  ìƒê°í•´ì„œ ì„œë¹„ìŠ¤ë¥¼ ì¤‘ë‹¨í•˜ê³  ì›¹ì„œë²„ì™€ ìŠ¤ì¼€ì¥´ëŸ¬ë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ë©´ í•´ê²°ì´ ë  ê²ƒì´ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ëª‡ ë²ˆì„ ì£½ì´ê³  ì‚´ë¦¬ê³ ë¥¼ ë°˜ë³µí–ˆì§€ë§Œ ë³„ íš¨ê³¼ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤. airflowê°€ ì‚¬ëŒì„ ë†€ë¦¬ê¸°ë¼ë„ í•˜ëŠ”ë“¯ì´ ë‹¤ì‹œ ì‹œì‘í•˜ê³  ì²˜ìŒ ëª‡ ì´ˆê°„ì€ <code>healthy</code> ë¼ê³  ë‚˜ì˜¤ë‹¤ê°€ â€˜íœ´ ëë‚¬ë„¤â€¦ í•œë²ˆë§Œ ë” í™•ì¸í•´ë³¼ê¹Œ?â€™ í•˜ëŠ” ìˆœê°„ unhealthyë¡œ ë‚˜ì™”ìŠµë‹ˆë‹¤. ì •ì‹ ì´ í˜¼ë¯¸í•´ì ¸ê°€ëŠ” ì™€ì¤‘ì— â€˜ìƒˆë¡œ airflowì„œë²„ë¥¼ ë„ìš°ë©´ ê³ ìƒí•˜ê¸´ í•˜ê² ì§€ë§Œ ë˜ê² ì§€â€™ë€ ìƒê°ì— ë©”ì¸ ì„œë²„ í•˜ë‚˜ë¥¼ ì¢…ë£Œí•˜ê³  ë¯¸ë¦¬ ì €ì¥ëœ AMIë¥¼ ì´ìš©í•´ì„œ ìƒˆ ì„œë²„ë¥¼ ì˜¬ë ¸ìŠµë‹ˆë‹¤. </p><p>ìƒˆë¡œ ì„œë²„ë¥¼ ì˜¬ë ¸ë”ë‹ˆ, ì•„ì£¼ ì˜ ë˜ê¸° ì‹œì‘í•©ë‹ˆë‹¤. </p><p>â€˜íœ´ í•´ì¹˜ì› ë‚˜â€¦?â€™ </p><p>í´ë¦¬ì…°ëŠ” ì—­ì‹œ í´ë¦¬ì…°ì˜€ìŠµë‹ˆë‹¤. airflowë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë‘ ì˜ì—­ì¸ë°, í•œ ì˜ì—­ì€ ì˜ ë˜ì—ˆì§€ë§Œ, ë‹¤ë¥¸ ì˜ì—­ì€ ë¹„ì›ƒê¸°ë¼ë„ í•˜ë“¯ ì˜ ë˜ì§€ ì•ŠëŠ” ê²ƒì´ ì•„ë‹ˆê² ìŠµë‹ˆê¹Œ. ë¬´ì—‡ì´ ë¬¸ì œì¼ê¹Œ ë‹¤ì‹œ ê³ ë¯¼í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ í¬ê²Œ ë¬¸ì œë  ë¶€ë¶„ë„ ì—†ì—ˆê³  ECSì›Œì»¤ë¶€ë¶„ì˜ ë¡œê·¸ë„ ë„ˆë¬´ ì¡°ìš©í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‹¤ê°€ ë¡œê·¸ì— ì‘ì—…ì´ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ë°œê²¬ë˜ì–´ì„œ, â€˜ìŠ¤ì¼€ì¥´ëŸ¬ê°€ ì£½ì–´ìˆëŠ”ë° ì‘ì—…ì´ ì–´ë–»ê²Œ ëŒì§€?â€™ ë€ ìƒê°ì— í•œ DAGë¥¼ ìˆ˜ë™ìœ¼ë¡œ ëŒë ¸ìŠµë‹ˆë‹¤. ë†€ëê²Œë„ ëŠë¦¬ê¸´ í–ˆì§€ë§Œ ì‘ì—…ì´ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤. ì‘ì—…ì€ DAGë¥¼ íŒŒì‹±í•˜ê³ , ìŠ¤ì¼€ì¥´ë§ì´ ëœ ìƒíƒœì—ì„œ, íë¥¼ ë‚´ì£¼ê³ , ì›Œì»¤ì—ì„œ í•´ë‹¹ íë¥¼ ê°€ì ¸ê°€ì„œ ì½”ë“œì— ì íŒëŒ€ë¡œ ìˆ˜í–‰í•˜ê²Œ ë˜ì–´ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ìŠ¤ì¼€ì¥´ëŸ¬ëŠ” unhealthyí•˜ê¸´ í•˜ì§€ë§Œ, ì‹¤ì œë¡œëŠ” ì£½ì–´ìˆëŠ” ê²ƒì´ ì•„ë‹Œ ê²ƒì´ ë©ë‹ˆë‹¤. </p><p>ì—¬ëŸ¬ ì»¤ë®¤ë‹ˆí‹°ì— ë„ì›€ì„ ì²­í•´ë†”ì„œ ê·¸ ë¶„ë“¤ì˜ ì˜ê²¬ì„ í™•ì¸í•´ ë´¤ìŠµë‹ˆë‹¤. â€œìŠ¤ì¼€ì¥´ëŸ¬ê°€ ë•Œë¡œëŠ” ì‹¤ì œë¡œ ëŒì•„ê°€ê³  ìˆëŠ”ë° webserverì—ì„œ ì´ë¥¼ ëª» ì¡ì„ ìˆ˜ë„ ìˆìœ¼ë‹ˆ ë‹¤ì‹œ ì™„ë²½í•˜ê²Œ killí•˜ê³  ë‹¤ì‹œ ì‹¤í–‰í•´ ë´ë¼â€ ë¼ëŠ” ì˜ê²¬ì˜ ì£¼ì˜€ìŠµë‹ˆë‹¤. ë˜ ë‹¤ì‹œ ìŠ¤ì¼€ì¥´ëŸ¬ë¥¼ ë‚´ë¦¬ê³  ì˜¬ë¦¬ê³ ë¥¼ ë°˜ë³µí–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ í•´ê²°ì´ ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. í•  ìˆ˜ ìˆëŠ” ê±´ ì •ë§ ë‹¤ í•´ë´¤ëŠ”ë°, ê·¸ë˜ì„œ í¬ëŒ€ì˜ ë»˜ì§“ì¸ <code>airflow reset db</code> ê¹Œì§€ í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ ëª…ë ¹ì–´ë¥¼ metaDBì— ìˆëŠ” ëª¨ë“  ë°ì´í„°ë¥¼ ë‚ ë¦¬ëŠ” ì¼ì…ë‹ˆë‹¤. ì œê°€ ì„¤ì •í•´ë‘” variablesì™€ connectionsì˜ ê°’ì„ ë‹¤ ë‚ ë¦¬ëŠ” ê²ƒì…ë‹ˆë‹¤. ë¬¼ë¡  ê°’ì„ ë°±ì—…í•´ë‘ê³  í•œ ì¼ì´ë¼ ë³µêµ¬í•˜ëŠ”ë° ì–´ë µì§€ëŠ” ì•Šì•˜ì§€ë§Œ, ì´ë ‡ê²Œ í•´ê²°í•´ì„œëŠ” ì•ˆëœë‹¤ê³ â€¦ ìƒê°í•©ë‹ˆë‹¤. </p><p>ë˜ ë‹¤ì‹œ airflowë¥¼ ì¢…ë£Œí•˜ê³  ìƒˆë¡­ê²Œ airflowë¥¼ ì˜¬ë ¸ëŠ”ë°, ì´ë²ˆì—ëŠ” ECSì—ì„œ ì´ìƒí•œ ë¡œê·¸ë¥¼ í•˜ë‚˜ê°€ ë°œê²¬ë˜ê¸° ì‹œì‘í•©ë‹ˆë‹¤. <code>Cannot connect to .... redis....</code> ë ˆë””ìŠ¤ì— ì—°ê²°ì´ ì•ˆëœë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ mainì„œë²„ì— ì ‘ì†í•´ì„œ redis-serverì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ í™•ì¸í•´ ë´¤ë”ë‹ˆ, í”„ë¡œì„¸ìŠ¤ê°€ ì •ë§ ì—†ì—ˆìŠµë‹ˆë‹¤. ì™œ ë ˆë””ìŠ¤ê°€ ì£½ì—ˆì§€? í•˜ë‹¤ê°€ ë°ëª¬ ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•œ íŒŒì¼ì´ ìƒê°ë‚¬ìŠµë‹ˆë‹¤. ê·¸ íŒŒì¼ì˜ Unitë¶€ë¶„ì— Afterì™€ Wantsì—ëŠ” redis.service ë¶€ë¶„ì´ ìˆì—ˆëŠ”ë°, ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ë ë•Œ ë ˆë””ìŠ¤ë¥¼ ê±´ë“œë¦° ê²ƒ ê°™ì•˜ìŠµë‹ˆë‹¤. ë ˆë””ìŠ¤ë¥¼ ë³µêµ¬í•˜ê³  ë‹¤ì‹œ ì‘ì—…ì„ í™•ì¸í•´ë³´ë‹ˆ, ì´ì œëŠ” ì‘ì—…ì€ ì‹¤í–‰ë˜ì§€ë§Œ, ì—¬ì „íˆ unhealthyí•œ ìŠ¤ì¼€ì¥´ëŸ¬ê°€ ë‚¨ì•„ìˆëŠ” ê²ƒì´ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‹¤ê°€ ì˜¤ì „ì— CPU ì´ìš©ë¥  ë•Œë¬¸ì— ì„¤ì •í•œ scheduler_heartbeat_secê°€ ìƒê°ë‚¬ìŠµë‹ˆë‹¤.</p><p>ì˜¤ì „ì— ì„¤ì •í•  ë•Œ 60ì´ˆëŠ” ë„ˆë¬´ ê¸´ ê²ƒ ê°™ì•„ 40ì´ˆë¡œ ì„¤ì •ì„ í–ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì„¤ì • ê°’ì„ ì­‰ ë³´ë‹¤ê°€ scheduler_health_check_thresholdë¼ëŠ” ê²ƒë„ í•œë²ˆ ë´¤ìŠµë‹ˆë‹¤. ê¸°ë³¸ ê°’ì´ 30ì´ˆì˜€ëŠ”ë°, ê´€ë ¨ ì—†ëŠ” ê°’ì´ë¼ê³  ìƒê°ë˜ì–´ ê·¸ëƒ¥ ë„˜ì–´ê°”ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ê²Œ ë°”ë¡œ ì´ ì•¼ê·¼ì„ í•œ ì›ì¸ì´ì—ˆë‹¤ëŠ” ê²ƒì„ 12ì‹œê°€ ë‹¤ë˜ì–´ì„œì•¼ ë°œê²¬ì„ í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">If the last scheduler heartbeat happened more than scheduler_health_check_threshold</span><br><span class="line">ago (in seconds), scheduler is considered unhealthy.</span><br><span class="line">This is used by the health check in the &quot;&#x2F;health&quot; endpoint</span><br></pre></td></tr></table></figure><p>ì„¤ì •ì—ëŠ” ì´ë ‡ê²Œ ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤. last scheduler heartbeatê°€ scheduler_health_check_thresholdë³´ë‹¤ ë” ìì£¼ ë°œìƒí•˜ë©´, unhealthyë¼ê³  ë‚˜ì˜¬ ê²ƒì´ë¼ê³ , ê·¸ë¦¬ê³  ì´ ì •ë³´ëŠ”  /health ì— ì‚¬ìš©ëœë‹¤ê³ â€¦</p><p>ê·¸ëŸ¬ë‹ˆê¹Œ ì •ë¦¬í•˜ìë©´, ì˜¤ì „ì— CPUì´ìš©ë¥ ì„ ì¤„ì´ë ¤ê³  scheduler_heartbeat_secì„ 40ì´ˆë¡œ ì„¤ì •ì„ í–ˆëŠ”ë°, ì´ ê°’ë³´ë‹¤ scheduler_health_check_thresholdê°€ ë” ì ì€ ê°’ì¸ 30ì´ê²Œ ë˜ì–´ì„œ health ì²´í¬ë¥¼ í•˜ëŠ” ì‹œê°„ ë³´ë‹¤ sheduler_hearbeat_secê°€ ë” ìì£¼ ë°œìƒí•˜ê²Œ ë˜ì–´ì„œ unhealthyí•˜ë‹¤ê³  /healthì—ì„œ í‘œì‹œê°€ ëœ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ìŠ¤ì¼€ì¥´ëŸ¬ëŠ” ì‚¬ì‹¤ìƒ í”„ë¡œì„¸ìŠ¤ê°€ ë–  ìˆê³  ì‘ì—…ì„ í•˜ê³  ìˆìœ¼ë‹ˆ ë¬¸ì œëŠ” ì—†ì—ˆë˜ ê²ƒì´ ë§ì•˜ìŠµë‹ˆë‹¤. </p><p><img src="https://www.pngkey.com/png/detail/14-142665_crying-pepe-png-pepe-cry-png.png" alt=""></p><p>ê·¸ëŸ¬ë‹ˆê¹Œâ€¦ ì“¸ë°ì—†ì´ airflowë¥¼ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ë„ìš°ê³ â€¦ metaDBë¥¼ restí•  í•„ìš”ë„ ì—†ì—ˆê³ , ì•¼ê·¼í•  í•„ìš”ë„ ì—†ì—ˆë˜ ê±°ì‹œì—ˆìŠ´ë¯¸ë‹¤.</p><p>í”¼ê³¤ì´ ëª°ë ¤ì˜¤ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.</p><h2 id="Outro"><a href="#Outro" class="headerlink" title="Outro"></a>Outro</h2><p>9ì›” 8ì¼ 00:20ë¶„ ê²½ì—ëŠ” ë¹„ê°€ ì™”ìŠµë‹ˆë‹¤. íƒì‹œë¥¼ ì½œí•˜ë‹ˆ ëŒ€ì–´ë¥¼ ë¬¼ê¸° ìœ„í•´ 5ì´ˆë§Œì— ê¸°ì‚¬ë‹˜ì´ ì¡í˜”ìŠµë‹ˆë‹¤. í’€ì´ ì£½ì€ ì•¼ê°„ ì¶”ê°€ ê·¼ë¬´ìì™€ëŠ” ë°˜ëŒ€ë¡œ íƒì‹œê¸°ì‚¬ë‹˜ì€ ê²©ì–‘ë˜ì–´ ìˆëŠ” ê²ƒ ê°™ì•˜ìŠµë‹ˆë‹¤. ì¡°ìš©íˆ ì´ì–´í°ì„ ê½‚ì•˜ê³  ì¬ë°Œì–´ë³´ì´ëŠ” ìœ íŠœë¸Œ ì˜ìƒì„ ë³´ë©´ì„œ, ë¬´ìŠ¨ ë‚´ìš©ì¸ì§€ë„ ê¸°ì–µì´ ì•ˆë‚˜ì§€ë§Œ, ê·¸ë ‡ê²Œ ì§‘ìœ¼ë¡œ ì™”ìŠµë‹ˆë‹¤. </p><p>29,600ì›ì§œë¦¬ êµí›ˆì´ì—ˆìŠµë‹ˆë‹¤. </p><p>ì„¤ì •ê°’ì„ ì œëŒ€ë¡œ í™•ì¸ì„ í•˜ì§€ ì•Šê³ , ìˆ˜ë©´ ë¶€ì¡±ì˜ ì½œë¼ë³´ë¡œ ì´ë£¨ì–´ë‚¸ ê²°ê³¼ì˜€ìŠµë‹ˆë‹¤. airflowê°€ ë˜ í„°ì§€ëŠ” ì•…ëª½ì„ ê¿¨ê³ , ë‹¤ìŒë‚  ê²¨ìš° ì§€ê°ì„ ë©´í•˜ë©´ì„œ ì•„ìŠ¬ì•„ìŠ¬í•˜ê²Œ ì¶œê·¼ì„ í–ˆìŠµë‹ˆë‹¤.</p><p>ì ì€ í‰ì†Œì— ì˜ ìì•¼í•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2021/09/12/work-overtime-with-airflow/#disqus_thread</comments>
    </item>
    
    <item>
      <title>sparton</title>
      <link>http://tkdguq05.github.io/2021/09/04/sparton/</link>
      <guid>http://tkdguq05.github.io/2021/09/04/sparton/</guid>
      <pubDate>Sat, 04 Sep 2021 11:44:04 GMT</pubDate>
      <description>
      
        &lt;p&gt;9pm to 6am ìŠ¤íŒŒë¥´í†¤ ìƒì¡´ì¼ì§€&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>9pm to 6am ìŠ¤íŒŒë¥´í†¤ ìƒì¡´ì¼ì§€</p><a id="more"></a><h2 id="ìŠ¤íŒŒë¥´í†¤"><a href="#ìŠ¤íŒŒë¥´í†¤" class="headerlink" title="ìŠ¤íŒŒë¥´í†¤"></a>ìŠ¤íŒŒë¥´í†¤</h2><p>ì½”ë”©ì— ë¯¸ì³ë³´ê³  ì‹¶ë˜ ì°°ë‚˜ì— ìŠ¤íŒŒë¥´í†¤ì´ ì—´ë ¸ë‹¤. ì €ë… 9ì‹œë¶€í„° ë‹¤ìŒë‚  ì˜¤ì „ 6ì‹œê¹Œì§€â€¦ ë¬´ì‚¬íˆ ëª©í‘œí•œ ë°”ë¥¼ ì´ë£¨ê³  ì‹¶ë‹¤.</p><h2 id="íƒ€ì„-í…Œì´ë¸”"><a href="#íƒ€ì„-í…Œì´ë¸”" class="headerlink" title="íƒ€ì„ í…Œì´ë¸”"></a>íƒ€ì„ í…Œì´ë¸”</h2><p><code>**9:00pm**</code> íŒ€ë³„ ì•„ì´ìŠ¤ ë¸Œë ˆì´í‚¹<br><code>**9:10pm**</code> ì›°ì»´ ì¸ì‚¬ ë° í–‰ì‚¬ ì•ˆë‚´<br><code>**11:30pm**</code> ì´ë²¤íŠ¸ í€´ì¦ˆì‡¼ â€˜ë„ì „ ìŠ¤íŒŒë¥´íƒ€ ê³¨ë“ ë²¨â€™<br><code>**01:00am**</code> ì¸ìŠ¤íƒ€ í”¼ë“œ ì±Œë¦°ì§€ 1 (#ìŠ¤íŒŒë¥´íƒ€ì½”ë”©í´ëŸ½ #ìŠ¤íŒŒë¥´í†¤ #í™í•œì·¨ë¯¸ #ì½”ë”© @spartacodingclub) &amp; ì°ê´€<br><code>**03:00am**</code> ì „ì²´ ë§ˆë¼í†¤<br><code>**04:00am**</code> ì¸ìŠ¤íƒ€ í”¼ë“œ ì±Œë¦°ì§€ 2 (#ìŠ¤íŒŒë¥´íƒ€ì½”ë”©í´ëŸ½ #ìŠ¤íŒŒë¥´í†¤ #í™í•œì·¨ë¯¸ #ì½”ë”© @spartacodingclub) &amp; ì°ê´€<br><code>**05:30am**</code> í–‰ì‚¬ ë§ˆë¬´ë¦¬ ì¤€ë¹„<br><code>**06:00am**</code> í–‰ì‚¬ ë§ˆê°, ì™„ì£¼ ì¶•í•˜í•˜ê¸°</p><h2 id="9-26"><a href="#9-26" class="headerlink" title="9:26"></a>9:26</h2><p>ìŠ¤íŒŒë¥´í†¤ì´ ì‹œì‘ë˜ê¸° ì§ì „, ë ˆë“œë¶ˆì„ í•˜ë‚˜ ê¹Œì„œ ë§ˆì‹œê¸° ì‹œì‘í–ˆë‹¤. ì¡°ê¸ˆ ì¡¸ë¦°ë° ê±±ì •ì´ ë˜ê¸° ì‹œì‘í•œë‹¤.</p><h2 id="9-40"><a href="#9-40" class="headerlink" title="9:40"></a>9:40</h2><p>ì„ ì„œê°€ ëë‚˜ê³  ë³¸ê²©ì ìœ¼ë¡œ í•™ìŠµì— ë“¤ì–´ê°”ë‹¤. 3ì£¼ì°¨ì— ëª»ë“¤ì—ˆë˜ ê°•ì˜ë¶€í„° ì‹œì‘í–ˆë‹¤.</p><p>í•´ì‰¬ -2 ê°•ì˜ë¥¼ ëˆŒëŸ¬ì„œ ì‹œì²­í–ˆë‹¤.</p><h2 id="10-30"><a href="#10-30" class="headerlink" title="10:30"></a>10:30</h2><p>3ì£¼ì°¨ ê°•ì˜ë¥¼ ëª¨ë‘ ìˆ˜ê°•í–ˆê³ , ë¶€ì—¬ëœ ë¬¸ì œë“¤ì„ í’€ê¸° ì‹œì‘í–ˆë‹¤. ë…¸íŠ¸ë¶ ë°°í„°ë¦¬ ì¶©ì „ì´ ì˜ ë˜ì§€ ì•Šì•„ ë¦¬ë¶€íŒ… í–ˆë‹¤.</p><p>ê²Œë”íƒ€ìš´ë•Œë¬¸ì¸ì§€ ë­”ì§€ ë¦¬ì†ŒìŠ¤ë¥¼ ë„ˆë¬´ ë§ì´ ì¡ì•„ë¨¹ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ìˆì–´ íƒ€ìê°€ ë²„ë²…ê±°ë¦°ë‹¤.</p><h2 id="11-00"><a href="#11-00" class="headerlink" title="11:00"></a>11:00</h2><p>ê³¼ì œ ì²«ë²ˆì§¸ ë¬¸ì œë¥¼ ë¹ ë¥´ê²Œ í•´ê²°í–ˆë‹¤. </p><p>ì‚¬ì‹¤ í•´ê²°í•˜ëŠ”ë° ì •ë ¬ì´ ê°‘ìê¸° ê³µë¶€ê°€ ì•ˆë‚˜ì„œ ë‹¤ì‹œ ê³µë¶€ë¥¼ í–ˆë‹¤. </p><p>í• ì¸ë¥ ì´ ê°€ì¥ ë†’ê²Œ ìƒí’ˆ êµ¬ë§¤ë¥¼ í•˜ëŠ” ë¬¸ì œì˜€ëŠ”ë°, ì •ë ¬ì„ í•œë’¤ ë’¤ì—ì„œë¶€í„° í•˜ë‚˜ì”© ê°€ì ¸ì™€ì„œ ê³±í•œë’¤ ì¿ í°ì´ ì—†ë‹¤ë©´ ë‚˜ë¨¸ì§€ëŠ” ë‹¤ ë”í•´ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ ì½”ë”©ì„ í–ˆë‹¤.</p><p>ë‘ ë²ˆì§¸ ë¬¸ì œì— ë„ì „í•˜ê³  ìˆë‹¤. ê´„í˜¸ê°€ ì˜¬ë°”ë¥¸ì§€ ì²´í¬ë¥¼ í•´ì•¼í•˜ëŠ” ë¬¸ì œë‹¤. ì˜ˆì „ì— í’€ì—ˆì—ˆë˜ ê²ƒ ê°™ì€ë° ë­˜ë¡œ í’€ì–´ì•¼ ë ì§€ ê°ì´ ì˜ ì•ˆì¡íˆëŠ” ì¤‘ì´ë‹¤.</p><h2 id="1-00AM"><a href="#1-00AM" class="headerlink" title="1:00AM"></a>1:00AM</h2><p>ì¤‘ê°„ì— ê³¨ë“ ë²¨ ì´ë²¤íŠ¸ê°€ ëë‚¬ë‹¤. ê²Œë”íƒ€ìš´ê³¼ ìŠ¬ë™ì´ í­ë°œí•˜ëŠ” ë°”ëŒì— ë‚´ CPUë„ ë§‰ë§‰ ì˜¬ë¼ê°€ì„œ ê²°êµ­ ë¨¹í†µì´ ëë‹¤.</p><p>ê²°êµ­ ì¬ì‹œì‘ì„ ëª‡ë²ˆ í•˜ê³ , ìŠ¬ë™ê³¼ ê²Œë”íƒ€ìš´ì„ ì¢…ë£Œí•˜ê³  ê¸°ë‹¤ë ¸ë‹¤.</p><p>ì´ë²¤íŠ¸ê°€ ëë‚˜ë‹ˆ CPUë„ ê°™ì´ ë‚´ë ¤ê°”ë‹¤. 3ì£¼ì°¨ ê³¼ì œë¥¼ í’€ì–´ë´¤ê³  í•´ì„¤ê°•ì˜ë¥¼ ë“¤ì—ˆë‹¤. ë‚´ê°€ ìƒê°í•œ ì•„ì´ë””ì–´ì™€ ë¹„ìŠ·í•œ ì ë„ ë³´ì˜€ê³ , ìƒˆë¡­ê²Œ í‘¼ ë¬¸ì œë„ ìˆì—ˆë‹¤. ê´„í˜¸ë¬¸ì œëŠ” ìŠ¤íƒìœ¼ë¡œ í‘¸ëŠ”ê²Œ ë§ì„ê¹Œ í–ˆëŠ”ë° ë§ì•˜ë‹¤. ì˜¬ë°”ë¥¸ ê´„í˜¸ì— ëŒ€í•œ ì²´í¬ ë¡œì§ì´ ìŠ¤íƒê³¼ ë™ì¼í–ˆë‹¤. ë¹ ë¥´ê²Œ ìƒê°í•˜ì§€ ëª»í•œê²Œ ì•„ì‰¬ì› ë‹¤. ì´ì œ 4ì£¼ì°¨ ê°•ì˜ë¡œ ë„˜ì–´ê°„ë‹¤.</p><h2 id="4-37AM"><a href="#4-37AM" class="headerlink" title="4:37AM"></a>4:37AM</h2><p>4ì£¼ì°¨ ê°•ì˜ë¡œ ë„˜ì–´ê°€ì„œ DFS êµ¬í˜„ì´ ì˜ ì•ˆë˜ì„œ ì‹œê°„ì´ ì¢€ ê±¸ë ¸ë‹¤. ì™€ì¤‘ì— ì„¸ì‹œì— ë§ˆë¼í†¤ ì´ë²¤íŠ¸ë¥¼ í•œëŒ€ì„œ ì°¸ì—¬í•´ë´¤ëŠ”ë°</p><p>ê²Œë”íƒ€ìš´ì˜ ì½”ìŠ¤ì—ì„œ ë‘ ë°”í€´ ë„ëŠ”ê±°ì˜€ë‹¤. ë¬¼ë¡  ëŒë‹¤ê°€ í„°ì¡Œê³ , ë‚´ ë…¸íŠ¸ë¶ë„ í„°ì§ˆë»”í–ˆë‹¤.</p><p>ë¬´ì‚¬íˆ ì™„ì£¼í•˜ê³  ë‹¤ì‹œ ìë¦¬ë¥¼ ì¡ì•˜ê³  ì¡°ê¸ˆ í˜ë“¤ì–´ì„œ ë°–ì— ë‚˜ê°€ì„œ ê±¸ì—ˆë‹¤. í¸ì˜ì  ì•ê¹Œì§€ ê°€ì„œ ë”°ëœ»í•œê±¸ í•˜ë‚˜ ì‚¬ì„œ ë¨¹ì„ê¹Œ í–ˆë‹¤ê°€ ëŒì•„ì™”ë‹¤. ë¨¹ìœ¼ë©´ ì¡¸ë¦´ ê²ƒ ê°™ì•˜ë‹¤.</p><p>ì‚¬ëŒì´ ì—†ì–´ì„œ ì‹œì›í•˜ê²Œ ê°€ìŠ¤ë¥¼ ë°°ì¶œí•˜ë©° ì˜¤ë ¤ë˜ ì°°ë‚˜ì— ì–´ë–¤ ì»¤í”Œì„ ë§ˆì£¼ì³¤ë‹¤. ì–´ìƒ‰í•˜ê²Œ ìë¦¬ë¥¼ í”¼í•˜ê³  ì§‘ìœ¼ë¡œ ëŒì•„ì™”ë‹¤.</p><p>DFSì™€ BFSê°€ ëë‚¬ë‹¤. DFSëŠ” ìŠ¤íƒê³¼ ê´€ë ¨ì´ ìˆì—ˆê³ , BFSëŠ” íì™€ ê´€ë ¨ì´ ìˆì—ˆë‹¤.</p><p>ì´ì œ DPë¡œ ë“¤ì–´ê°„ë‹¤.</p><h2 id="5-35"><a href="#5-35" class="headerlink" title="5:35"></a>5:35</h2><p>4ì£¼ì°¨ ë§ˆì§€ë§‰ ê¹Œì§€ ë‹¤ ë“¤ì—ˆë‹¤. ê³¼ì œ ì„¤ëª…ê¹Œì§€ ë´¤ëŠ”ë°, ê³¼ì œê°€ ìƒê°ë³´ë‹¤ ì–´ë ¤ì› ë‹¤. DFS BFSê°€ ìµìˆ™í•˜ì§€ ì•Šì•„ ì´ ê°œë…ì„ ë¬¸ì œì— í™œìš©í•˜ì§€ ëª»í•˜ëŠ” ëŠë‚Œì´ë‹¤. ê°œë…ì„ í•œë²ˆ ë³µìŠµí•˜ê³  ë‹¤ì‹œ í•œë²ˆ ë¬¸ì œë¥¼ ì–´ë–»ê²Œ í’€ì–´ì•¼ í• ê¹Œ ìƒê°í•´ë´ì•¼ê² ë‹¤.</p><p>06ì‹œê°€ ë˜ê¸° 25ë¶„ ì „ì´ë‹¤. ì½”ë”©ì„ ë§ˆë¬´ë¦¬í•˜ê³  ìƒì¡´ì¼ì§€ë¥¼ ì“°ëŸ¬ ì™”ë‹¤. ì „ë‚  9ì‹œë¶€í„° ì˜¤ëŠ˜ 6ì‹œê¹Œì§€ 9ì‹œê°„ì´ì—ˆëŠ”ë°, ìƒê°ë³´ë‹¤ ê¸¸ì§€ì•Šì•˜ê³  í˜ë“¤ì§€ ì•Šì€ ê²ƒ ê°™ë‹¤. </p><p>ì‹œí—˜ê¸°ê°„ì—ë„ ë°¤ì„ ìƒˆë³¸ ì  ì—†ê³ , í”„ë¡œì íŠ¸ ë•Œ í•œë²ˆ ë°¤ì„ ìƒˆë´¤ëŠ”ë° ê·¸ ë§ˆì €ë„ 3ì‹œê¹Œì§€ ì‘ì—…í•˜ë‹¤ê°€ ì§‘ì—ê°€ì„œ ìê³  ì¢€ ì‰¬ë‹¤ê°€ ë‹¤ì‹œ ì™”ì—ˆë‹¤. ì´ë ‡ê²Œ í’€ë¡œ ê¹¨ì–´ìˆìœ¼ë©´ì„œ ì½”ë”©í•œì ì€ ì²˜ìŒì¸ ê²ƒ ê°™ë‹¤. </p><p>ì•Œê³ ë¦¬ì¦˜ì„ ì œëŒ€ë¡œ ê³µë¶€í•˜ê³  ì½”ë”©í…ŒìŠ¤íŠ¸ë¥¼ ì •ë³µí•˜ê³  ì‹¶ë‹¤ëŠ” ë§ˆìŒì´ ë“¤ì–´ì„œ ì´ ê°•ì˜ë¥¼ ì‹œì‘í–ˆê³ , ì•Œê³ ë¦¬ì¦˜ì— ì‹œê°„ì„ ëª» ìŸì•„ë¶€ì€ ê²ƒ ê°™ì•„ì„œ, ë˜ ê·¸ë ‡ê²Œ ë§ˆìŒë¨¹ê¸°ê°€ í˜ë“¤ì–´ì„œ ìŠ¤íŒŒë¥´í†¤ì— ì°¸ì—¬í–ˆë‹¤. ë‚´ ëª©í‘œë¥¼ ìœ„í•´ì„œ ë°¤ìƒˆ ëª°ì…í–ˆì—ˆê³ , ìŠ¤íŒŒë¥´íƒ€ ì½”ë”©í´ëŸ½ì˜ ì§€ì›ê³¼ ê°™ì´ ì°¸ì—¬í•œ ë‹¤ë¥¸ <code>ìš©ì‚¬ë‹˜</code> ë“¤ ë•ë¶„ì— ì§€ì¹˜ì§€ ì•Šê³  ë§ˆë¬´ë¦¬ í•  ìˆ˜ ìˆê²Œ ëœ ê²ƒ ê°™ì•˜ë‹¤.</p><p>ìƒˆë²½ì— ì ì‹œ ë‚˜ì™€ ê±¸ìœ¼ë©´ì„œ, ê·¸ë¦¬ê³  ì´ ê¸€ì„ ì“°ë©´ì„œ ëŠë‚€ ê²ƒ ì¤‘ì— í•˜ë‚˜ëŠ”,  ë°¤ìƒˆ ì½”ë”©í•œ ê¸°ì–µì€ ìŠí˜€ì§€ì§€ ì•Šì„ ê²ƒ ê°™ë‹¤ëŠ” ê²ƒì´ë‹¤.</p><p> ì•ìœ¼ë¡œë„ ê³„ì† ë¬´ì—‡ì¸ê°€ì— ì—´ì •ì„ ê°–ê³  ì‹¶ë‹¤ëŠ” ë§ˆìŒì´ ë“¤ì—ˆê³ , ìƒˆë²½ì´ ì–´ë–»ê²Œ ê°€ëŠ”ì§€ë„ ëª¨ë¥¸ì±„ ì–´ë–¤ ì¼ì— ëª°ì…í•˜ê³  ì‹¶ì–´ì¡Œë‹¤. ë™ì‹œì— ê·¸ëŸ° ì¼ì„ í•  ìˆ˜ ìˆëŠ” ê³³ì— ê°€ê³  ì‹¶ì–´ì¡Œê³ , ê·¸ë ‡ê²Œ í™˜ê²½ì„ ë§Œë“¤ì–´ ì£¼ëŠ” ê³³ì— ê°€ê³  ì‹¶ì–´ì¡Œë‹¤.</p><p>ê°•ì˜ì™€ ìŠ¤íŒŒë¥´í†¤ì„ í†µí•´ì„œ ì½”ë”©í…ŒìŠ¤íŠ¸ ì‹¤ë ¥ì„ ê¸¸ëŸ¬ë³´ê³  í…ŒìŠ¤íŠ¸í•´ë´¤ëŠ”ë°, ì¼ì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ë§ˆì¸ë“œì™€ ë‚´ê°€ ì •ë§ ì›í•˜ëŠ” ì¼, ê·¸ë¦¬ê³  ì§ì¥ì— ëŒ€í•´ì„œ ë‹¤ì‹œ í•œë²ˆ ìƒê°í•´ ë³´ê²Œ ë˜ëŠ” ê³„ê¸°ê°€ ë˜ì—ˆë˜ ê²ƒ ê°™ë‹¤.</p><p>ìŠ¤íŒŒë¥´í†¤ì€ ê¸°íšŒê°€ ëœë‹¤ë©´ ë˜ ë‹¤ì‹œ ì°¸ì—¬í•´ë³´ê³  ì‹¶ë‹¤. ì¼ì— ì§€ì³ìˆì—ˆëŠ”ë° ë‹¤ì‹œ ëœ¨ê±°ì›Œì ¸ ë³¼ ìˆ˜ ìˆëŠ” ê¸°íšŒê°€ ëì—ˆë‹¤.</p>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2021/09/04/sparton/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Airflow Workers on ECS Fargate</title>
      <link>http://tkdguq05.github.io/2021/08/28/airflow-ecs/</link>
      <guid>http://tkdguq05.github.io/2021/08/28/airflow-ecs/</guid>
      <pubDate>Sat, 28 Aug 2021 02:27:55 GMT</pubDate>
      <description>
      
        &lt;p&gt;Airflow ì›Œì»¤ë¥¼ ECSì— ë„ì›Œì„œ ì—°ê²°í•´ë³´ì, MWAAí‰ë‚´ë‚´ê¸°&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>Airflow ì›Œì»¤ë¥¼ ECSì— ë„ì›Œì„œ ì—°ê²°í•´ë³´ì, MWAAí‰ë‚´ë‚´ê¸°</p><a id="more"></a><h2 id="ê¸°ì¡´-êµ¬ì¡°"><a href="#ê¸°ì¡´-êµ¬ì¡°" class="headerlink" title="ê¸°ì¡´ êµ¬ì¡°"></a>ê¸°ì¡´ êµ¬ì¡°</h2><p>ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ êµ¬ì¡°ëŠ” êµ‰ì¥íˆ êµ¬ì‹ì´ì—ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì „ì„ìê°€ ë§Œë“¤ì–´ ë†“ê³  ë‚˜ê°„ êµ¬ì¡°ì¸ë°, Airflowì˜ mainì„œë²„ì™€ metadbë¥¼ AWSì— ê°ê° ì¸ìŠ¤í„´ìŠ¤ë¡œ ì˜¬ë¦¬ê³ , Auto Scaling ê·¸ë£¹ìœ¼ë¡œ ì›Œì»¤ë“¤ì„ ë„ì›Œë†“ê³  ì—°ê²°í•œ êµ¬ì¡°ì˜€ìŠµë‹ˆë‹¤. ë²„ì „ë„ 1.10.9 ë²„ì „ì´ë¼ ì” ë²„ê·¸ ê°™ì€ ì´ìŠˆë„ ìˆì–´ë³´ì˜€ê³ , ì›Œì»¤ë“¤ì„ ì¢€ ë” ì‹¬í”Œí•˜ê²Œ ê´€ë¦¬í•˜ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤. ì•„ë¬´ë˜ë„ ì¸ìŠ¤í„´ìŠ¤ ë¹„ìš©ì´ ë‚˜ê°€ë‹¤ë³´ë‹ˆ ë¶€ë‹´ìŠ¤ëŸ¬ìš´ ì ë„ ìˆì—ˆêµ¬ìš”.</p><img src="https://d2908q01vomqb2.cloudfront.net/f1f836cb4ea6efb2a0b1b99f41ad8b103eff4b59/2019/04/17/sagemaker-airflow-2.gif" alt="ê¸°ì¡´ì˜ êµ¬ì¡°" style="zoom:80%;" /><p>ë§ˆì¹¨ ECSê´€ë ¨í•´ì„œ ì‘ì—…ì„ í•˜ê³  ë§ˆë¬´ë¦¬ ì§“ë˜ ì¤‘ì´ì—ˆê³ , ì›Œì»¤ë“¤ì„ ECS Fargateë¡œ ë³€ê²½í•´ë³¼ê¹Œë€ ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. ì›Œì»¤ë“¤ì€ ì´ë¯¸ ë„ì»¤ ì´ë¯¸ì§€ë¡œ ë„ì›Œì ¸ì„œ ì‹¤í–‰ë˜ê³  ìˆëŠ” ìƒíƒœì˜€ê¸° ë•Œë¬¸ì—, ì´ë¯¸ì§€ë§Œ Task Definitionìœ¼ë¡œ ë„£ì–´ì„œ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ì£¼ë©´ ê°„ë‹¨í•˜ê²Œ ëë‚˜ì§€ ì•Šì„ê¹Œ?? ìƒê°í–ˆìŠµë‹ˆë‹¤. <del>ì” ì´ìŠˆ ë•Œë¬¸ì— í•œ 1-2ì£¼ì •ë„ ê±¸ë¦¬ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</del></p><h2 id="ECSë€"><a href="#ECSë€" class="headerlink" title="ECSë€"></a>ECSë€</h2><p>AWSì—ì„œ ì œê³µí•˜ëŠ” ECSëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì™€ ìœ ì‚¬í•œ ë¶€ë¶„ì´ ë§ìŠµë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì¡°ê¸ˆì´ë¼ê³  ê³µë¶€í•´ ë³´ì‹  ë¶„ì´ë¼ë©´, ê°„ë‹¨í•œ ë²„ì „ì˜ ECSë¼ê³ ë„ ëŠë¼ì‹¤ ê²ƒ ê°™ìŠµë‹ˆë‹¤. </p><p>ë¨¼ì € ECSëŠ” Elastic Container Serviceì˜ ì•½ìë¡œ AWSì—ì„œ ì œê³µ í•˜ê³  ìˆëŠ” ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì„œë¹„ìŠ¤ì—ëŠ” ëŒ€í‘œì ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤, Docker Swarm ë“±ì´ ìˆìŠµë‹ˆë‹¤. ë¬¼ë¡  AWSì—ë„ ì¿ ë²„ë„¤í‹°ìŠ¤ ì œí’ˆ, EKSê°€ ë‚˜ì™€ ìˆì§€ë§Œ ECSëŠ” ì¢€ ë” ê°„ì†Œí™”ë˜ì–´ ìˆê³ , ì‹¬í”Œí•œ ë²„ì „ì˜ ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì„œë¹„ìŠ¤ë¼ê³  ìƒê°ë˜ë„¤ìš”. </p><p>ECSë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ í´ëŸ¬ìŠ¤í„°ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë³„ë„ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ êµ¬ì„±, ê´€ë¦¬í•˜ì§€ ì•Šì•„ë„ ë˜ê³ , í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ì— ëŒ€í•œ ë¹„ìš©ë„ ì—†ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €í¬ ë‹¤ë¥¸ íŒ€ì› ë¶„ì´ ì¸ìŠ¤í„´ìŠ¤ì— ì˜¬ë¦° APIì„œë²„ë¥¼ ECSë¡œ ë³€ê²½í–ˆì„ë•Œ, ë¹„ìš© ê°ì†Œ íš¨ê³¼ê°€ ë°œìƒí•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì„œë²„ê´€ë¦¬ë¥¼ í•´ì£¼ë‹ˆê¹Œ, ê´€ë¦¬í¬ì¸íŠ¸ë„ ì ì–´ì§€ê³  ì˜¤í† ìŠ¤ì¼€ì¼ë§ê¹Œì§€ ì§€ì›ì´ ë©ë‹ˆë‹¤. ë˜í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ë¹„í•´ í•™ìŠµ ì‹œê°„ì´ ë§¤ìš° ì ê¸° ë•Œë¬¸ì— ê¸ˆë°© ì„œì¹˜í•´ì„œ ì›í•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ë¹ ë¥´ê²Œ ì˜¬ë¦´ ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.</p><h2 id="ECSì˜-ê¸°ë³¸-ê°œë…"><a href="#ECSì˜-ê¸°ë³¸-ê°œë…" class="headerlink" title="ECSì˜ ê¸°ë³¸ ê°œë…"></a>ECSì˜ ê¸°ë³¸ ê°œë…</h2><p>ECSì˜ ê¸°ë³¸ ê°œë…ìœ¼ë¡œëŠ” í´ëŸ¬ìŠ¤í„°, ì‘ì—…ì •ì˜(Task Definition), Task, Serviceê°€ ìˆìŠµë‹ˆë‹¤. í•˜ë‚˜ì”© ìì„¸íˆ ì•Œì•„ê°€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><p><img src="https://kb.novaordis.com/images/4/43/AmazonECSConcepts.png" alt="ECSì˜ êµ¬ì¡°"></p><h3 id="í´ëŸ¬ìŠ¤í„°-Cluster"><a href="#í´ëŸ¬ìŠ¤í„°-Cluster" class="headerlink" title="í´ëŸ¬ìŠ¤í„°(Cluster)"></a>í´ëŸ¬ìŠ¤í„°(Cluster)</h3><p>í´ëŸ¬ìŠ¤í„°ëŠ” ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ë…¼ë¦¬ì ì¸ ê³µê°„ì…ë‹ˆë‹¤. ì‚¬ìš©í•˜ë ¤ëŠ” ë„ì»¤ ì´ë¯¸ì§€ëŠ” ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰ë˜ëŠ”ë°, ì´ ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë“¤ì„ ë¬¶ì–´ë†“ì€ ê²ƒì´ í´ëŸ¬ìŠ¤í„°ì…ë‹ˆë‹¤. ê·¸ëƒ¥ ë…¼ë¦¬ì ì¸ ê³µê°„ì´ê¸° ë•Œë¬¸ì— ë¹ˆ í´ëŸ¬ìŠ¤í„°ë„ ìƒì„±ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. airflowë¥¼ ECSì— ì˜¬ë¦´ ë•Œë„ í´ëŸ¬ìŠ¤í„°ëŠ” ë¹„ì–´ìˆëŠ” ìƒíƒœë¡œ ì˜¬ë ¸ìŠµë‹ˆë‹¤. ë§Œì•½ì— ë¹ˆ í´ëŸ¬ìŠ¤í„°ê°€ ì•„ë‹ˆë¼ ëª‡ ëª‡ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•œ ê²½ìš°, ECS Agentì— ì˜í•´ì„œ í´ëŸ¬ìŠ¤í„°ì™€ ì¸ìŠ¤í„´ìŠ¤ëŠ” ì—°ê²°ë©ë‹ˆë‹¤. </p><h3 id="Task-Definition"><a href="#Task-Definition" class="headerlink" title="Task Definition"></a>Task Definition</h3><p>íƒœìŠ¤í¬ ë°í”¼ë‹ˆì…˜, ì‘ì—… ì •ì˜ëŠ” ì‹¤ì œ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒì´ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ECSëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ECR ë ˆí¬ì§€í† ë¦¬ì™€ ì—°ë™ì´ ë˜ì–´ ìˆëŠ”ë°, ì´ ë ˆí¬ì§€í† ë¦¬ì—ì„œ ì–´ë–¤ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•  ê²ƒì¸ì§€, í¬íŠ¸ëŠ” ëª‡ë²ˆì„ ì—´ ê²ƒì¸ì§€, í™˜ê²½ ë³€ìˆ˜ëŠ” ì–´ë–¤ ê²ƒì„ ì¤„ ê²ƒì¸ì§€ ë“±ë“±ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p>docker runì—ì„œ ì‚¬ìš©í–ˆë˜ ëª…ë ¹ì–´ë“¤ì´ ìˆë‹¤ë©´ ì—¬ê¸°ì„œ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤. ì²˜ìŒì— ì´ê±¸ ì˜ ëª°ë¼ì„œ ê³ ìƒì„ ê½¤ë‚˜ í–ˆëŠ”ë°, ì‘ì—… ì •ì˜ë¥¼ í†µí•´ ì„¤ì •í•˜ë©´ ëì…ë‹ˆë‹¤. ì‘ì—… ì •ì˜ëŠ” ë²„ì „ ê´€ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ì— ìƒˆë¡œ ì‘ì—…ì •ì˜ë¥¼ ë§Œë“¤ì–´ì„œ ë°°í¬ë¥¼ í–ˆëŠ”ë° ì›í•˜ëŠ” ê²°ê³¼ê°€ ì œëŒ€ë¡œ ë‚˜ì˜¤ì§€ ì•ŠëŠ”ë‹¤ë©´, ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±í•˜ë©´ ë©ë‹ˆë‹¤. ì´ êµ¬ì„±ì´ ì •ë§ ì˜ ë˜ì–´ ìˆì–´ì„œ, Airflow workerë“¤ì„ ASGë¡œ ë§Œë“¤ì—ˆì„ ë•Œë³´ë‹¤ í›¨ì”¬ ì•ˆì •ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•  ìˆ˜ ìˆëŠ” ê²ƒ ê°™ë„¤ìš”.</p><h3 id="Task"><a href="#Task" class="headerlink" title="Task"></a>Task</h3><p>íƒœìŠ¤í¬ëŠ” ì‘ì—… ì •ì˜ì— ì˜í•´ ë§Œë“¤ì–´ì§„ ì»¨í…Œì´ë„ˆì˜ ì…‹ë“¤ì´ë©°, ECSì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ìµœì†Œ ë‹¨ìœ„ì…ë‹ˆë‹¤. í•œ íƒœìŠ¤í¬ì—ëŠ” 1ê°œ ì´ìƒì˜ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆê³ , í•´ë‹¹ Task ë‚´ì˜ ì»¨í…Œì´ë„ˆëŠ” ëª¨ë‘ ê°™ì€ ECS í´ëŸ¬ìŠ¤í„° ì¸ìŠ¤í„´ìŠ¤ ë˜ëŠ” Fargate ë‚´ì— ì‹¤í–‰ë˜ë„ë¡ ë³´ì¥ ë°›ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì €ëŠ” í•œ íƒœìŠ¤í¬ì— í•œ ì»¨í…Œì´ë„ˆë§Œ ì‹¤í–‰ë˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆë¥¼ docker-composeê°™ì´ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤ê³  í•©ë‹ˆë‹¤. </p><blockquote><ul><li>íƒœìŠ¤í¬ì—ì„  ìµìˆ™í•œ EC2ì™€ í•¨ê»˜ Fargateê°€ ë“±ì¥í•©ë‹ˆë‹¤.</li></ul><p>ğŸ’¡<strong>Fargateë¡œ ì„¤ì •í•˜ë©´</strong>! ECS í´ëŸ¬ìŠ¤í„°ë‚´ì— ì¸ìŠ¤í„´ìŠ¤ê°€ ì—†ì–´ë„, Taskì— ì •ì˜í•œ CPU, ë©”ëª¨ë¦¬ ì„¤ì •ì— ë”°ë¼ ê´€ë¦¬í•˜ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ ì—†ì´ Serverless í•˜ê²Œ ì„œë¹„ìŠ¤ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p>Bespin Global ì„¤ëª… : <a href="https://aws.amazon.com/fargate/">AWS </a><a href="https://aws.amazon.com/fargate/">Fargate</a> ëŠ” AWSì— ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•˜ëŠ” ì‰¬ìš´ ë°©ë²•ì…ë‹ˆë‹¤. ê°„ë‹¨íˆ ë§í•˜ë©´ FargateëŠ” EC2ì™€ ë¹„ìŠ·í•˜ì§€ë§Œ ê°€ìƒ ì‹œìŠ¤í…œì„ ì œê³µí•˜ëŠ” ëŒ€ì‹  ì»¨í…Œì´ë„ˆë¥¼ ì–»ìŠµë‹ˆë‹¤. ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬ í•  í•„ìš”ì—†ì´ ì»¨í…Œì´ë„ˆë¥¼ ê¸°ë³¸ ê³„ì‚° í”„ë¦¬ë¯¸í‹°ë¸Œë¡œ ì‚¬ìš©í•  ìˆ˜ìˆê²Œ í•´ì£¼ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ì‘ì„±, CPU ë° ë©”ëª¨ë¦¬ ìš”êµ¬ ì‚¬í•­ ì§€ì •, ë„¤íŠ¸ì›Œí‚¹ ë° IAM ì •ì±… ì •ì˜ ë° ì‹¤í–‰ ë§Œí•˜ë©´ë©ë‹ˆë‹¤. Fargateë¥¼ ì‚¬ìš©í•˜ë©´ ì‘ìš© í”„ë¡œê·¸ë¨ ìš”êµ¬ ì‚¬í•­ê³¼ ë°€ì ‘í•˜ê²Œ ì¼ì¹˜í•˜ëŠ” ìœ ì—°í•œ êµ¬ì„± ì˜µì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©° ì´ˆ ë‹¨ìœ„ë¡œ ì„¸ë¶„í™”ë©ë‹ˆë‹¤.</p></blockquote><h3 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h3><p>ì„œë¹„ìŠ¤ëŠ” íƒœìŠ¤í¬ì˜ ë¼ì´í”„ ì‚¬ì´í´ì„ ê´€ë¦¬í•´ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. íƒœìŠ¤í¬ì˜ ìƒíƒœë¥¼ ì§€ì†ì ìœ¼ë¡œ ê°ì‹œ, ê´€ë¦¬í•´ì£¼ëŠ” ê²ƒì´ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ íƒœìŠ¤í¬ë¥¼ í´ëŸ¬ìŠ¤í„°ì— ëª‡ ê°œ ë°°í¬í•  ê²ƒì¸ì§€ë¥¼ ê²°ì •í•˜ê³ , ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ë•Œ ì–´ë–¤ ì‘ì—…ì •ì˜ë¡œ íƒœìŠ¤í¬ë¥¼ ìƒì„±í• ì§€ ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p>ë§Œì•½ íƒœìŠ¤í¬ê°€ ì–´ë–¤ ë¬¸ì œë¡œ ì¤‘ì§€ë˜ê±°ë‚˜ ë‹¤ìš´ë˜ë©´ ì´ê²ƒì„ ê°ì§€í•´ì„œ ìƒˆë¡œìš´ Taskë¥¼ í´ëŸ¬ìŠ¤í„°ì— ë°°í¬í•˜ê²Œ í•˜ëŠ” ì—­í• ë„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì‹¤ì œë¡œ ì„œë¹„ìŠ¤ì— ë™ì‘í•˜ê³  ìˆëŠ” Taskë¥¼ ê°•ì œë¡œ ì¤‘ì§€ì‹œí‚¬ ê²½ìš°ì— TaskëŠ” ì ì‹œë™ì•ˆ ì¤‘ë‹¨(ì¢…ë£Œ)ë˜ì—ˆë‹¤ê°€ ë‹¤ì‹œ í”„ë¡œë¹„ì €ë‹ ë°›ì•„ì„œ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ì„œ ECSë¥¼ ì¼œë‘ê³  ë§Œë“¤ì–´ ë†“ì€ê²Œ ì•„ê¹Œì›Œì„œ ì¤‘ì§€ì‹œì¼œë²„ë¦¬ë©´ ë‹¤ìŒë‚ ì— í° í˜¼ë€ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì €ëŠ” ì–´ì°¨í”¼ ì‘ì—…ì •ì˜ë¥¼ ì‚¬ìš©í•´ì„œ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìœ¼ë‹ˆ, ê¹”ë”í•˜ê²Œ ì¢…ë£Œí•˜ê³  ë‹¤ì‹œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. í•œ ë²ˆ í¬ê²Œ ë°ì¼ë»”í•œ ê²½í—˜ì´ ìˆì—ˆìŠµë‹ˆë‹¤.</p><h2 id="Airflow-Workers-On-ECS"><a href="#Airflow-Workers-On-ECS" class="headerlink" title="Airflow Workers On ECS"></a>Airflow Workers On ECS</h2><p>ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ ì—ì–´í”Œë¡œìš°ì˜ ì›Œì»¤ë“¤ì„ ECSì— ì˜¬ë ¤ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ë¨¼ì € í´ëŸ¬ìŠ¤í„°ë¥¼ ë§Œë“¤ì–´ì£¼ê² ìŠµë‹ˆë‹¤. </p><h3 id="í´ëŸ¬ìŠ¤í„°-ìƒì„±"><a href="#í´ëŸ¬ìŠ¤í„°-ìƒì„±" class="headerlink" title="í´ëŸ¬ìŠ¤í„° ìƒì„±"></a>í´ëŸ¬ìŠ¤í„° ìƒì„±</h3><p>ì €ëŠ” ë¹ˆ ê¹¡í†µì˜ í´ëŸ¬ìŠ¤í„°ê°€ í•„ìš”í–ˆìŠµë‹ˆë‹¤. ASGë¡œ ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ Fargateë¡œ ë³€ê²½í•˜ê³  ì¸ìŠ¤í„´ìŠ¤ ë¹„ìš©ì„ ê°ì†Œí•˜ë ¤ëŠ” ëª©ì ì´ ìˆê¸° ë•Œë¬¸ì— ë¹ˆ í´ëŸ¬ìŠ¤í„°ì¸ ë„¤íŠ¸ì›Œí‚¹ ì „ìš© í´ëŸ¬ìŠ¤í„°ë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. </p><img src="/images/airflow-ecs/ecs-cluster01.png" alt="ecs-cluster01" style="zoom:80%;" /><p>ê·¸ ë‹¤ìŒì€ ë¹ˆ ê¹¡í†µë‹µê²Œ ì´ë¦„ë§Œ ì ì–´ì£¼ê³  VPCë¥¼ ë§Œë“¤ì–´ì¤„ ê²ƒì¸ì§€, íƒœê·¸ë¥¼ ë„£ì„ ê²ƒì¸ì§€ë§Œ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤. ì „ ì´ë¦„ë§Œ ì„¤ì •í•˜ê³  ë‹¤ë¥¸ ê±´ ê±´ë“œë¦¬ì§€ ì•Šê³  ê·¸ëƒ¥ ìƒì„±í–ˆìŠµë‹ˆë‹¤.</p><h3 id="Task-Definition-ìƒì„±"><a href="#Task-Definition-ìƒì„±" class="headerlink" title="Task Definition ìƒì„±"></a>Task Definition ìƒì„±</h3><p>ì´ì œ ì‘ì—…ì •ì˜ë¥¼ ë§Œë“¤ì–´ë³¼ ì‹œê°„ì…ë‹ˆë‹¤. ì‘ì—…ì •ì˜ ìƒì„±ì„ ëˆ„ë¥´ë©´ <code>ì‹œì‘ ìœ í˜• í˜¸í™˜ì„± ì„ íƒ</code>ì´ ë‚˜ì˜µë‹ˆë‹¤. ì €ëŠ” Fargateë¡œ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. </p><p><img src="/images/airflow-ecs/task_definition_01.png" alt="task_definition_01"></p><p>ê·¸ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ëˆ„ë¥´ë©´ ë³¸ê²©ì ìœ¼ë¡œ ì‘ì—… ì •ì˜ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‘ì—… ì—­í• ì—ëŠ” <code>ecsTaskExecutionRole,</code> <code>ecsS3FullAccessTaskRole</code>, <code>ecsTaskInstanceRole</code> ì´ ìˆìŠµë‹ˆë‹¤. ì›í•˜ëŠ” ëª©ì ì— ë§ê²Œ ì„¤ì •í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ì €ëŠ” ecsTaskExecutionRoleë¥¼ ì„ íƒí•˜ê² ìŠµë‹ˆë‹¤. ì‘ì—… ì‹¤í–‰ IAMë„ ê°™ì´ ì„¸íŒ…í•´ì£¼ì‹œê³  ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.</p><p><img src="/images/airflow-ecs/task_definition_02.png" alt="task_definition_02"></p><p>ì´ì œ ì‘ì—… í¬ê¸°ê°€ ì–´ë–»ê²Œ ë˜ëŠ”ì§€, ì‘ì—… CPUê°€ ì–¼ë§ˆë‚˜ í•„ìš”í•œì§€ ì„¤ì •í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. Fargateë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©ëŸ‰ì„ ê²°ì •í•´ì•¼ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë§Œì•½ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì„ íƒí•œë‹¤ë©´, í•„ìš”í•œ ì¸ìŠ¤í„´ìŠ¤ì˜ í¬ê¸°ë¥¼ ê³¨ë¼ì£¼ë©´ ë˜ê² ìŠµë‹ˆë‹¤. ì €ëŠ” ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ ì¸ìŠ¤í„´ìŠ¤ í¬ê¸°ë¥¼ ì•Œê¸° ë•Œë¬¸ì— í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì˜ ìŠ¤í™ì„ ë„£ì–´ì£¼ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ê°€ì¥ ì¤‘ìš”í•œ ì»¨í…Œì´ë„ˆ ì •ì˜ë¥¼ í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><p><img src="/images/airflow-ecs/task_definition_03.png" alt="task_definition_03"></p><p>ì»¨í…Œì´ë„ˆ ì¶”ê°€ë¥¼ ëˆ„ë¥´ë©´ ë‹¤ìŒê³¼ ê°™ì€ í™”ë©´ì´ ë“±ì¥í•©ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ì´ë¦„ì— ì›í•˜ëŠ” ì´ë¦„ì„ ë„£ì–´ì£¼ì‹œê³ , ì´ë¯¸ì§€ì—ëŠ” ECRì— ì˜¬ë ¤ë‘” ì´ë¯¸ì§€ì˜ ì£¼ì†Œì™€ ì´ë¯¸ì§€ëª…, íƒœê·¸ë¥¼ ì˜ˆì‹œì™€ ê°™ì´ ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. ë©”ëª¨ë¦¬ ì œí•œì€ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ì˜ ì œí•œ ì •ë„ë¥¼ ëœ»í•˜ëŠ”ë° ì €ëŠ” ìœ„ì—ì„œ ë„£ì–´ì¤€ ì‘ì—… ë©”ëª¨ë¦¬ì˜ 80%ì •ë„ë¥¼ ë„£ì–´ë†¨ìŠµë‹ˆë‹¤.  ê·¸ë¦¬ê³  í¬íŠ¸ ë§¤í•‘ì—ëŠ” ì—´ì–´ì¤„ í¬íŠ¸ë¥¼ ê¸°ì…í•˜ë©´ ë©ë‹ˆë‹¤. ë§Œì•½ì— <code>docker run -p 8793:8793</code>ì´ëŸ° ì‹ìœ¼ë¡œ docker runì„ í•œë‹¤ë©´ 8793ì„ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤. êµ‰ì¥íˆ í¸ë¦¬í•˜ì£ ??</p><p><img src="/images/airflow-ecs/container_01.png" alt="container_01"></p><p>ê·¸ ë°‘ì— ê³ ê¸‰ ì»¨í…Œì´ë„ˆ êµ¬ì„±ìœ¼ë¡œ ë„˜ì–´ê°€ë©´ ìƒíƒœê²€ì‚¬ í•  ë¶€ë¶„ì„ ë„£ì–´ì£¼ë©´ ë˜ëŠ”ë° ì›Œì»¤ì—ëŠ” ë”±íˆ ìƒíƒœê²€ì‚¬í•  ê²Œ ì—†ê¸° ë•Œë¬¸ì— íŒ¨ìŠ¤í•˜ê² ìŠµë‹ˆë‹¤. </p><p><img src="/images/airflow-ecs/container_02.png" alt="container_02"></p><p>í™˜ê²½ ë¶€ë¶„ìœ¼ë¡œ ë„˜ì–´ê°€ë©´ ì‚¬ìš©í•  CPUë‹¨ìœ„ì™€ GPUê°€ ë‚˜ì˜µë‹ˆë‹¤. GPUëŠ” ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë„˜ì–´ê°”ê³ , CPUëŠ” ìœ„ì—ì„œ ì‘ì„±í•œ CPUì½”ì–´ ì •ë„ë¥¼ ë„£ì–´ë†¨ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì œê°€ ê°€ì¥ ì•„ì‰¬ì›Œ í•˜ëŠ” ë¶€ë¶„ì¸ ì§„ì…ì ê³¼ ëª…ë ¹, ì‘ì—… ë””ë ‰í† ë¦¬ ë¶€ë¶„ì…ë‹ˆë‹¤. ìŒ© ë²ˆì—­ì²´ë¥¼ ì‚¬ìš©í•œ ê²ƒìœ¼ë¡œ ë³´ì´ëŠ” ì´ ë¶€ë¶„ì€ ë°”ë¡œ ë„ì»¤ì˜ ENTRYPOINTì™€ CMD, WORKDIRë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë§ì´ì˜€ìŠµë‹ˆë‹¤. ì²˜ìŒì— ì´ ë¶€ë¶„ì„ ëª°ë¼ì„œ í—¤ë§¸ëŠ”ë°, í—¤ë§¤ì§€ ë§ˆì‹œê³  ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ê°€ ë”°ë¡œ ìˆìœ¼ì‹œë‹¤ë©´ ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  í™˜ê²½ë³€ìˆ˜ì—ëŠ” keyì™€ valueë¡œ ë‚˜ì™€ìˆëŠ”ë° docker runì„ í• ë•Œ <code>-e</code>ë¡œ ë„£ì–´ì£¼ëŠ” íŒŒë¼ë¯¸í„°ê°€ ìˆë‹¤ë©´ ì—¬ê¸°ì— ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. ì €ëŠ” <code>AIRFLOW_HOME</code>, <code>queue</code> ì •ë„ë¥¼ ë„£ì–´ë†¨ìŠµë‹ˆë‹¤. </p><p>ì´ì œ ë§¨ í•˜ë‹¨ì— ë„ì»¤ ë ˆì´ë¸”ì„ ì‘ì„±í•´ì£¼ë©´ ëì…ë‹ˆë‹¤. </p><p>ë‹¤ì‹œ ì‘ì—… ì •ì˜ìª½ìœ¼ë¡œ ë‚˜ì™€ì„œ ë§¨ ë°‘ìœ¼ë¡œ ë‚´ë ¤ê°€ë©´ Tagê°€ ìˆëŠ”ë° ì €ëŠ” ì´ë¦„ìœ¼ë¡œ êµ¬ë¶„í•´ì•¼ ë  ê²Œ ìˆì—ˆê¸° ë•Œë¬¸ì— íƒœê·¸ì— Nameì„ ë„£ì–´ì£¼ê³  ì›í•˜ëŠ” ì´ë¦„ì„ ë„£ì–´ì¤¬ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ìƒì„±í•˜ë©´ ì‘ì—… ì •ì˜:1 ë²„ì „ì´ ë‚˜ì˜µë‹ˆë‹¤!</p><h3 id="Service-ìƒì„±"><a href="#Service-ìƒì„±" class="headerlink" title="Service ìƒì„±"></a>Service ìƒì„±</h3><p><img src="/images/airflow-ecs/service_01.png" alt="service_01"></p><p>ì‹œì‘ ìœ í˜•ì—ì„œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” Fargateë¥¼ ì„ íƒí•˜ê³  ì‘ì—…ì •ì˜ì— ì•„ê¹Œ ë§Œë“  ê²ƒì„ ì„ íƒí•´ì¤ë‹ˆë‹¤. ê°œì •ì€ revisionìœ¼ë¡œ ìˆ˜ì •ëœ ë²„ì „ì„ ë§í•©ë‹ˆë‹¤. ê¸°ë³¸ê°’ì€ latestë¡œ ìµœê·¼ì— ë§Œë“  ê²ƒì„ ë°˜ì˜í•©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„°ë„ ë§Œë“  ê²ƒì„ ë„£ì–´ì£¼ê³  ì„œë¹„ìŠ¤ ì´ë¦„ì„ ë„£ì–´ì¤ë‹ˆë‹¤. </p><p>Task ê°œìˆ˜ëŠ” ì›í•˜ëŠ” ë§Œí¼ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤. ìµœì†Œ ì •ìƒ ìƒíƒœ ë°±ë¶„ìœ¨ì€, ê¸°ë³¸ì ìœ¼ë¡œ ë„ì›Œì ¸ ìˆëŠ” Taskì˜ ìƒíƒœë¥¼ ë§í•˜ëŠ”ë°, ë¬¸ì„œì—ëŠ”  <code>ë°°í¬ ê³¼ì •ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì‘ì—…ì˜ ê°œìˆ˜ì— í•˜í•œì„ ì„ ì œê³µí•˜ì—¬ ì¶”ê°€ í´ëŸ¬ìŠ¤í„° ìš©ëŸ‰ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ ë°°í¬í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.</code>ë¼ê³  ë‚˜ì™€ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‹ˆê¹Œ ê¸°ë³¸ ê°’ì¸ 100ì´ë¼ê³  ì„¤ì •í•˜ê²Œ ë˜ë©´ ìœ„ì—ì„œ ì„¤ëª…í•œëŒ€ë¡œ, íƒœìŠ¤í¬ë¥¼ ì¤‘ì§€í•´ë„ ê³„ì† ì˜¬ë¼ì˜¤ê²Œ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤. </p><p><img src="/images/airflow-ecs/segvice_02.png" alt="service_02"></p><p>ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ë©´ ë³´ì•ˆê·¸ë£¹ê³¼ VPCë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©í•˜ëŠ” VPCë¥¼ ë„£ì–´ì£¼ê³  ë³´ì•ˆê·¸ë£¹ì—ëŠ” Airflow workerë¥¼ ìœ„í•œ ë³´ì•ˆ ê·¸ë£¹ì„ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤. Airflow workerì˜ ë³´ì•ˆê·¸ë£¹ì€ ë©”ì¸ì„œë²„ì™€ ë©”íƒ€ë””ë¹„ë¥¼ ì—°ê²°í•´ì£¼ëŠ” ë¶€ë¶„ë§Œ ì—´ì–´ì£¼ë©´ ë˜ê² ìŠµë‹ˆë‹¤. AirflowëŠ” ê¸°ë³¸ì ìœ¼ë¡œ flaskë¥¼ í†µí•´ 8793í¬íŠ¸ë¡œ ì—´ë¦¬ê³  ì—´ë¦° 8793í¬íŠ¸ë¥¼ í†µí•´ì„œ ì‘ì—…ì„ í• ë‹¹ë°›ìœ¼ë©°, ì‘ì—…ë¡œê·¸ë¥¼ ë©”íƒ€ë””ë¹„(mysql)ì— 3306í¬íŠ¸ë¥¼ í†µí•´ ë‚¨ê¸°ë¯€ë¡œ ë©”ì¸ì„œë²„ì™€ 8793ì„ ë§¤í•‘í•´ì£¼ê³  ë©”íƒ€ë””ë¹„ì™€ 3306(mysql)ë¡œ ë§¤í•‘í•´ì£¼ê² ìŠµë‹ˆë‹¤. </p><p>ë¡œë“œ ë°¸ëŸ°ì‹±ì€ í•„ìš”í•˜ë‹¤ë©´ ë¯¸ë¦¬ LBë¥¼ ë§Œë“¤ì–´ë†“ê³  ë„£ì–´ì£¼ë©´ ë˜ì§€ë§Œ, Airflowì—ëŠ” LBê°€ ë”°ë¡œ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë©”ì‹œì§€ ë¸Œë¡œì»¤ì¸ Redisë¥¼ í†µí•´ì„œ ì‘ì—…ì„ ì›Œì»¤ì—ì„œ ë°›ì•„ê°€ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ëƒ¥ airlfow.cfgì— ë©”ì¸ì„œë²„ ì•„ì´í”¼ì™€ metaDB ì•„ì´í”¼ë¥¼ ì ì–´ì£¼ë©´ ì•Œì•„ì„œ ê°€ì ¸ê°€ëŠ” ê²ƒì„ ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p>ì˜¤í† ìŠ¤ì¼€ì¼ë§ì„ íŒ¨ìŠ¤í•˜ê³  ë§Œë“¤ì–´ì£¼ë©´? ì„œë¹„ìŠ¤ê°€ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.</p><p>ì´ì œ í´ëŸ¬ìŠ¤í„°í™”ë©´ì—ì„œ ì‘ì—… íƒ­ì„ ëˆ„ë¥´ë©´ Taskì™€ ìƒíƒœë¥¼ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p><img src="/images/airflow-ecs/ecs-service-complete.png" alt="ecs-service-complete"></p><p>ì—¬ê¸°ì„œ ì›í•˜ëŠ” ì‘ì—…ì„ ì´ë¦„ìœ¼ë¡œ ì„ íƒí•˜ê³  logë¡œ ë“¤ì–´ê°€ë©´, ì»¨í…Œì´ë„ˆì—ì„œ ë°œìƒí•˜ê³  ìˆëŠ” ì´ë ¥ë“¤ì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê³³ì—ì„œ airflowê°€ ì˜ ì„¤ì¹˜ê°€ ëëŠ”ì§€ ì •ìƒì ìœ¼ë¡œ ë™ì‘ì´ ë˜ê³ ìˆëŠ”ì§€, í¬íŠ¸ëŠ” ì œëŒ€ë¡œ ì—´ë ¤ì„œ ì‘ì—…ì„ ë°›ê³ ìˆëŠ”ì§€ ë“±ë“±ì„ ì²´í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  ì´ ë¡œê·¸ëŠ” CloudWatchì— ë¡œê·¸ê·¸ë£¹ì—ì„œ ë” ìì„¸í•˜ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h2 id="Trouble-Shooting"><a href="#Trouble-Shooting" class="headerlink" title="Trouble Shooting"></a>Trouble Shooting</h2><p>ì´ì œ ì œê°€ ê²ªì€ ìì˜í•œ ì—ëŸ¬ë“¤ì— ëŒ€í•œ í•´ê²°ì— ëŒ€í•´ì„œ ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì•Œê³ ë³´ë©´ ê°„ë‹¨í•œë° í•´ê²°ì„ ëª»í•´ì„œ ì©”ì©”ë§¤ëŠë¼ ì•„ê¹Œìš´ ì‹œê°„ì„ ë‹¤ ë³´ëƒˆìŠµë‹ˆë‹¤â€¦ ì € ê°™ì´ ì‹œê°„ì„ ë²„ë¦¬ì‹œì§€ ë§ê¸°ë¥¼ ë°”ë¼ë©°â€¦</p><h3 id="Airflow-initdbì‹œ-SqlAlchemy-ModelSchema-Not-found-error"><a href="#Airflow-initdbì‹œ-SqlAlchemy-ModelSchema-Not-found-error" class="headerlink" title="Airflow initdbì‹œ SqlAlchemy ModelSchema Not found error"></a>Airflow initdbì‹œ SqlAlchemy ModelSchema Not found error</h3><p>ì‘ì—… ë¡œê·¸ë¥¼ ë³´ë˜ ì¤‘ì— airflow initdbë¥¼ í•  ë•Œë§ˆë‹¤ ModelSchema ê´€ë ¨ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. SqlAlchemyë¶€ë¶„ì—ì„œ ì—ëŸ¬ê°€ ë‚˜ê¸¸ë˜ ì—´ì‹¬íˆ êµ¬ê¸€ë§ì„ í•´ë³´ë‹ˆ, ì œê°€ ì‚¬ìš©í•˜ê³  ìˆëŠ”  <code>airflow 1.10.9</code>ë²„ì „ì—ì„œ ì‚¬ìš©í•˜ëŠ” sql_alchemy, marshmallow ë“±ì˜ ë²„ì „ì´ ë§ì§€ ì•Šì•„ ë°œìƒí•˜ëŠ” ë¬¸ì œì˜€ìŠµë‹ˆë‹¤. ë²„ì „ì´ ë°”ë€ ì´í›„ë¶€í„° ModelSchemaë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë©”ì„œë“œì˜ ë””ë ‰í† ë¦¬ êµ¬ì¡°ê°€ ë³€ê²½ë˜ì—ˆëŠ”ë°, ì´ ë•Œë¬¸ì— ë©”ì„œë“œë¥¼ ì œëŒ€ë¡œ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í•´ ë°œìƒí•œ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. </p><p>requirements.txtì— ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•˜ë©´ í•´ê²°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#requirements.txt</span></span><br><span class="line">marshmallow==2.21.0</span><br><span class="line">marshmallow-enum==1.5.1</span><br><span class="line">marshmallow-sqlalchemy==0.22.3</span><br></pre></td></tr></table></figure><h3 id="hostname-resolver-py-ë¬¸ì œ"><a href="#hostname-resolver-py-ë¬¸ì œ" class="headerlink" title="hostname_resolver.py ë¬¸ì œ"></a>hostname_resolver.py ë¬¸ì œ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">requests.exceptions.ConnectionError: HTTPConnectionPool(host&#x3D;&#39;169.254.169.254&#39;, port&#x3D;80): Max retries exceeded with url: &#x2F;latest&#x2F;meta-data&#x2F;local-ipv4 (Caused by NewConnectionError(&#39;&lt;urllib3.connection.HTTPConnection object at 0x7f3e4d9966d8&gt;: Failed to establish a new connection: [Errno 22] Invalid argument&#39;,))</span><br></pre></td></tr></table></figure><p>ì‘ì—… ë¡œê·¸ì—ì„œ ë˜ ë‹¤ì‹œ ì—ëŸ¬ê°€ ë°œìƒí•´ì„œ í™•ì¸í•´ë³´ë‹ˆ ìœ„ì˜ ì—ëŸ¬ê°€ ë°œìƒí•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. 169.254.169.254ëŠ” AWSì˜ metaë°ì´í„°ê°€ ë‹´ê²¨ìˆëŠ” ê³³ì¸ë° ì´ ê³³ì— ì ‘ê·¼í•˜ì§€ ëª»í•´ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì˜€ìŠµë‹ˆë‹¤. ê¸°ì¡´ ASGì›Œì»¤ì—ì„œëŠ” metadataë¥¼ í†µí•´ EC2ì˜ privateIPë¥¼ ê°–ê³ ì™€ì•¼ í•´ë‹¹ IPì— ì‘ì—…ë‚´ìš©ì„ ì „ë‹¬í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ docker ì»¨í…Œì´ë„ˆì˜ í˜¸ìŠ¤íŠ¸ëª…ë§Œ ê°–ê³ ì˜¤ê²Œ ë˜ì–´ ì‘ì—…ì´ ì œëŒ€ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ECSì—ì„œ FargateëŠ” dockerì˜ ì»¨í…Œì´ë„ˆ í˜¸ìŠ¤íŠ¸ëª…ì„ ë¶€ì—¬í•˜ëŠ” ëŒ€ì‹  privateIPë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤. <a href="https://docs.aws.amazon.com/ko_kr/AmazonECS/latest/userguide/fargate-task-networking.html">AWS ë¬¸ì„œ</a> <code>ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“ Amazon ECSì‘ì—…Fargateì—ëŠ” ê¸°ë³¸ í”„ë¼ì´ë¹— IP ì£¼ì†Œê°€ í¬í•¨ëœ elastic network interface (ENI) ê°€ ì œê³µë©ë‹ˆë‹¤.</code> </p><p>ë¬¼ë¡  ECSì—ì„œ metadataë¥¼ í™œì„±í™” í•˜ëŠ” ê²ƒë„ í•œ ë°©ë²•ì´ê² ìœ¼ë‚˜, Private IPê°€ ì œê³µë˜ë‹ˆ, ì´ IPë¥¼ ê°–ê³ ì˜¤ë©´ ì‘ì—…ì„ ë°”ë¡œ í• ë‹¹ë°›ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, êµ³ì´ metadataë¥¼ ì´ìš©í•  í•„ìš”ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ hostname_resolver.pyì˜ íŒŒì¼ì•ˆì˜ resolveí•¨ìˆ˜ì˜ ë‚´ìš©ì„ </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">resolve</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="keyword">return</span> socket.gethostbyname(socket.gethostname())</span><br></pre></td></tr></table></figure><p>ì´ëŸ°ì‹ìœ¼ë¡œ ì‚¬ìš©í•´ì„œ privateIPë¥¼ ì „ë‹¬í–ˆìŠµë‹ˆë‹¤. </p><h3 id="airflowì—ì„œ-emrì—-ì‘ì—…-ì‹¤í–‰ì‹œ-ê¶Œí•œ-ë¬¸ì œ"><a href="#airflowì—ì„œ-emrì—-ì‘ì—…-ì‹¤í–‰ì‹œ-ê¶Œí•œ-ë¬¸ì œ" class="headerlink" title="airflowì—ì„œ emrì— ì‘ì—… ì‹¤í–‰ì‹œ ê¶Œí•œ ë¬¸ì œ"></a>airflowì—ì„œ emrì— ì‘ì—… ì‹¤í–‰ì‹œ ê¶Œí•œ ë¬¸ì œ</h3><p>ì´ì œ ì •ë§ ë‹¤ ë˜ì—ˆë‹¤ê³  ìƒê°í•˜ê³  airflowì— EMRì— ì‹¤í–‰í•˜ëŠ” ì‘ì—…ì„ ë‚´ë ¸ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë˜ ë‹¤ì‹œ</p><p><code>ERROR - An error occurred (AccessDeniedException) when calling the RunJobFlow operation: User: arn:aws:sts::xxxxx:assumed-role/ecsTaskExecutionRole/xxxxxxxx is not authorized to perform: elasticmapreduce:RunJobFlow on resource: arn:aws:elasticmapreduce:ap-northeast-2:xxxxxx:cluster</code></p><p>ê¶Œí•œì´ ì—†ë‹¤ëŠ” ì–˜ê¸°ê°€ ë‚˜ì™”ìŠµë‹ˆë‹¤. ë‹¤í–‰íˆ ë¡œê·¸ì— ê¶Œí•œ ë¬¸ì œë¼ê³  ì¨ìˆì–´ì„œ, ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. IAMì—ì„œ <code>ecsTaskExecutionRole</code> ë¥¼ ì°¾ì•˜ê³ , ì—¬ê¸°ì— ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ ê¶Œí•œì„ ë„£ì–´ì£¼ë‹ˆ, EMRì—ì„œ ì‘ì—…ì´ ì‹¤í–‰ë˜ê³  EMR í´ëŸ¬ìŠ¤í„°ë„ ì»¨íŠ¸ë¡¤ í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. </p><hr><p>ì´ì™¸ì—ë„ ìì˜í•œ ì´ìŠˆë“¤ì´ ë§ì•˜ì§€ë§Œ, ë„ˆë¬´ ìì˜í•´ì„œ ê¸€ë¡œ ì˜®ê¸°ëŠ”ê²Œ ë¯¼ë§í•´ ì˜¬ë¦¬ì§€ëŠ” ì•Šì•˜ìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ 1-2ì£¼ê°„ì˜ ì‚½ì§ˆì´ ê¸€ í•œí¸ìœ¼ë¡œ ì •ë¦¬ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ì–´ë ¤ì›€ë„ ë§ì•˜ì§€ë§Œ ì´ë¥¼ í†µí•´ì„œ ECSë¥¼ ìì„¸í•˜ê²Œ ë°°ì›Œë³´ê³  í™œìš©í•  ìˆ˜ ìˆì—ˆë˜ ê¸°íšŒì˜€ë˜ ê²ƒ ê°™ì•„ ë³´ëŒìˆì—ˆë„¤ìš”. ECSë¡œ ë°”ê¾¸ê²Œ ë˜ë©´ì„œ, ì—¬ëŸ¬ ê¸°ëŠ¥ì  ë¬¸ì œ ë•Œë¬¸ì— ì ì  Kubernetesë¡œ ë°”ê¾¸ì–´ì•¼ ê² ë‹¤ëŠ” ìƒê°ì´ ë§ì´ ë“¤ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. í•œ ë‹¬ ì´ë‚´ì—ëŠ” Airflowë¥¼ Kubernetesì— ì˜¬ë¦¬ëŠ” ê¸€ì„ ì“°ê²Œ ë˜ì§€ ì•Šì„ê¹Œ ì‹¶ìŠµë‹ˆë‹¤. ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ë¶€ì¡±í•œ ë¶€ë¶„ì€ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš”!</p><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul><li><a href="https://boostbrothers.github.io/technology/2020/01/29/AWS-ECS-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0.html">https://boostbrothers.github.io/technology/2020/01/29/AWS-ECS-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0.html</a></li><li><a href="https://wooono.tistory.com/133">https://wooono.tistory.com/133</a></li><li><a href="https://docs.aws.amazon.com/ko_kr/AmazonECS/latest/userguide/fargate-task-networking.html">https://docs.aws.amazon.com/ko_kr/AmazonECS/latest/userguide/fargate-task-networking.html</a></li></ul>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2021/08/28/airflow-ecs/#disqus_thread</comments>
    </item>
    
    <item>
      <title>yml íŒŒì¼ì„ ì˜ ë‹¤ë¤„ë³´ì</title>
      <link>http://tkdguq05.github.io/2021/08/11/yaml-break/</link>
      <guid>http://tkdguq05.github.io/2021/08/11/yaml-break/</guid>
      <pubDate>Wed, 11 Aug 2021 08:45:07 GMT</pubDate>
      <description>
      
        &lt;p&gt;ymlíŒŒì¼ì„ ê°–ê³  ë†€ì•„ë³´ì&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>ymlíŒŒì¼ì„ ê°–ê³  ë†€ì•„ë³´ì</p><a id="more"></a><h2 id="Yaml"><a href="#Yaml" class="headerlink" title="Yaml"></a>Yaml</h2><blockquote><p><strong>YAML</strong>ì€ <a href="https://ko.wikipedia.org/wiki/XML">XML</a>, <a href="https://ko.wikipedia.org/wiki/C_(í”„ë¡œê·¸ë˜ë°_ì–¸ì–´)">C</a>, <a href="https://ko.wikipedia.org/wiki/íŒŒì´ì¬">íŒŒì´ì¬</a>, <a href="https://ko.wikipedia.org/wiki/í„">í„</a>, <a href="https://ko.wikipedia.org/w/index.php?title=RFC2822&action=edit&redlink=1">RFC2822</a>ì—ì„œ ì •ì˜ëœ e-mail ì–‘ì‹ì—ì„œ ê°œë…ì„ ì–»ì–´ ë§Œë“¤ì–´ì§„ â€˜ì‚¬ëŒì´ ì‰½ê²Œ ì½ì„ ìˆ˜ ìˆëŠ”â€™ ë°ì´í„° ì§ë ¬í™” ì–‘ì‹ì´ë‹¤. 2001ë…„ì— <a href="https://ko.wikipedia.org/w/index.php?title=í´ë¼í¬_ì—ë°˜ìŠ¤&action=edit&redlink=1">í´ë¼í¬ ì—ë°˜ìŠ¤</a>ê°€ ê³ ì•ˆí–ˆê³ , Ingy dot Net ë° Oren Ben-Kikiì™€ í•¨ê»˜ ë””ìì¸í–ˆë‹¤. <a href="https://ko.wikipedia.org/wiki/YAML">ìœ„í‚¤ë°±ê³¼</a></p></blockquote><p>YAMLì˜ ì´ë¦„ì€ YAML Ainâ€™t Markup Language ë¼ëŠ” ì´ë¦„ì—ì„œ ìœ ë˜ë˜ì—ˆê³  ì›ë˜ì˜ ëœ»ì€ Yet Another Markup Languageë¡œ ë˜ ë‹¤ë¥¸ ë§ˆí¬ì—… ì–¸ì–´ì˜€ìœ¼ë‚˜, í•µì‹¬ì€ ë¬¸ì„œ ë§ˆí¬ì—…ì´ ì•„ë‹Œ ë°ì´í„° ì¤‘ì‹¬ì— ìˆìŠµë‹ˆë‹¤. XMLê³¼ Jsonì´ ë°ì´í„° ì§ë ¬í™”ì— ì£¼ë¡œ ì‚¬ìš©ë˜ê³  ìˆëŠ”ë°, ë§ì€ ì‚¬ëŒë“¤ì´ YAMLì„ ê°€ë²¼ìš´ ë§ˆí¬ì—… ì–¸ì–´ë¡œ ì‚¬ìš©í•˜ë ¤ê³  í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><p><code>yamlì´ ìˆëŠ”ë° ymlì€ ë­ì§€?</code></p><p>yamlì€ ê³µì‹ í™•ì¥ìì´ë©° ê·¸ ì™¸ì˜ í™•ì¥ìë¡œ ymlë„ ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜›ë‚ ì—ëŠ” íŒŒì¼ì˜ í™•ì¥ì ê¸¸ì´ê°€ 3ìë¡œ ì œí•œë˜ì—ˆê¸° ë•Œë¬¸ì— 3ê¸€ì í™•ì¥ì ìŠ¤íƒ€ì¼ì„ ê³ ìˆ˜í•˜ëŠ” ì‚¬ëŒë“¤ ë•Œë¬¸ì— ymlíŒŒì¼ í™•ì¥ìê°€ ë³´ì´ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p><h2 id="ì™œ-YAMLì„-ì‚¬ìš©í• ê¹Œ"><a href="#ì™œ-YAMLì„-ì‚¬ìš©í• ê¹Œ" class="headerlink" title="ì™œ YAMLì„ ì‚¬ìš©í• ê¹Œ?"></a>ì™œ YAMLì„ ì‚¬ìš©í• ê¹Œ?</h2><p>yamlì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ê°„ë‹¨í•©ë‹ˆë‹¤. í•œ íŒŒì¼ì—ì„œ ëª¨ë“  configurationì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì…ë‹ˆë‹¤. í˜¹ì‹œ yamlì„ ì˜ ì ‘í•´ë³´ì§€ ëª»í•˜ì‹  ë¶„ë“¤ì´ ìˆë‹¤ë©´, ë¸”ë¡œê·¸ íŒŒì¼êµ¬ì¡°ë¥¼ ì‚´í´ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì €ì˜ ê²½ìš°ëŠ” hexoë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°, icarus themeë¥¼ ë“¤ì–´ê°€ ë³´ë©´ _config.ymlíŒŒì¼ë¡œ ì´ í…Œë§ˆì˜ êµ¬ì„±ìš”ì†Œë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤. ì´ íŒŒì¼ì„ í†µí•´ ê¸€ë˜ ì•„ì´ì½˜ì„ ë“±ë¡í•œë‹¤ë˜ê°€ categoryí˜ì´ì§€ë¥¼ ì˜¤ë¥¸ìª½ì´ë‚˜ ì™¼ìª½ìœ¼ë¡œ ì˜®ê¸°ëŠ” ë“±ì˜ ì‘ì—…ì„ ê°„ë‹¨í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ì´ê²ƒì„ ì‹¤ë¬´ì—ë„ ì ìš©í•˜ê³  ìˆëŠ”ë°, ì €í¬ íšŒì‚¬ì˜ ê²½ìš°ì—ëŠ” Airflowì˜ ì¶”ì²œ DAGì™€ Segmentation DAGë“¤ì„ í•œ íŒŒì¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ yamlíŒŒì¼ì„ ë§Œë“¤ì–´ì„œ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê³ ê°ì‚¬ì— ëŒ€í•œ ì •ë³´ì™€ ê³ ê°ì‚¬ì— í•„ìš”í•œ ì„œë²„ì˜ ìŠ¤í™ì´ë‚˜ ì‘ì—… ë©”ëª¨ë¦¬ë“¤ì„ yamlì—  ë„£ì–´ì„œ êµ‰ì¥íˆ í¸ë¦¬í•˜ê²Œ ì‘ì—… ë° ì„¸ë¶€ ë¦¬ì†ŒìŠ¤ë“¤ì„ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. yamlê³¼ github action ê·¸ë¦¬ê³  ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ë“±ì„ ì´ìš©í•´ì„œ ì‘ì—…ì„ í•˜ê³  ìˆëŠ”ë°, ê¸°íšŒê°€ ë˜ë©´ ë” ìì„¸í•˜ê²Œ ì†Œê°œí•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ íšŒì‚¬ì˜ ê²½ìš°ì—ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë“±ì¥í•˜ëŠ” ê²ƒì´ ì•„ë§ˆ kubernetesì¼ ê²ƒì…ë‹ˆë‹¤. kubernetesì—ì„œëŠ” ëŒ€ë¶€ë¶„ì˜ ì •ë³´ë¥¼ yamlíŒŒì¼ë¡œ ë§Œë“¤ì–´ì„œ kubectlì— ì œê³µí•©ë‹ˆë‹¤. ì €í¬ê°€ ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•˜ê²Œ kubernetesì—ì„œë„ í¸ë¦¬í•˜ê²Œ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë‚˜ ê¸°íƒ€ ì„¤ì •ì„ í¸ë¦¬í•˜ê²Œ í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.</p><h2 id="YAML-ë¬¸ë²•"><a href="#YAML-ë¬¸ë²•" class="headerlink" title="YAML ë¬¸ë²•"></a>YAML ë¬¸ë²•</h2><p>YAMLì€ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ëŒ ëˆˆìœ¼ë¡œ ë³´ê¸°ê°€ í¸í•©ë‹ˆë‹¤. ê°„ë‹¨í•œ ë¬¸ë²•ì„ ìµíˆê³  ë‚œë‹¤ë©´, python ì½”ë“œë‚˜ ë‹¤ë¥¸ ì½”ë“œë“¤ì— ë¹„í•´ì„œ ê°€ë…ì„±ì´ í›¨ì”¬ ì¢‹ì•„ ëˆˆìœ¼ë¡œ ì–´ë–¤ ì‘ì—…ì„ í• ì§€ ì•Œì•„ë³´ê¸°ê°€ ë” ì¢‹ì„ ê²ƒì´ë¼ê³  ìƒê°ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ yaml ë¬¸ë²•ë“¤ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤!</p><h3 id="ì£¼ì„ê³¼-ê¸°ë³¸-ë¬¸ë²•"><a href="#ì£¼ì„ê³¼-ê¸°ë³¸-ë¬¸ë²•" class="headerlink" title="ì£¼ì„ê³¼ ê¸°ë³¸ ë¬¸ë²•"></a>ì£¼ì„ê³¼ ê¸°ë³¸ ë¬¸ë²•</h3><p>yamlì€ pythonê³¼ ë§ˆì°¬ê°€ì§€ë¡œ <code>#</code>ì„ ì£¼ì„ì„ ë‹¤ëŠ” ë¬¸ìë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì½”ë“œ ì•ì— #í‘œì‹œë¥¼ í•´ì£¼ë©´ ê·¸ ë¼ì¸ì€ ì½ì§€ ì•ŠìŠµë‹ˆë‹¤. ë˜í•œ pythonê³¼ ë¹„ìŠ·í•˜ê²Œ indentationì— ë¯¼ê°í•©ë‹ˆë‹¤. íŒŒì´ì¬ì—ì„œëŠ” tab(space 4ë²ˆ)ì„ ì£¼ë¡œ ì‚¬ìš©í•˜ì§€ë§Œ yamlì—ì„œëŠ” ê¸°ë³¸ì´ ìŠ¤í˜ì´ìŠ¤ë°” ë‘ ë²ˆ ì…ë‹ˆë‹¤. ê¸°ë³¸ì ì¸ ë¬¸ë²•ì€ <a href="https://subicura.com/k8s/prepare/yaml.html#%E1%84%80%E1%85%B5%E1%84%87%E1%85%A9%E1%86%AB%E1%84%86%E1%85%AE%E1%86%AB%E1%84%87%E1%85%A5%E1%86%B8">ì¿ ë²„ë„¤í‹°ìŠ¤ ì•ˆë‚´ì„œ</a> ì— ë„ˆë¬´ ì˜ ì •ë¦¬ê°€ ë˜ì–´ìˆì–´ì„œ, ë§í¬ë¡œ ëŒ€ì²´í•˜ê² ìŠµë‹ˆë‹¤. í•œ ë²ˆ ì½ê³  ìŠ¤í¬ë¡¤ì„ ë‚´ë ¤ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤. </p><h3 id="ë¦¬ìŠ¤íŠ¸"><a href="#ë¦¬ìŠ¤íŠ¸" class="headerlink" title="ë¦¬ìŠ¤íŠ¸"></a>ë¦¬ìŠ¤íŠ¸</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span><span class="bullet">--</span> <span class="comment"># block format</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">apple</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">banana</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">kiwi</span></span><br><span class="line"><span class="bullet">-</span><span class="bullet">--</span> <span class="comment">#inline format</span></span><br><span class="line"><span class="string">[apple,</span> <span class="string">banana,</span> <span class="string">kiwi]</span></span><br></pre></td></tr></table></figure><p>ë¦¬ìŠ¤íŠ¸ì˜ í˜•ì‹ì€ ë‘ ê°€ì§€ë¡œ ë‚˜ë‰˜ì–´ ì§‘ë‹ˆë‹¤. block formatê³¼ inline formatì…ë‹ˆë‹¤. ì €ëŠ” ì‚¬ì‹¤ ì´ í¬ë§·ì„ êµ‰ì¥íˆ ì˜¤ë˜ ì „ ë¶€í„° ë´ì™”ìŠµë‹ˆë‹¤. hexoë¡œ í¬ìŠ¤íŒ…ì„ í•˜ë‹¤ë³´ë©´, ë§¨ ìœ„ì— ì‚¬ì´ë“œ ë°”ë‚˜ íƒœê·¸, ì¹´í…Œê³ ë¦¬ë¥¼ ì •í•˜ëŠ” ë¶€ë¶„ì´ ìˆëŠ”ë°, ì´ ë¶€ë¶„ì´ ë°”ë¡œ yamlì˜ ë¦¬ìŠ¤íŠ¸ í˜•ì‹ì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p> <img src="/images/yaml/hexo-yaml.png" alt="hexo-yaml" style="zoom:50%;" /><p>ì˜ˆì „ì—ëŠ” ë­”ì§€ë„ ëª¨ë¥´ê³  ì‚¬ìš©í–ˆì—ˆëŠ”ë°, ë‹¤ì‹œ ì‚´í´ë³´ë‹ˆ êµ¬ì¡°ê°€ ëˆˆì— ë“¤ì–´ì˜¤ê¸° ì‹œì‘í•©ë‹ˆë‹¤.</p><h3 id="í•´ì‹œ"><a href="#í•´ì‹œ" class="headerlink" title="í•´ì‹œ"></a>í•´ì‹œ</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span><span class="bullet">--</span> <span class="comment"># Block</span></span><br><span class="line"><span class="attr"> name:</span> <span class="string">sanghyub</span></span><br><span class="line"><span class="attr"> age:</span> <span class="number">29</span></span><br><span class="line"><span class="bullet">-</span><span class="bullet">--</span> <span class="comment"># Inline</span></span><br><span class="line"><span class="string">&#123;name:</span> <span class="string">sanghyub,</span> <span class="attr">age:</span> <span class="number">29</span><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p>í•´ì‹œëŠ” í‚¤-ë°¸ë¥˜ êµ¬ì¡°ë¼ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤. ì´ê²ƒë„ ì—­ì‹œ Block, Inlineë°©ì‹ì´ ìˆìŠµë‹ˆë‹¤. ì €ëŠ” ê°œì¸ì ìœ¼ë¡œ Blockë°©ì‹ì„ ì„ í˜¸í•´ì„œ ì£¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°, í¸í•œ ê±¸ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p><h4 id="ë¦¬ìŠ¤íŠ¸ì™€-í•´ì‹œ"><a href="#ë¦¬ìŠ¤íŠ¸ì™€-í•´ì‹œ" class="headerlink" title="ë¦¬ìŠ¤íŠ¸ì™€ í•´ì‹œ"></a>ë¦¬ìŠ¤íŠ¸ì™€ í•´ì‹œ</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">men:</span> <span class="string">[sanghyub,</span> <span class="string">lee]</span></span><br><span class="line"><span class="attr">women:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">sanghyub</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">lee</span></span><br></pre></td></tr></table></figure><p>ë§Œì•½ í‚¤ì— ì—¬ëŸ¬ ê°’ë“¤ì„ ë„£ê³  ì‹¶ë‹¤ë©´ ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h4 id="í•´ì‹œì˜-ë¦¬ìŠ¤íŠ¸"><a href="#í•´ì‹œì˜-ë¦¬ìŠ¤íŠ¸" class="headerlink" title="í•´ì‹œì˜ ë¦¬ìŠ¤íŠ¸"></a>í•´ì‹œì˜ ë¦¬ìŠ¤íŠ¸</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">messi</span></span><br><span class="line"><span class="attr">  assists:</span>  <span class="number">61</span></span><br><span class="line"><span class="attr">  goals:</span>  <span class="number">99</span></span><br><span class="line"><span class="bullet">-</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">Son</span></span><br><span class="line"><span class="attr">  assists:</span>  <span class="number">77</span></span><br><span class="line"><span class="attr">  goals:</span><span class="number">100</span></span><br></pre></td></tr></table></figure><p>ë°˜ëŒ€ë¡œ í•˜ê³  ì‹¶ë‹¤ë©´ ì´ëŸ° ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ì´í•´í•˜ê¸° ì–´ë µë‹¤ë©´, ì§ì ‘ íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><p><img src="/images/yaml/yaml-code.png" alt="pythonìœ¼ë¡œ ê°’ì„ í™•ì¸í•´ë³´ì"></p><p>pythonìœ¼ë¡œ pyyamlì„ ë¶ˆëŸ¬ì™€ì„œ í™•ì¸í•´ë³´ë©´ ê°’ì´ ìœ„ì™€ ê°™ì´ ë“¤ì–´ê°€ ìˆëŠ” ê²ƒì„ í™•ì¸í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h3 id="ìƒì†"><a href="#ìƒì†" class="headerlink" title="ìƒì†"></a>ìƒì†</h3><p>yamlì—ì„œ ì¬ë°ŒëŠ” ë¶€ë¶„ì€ ìƒì†ì— ëŒ€í•œ ë¶€ë¶„ì…ë‹ˆë‹¤. ì‚¬ì‹¤ ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œ ì£¼ë¡œ ë‹¤ë£¨ê³  ì‹¶ì—ˆë˜ ê²ƒì´ê¸°ë„ í•©ë‹ˆë‹¤. ìœ„ì—ì„œ ë§í•œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í–ˆì„ ë•Œì—ë„, ì´ ìƒì†ì„ ì²˜ìŒ ì ‘í•˜ê³  ì ìš©í–ˆìŠµë‹ˆë‹¤. ë¬¼ë¡  ì²˜ìŒì—” ì¢€ í—·ê°ˆë ¸ì§€ë§Œ ì‘ìš©í•˜ë©´ ì½”ë“œë¥¼ ì ì„ ì–‘ì´ íš¨ê³¼ì ìœ¼ë¡œ ì¤„ì–´ë“œëŠ” ê²ƒì„ ì²´ê°í•˜ì‹¤ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ìƒì†ì—ì„œ ì¤‘ìš”í•œ ê²ƒì€ ìƒì†ì— ëŒ€í•œ ë¬¸ìì™€ Aliasì…ë‹ˆë‹¤. ë¯¸ë¦¬ ì •í•œ ì–‘ì‹ì— ë³„ëª…ì„ ë¶™ì´ê³  ê·¸ ë³„ëª… ë¶™ì¸ ê²ƒì„ ë¶ˆëŸ¬ì˜¤ë©´ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. êµ³ì´ ë˜‘ê°™ì´ ë”°ë¼ ì¹  í•„ìš”ê°€ ì—†ì–´ì§€ëŠ” ê²ƒì…ë‹ˆë‹¤.</p><h4 id="Alias"><a href="#Alias" class="headerlink" title="Alias"></a>Alias</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">b-anchor:</span> <span class="meta">&amp;name</span> <span class="string">value</span></span><br><span class="line"></span><br><span class="line"><span class="attr">b-alias:</span> <span class="meta">*name</span></span><br></pre></td></tr></table></figure><p>ë³„ëª…ì€ êµ‰ì¥íˆ ê°„ë‹¨í•©ë‹ˆë‹¤. &amp;ë¡œ ë³„ëª…ì„ ë¶™ì—¬ì£¼ë©´ ëì…ë‹ˆë‹¤! ë¶ˆëŸ¬ì˜¬ ë•ŒëŠ” *ë¥¼ ì´ìš©í•´ì„œ ê°’ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h4 id="ìƒì†-lt-lt"><a href="#ìƒì†-lt-lt" class="headerlink" title="ìƒì†(&lt;&lt;)"></a>ìƒì†(&lt;&lt;)</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">maltese:</span> <span class="meta">&amp;dog</span></span><br><span class="line"><span class="attr">  cute:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  bark:</span> <span class="string">"bow-wow"</span></span><br><span class="line"><span class="attr">jindol:</span></span><br><span class="line">  <span class="string">&lt;&lt;:</span> <span class="meta">*dog</span></span><br><span class="line"><span class="attr">  nationality:</span> <span class="string">"korea"</span></span><br><span class="line"><span class="attr">pug:</span></span><br><span class="line">  <span class="string">&lt;&lt;:</span> <span class="meta">*dog</span></span><br><span class="line"><span class="attr">  ugly:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>ìœ„ì˜ ì˜ˆì‹œë¥¼ ì‚¬ìš©í•´ì„œ ìƒì†ì˜ ì¢…í•©ì ì¸ ì„¤ëª…ì„ í•´ë³´ê² ìŠµë‹ˆë‹¤. ë§í‹°ì¦ˆë¼ëŠ” í‚¤ì— ì—¬ëŸ¬ ê°’ë“¤ì„ ë‹´ì•„ë†¨ìŠµë‹ˆë‹¤. ê·€ì—¬ì›€ê³¼ ì§–ìŒì„ ë„£ì–´ ë†¨ìŠµë‹ˆë‹¤. ë§í‹°ì¦ˆëŠ” ê°œë¼ëŠ” íŠ¹ì„±ì„ ë‹´ì•„ë‘˜ë§Œ í•œ ê²ƒ ê°™ì•„ì„œ &amp;dogë¼ê³  ë³„ëª…ì„ ë¶™ì—¬ë†¨ìŠµë‹ˆë‹¤. jindolì´ì— ë˜‘ê°™ì€ ê°œì˜ íŠ¹ì„±ì„ ë„£ê³  ì‹¶ì€ë° íƒ€ì ë§ì´ ì¹˜ëŠ” ê²ƒì€ ì‹«ì–´ì„œ ë³„ëª… ë¶™ì¸ ê²ƒì„ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì¶”ê°€ì ì¸ íŠ¹ì„±ì´ í•„ìš”í•´ì„œ ê°’ì„ ë„£ì—ˆìŠµë‹ˆë‹¤. pugë„ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤. ê¸°ë³¸ì ì¸ ê°œì˜ íŠ¹ì„±ì€ ë³„ëª…ì„ ë¶ˆëŸ¬ì™€ì„œ ë¶™ì—¬ë„£ì—ˆê³  ì¶”ê°€ì ì¸ íŠ¹ì„±ì„ ë¶™ì—¬ë„£ì—ˆìŠµë‹ˆë‹¤.</p><p>ê·¸ë¦¬ê³  í•œ ê°€ì§€ ë” ì•Œì•„ì•¼ í•  ì ì€, ì´ë ‡ê²Œ ë¶™ì¸ ë³„ëª…ì€ ê°™ì€ ë””ë ‰í† ë¦¬ì—ì„œ ê³µìœ ê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì¦‰, í•œ ymlíŒŒì¼ì—ì„œ ë¶™ì—¬ë†“ì€ ë³„ëª…ì„ ë‹¤ë¥¸ ymlíŒŒì¼ì—ì„œ *ë¡œ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#config.yml</span></span><br><span class="line"><span class="attr">EXECUTOR_SPEC:</span> </span><br><span class="line"><span class="number">10</span><span class="string">G-10G-15</span> <span class="string">:</span> <span class="string">&amp;10G-10G-15</span></span><br><span class="line"><span class="attr">  executor_memory:</span> <span class="number">10</span><span class="string">G</span></span><br><span class="line"><span class="attr">  driver_memory:</span> <span class="number">10</span><span class="string">G</span></span><br><span class="line"><span class="attr">  num_executors:</span> <span class="number">15</span></span><br><span class="line"><span class="number">20</span><span class="string">G-20G-30</span> <span class="string">:</span> <span class="string">&amp;20G-20G-30</span></span><br><span class="line"><span class="attr">  executor_memory:</span> <span class="number">20</span><span class="string">G</span></span><br><span class="line"><span class="attr">  driver_memory:</span> <span class="number">20</span><span class="string">G</span></span><br><span class="line"><span class="attr">  num_executors:</span> <span class="number">30</span></span><br><span class="line"><span class="number">20</span><span class="string">G-20G-50</span> <span class="string">:</span> <span class="string">&amp;20G-20G-50</span></span><br><span class="line"><span class="attr">  executor_memory:</span> <span class="number">20</span><span class="string">G</span></span><br><span class="line"><span class="attr">  driver_memory:</span> <span class="number">20</span><span class="string">G</span></span><br><span class="line"><span class="attr">  num_executors:</span> <span class="number">50</span></span><br><span class="line"><span class="number">50</span><span class="string">G-50G-50</span> <span class="string">:</span> <span class="string">&amp;50G-50G-50</span></span><br><span class="line"><span class="attr">  executor_memory:</span> <span class="number">50</span><span class="string">G</span></span><br><span class="line"><span class="attr">  driver_memory:</span> <span class="number">50</span><span class="string">G</span></span><br><span class="line"><span class="attr">  num_executors:</span> <span class="number">50</span></span><br><span class="line"></span><br><span class="line"><span class="attr">feather:</span> <span class="meta">&amp;feather</span></span><br><span class="line"><span class="attr">  exspec:</span></span><br><span class="line">    <span class="string">&lt;&lt;:</span> <span class="string">*10G-10G-15</span></span><br><span class="line"><span class="attr">middle:</span> <span class="meta">&amp;middle</span></span><br><span class="line"><span class="attr">  exspec:</span></span><br><span class="line">    <span class="string">&lt;&lt;:</span> <span class="string">*20G-20G-30</span></span><br><span class="line"><span class="attr">lightheavy:</span> <span class="meta">&amp;lightheavy</span></span><br><span class="line"><span class="attr">  exspec:</span></span><br><span class="line">    <span class="string">&lt;&lt;:</span> <span class="string">*20G-20G-50</span></span><br><span class="line"><span class="attr">heavy:</span> <span class="meta">&amp;heavy</span></span><br><span class="line"><span class="attr">  exspec:</span></span><br><span class="line">    <span class="string">&lt;&lt;:</span> <span class="string">*50G-50G-50</span></span><br></pre></td></tr></table></figure><p>Airflowì˜ ê° DAGì—ì„œ EMR ìŠ¤í™ì„ ë‹¤ë¥´ê²Œ ì‚¬ìš©í•˜ê³  Airflowì˜ DAGë¥¼ ì¢…í•©í•˜ëŠ” ymlíŒŒì¼ì´ ìˆë‹¤ê³  ê°€ì •í•´ ë´…ì‹œë‹¤. ë§Œì•½ì— ìœ„ì™€ ê°™ì´ ymlì´ ì‘ì„±ë˜ì–´ ìˆì§€ ì•Šì•˜ë‹¤ë©´, ì¢…í•©í•˜ëŠ” ymlíŒŒì¼ì˜ ê³ ê°ì‚¬ DAGë§ˆë‹¤ executor, driver ë©”ëª¨ë¦¬, ìµìŠ¤íí„° ìˆ˜ë¥¼ ì¼ì¼ì´ ì§€ì •í•´ì¤˜ì•¼ ë˜ì—ˆì„ ê²ƒì…ë‹ˆë‹¤. ê³ ê°ì‚¬ê°€ 100ê°œë¼ë©´? 100ê°œì”© ì ëŠ” ë…¸ê°€ë‹¤ë¥¼ í•˜ë‹¤ê°€ ì •ì‹ ì´ í˜¼ë¯¸í•´ì ¸ì„œ íœ´ë¨¼ì—ëŸ¬ê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ë§¤ìš° ë†’ì•„ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´, Airflowë¥¼ í†µí•´ ì‹¤í–‰í•œ DAGë“¤ì— ì‹¬ê°í•œ ì—ëŸ¬ê°€ ë°œìƒí•˜ê³ , ì›ì¸ íŒŒì•…í•˜ê¸°ê°€ ë§¤ìš° í˜ë“¤ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤.(ì‹¤ì œë¡œ ê·¸ë˜ ë´¤ìŠµë‹ˆë‹¤.) </p><p>ì¢€ ë” ë“¤ì–´ê°€ë©´, ì´ clients.ymlê³¼ ì¢…í•©í•˜ëŠ” ymlì„ ì—°ê²°í•˜ê¸° ìœ„í•œ pythoníŒŒì¼ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ íŒŒì´ì¬ íŒŒì¼ë“¤ì„ ì´ìš©í•´ì„œ clients.ymlì— ìˆëŠ” ê°’ë“¤ì„ ì¢…í•©í•˜ëŠ” ymlì— ì˜®ê²¨ì£¼ê³  í•©ì³ì§„ ymlì„ í†µí•´ ì™„ì „í•´ì§„ ê°’ë“¤ì„ ê°€ì§€ê³  ê³ ê°ì‚¬ë“¤ì˜ DAGë“¤ì„ ìƒì„±í•  ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤. </p><hr><p>ê³ ê°ì‚¬ë“¤ì˜ DAGë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì£¼ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ê¶ê¸ˆí•´ì§€ì…¨ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤ë§Œ, yamlê¸€ì„ í†µí•´ì„œ yamlì„ í•œë²ˆ ê°–ê³  ë†€ì•„ë³´ì‹œê³ ?! ë‹¤ìŒ ê¸€ì„ ê¸°ëŒ€í•´ì£¼ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë‹¤ìŒ ê¸€ì—ì„œëŠ” ìœ„ì—ì„œ ë§Œë“  ymlíŒŒì¼ê³¼ ì¢…í•©í•˜ëŠ” ymlíŒŒì¼, ê·¸ë¦¬ê³  github actionì„ ì‚¬ìš©í•´ì„œ Airflowì˜ DAGë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ê³  ë°°í¬í•˜ëŠ” ê³¼ì •ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2021/08/11/yaml-break/#disqus_thread</comments>
    </item>
    
    <item>
      <title>ê¸€ì„ ì™œ ì¨ì•¼ í• ê¹Œ? - ê³ ë¯¼ê³¼ ì •ë¦¬ì˜ ì‹œê°„</title>
      <link>http://tkdguq05.github.io/2021/08/01/geultto6/</link>
      <guid>http://tkdguq05.github.io/2021/08/01/geultto6/</guid>
      <pubDate>Sun, 01 Aug 2021 01:06:23 GMT</pubDate>
      <description>
      
        &lt;p&gt;ê¸€ë˜ 6ê¸°ë¥¼ ì‹œì‘í•˜ë©°, ê³ ë¯¼í•œê±¸ ì •ë¦¬í•˜ê¸°&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>ê¸€ë˜ 6ê¸°ë¥¼ ì‹œì‘í•˜ë©°, ê³ ë¯¼í•œê±¸ ì •ë¦¬í•˜ê¸°</p><a id="more"></a><h2 id="ê¸€ë˜"><a href="#ê¸€ë˜" class="headerlink" title="ê¸€ë˜"></a>ê¸€ë˜</h2><p>2019ë…„ 7ì›”ì— ì…ì‚¬ë¥¼ í•˜ê³  ì„¤ë ˆëŠ” ë§˜ìœ¼ë¡œ ê¸€ë˜ 3ê¸°ì— ì§€ì›í–ˆì„ë•Œê°€ ìƒê°ë‚œë‹¤. í˜ì´ìŠ¤ ë¶ì— ê¸€ë˜ë¥¼ ëª¨ì§‘í•œë‹¤ëŠ” ê¸€ì„ ë³´ê³  ì—´ì‹¬íˆ ìê¸°ì†Œê°œë¥¼ ì¤€ë¹„í•´ì„œ êµ¬ê¸€ í¼ì„ ì…ë ¥í•˜ê³  ê²°êµ­ í•©ê²©í–ˆë‹¤ëŠ” ë©”ì¼ì„ ë°›ì•˜ë‹¤. ë‹¹ì‹œì—ëŠ” ì½”ë¡œë‚˜ê°€ ì—†ì—ˆì„ ë•Œë¼, ì ì‹¤ ìª½ì— ë°°ë¯¼ ì‘ì€ ì§‘ì„ ë¹Œë ¤ì„œ(ì°¸ê°€í•˜ì‹  ë‹¤ë¥¸ ê¸€ë˜ë¶„ì˜ ë„ì›€ìœ¼ë¡œ) OTë¥¼ ì§„í–‰í–ˆë‹¤. í•˜í•„ ë§¨ ì•ì— ì•‰ì•˜ì–´ì„œ ê°€ì¥ ì²˜ìŒìœ¼ë¡œ ìê¸°ì†Œê°œë¥¼ í–ˆëŠ”ë°, ì²« íšŒì‚¬ì— ì…ì‚¬í–ˆë‹¤ê³  í•˜ë‹ˆ ë‹¤ë¥¸ ë¶„ë“¤ì´ ì¶•í•˜í•œë‹¤ê³  ë°•ìˆ˜ë¥¼ ì³ì£¼ì…¨ë‹¤. ì´ê²ƒì´ ê¸€ë˜ì— ëŒ€í•œ ê°•ë ¬í•œ ì²«ì¸ìƒì´ì—ˆë‹¤. </p><p>ê·¸ í›„ ì—´ì‹¬íˆ ê¸€ë˜ì— ì°¸ì—¬í–ˆë‹¤. ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë„ì›€ì´ ë  ìˆ˜ ìˆë„ë¡, ë§ì´ ê³µë¶€í•˜ê³  ì •ë¦¬í•´ì„œ ê¸€ì„ ì‘ì„±í–ˆë‹¤. ë‹¤ë¥¸ ë¶„ë“¤ì˜ í”¼ë“œë°±ê³¼ ê¸€ì„ í†µí•´ì„œ ë” ë¹ ë¥´ê²Œ ì„±ì¥í•  ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ë‹¤. ê·¸ë¦¬ê³  2ë…„ì´ ì§€ë‚¬ë‹¤. ì•„ì§ ë‚˜ëŠ” ì²« íšŒì‚¬ì— ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆë‹¤. ë‚´ì¼ ì±„ì›€ ê³µì œ ë•ë¶„ì´ì—ˆë‹¤. ë§ê·¸ëŒ€ë¡œ ì¡´ë²„ í–ˆë”ë‹ˆ, ì–´ëŠìƒˆ ì˜¤ì§€ ì•Šì„ ê²ƒ ê°™ì•˜ë˜ ë§ˆì§€ë§‰ ë‚©ì…ì„ í•˜ê²Œ ë˜ì—ˆë‹¤. ê¸°ë»¤ë‹¤. ê·¸ëŸ°ë° ë‚´ê°€ ì§€ê¸ˆ ì¼ì„ í†µí•´ í–‰ë³µí•œê²Œ ì•„ë‹ˆë¼ ë‚´ì±„ê³µì„ ê²¨ìš° ì±„ì›Œë„£ì–´ì„œ í–‰ë³µí•œ ëŠë‚Œë§Œ ë“  ê²ƒ ê°™ì•˜ë‹¤. ì²˜ìŒ ì¼ì„ ì‹œì‘í–ˆì„ ë•ŒëŠ” ì¼ ìì²´ê°€ ë„ˆë¬´ ì¬ë°Œì—ˆëŠ”ë°, ë‚˜ëŠ” ì§€ê¸ˆ ë§¤ë„ˆë¦¬ì¦˜ì— ë¹ ì§„ê²Œ ì•„ë‹Œê°€ í•˜ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.</p><br></br><h2 id="ë§¤ë„ˆë¦¬ì¦˜"><a href="#ë§¤ë„ˆë¦¬ì¦˜" class="headerlink" title="ë§¤ë„ˆë¦¬ì¦˜"></a>ë§¤ë„ˆë¦¬ì¦˜</h2><blockquote><p>ë§¤ë„ˆë¦¬ì¦˜ : ì˜ˆìˆ  ì°½ì‘ì— ìˆì–´ì„œ, ëŠ˜ ê°™ì€ ìˆ˜ë²•(æ‰‹æ³•)ì„ ë˜í’€ì´í•˜ì—¬ ì‹ ì„ ë¯¸(æ–°é®®å‘³)ë‚˜ ë…ì°½ì„±ì„ ìƒëŠ” ì¼. ìˆœí™”ì–´ëŠ” `íƒ€ì„±â€™.</p></blockquote><p>ì¶œê·¼ í•˜ê³  ë‚˜ì„œì˜ ì¼ê³¼ëŠ” ê±°ì˜ ë°˜ë³µëœë‹¤. ëª‡ëª‡ ì´ìŠˆ ë•Œë¬¸ì— ë³€ì£¼ê°€ ì¼ì–´ë‚˜ê¸´ í•˜ì§€ë§Œ, ëŒ€ê°œëŠ” ê±°ì˜ ë¹„ìŠ·í•œ ì¼ë“¤ì´ë‹¤. ë¹„ìŠ·í•œ ì¼ë“¤. ê°™ì€ ì¼ì„ ë°˜ë³µí•˜ê¸° ë•Œë¬¸ì— ë§¤ë„ˆë¦¬ì¦˜ì— ë¹ ì§€ê²Œ ëœ ê²ƒì¼ê¹Œ? ë‚˜ëŠ” ì–¸ì œë¶€í„° ìƒˆë¡œìš´ ê²ƒì„ ì‹œë„í•´ ë³´ì§€ ëª»í•˜ê²Œ ë˜ì—ˆì„ê¹Œ? ì™œ ë„ì „í•˜ê³  ìˆì§€ ëª»í•˜ëŠ”ê°€? ì™œ ë‚˜ëŠ” í¥ë¯¸ë¥¼ ìƒì–´ê°€ê³  ìˆëŠ”ê°€? ë“± ì—¬ëŸ¬ ì§ˆë¬¸ë“¤ì´ ë¨¸ë¦¬ì— ìŠ¤ì³¤ê³ , ê·¸ ì´ìœ ê°€ ê¶ê¸ˆí•´ì¡Œë‹¤. </p><p>ë¨¼ì € ë‹¤ë¥¸ ì‚¬ëŒë“¤ë„ 2ë…„ì°¨ ì¯¤ì— ì´ëŸ° ê³ ë¯¼ì„ ë§ì´ í• ê¹Œ ê¶ê¸ˆí•´ì¡Œë‹¤. <a href="http://www.recruittimes.co.kr/news/articleView.html?idxno=85481">í•œ ê¸°ì‚¬</a>ì—ì„œ ì§ì¥ìƒí™œ ê¶Œíƒœê¸°ì— ëŒ€í•´ ì¡°ì‚¬í•´ ë†“ì€ê²Œ ìˆì–´ì„œ ë´¤ëŠ”ë°, í¥ë¯¸ë¡œì› ë‹¤. ê¸°ì‚¬ ë‚´ìš©ì„ ë³´ë‹ˆ 3ë…„ì°¨ ì¯¤ì— ê¶Œíƒœê¸°ê°€ ì˜¨ë‹¤ëŠ” ë¹„ìœ¨ì´ 23.1% ì˜€ë‹¤. ë‚˜ë‘ ë¹„ìŠ·í•œ ì‚¬ëŒë“¤ì€ 18.9%ì˜€ë‹¤. ì´ ì‚¬ëŒë“¤ì˜ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œ. â€˜ë°˜ë³µë˜ëŠ” ì—…ë¬´ì— ëŒ€í•œ ì§€ë£¨í•¨â€™(58.2%, ë³µìˆ˜ì‘ë‹µ)ì´ ê°€ì¥ ë§ì•˜ë‹¤. ë‚˜ ì—­ì‹œ ê·¸ëŸ° ê²ƒ ê°™ì•˜ë‹¤. ì´ì–´ ê³¼ë„í•œ ì—…ë¬´ëŸ‰, íšŒì‚¬ ë¹„ì „ì˜ ë¶ˆíˆ¬ëª…í•¨ ë“±ì´ ê³µê°ë˜ëŠ” ë‚´ìš©ì´ì—ˆë‹¤. ê¶Œíƒœê¸°ì˜ ì¦ìƒìœ¼ë¡œëŠ” í‡´ì‚¬ ì¶©ë™ì´ ê°€ì¥ ë§ì•˜ë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ ë•Œë¬¸ì— ì‰¬ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì„ í–ˆì—ˆë‹¤. íšŒì‚¬ë¥¼ ê·¸ë§Œë‘˜ê¹Œ ê¹Œì§€ëŠ” ê°€ì§€ ì•Šì•˜ì—ˆëŠ”ë°. ìœ¡ì²´ì  ì§ˆë³‘ë„ ê¶Œíƒœê¸°ì˜ í•œ ì¦ìƒì´ì—ˆë‹¤. ì‚¬ì‹¤ ì¼ì„ ì‹œì‘í•˜ê³  ë‚˜ì„œ ëª©ê³¼ ì–´ê¹¨ê°€ ë„ˆë¬´ ì•ˆ ì¢‹ì•„ì¡Œê³  ê·¸ ì™¸ì— ì „ë°˜ì ì¸ ëª¸ ìƒíƒœì™€ ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ê°€ ì œëŒ€ë¡œ ë˜ì§€ ì•Šê³  ìˆë‹¤. ì½”ë¡œë‚˜ ì´í›„ì— ìš´ë™ì„ ì œëŒ€ë¡œ í•˜ì§€ ëª»í•´ì„œ ë” ê·¸ëŸ° ê²ƒ ê°™ë‹¤. ìœ¡ì²´ì ì¸ ì¦ìƒê³¼ ì •ì‹ ì ì¸ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ê²¹ì¹˜ë©´ì„œ ì—…ë¬´ì— ëŒ€í•œ ì§‘ì¤‘ë„ë„ ë§ì´ ë‚®ì•„ì§„ ê²ƒ ê°™ë‹¤. í•˜ì§€ë§Œ ê°€ë” ì¬ë°ŒëŠ” ì¼ì´ ìƒê¸°ë©´ í˜ë“ ì§€ë„ ëª¨ë¥´ê³  ê³„ì† ì¼ì„ ë¶™ì¡ê³  ìˆëŠ” ê±¸ ë³´ë©´, ì •ë§ ì¤‘ìš”í•œ ê±´ ì—…ë¬´ì— ëŒ€í•œ í¥ë¯¸ì¸ ê²ƒ ê°™ì•˜ë‹¤. </p><h2 id="ì´ìœ "><a href="#ì´ìœ " class="headerlink" title="ì´ìœ "></a>ì´ìœ </h2><p>ë‚˜ì˜ ì§„ì§œ ì´ìœ ë¥¼ ìƒê°í•´ë³´ë ¤ê³  â€˜ì´ìœ â€™ë¥¼ ì ì–´ë†“ê³  í•œì°¸ì„ ê³ ë¯¼í–ˆë‹¤. ê·¸ëŸ¬ë‹¤ê°€ ì•Œê²Œ ëœ ê²ƒì€, ë‚´ ì—…ë¬´ í™˜ê²½ì´ ë„ˆë¬´ ì‚°ë§Œí•˜ë‹¤ëŠ” ê²ƒì´ì—ˆë‹¤. ì§‘ì¤‘ì´ ì œëŒ€ë¡œ ë˜ì§€ ì•Šì„ ìˆ˜ ë°–ì— ì—†ëŠ” í™˜ê²½ì´ì—ˆë‹¤. ê°€ë§Œíˆ ë‚´ê°€ ì¼í•˜ëŠ” ê²ƒì„ ë– ì˜¬ë ¤ë³´ë‹ˆ, ì¡ë‹¤í•œ ì´ìŠˆë“¤ì´ ë§ì•˜ë‹¤. ì¼ì„ ì¡°ê¸ˆ í•´ë³´ë ¤ê³  í•˜ë©´, â€˜ì§€ê¸ˆ ì¶”ì²œ ì•„ì´í…œ ì˜ ìŒ“ì—¬ìˆëŠ”ê±° ë§ì§€?â€™, â€˜API ì œëŒ€ë¡œ ë™ì‘í•˜ê³  ìˆë‚˜ìš”?â€™, â€˜ì‹ ê·œ ê³ ê°ì‚¬ ì„¸íŒ… ì¢€ ë¶€íƒí•´â€™, â€˜~ê±´ ê´€ë ¨í•´ì„œ ì˜ê²¬ ë¶€íƒë“œë ¤ìš”â€™ ë‚˜ ê¸°íƒ€ íšŒì˜ ë“±ë“± ë°”ë¡œë°”ë¡œ ì²˜ë¦¬í•´ì•¼ í•  ê²ƒë“¤ì´ ìì£¼ ë°œìƒí•˜ê³  ìˆì—ˆë‹¤. ê·¸ ì™¸ì— ì‹ ì…ìœ¼ë¡œ ì˜¤ì‹  ë¶„ì˜ ì—…ë¬´ë¥¼ ì²´í¬í•˜ê³  ì˜ í•˜ê³  ê³„ì‹œëŠ” ì§€ì— ëŒ€í•´ íŒŒì•…ì„ í•´ì•¼í•´ì„œ ì€ê·¼íˆ ì‹ ê²½ì“°ì´ëŠ” ì¼ë„ ì¡´ì¬í–ˆë‹¤. ê¸°íƒ€ ë“±ë“±, 2ë…„ì°¨ ì‹¤ë¬´ìê°€ ì´ê±°ê¹Œì§€ í•´ì•¼í•˜ë‚˜ ì‹¶ê¸°ë„ í•˜ì§€ë§Œ ì¼ë‹¨ ë‚´ ì¼ì´ë¼ê³  ìƒê°í•´ì„œ í•˜ëŠ” ì¤‘ì´ë‹¤. ì´ë ‡ë‹¤ ë³´ë‹ˆ ì§„ì§œ ë‚´ ì—…ë¬´ë¥¼ í•˜ëŠ” ì¤‘ì—ë„ ë­”ê°€ ë¶ˆì•ˆí•œ ë§ˆìŒì´ ë“¤ê¸° ì‹œì‘í•œ ê²ƒ ê°™ì•˜ë‹¤. ì—…ë¬´ í™˜ê²½ì´ ì •ë¦¬ë˜ê³  ë‚´ ì¼ì„ í•˜ë©´ ë˜ëŠ”ë°, ì™ ì§€ ëª¨ë¥¼ ë¶ˆì•ˆí•¨ê³¼ ì‚°ë§Œí•¨ ë•Œë¬¸ì— ì§‘ì¤‘ì´ ì˜ ë˜ì§€ ì•Šì•˜ë‹¤. ì§‘ì¤‘ì´ ì˜ ë˜ì§€ ì•Šìœ¼ë‹ˆê¹Œ, ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ í•˜ê¸° í˜ë“¤ì—ˆê³  í•˜ë˜ ì¼ë§Œ ê³„ì†í•˜ê²Œ ë˜ëŠ” ì•…ìˆœí™˜ì´ ë°˜ë³µë˜ê³  ìˆì—ˆë‹¤.</p><p><strong>ë˜ ë‹¤ë¥¸ ì´ìœ </strong>ëŠ” ë‹¤ë¥¸ ë¬¸í™”ë¥¼ ê°€ì§„ ì‚¬ëŒë“¤ì´ë‹¤. í˜„ì¬ ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ íŒ€ì—ì„œ í•˜ëŠ” ì¼ë“¤ì„ ë‹¤ë¥¸ íŒ€ë“¤ì—ì„œëŠ” ì˜ ì´í•´í•˜ì§€ ëª»í•˜ê±°ë‚˜ ê³µê°í•˜ì§€ ëª»í•˜ëŠ” ì¼ì´ êµ‰ì¥íˆ ìì£¼ ë°œìƒí•˜ê³  ìˆë‹¤. A/Bí…ŒìŠ¤íŒ… í”Œë«í¼ì´ë¼ë˜ê°€ ì¶”ì²œ ëª¨ë¸ì—ì„œ ë°œìƒí•˜ê³  ìˆëŠ” ë¬¸ì œì ë“¤ì„ì„ ê³µìœ í•´ë„ ì°¸ ì„¤ë“í•˜ëŠ” ê²Œ ì–´ë µë‹¤. ì˜¤ëœë§Œì— í˜ì´ìŠ¤ë¶ì„ ë³´ë‹ˆ, í•œ ì•„í‹°í´ì´ ëˆˆì— ë“¤ì–´ì™”ë‹¤. â€˜ì‚¬ëŒë“¤ì€ ìƒê°í•˜ê¸° ê·€ì°®ì•„í•˜ê³  í•œ ë²ˆ ë¯¿ìœ¼ë©´ ë°”ê¾¸ë ¤í•˜ì§€ ì•ŠëŠ”ë‹¤.â€™, â€˜ì‚¬ëŒë“¤ì˜ ìƒê°ê³¼ ë¯¿ìŒì„ ë°”ê¾¸ëŠ” ë°ëŠ” êµ‰ì¥í•œ ì—ë„ˆì§€ê°€ ë“¤ê³ , ì‚¬ëŒë“¤ì€ ìì‹ ì˜ ìƒê°ì´ í‹€ë ¸ë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ëŠ” ê²ƒì„ í˜ë“¤ì–´í•œë‹¤.â€™ ê¼¬ì ¯ë‹˜ì˜ ê¸€ì´ì—ˆë‹¤. ì´ ë¶„ë„ ê¸€ì˜ ë§ˆì§€ë§‰ì—ì„œ ì§€ì¹˜ê³ ìˆê³  ì¼ í•  ê¸°ë ¥ë„ ë¶€ì¡±í–ˆë‹¤ê³  ë‚¨ê¸°ì…¨ë‹¤. </p><p>ë‚˜ë¥¼ ë§ì´ ë„ì™€ì£¼ì…¨ë˜ êµìˆ˜ë‹˜ì´ í•˜ì‹  ë§ì”€ì´ ìƒê°ë‚œë‹¤. â€˜ì•ìœ¼ë¡œ ì‹œê°„ê´€ë¦¬í•˜ê³  ì¼ì„ ìª¼ê°œëŠ” ëŠ¥ë ¥ì´ ì¸ìƒì—ì„œ ì°¸ ì¤‘ìš”í•´ì§ˆ ê±°ì•¼, ì Šì—ˆì„ë•ŒëŠ” ê·¸ëƒ¥ ë°¤ì„ ìƒˆê±°ë‚˜ í•´ë„ í° ë¬´ë¦¬ê°€ ì—†ëŠ”ë°, ë‚˜ì´ë¥¼ ë¨¹ì–´ê°ˆìˆ˜ë¡ ê·¸ê²Œ ì˜ ì•ˆë˜ê³  ë¦¬ì†ŒìŠ¤ëŠ” í•œì •ë˜ì–´ ìˆë‹¤ëŠ” ê±¸ ëŠë¼ê²Œ ë¼. ì‹œê°„ì„ ì˜ ì‚¬ìš©í•˜ê³  ì¼ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ë‚˜ëˆ„ëŠ” ê±¸ ë§ì´ í›ˆë ¨í•´ë†”ì•¼ í• ê±°ì•¼.â€™</p><p>ì§€ê¸ˆê³¼ ê°™ì€ í˜ë“  ì¼ë„ ê±°ì³ê°€ì•¼í•  ì„±ì¥í†µì´ê² ì§€. ì¼ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì˜ ë‚˜ëˆ ì„œ í•˜ë‚˜í•˜ë‚˜ í•´ê²°í•´ê°€ëŠ” ê±¸ ì—°ìŠµí•´ë³´ëŠ” ì‹œê°„ì´ë¼ê³  ìƒê°í•´ì•¼ ê² ë‹¤.</p><br></br><h2 id="ê·¸ëŸ¼ì—ë„-ê¸€ì„-ì“°ëŠ”-ì´ìœ "><a href="#ê·¸ëŸ¼ì—ë„-ê¸€ì„-ì“°ëŠ”-ì´ìœ " class="headerlink" title="ê·¸ëŸ¼ì—ë„ ê¸€ì„ ì“°ëŠ” ì´ìœ "></a>ê·¸ëŸ¼ì—ë„ ê¸€ì„ ì“°ëŠ” ì´ìœ </h2><p>í˜ë“  ìƒí™©ì´ê³  ê¸€ì„ ì“¸ ì—¬ìœ ê°€ ë§ì´ ì—†ëŠ” ìƒí™©ì´ë‹¤. ì´ëŸ° ì™€ì¤‘ì— ìŠ¬ë™ì— ê¸€ì„ ì‘ì„±í–ˆë‹¤ëŠ” ì•ŒëŒì´ ì™€ì„œ ë‹¤ë¥¸ ë¶„ë“¤ì˜(ëŒ€ë¶€ë¶„ì€ ë‹¤ì§ê¸€) ê¸€ì„ ë´¤ë‹¤. ì•ìœ¼ë¡œì˜ ì‘ì„±í•  ê¸€ì˜ ê³„íšê³¼ ê¸€ë˜ë¥¼ ì§€ì›í•œ ê³„ê¸° ë“±ì´ ëˆˆì— ë„ì—ˆë‹¤. ë°ì€ ëŠë‚Œì˜ ê¸€ë“¤ì´ ì°¸ ë§ì•„ì„œ ì½ìœ¼ë©´ì„œ ë‚˜ë„ í˜ì„ë‚´ê²Œ ë˜ì—ˆë‹¤. ê·¸ëŸ°ë° ë‚˜ì˜ ê¸€ì„ ë‹¤ì‹œë³´ë‹ˆ ë°ì€ ìƒ‰ê°ë³´ë‹¤ëŠ” íšŒìƒ‰ ë¹›ì— ê°€ê¹Œìš´, ì¼ì— ì©Œë“  ë“¯í•œ ëŠë‚Œì´ë‹¤. ì²« ê¸€ë¶€í„° íšŒìƒ‰ ë¹›ì´ë¼ ì½ìœ¼ì‹œëŠ” ë¶„ë“¤ê»˜ ì¡°ê¸ˆ ë¯¸ì•ˆí•œ ë§ˆìŒì´ ë“¤ê¸´ í•˜ì§€ë§Œ, 2ë…„ì°¨ë‚˜ ë˜ëŠ” ì§ì¥ìƒí™œ ì¤‘ì— í•œ ë²ˆì€ ë§ˆì£¼í•  ìˆ˜ ìˆëŠ” ê°ì •ì´ë¼ê³  ìƒê°í•œë‹¤. ë¹„ìŠ·í•œ ê°ì •ì„ ê°€ì§„ ë‹¤ë¥¸ì‚¬ëŒë“¤ì´ ì´ ë¸”ë¡œê·¸ë¥¼ ë“¤ë½ë‚ ë½í•˜ë‹¤ê°€ <strong>â€˜â€™ì´ëŸ° ì‚¬ëŒë„ ì—­ì‹œ ìˆêµ¬ë‚˜â€</strong>í•˜ë©° ê¸€ì„ í†µí•´ ê³µê°í•˜ê³ , ìœ„ë¡œê°€ ë˜ì—ˆìœ¼ë©´ í•œë‹¤. ê°™ì€ ì‚¬ëŒì´ê¸°ì— ëˆ„êµ°ê°€ì˜ ê°ì • ì •ë¦¬ ë°©ë²•ì´ ë‹¤ë¥¸ ëˆ„êµ°ê°€ì—ê²Œë„ ì ìš©ì´ ë˜ì§€ ì•Šì„ê¹Œ í•˜ëŠ” ìƒê°ì´ë‹¤.</p><p>ê°œë°œ ê¸€ ì“°ê¸° ëª¨ì„ì´ë‹¤. ê°œë°œê³¼ ê´€ë ¨ëœ ê¸€ê°ì„ ì°¾ì•„ì•¼ í•˜ê¸°ì—, ê³µë¶€í•´ì•¼ í•˜ê³  ì •ë¦¬í•˜ëŠ” ê²Œ ìŠµê´€í™” ë˜ì–´ì•¼ í•œë‹¤. ì•„ë§ˆ ì´ ìƒê°ë§ˆì € ì—†ì—ˆë”ë¼ë©´ ë” ì •ì²´ë˜ì—ˆì„ ê²ƒ ê°™ë‹¤. ê¸€ë˜ 6ê¸°ì— ì°¸ì—¬í•  ìƒê°ì€ ì§„ì‘ë¶€í„° ìˆì—ˆê¸°ì— ë…¸ì…˜ì— ê°œì¸ ê³µë¶€ìš©ìœ¼ë¡œ ì •ë¦¬ëœ ë‚´ìš©ë“¤ì´ ë³´ê´€ë˜ì–´ ìˆì–´ì„œ ì–´ëŠì •ë„ ë³´ì™„í•˜ê³  ì •ë¦¬í•´ ê¸€ì„ ë§Œë“¤ì–´ì„œ ì˜¬ë¦´ ìƒê°ì´ë‹¤. Hadoopì— ëŒ€í•œ ê¸°ë³¸ ê°œë…ê³¼ Sparkì™€ì˜ ì—°ê²°, ê°œë…. ì˜ˆì „ì—ëŠ” ì´í•´í•˜ì§€ ëª»í–ˆë˜ ì—ëŸ¬ ë¡œê·¸ë“¤ì— ëŒ€í•´ì„œ ë‹¤ë¤„ë³´ë ¤ê³  í•œë‹¤. Kubernetesì— ëŒ€í•œ ê´€ì‹¬ì´ êº¼ì§€ì§€ ì•Šê³  ìˆë‹¤. ì‚¬ìš© ì¤‘ì¸ Airflowë¥¼ Kubernetesë¡œ ì˜®ê²¨ë³´ë©´ì„œ ê°œë…ì„ ìµíˆê³  ì—¬ê¸°ì— ëŒ€í•œ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ë©´ ì–´ë–¨ê¹Œ ìƒê°í•˜ê³  ìˆë‹¤. MLOpsì— ëŒ€í•´ì„œ ê¾¸ì¤€íˆ ë‹¤ë¤„ ë³´ê³  ì‹¶ì–´ì„œ BentoMLì´ë‚˜ KubeFlow ë“±ì„ ì‚´í´ë³´ê³  ìˆë‹¤. ê·¸ë¦¬ê³  ê°œë°œí•˜ë©´ì„œ ë§ˆì£¼í•˜ëŠ” ìì˜í•œ ì´ìŠˆë“¤ê³¼ ì„±ì¥í•œ ë‚´ìš©ë“¤ì„ ì„±ì‹¤í•˜ê²Œ ì‘ì„±í•´ë³´ë ¤ê³  í•œë‹¤. </p><p><strong>ë‹¤ë¥¸ ì‚¬ëŒë“¤ì—ê²Œ ë„ì›€ì´ ë§ì´ ë˜ëŠ” ê¸€ì„ ì‘ì„±í•˜ëŠ” ê²ƒ</strong>ì´ ì´ë²ˆ ê¸°ìˆ˜ì˜ ëª©í‘œì˜€ë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼, <strong>ê¸€ì„ ì‘ì„±í•˜ëŠ” í–‰ìœ„ê°€ ë§¤ë„ˆë¦¬ì¦˜ì— ë¹ ì§€ì§€ ì•Šë„ë¡</strong>, ë‹¤ë¥¸ ë¶„ë“¤ ê¸€ì„ ê´€ì‹¬ìˆê²Œ ë³´ë©´ì„œ í”¼ë“œë°±ì„ ë“œë¦¬ê³  ë‚˜ì˜ ê¸€ì— ë°˜ì˜í•´ë³¼ ìƒê°ì´ë‹¤. <strong>ì²˜ìŒ</strong>ìœ¼ë¡œ ë‹¤ì‹œ ëŒì•„ê°€ì•¼ê² ë‹¤. ë¨¸ë¦¬ê°€ ì¡°ê¸ˆ ì»¤ì¡Œë‹¤ê³  ì–´ì„¤í”„ê²Œ ì‚´ë©´ ì•ˆë˜ê² ë‹¤ëŠ” ìƒê°ì´ ê°•í•˜ê²Œ ë“¤ì—ˆë‹¤. ì—´ì˜ë¥¼ ê°€ì§€ì‹  ê¸€ë˜ì˜ ë‹¤ë¥¸ ë¶„ë“¤ì„ ë³´ë©´ì„œ ë§ì´ ë°°ì›Œë‚˜ê°€ê³  ì„±ì¥í•´ì•¼ê² ë‹¤. ì§€ì³ìˆì–´ì„œ ê·¸ ë™ì•ˆì˜ ì£¼ë§ì— ëˆ„ì›Œë§Œ ìˆì—ˆëŠ”ë°, ì˜¤ëŠ˜ë¶€í„°ëŠ” ë­”ê°€ í˜ì´ ë‚˜ê¸° ì‹œì‘í•œë‹¤. ì˜¤ëŠ˜ í•´ì•¼í•  ì¼ì„ í•˜ë‚˜ì”© í•´ ë‚˜ê°€ë©´ì„œ ì£¼ë§ì„ ë§ˆë¬´ë¦¬í•˜ê³ , í•œ ì£¼ë¥¼ ì‹œì‘í•  ì¤€ë¹„ë¥¼ í•´ì•¼ê² ë‹¤. ê¸€ì€ í˜ì´ëœë‹¤.</p>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2021/08/01/geultto6/#disqus_thread</comments>
    </item>
    
    <item>
      <title>ê¸€ë˜ 5ê¸°ë¥¼ ëë‚´ê³ , íšŒê³ í•˜ê¸°</title>
      <link>http://tkdguq05.github.io/2021/05/02/geultto5-end/</link>
      <guid>http://tkdguq05.github.io/2021/05/02/geultto5-end/</guid>
      <pubDate>Sun, 02 May 2021 06:51:54 GMT</pubDate>
      <description>
      
        &lt;p&gt;ê¸€ë˜ 5ê¸°ë¥¼ ë§ˆì¹˜ë©´ì„œ, ë‚˜ëŠ” ì–´ë–»ê²Œ ì¼í•˜ê³  ìˆëŠ”ê°€â€¦ë¼ê³  í•˜ì§€ë§Œ ë„‹ë‘ë¦¬ ë° ë‚´ ì‘ì€ ëª©í‘œì— ëŒ€í•´ì„œ&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>ê¸€ë˜ 5ê¸°ë¥¼ ë§ˆì¹˜ë©´ì„œ, ë‚˜ëŠ” ì–´ë–»ê²Œ ì¼í•˜ê³  ìˆëŠ”ê°€â€¦ë¼ê³  í•˜ì§€ë§Œ ë„‹ë‘ë¦¬ ë° ë‚´ ì‘ì€ ëª©í‘œì— ëŒ€í•´ì„œ</p><a id="more"></a><h1 id="ê¸€ë˜-5ê¸°ê°€-ëë‚¬ë‹¤"><a href="#ê¸€ë˜-5ê¸°ê°€-ëë‚¬ë‹¤" class="headerlink" title="ê¸€ë˜ 5ê¸°ê°€ ëë‚¬ë‹¤"></a>ê¸€ë˜ 5ê¸°ê°€ ëë‚¬ë‹¤</h1><p>11ì›” ë¶€í„° ì‹œì‘ë˜ì—ˆë˜ ê¸€ë˜ 5ê¸°ê°€ ëì´ ë‚¬ë‹¤. ì–´ë–»ê²Œ í•˜ë‹¤ë³´ë‹ˆ í•´ê°€ ë°”ë€Œì—ˆê³  ë²Œì¨ 5ì›”ì´ ë˜ì—ˆê³ , ê¸€ë˜ 5ê¸°ë„ ëì´ ë‚˜ë²„ë ¸ë‹¤. ì‹œê°„ì´ ì •ë§ ë¹ ë¥´ê²Œ í˜ëŸ¬ê°€ê³  ìˆë‹¤. ì´ë ‡ê²Œ ì†ì ˆì—†ì´ í˜ëŸ¬ê°€ëŠ” ì‹œê°„ ì†ì—ì„œ ê¸€ë˜ í™œë™ì„ ì–´ë–»ê²Œ í•´ì™”ëŠ”ì§€, ê·¸ë¦¬ê³  ê¸€ë˜ ì™¸ì— ë‚´ê°€ ì–´ë–»ê²Œ ì‚´ì•„ì™”ëŠ”ì§€ íšŒê³ í•´ë³´ëŠ” ì‹œê°„ì„ ê°€ì ¸ë³´ë ¤ê³  í•œë‹¤.</p><p><br></br></p><h2 id="ë¬´ì—‡ì„-ì¼ì„ê¹Œ"><a href="#ë¬´ì—‡ì„-ì¼ì„ê¹Œ" class="headerlink" title="ë¬´ì—‡ì„ ì¼ì„ê¹Œ"></a>ë¬´ì—‡ì„ ì¼ì„ê¹Œ</h2><p>ì´ë²ˆ ê¸°ìˆ˜ì—ì„œëŠ” Airflowì™€ ê´€ë ¨ëœ ê¸€ì„ ì •ë§ ë§ì´ ì¼ë‹¤. ê¸€ë˜ì—ì„œ ê°™ì€ ì±„ë„ì˜ ì˜¨ë¼ì¸ íšŒê³ ì‹œê°„ì„ ê°€ì¡Œì„ ë•Œë„, Airflow ê¸€ ì“°ëŠ” ì‚¬ëŒìœ¼ë¡œ ë‹¤ ì•Œê³  ê³„ì‹œëŠ” ê²ƒ ê°™ì•˜ë‹¤. ë‹¤ë¥¸ ê¸€ë“¤ë„ ë§ì´ ì‘ì„±í•˜ê³  ì‹¶ì—ˆëŠ”ë° ì—…ë¬´ ìƒâ€¦ ë‹¤ë¥¸ ê±¸ ê³µë¶€í•  ì‹œê°„ì´ ì—†ì—ˆë‹¤ê³  ë§í•˜ê³  ì‹¶ì§€ë§Œ, í•‘ê³„ì²˜ëŸ¼ ë³´ì´ê¸°ë„ í–ˆë‹¤.</p><p><strong>ì•„ì¹´ì´ë¸Œë¥¼ ë³´ë‹ˆ 10ê°œì˜ ê¸€ì„ ì‘ì„±í–ˆë‹¤.</strong></p><p><img src="/images/geultto5end/2020to2021.png" alt="5ê¸°ì— ì‘ì„±í•œ ê¸€"></p><p>(ê¸€ë˜5ê¸° ë‹¤ì§í•˜ê¸° ê¸€ì´ ì§¤ë ¸ìŒ) ìƒê°ë³´ë‹¤ ë§ì´ ì¼ë‹¤. ê¸€ ì“´ ê²ƒë§Œ ë´ë„ Airflowì³ëŒì´ë¼ëŠ” ê²ƒì„ ì˜ ì•Œ ìˆ˜ ìˆë‹¤. Airflow ê¸€ë“¤ê³¼ ê·¸ ë°°ê²½ì§€ì‹ì„ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ ê¸€, ì¶”ì²œì‹œìŠ¤í…œ ìŠ¤í„°ë””ë¥¼ í•˜ë©´ì„œ ì“´ FP-Growth, ì¶”ì²œ íŒŒì´í”„ë¼ì¸ êµ¬ì„± ê¸€ë¡œ ì±„ì›Œì ¸ ìˆë‹¤. ì±„ë„ì— ìˆëŠ” ë¶„ë“¤ì—ê²ŒëŠ” ë§¤ìš° ìƒì†Œí•  ìˆ˜ë„ ìˆê³ , ê·¸ë˜ì„œ ì˜¤íˆë ¤ ì¬ë°Œê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆê² ë‹¤ëŠ” ê²ƒì€ ë‚´ ìƒê°ì„ ë¿ì´ê² ê³ , ì‹¤ì œë¡œ í”¼ë“œë°± ë“¤ì–´ì˜¤ëŠ” ê±¸ ë³´ë‹ˆê¹Œ ë¬´ìŠ¨ ë§ì¸ì§€ ëª°ë¼ì„œ í”¼ë“œë°± í•˜ê¸° ì–´ë ¤ì›Œ í•˜ì‹œëŠ”ê²Œ ë§ì´ ëŠê»´ì¡Œë‹¤. ê·¸ ë¶„ë“¤ì—ê²ŒëŠ” í•µë…¸ì¼ ê¸€(ã… ã… ã…œ) ì´ì—ˆì„ ê²ƒ ê°™ì•„ ê°€ìŠ´ì´ ì•„í”„ë‹¤. ì—”ì§€ë‹ˆì–´ë§ ê´€ë ¨ ê¸€ì´ í”¼ë“œë°± ë‹¹ì²¨ë˜ê³  í”¼ë“œë°±ì„ í•´ì•¼ í•  ë•Œë©´ ì°¸ ë§‰ë§‰í–ˆìœ¼ë¦¬ë¼â€¦ ë¬¼ë¡  ë‚˜ë¦„ ì‰½ê²Œ ì ëŠ”ë‹¤ê³  ì‰½ê²Œ ì ê³ , ì—¬ëŸ¬ ì§¤ì„ ì‚¬ìš©í•´ì„œ ì ‘ê·¼í•˜ê¸° ì‰½ê²Œ ë§Œë“¤ê¸´ í–ˆëŠ”ë°, íš¨ê³¼ëŠ” ë¯¸ë¯¸í–ˆë˜ ê²ƒ ê°™ë‹¤. í•˜ì§€ë§Œ ì•Œì•„ì£¼ì‹œëŠ” ë¶„ì´ ìˆì–´ì„œ ë§¤ìš° ê°ì‚¬í•˜ê²Œ ìƒê°í•˜ê³  ê·¸ë¡œ ì¸í•´ í˜ì´ ë§ì´ ë˜ì—ˆë‹¤. </p><p><img src="/images/geultto5end/thanks.png" alt="ê³ ë§ˆìš´ ë¶„ë“¤"></p><p><br></br></p><h3 id="ì´ì „-ê¸°ìˆ˜ì—ì„œëŠ”"><a href="#ì´ì „-ê¸°ìˆ˜ì—ì„œëŠ”" class="headerlink" title="ì´ì „ ê¸°ìˆ˜ì—ì„œëŠ”"></a>ì´ì „ ê¸°ìˆ˜ì—ì„œëŠ”</h3><p><img src="/images/geultto5end/geultto4was.png" alt="geultto4was"></p><p>ì´ì „ ê¸°ìˆ˜ì—ì„œë„ ë¬¼ë¡  ì—”ì§€ë‹ˆì–´ë§ ê´€ë ¨ëœ ê¸°ë³¸ì ì¸ ë‚´ìš©ì„ ë§ì´ ì •ë¦¬í•˜ê³  ì‘ì„±í–ˆë‹¤. í•˜ì§€ë§Œ í™•ì‹¤íˆ 5ê¸°ì— ë¹„í•´ì„œ ë…¼ë¬¸ ì •ë¦¬ ë‚´ìš©ì´  ëª‡ ê°œ ë” ìˆëŠ” ê²Œ í™•ì¸ëœë‹¤(ì‚¬ì§„ ê¸¸ì´ ë•Œë¬¸ì— CRAFT ë…¼ë¬¸ ìš”ì•½ì´ ì§¤ë¦¼â€¦). 4ê¸° ë•ŒëŠ” ë”¥ëŸ¬ë‹ì´ë‚˜ ëª¨ë¸ë§ ê´€ë ¨í•´ì„œë„ ì„œì¹˜ë¥¼ ë§ì´ í–ˆê³  ì—”ì§€ë‹ˆì–´ë§ ìª½ì—ë„ ì‹ ê²½ì„ ì“´ ê²ƒ ê°™ë‹¤. ì‚¬ì§„ ì°ìœ¼ë ¤ê³  ì•„ì¹´ì´ë¸Œë¥¼ ë‹¤ì‹œ ë³´ë‹¤ê°€ 5ê¸°ì— ë“¤ì–´ì„œë©´ì„œ ì—”ì§€ë‹ˆì–´ë§ì— ì™„ì „ ì§‘ì¤‘í•œ ê²Œ í™•ì‹¤íˆ ëŠê»´ì¡Œë‹¤.</p><p><br></br></p><h2 id="ë‹¬ë¼ì§„-ì—…ë¬´"><a href="#ë‹¬ë¼ì§„-ì—…ë¬´" class="headerlink" title="ë‹¬ë¼ì§„ ì—…ë¬´"></a>ë‹¬ë¼ì§„ ì—…ë¬´</h2><h3 id="ì¼"><a href="#ì¼" class="headerlink" title="ì¼"></a>ì¼</h3><p>ì´ë ‡ê²Œ ê¸€ì´ ë‹¬ë¼ì§„ ì´ìœ ëŠ” ë­ë‹ˆë­ë‹ˆí•´ë„ ì¼ ë•Œë¬¸ì´ë‹¤. ì•„ë¬´ë˜ë„ ì¼í•˜ë©´ì„œ ì–»ì€ ì •ë³´ë‚˜ ì§€ì‹ì„ ì •ë¦¬í•˜ê²Œ ë˜ê¸° ë•Œë¬¸ì¸ ê²ƒ ê°™ë‹¤. 21ë…„ 2ì›” ë¶€í„° ì§ë¬´ê°€ ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸ì—ì„œ ë°ì´í„° ì—”ì§€ë‹ˆì–´ë¡œ ì˜®ê²¨ì¡Œë‹¤. ì§ë¬´ìƒ ë¶„ë¥˜í•´ ë†“ê¸´í•œ ê±´ë°, ì´ë¡œ ì¸í•´ì„œ ë°ì´í„° ì—”ì§€ë‹ˆì–´ë§ ì—…ë¬´ì— ë” ì§‘ì¤‘í•˜ê²Œ ëœ ê²ƒ ê°™ë‹¤. ì±…ì„ê°ì´ ë” ìƒê²¨ì„œ ê·¸ëŸ° ê²ƒì¼ê¹Œ? </p><p>ì•„ë¬´íŠ¼ ë°ì´í„° ì—”ì§€ë‹ˆì–´ë¡œ ë³€ê²½ëœ í›„ ë¶€í„° ê¸°ì¡´ì— ì„œë¹„ìŠ¤ ë˜ê³  ìˆë˜ êµ¬ì¡°ë¥¼ ë” íš¨ìœ¨ì ì¸ êµ¬ì¡°ë¡œ ë³€ê²½í•˜ê³ , í™•ì¥í•˜ëŠ” ë“±ì˜ í”„ë¡œì íŠ¸ë¥¼ ë§ì´ ì§„í–‰í•˜ê²Œ ë˜ì—ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ë„¤íŠ¸ì›Œí¬ì˜ ì¤‘ìš”ì„±ì„ ëŠë¼ê²Œ ë˜ì—ˆê³  êµ¬ì¡°ë¥¼ ì—…ê·¸ë ˆì´ë“œë¥¼ í•˜ë ¤ë©´, ê·¸ íˆ´ì„ ì œëŒ€ë¡œ ì•Œì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•˜ëŠ” íˆ´ì— ëŒ€í•´ì„œ ë” íŒŒê³ ë“¤ì–´ì„œ ê³µë¶€í•˜ê²Œ ë˜ì—ˆë‹¤. ì´ë ‡ê²Œ íƒ„ìƒí•œê²Œ ë°”ë¡œ Airflow ì‹œë¦¬ì¦ˆ ê¸€â€¦! <a href="https://tkdguq05.github.io/tags/airflow/">ğŸŒŸAirflow ì‹œë¦¬ì¦ˆ ê¸€ğŸŒŸ</a></p><p><br></br></p><h3 id="ì¼í•˜ëŠ”-ë°©ì‹"><a href="#ì¼í•˜ëŠ”-ë°©ì‹" class="headerlink" title="ì¼í•˜ëŠ” ë°©ì‹"></a>ì¼í•˜ëŠ” ë°©ì‹</h3><p>ë°ì´í„° ì—”ì§€ë‹ˆì–´ë§ì— ì§‘ì¤‘í•˜ê²Œ ëœ ê²ƒì€ ì¡°ì§ì˜ ë³€í™”ê°€ ìˆì—ˆê¸° ë•Œë¬¸ì´ë‹¤. 5ê¸°ë•Œì—ëŠ” ì„±ì¥í†µì´ë¼ê³  í•´ì•¼ í• ê¹Œ, ë¹ ë¥¸ ì†ë„ë¡œ ë³€í™”í•˜ëŠ” ì¡°ì§ê³¼ ê·¸ ë°©í–¥ì„ ì •í•˜ëŠ” ë°ì—ì„œ ì—¬ëŸ¬ ì‹œí–‰ì°©ì˜¤ë¥¼ ê²ªê³  ìˆì—ˆë‹¤. <a href="https://tkdguq05.github.io/2020/12/27/20201227/">2020ë…„ íšŒê³ í•˜ê¸°</a> ê¸€ì—ë„ ë‚˜ì™€ìˆê¸´ í•˜ì§€ë§Œ ê°‘ìê¸° íŒ€ì›ì´ ëª‡ ëª… ë‚˜ê°€ê²Œ ë˜ë©´ì„œ ë¶„ìœ„ê¸°ê°€ êµ‰ì¥íˆ ì–´ìˆ˜ì„  í–ˆì—ˆë‹¤. ì´ëŸ´ë•Œì¼ìˆ˜ë¡ í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“¤ê³  ì§€í‚¤ëŠ” ê²Œ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•´ì„œ íŒ€ì›ë“¤ê³¼ ì•ìœ¼ë¡œì˜ ë°©í–¥, ê·¸ë¦¬ê³  ì¼í•˜ëŠ” ë°©ì‹, ì–´ë–»ê²Œ ì²´í¬í•˜ê³  ê³µìœ í•  ê²ƒì¸ì§€ ì´ì•¼ê¸°ë¥¼ ë§ì´ ë‚˜ëˆ´ë‹¤. ê·¸ë˜ì„œ íƒ„ìƒí•œ ê²ƒì´ ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤íŒ€ì˜ ì¹¸ë°˜ ë³´ë“œì˜€ê³ , ìì²´ ì˜¤ì „ ìŠ¤í¬ëŸ¼ ì‹œê°„ì´ ë¶€í™œí•˜ê²Œ ë˜ì—ˆë‹¤(ì¹¸ë°˜ ë§Œë“œëŠ” ê²ƒë„ ì°¸ ìš°ì—¬ê³¡ì ˆì´ ë§ì•˜ì§€ë§Œ ìƒëµâ€¦). ê¸ˆìš”ì¼ë§ˆë‹¤ ì¹¸ë°˜ ë³´ë“œì— ì‘ì„±í•œ ì—…ë¬´ë“¤ì˜ ì§„í–‰ìƒí™©ì„ í™•ì¸í–ˆê³  ëŠ¦ì¶°ì§€ê³  ìˆìœ¼ë©´ ì™œ ëŠ¦ì¶°ì§€ê³  ìˆëŠ”ì§€ ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆ´ê³ , ì™„ë£Œëœ ì¼ì€ ì½”ë“œë¦¬ë·°ë¥¼ í†µí•´ì„œ í™•ì¸í•œ í›„ Task Completeì— ë„£ì–´ë†¨ë‹¤. </p><p>ê·¸ë¦¬ê³  ì´ëŸ° í”„ë¡œì„¸ìŠ¤ë¥¼ í†µí•´ì„œ ê°ìì˜ ì—…ë¬´ê°€ ë” ëª…í™•í•´ì¡Œë‹¤. ë‚´ ì§ë¬´ë¥¼ ë³€ê²½í–ˆê¸° ë•Œë¬¸ì¼ì§€ë„ ëª¨ë¥´ê² ì§€ë§Œ, ê°ìì˜ ì¼ì´ êµ¬ì²´í™” ë˜ì—ˆê³  ì´ë¥¼ í†µí•´ì„œ ì–´ë–¤ ì—…ë¬´ì˜ ë‹´ë‹¹ìë¥¼ ì •í•  ìˆ˜ ìˆì—ˆë‹¤. ì´ëŸ° í”„ë¡œì„¸ìŠ¤ê°€ ë§Œë“¤ì–´ì§„ ë°ì—ëŠ” ì¢‹ì€ ë™ë£Œë“¤ê³¼ ëŠì„ì—†ì´ ì†Œí†µì„ í–ˆê¸° ë•Œë¬¸ì´ê¸°ë„ í–ˆì§€ë§Œ, ê°œì¸ì ìœ¼ë¡œëŠ” íŒ€ì¥ë‹˜ì˜ ë„ì›€ì´ ì»¸ë‹¤. ê¸°íš íŒ€ì¥ë‹˜ê»˜ì„œ ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ íŒ€ì„ ê²¸ì§í•´ì„œ ë§¡ê²Œ ë˜ì…¨ëŠ”ë°, ê¸°íšíŒ€ íŒ€ì¥ìœ¼ë¡œì„œ ê¸°íšíŒ€ê³¼ ê°œë°œíŒ€ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì˜ êµ¬ì¶•í–ˆì—ˆë˜ ê²½í—˜ì´ ìˆì—ˆë˜ ë¶„ì´ì—ˆë‹¤. íŒ€ì¥ë‹˜ê»˜ì„œ ì£¼ë„ì ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“¤ì–´ì£¼ì‹  ê²ƒì€ ì•„ë‹ˆì§€ë§Œ, ê¸°íš-ê°œë°œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“œëŠ” ëª¨ìŠµê³¼ ì„¤ëª…ì„ ë“¤ìœ¼ë©´ì„œ ë§ì€ ê±¸ ë°°ìš¸ ìˆ˜ ìˆì—ˆê³ , ì´ë¥¼ ì˜ ì ìš©í•  ìˆ˜ ìˆì—ˆë‹¤. â€˜ì–´ë¥¸ì´ë€ ì´ëŸ° ê±°êµ¬ë‚˜â€™, â€˜ì§ì¥ ì„ ë°°ë€ ì´ëŸ° ê²ƒì´êµ¬ë‚˜â€™ë¥¼ ëŠë¼ê²Œ í•´ì£¼ì‹  ë¶„ì´ê¸°ë„ í•˜ë‹¤.</p><p><img src="/images/geultto5end/kanban.png" alt="ì—…ë¬´ í”„ë¡œì„¸ìŠ¤"></p><p><br></br></p><h3 id="Data-Enginnering"><a href="#Data-Enginnering" class="headerlink" title="Data Enginnering"></a>Data Enginnering</h3><p>íšŒê³ ë¥¼ í•˜ë‹¤ë³´ë‹ˆ ì•ìœ¼ë¡œì˜ ì“¸ ê¸€ë“¤ë„ ë°ì´í„° ì—”ì§€ë‹ˆì–´ë§ ê¸€ì´ ë  ê²ƒ ê°™ì•„ì„œ ì´ì— ëŒ€í•œ ìƒê°ì„ ì ì‹œ ì‘ì„±í•´ë³´ë ¤ê³  í•œë‹¤. </p><p>ê°ì¢… ì»¤ë®¤ë‹ˆí‹°ë¥¼ ë³´ë©´, ì§ë¬´ ëª… ë°ì´í„° ì—”ì§€ë‹ˆì–´ëŠ” í•˜ëŠ” ì¼ì´ ì–´ëŠì •ë„ ì •í•´ì§„ ê²ƒ ê°™ì€ë° ë‚´ ìƒê°ì€ ì¡°ê¸ˆ ë‹¤ë¥´ë‹¤. ì•„ì§ë„ ë§ì€ íšŒì‚¬ì—ì„œ ë°ì´í„° ì—”ì§€ë‹ˆì–´ë¥¼ êµ¬í•˜ê³ , ë³´ìœ í•˜ê³  ìˆì§€ë§Œ ê° ë°ì´í„° ì—”ì§€ë‹ˆì–´ê°€ í•˜ëŠ” ì¼ì´ íšŒì‚¬ë§ˆë‹¤ ë‹¤ ë‹¤ë¥¸ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ë‹¤. íšŒì‚¬ê°€ ì‘ì€ì§€ í°ì§€, ì§ì¢…ì´ ITì¸ì§€ ì œì¡°ì—…ì¸ì§€, B2Cì¸ì§€ B2Bì¸ì§€ì— ë”°ë¼ í•˜ëŠ” ì¼ì´ ì°¸ ë§ì´ ë‹¬ë¼ì§€ëŠ” ê²ƒ ê°™ë‹¤ëŠ” ê±¸ ëŠë¼ê³  ìˆë‹¤. ì§€ê¸ˆ ìˆëŠ” ì´ íšŒì‚¬ì—ëŠ” ë°ì´í„° ì—”ì§€ë‹ˆì–´ê°€ ì—†ì—ˆë‹¤. ë¬¼ë¡  ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸ë„ ì—†ì—ˆë‹¤. ë‚´ê°€ ë“¤ì–´ì˜¤ë©´ì„œ ë°ì´í„° íŒ€ì´ êµ¬ì„±ë˜ê¸° ì‹œì‘í–ˆê³ , ë°ì´í„°ì˜ ì¤‘ìš”ì„±ì— ëŒ€í•´ì„œ ìê°í•˜ê¸° ì‹œì‘í–ˆë‹¤(ìˆ˜ ì—†ì´ ì—¬ê¸°ì— ëŒ€í•´ì„œ ìë£Œë¥¼ ê³µìœ í•˜ê³  ì„¤ë“í–ˆë‹¤). <del>ì—¬ë‹´ì¸ë° ìƒê°í•´ë³´ë‹ˆ ì´ íšŒì‚¬ì˜ 1í˜¸ ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸ì´ì§€ ë°ì´í„° ì—”ì§€ë‹ˆì–´ê°€ ë˜ì—ˆë‹¤. í—ˆí—ˆ ì°¸â€¦</del></p><p>ë‹¤ì‹œ ë³¸ë¡ ìœ¼ë¡œ ëŒì•„ì™€ì„œ, íšŒì‚¬ì—ì„œ ë°ì´í„°ì— ëŒ€í•œ ì¤‘ìš”ì„±ì„ ëŠë¼ê¸° ì‹œì‘í•´ì„œ ë°ì´í„° ì¸í”„ë¼ë¥¼ ì œëŒ€ë¡œ êµ¬ì„±í•˜ê¸° ì‹œì‘í–ˆë‹¤. ê·¸ë˜ì„œ ë‚´ê°€ ìš”ì¦˜ í•˜ëŠ” ì¼ì€ ë°ì´í„° ì¸í”„ë¼ë¥¼ ì„¤ê³„í•˜ê³  êµ¬ì„±í•˜ëŠ” ì¼ê³¼ ì—¬ëŸ¬ APIë¥¼ ë§Œë“¤ê³  FastAPIë¼ëŠ” ìƒˆë¡œìš´ í”„ë ˆì„ ì›Œí¬ë¡œ ê°ˆì•„ë¼ëŠ” ì¼, ê·¸ë¦¬ê³  ì˜ì‚¬ ê²°ì •ê¶Œì ë° ì‹¤ë¬´ìë“¤ì„ ì„¤ë“í•˜ëŠ” ì¼ì´ë‹¤. ì•„ë¬´ ê±±ì •ì—†ì´ ì½”ë“œë§Œ ë§Œì§€ê³  ì¸í”„ë¼ë¥¼ êµ¬ì„±í•˜ê³  ì‹¶ì€ë° ê·¸ê²Œ ì°¸ ì–´ë µë‹¤. ë¬¼ë¡  ì˜ˆì „ì—ëŠ” ì•„ë¬´ ê±±ì •ì—†ì´ ëª¨ë¸ë§í•˜ê³  ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³  ì‹¶ì—ˆì—ˆë‹¤. ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸ì˜€ìœ¼ë‹ˆê¹! í•˜ì§€ë§Œ ê³„ì† ì•ˆëœë‹¤ê³  í•˜ëŠ” ë²½ì— ë§‰í˜”ì—ˆë‹¤. í•„ìš”í•œ ë°ì´í„°ê°€ ì—†ê±°ë‚˜ í•  ìˆ˜ ì—†ëŠ” êµ¬ì¡°ì´ê±°ë‚˜, ê¸°íƒ€ ë“±ë“±ì˜ ì´ìœ ë¡œ. ê·¸ë˜ì„œ ë‹µë‹µí•´ì„œ ì§ì ‘í•˜ê²Œ ë˜ë‹¤ ë³´ë‹ˆ ì´ë ‡ê²Œ ë˜ì—ˆë‹¤. ë²½ì´ í•˜ë‚˜ì”© ëš«ë¦¬ê³  ìˆëŠ” ëŠë‚Œì´ë¼ ì¬ë°Œê¸´ í•˜ì§€ë§Œ ë™ì‹œì— ìƒˆë¡œìš´ ë²½ì´ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒ ê°™ë‹¤ëŠ” í˜ë“  ì ì´ ìˆë‹¤. </p><p><br></br></p><p>ê·¸ë˜ì„œ ìš”ì¦˜ í•˜ëŠ” ì¼ì„ ì¢€ ë” ìì„¸íˆ ì ì–´ë³´ìë©´, ë‚´ ê¶ê·¹ì  ëª©í‘œëŠ” <code>ë°ì´í„°ê°€ íë¥´ëŠ” ì¡°ì§ ë§Œë“¤ê¸°</code> ì´ë‹¤. ì²« ë‹¨ì¶”ë¡œ íšŒì‚¬ì— GCPì˜ BigQueryë¥¼ ë„ì…í•˜ê³ ì í•œë‹¤. ì—¬ëŸ¬ ë°ì´í„° ì„œë¹„ìŠ¤ë¥¼ í•˜ê¸° ìœ„í•´ì„œëŠ”, ê·¸ë¦¬ê³  ê³ ê°ë“¤ì—ê²Œ ê°€ì¹˜ê°€ ë†’ì€ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ë ¤ë©´ ì†ë„ê°€ ìƒëª…ì´ë¼ê³  ìƒê°í•œë‹¤. ê·¸ëŸ°ë° ë°ì´í„° ì „ì²˜ë¦¬í•˜ëŠ”ë°, ê·¸ë¦¬ê³  ë°ì´í„°ë¥¼ ëŒì–´ì˜¤ëŠ”ë° ì‹œê°„ì´ ë„ˆë¬´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ë¬¸ì œê°€ ì§€ì†ì ìœ¼ë¡œ ë°œìƒí•˜ê³  ìˆë‹¤. ê·¸ë˜ì„œ í° ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì¿¼ë¦¬í•  ìˆ˜ ìˆê³  OLAPì„±ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆëŠ” BigQueryë¥¼ ì‚¬ìš©í•´ë³´ë ¤ê³  í•œë‹¤. ì´ë¥¼ ìœ„í•´ì„œ ê¸°ì¡´ DBì—ì„œ BigQueryì— ë°ì´í„°ë¥¼ ì ì¬í•  ë•Œ Embulkë¼ëŠ” ìƒˆë¡œìš´ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•´ì•¼í•  ê²ƒ ê°™ë‹¤. </p><p>ë˜í•œ BigQueryì— ë„£ê³  êº¼ë‚´ ì“¸ ë•Œë„ ë¶ˆí•„ìš”í•œ ì‘ì—…ì„ í•˜ê³  ì‹¶ì§€ ì•Šê¸° ë•Œë¬¸ì— AWSì˜ Glueì²˜ëŸ¼ ETLì²˜ë¦¬ë¥¼ í•´ì„œ ì „ì²˜ë¦¬ ëœ ë°ì´í„°ë¥¼ ë°”ë¡œë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ ê²ƒì´ë‹¤. ì´ë ‡ê²Œ BigQueryì— ë°ì´í„°ë¥¼ ë‹´ì•„ë†“ê²Œ ë˜ë©´, ì—¬ëŸ¬ ë‹¤ë¥¸ ì œí’ˆë“¤ê³¼ë„ ê²°í•©í•´ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í™•ì¥ì„± ë˜í•œ í™•ë³´í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ê³  ìƒê°í•œë‹¤. BigQueryì—ì„œ ì‚¬ìš©í•˜ëŠ” ì£¼ì œ ë³„ë¡œ ì£¼ê¸°ì ìœ¼ë¡œ ì „ì²˜ë¦¬í•´ í…Œì´ë¸”ì„ ë§Œë“¤ì–´ ë°ì´í„° ë§ˆíŠ¸ë¥¼ êµ¬ì„±í•  ìˆ˜ë„ ìˆê² ê³ , ì´ë¥¼ í†µí•´ ë‹¤ë¥¸ ë¶€ì„œì—ì„œ ììœ ë¡­ê²Œ ë°ì´í„° ë¶„ì„ì´ ê°€ëŠ¥í•  ê²ƒì´ë‹¤. ë˜í•œ Data Studioë‚˜ Redashë¥¼ ì´ìš©í•´ì„œ ììœ ë¡­ê²Œ ë°ì´í„°ë¥¼ ì‹œê°í™” í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ ê²ƒì´ë‹¤. </p><p>ë¬´ì—‡ë³´ë‹¤ë„ BigQueryì— ë°ì´í„°ê°€ ìŒ“ì´ê¸° ì‹œì‘í•˜ë©´, ì¡°ì§ ë‚´ SQLêµìœ¡ì„ ì‹¤ì‹œí•  ê²ƒì´ë‹¤. ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ê¸°ë³¸ì ì¸ ì–¸ì–´ì¸ SQLì„ êµìœ¡í•¨ìœ¼ë¡œì¨ ëª¨ë‘ê°€ ë°ì´í„°ì— ì ‘ê·¼í•´ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ í™•ì¸í•˜ê³  ì´ ê²°ê³¼ë¥¼ í†µí•´ ì˜ì‚¬ê²°ì •ì„ ë‚´ë¦´ ìˆ˜ ìˆê²Œ ëœë‹¤ë©´â€¦ </p><p>ê·¸ë ‡ê²Œ ëœë‹¤ë©´ íšŒì‚¬ê°€ ë§ì´ ë°”ë€Œì§€ ì•Šì„ê¹Œ. ê°œì¸ì ìœ¼ë¡œ ê·¸ë˜ì„œ ê¸°ëŒ€ë¥¼ ë§ì´ í•˜ê³  ìˆë‹¤. </p><p><br></br></p><hr><h3 id="ê¸€ì„-ë§ˆì¹˜ë©°â€¦"><a href="#ê¸€ì„-ë§ˆì¹˜ë©°â€¦" class="headerlink" title="ê¸€ì„ ë§ˆì¹˜ë©°â€¦"></a>ê¸€ì„ ë§ˆì¹˜ë©°â€¦</h3><p>ì´ë ‡ê²Œ ê¸€ë˜ 5ê¸° ì‘ì„±í•œ ê¸€ë“¤ì„ ë³´ê³  íšŒê³  ë° ë„‹ë‘ë¦¬ í•˜ëŠ” ì‹œê°„ì´ ëë‚¬ë‹¤. ëˆ„êµ¬ì—ê²Œ ë³´ì—¬ì§€ë ¤ê³  í•˜ëŠ” íšŒê³ ê°€ ì–´ë””ìˆìœ¼ë´, íšŒê³ ëŠ” ë³¸ì§ˆì ìœ¼ë¡œ ë„‹ë‘ë¦¬ê°€ ê¸°ë³¸ì´ ì•„ë‹ê¹Œ í•˜ëŠ” ìƒê°ìœ¼ë¡œ ì• ì¨ ì •ë¦¬ë¥¼ í•˜ë ¤ê³  í–ˆì§€ë§Œ ì •ë¦¬ê°€ ì˜ ì•ˆëœ ê¸€ì„ ì“´ ë‚˜ë¥¼ ìœ„ë¡œí•˜ë©´ì„œ, ê·¸ë¦¬ê³  ë„‹ë‘ë¦¬ë¥¼ í†µí•´ ê¸€ë˜ 6ê¸°ì— ì‘ì„±í•  ê¸€ì— ëŒ€í•´ì„œ ì ì‹œ ê³ ë¯¼í•´ë³´ë©´ì„œ ê¸€ì„ ë§ˆë¬´ë¦¬í•œë‹¤.</p>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2021/05/02/geultto5-end/#disqus_thread</comments>
    </item>
    
    <item>
      <title>AWS_Immersion_DAY, ì¶”ì²œ íŒŒì´í”„ë¼ì¸</title>
      <link>http://tkdguq05.github.io/2021/04/18/AWS-Immersion-DAY/</link>
      <guid>http://tkdguq05.github.io/2021/04/18/AWS-Immersion-DAY/</guid>
      <pubDate>Sun, 18 Apr 2021 06:21:36 GMT</pubDate>
      <description>
      
        &lt;p&gt;AWS Immersion Dayë¥¼ ì°¸ì„í–ˆë‹¤â€¦ ì¶”ì²œ íŒŒì´í”„ë¼ì¸ ë‹¤ì‹œ ìƒê°í•´ë³´ê¸°&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>AWS Immersion Dayë¥¼ ì°¸ì„í–ˆë‹¤â€¦ ì¶”ì²œ íŒŒì´í”„ë¼ì¸ ë‹¤ì‹œ ìƒê°í•´ë³´ê¸°</p><a id="more"></a><h2 id="AWS-Immersion-Day"><a href="#AWS-Immersion-Day" class="headerlink" title="AWS Immersion Day"></a>AWS Immersion Day</h2><p>(AWS ê´‘ê³ ì•„ë‹˜ ì£¼ì˜, íšŒì‚¬ ì§€ì› ì„¸ì…˜)</p><p>í‰í™”ë¡œìš´ ì˜¤í›„ë¥¼ ë³´ë‚´ë˜ ì–´ëŠë‚  Analytics for E-Commerce Immersion Day í–‰ì‚¬ ì•ˆë‚´ ë©”ì¼ì´ ì™”ìŠµë‹ˆë‹¤. ë¶„ì„ ì‹œìŠ¤í…œì— ëŒ€í•´ AWSì— ë¬¸ì˜í•œ ì ì´ ìˆì—ˆëŠ”ë°, ê´€ë ¨ëœ ì›¨ë¹„ë‚˜ í–‰ì‚¬ ë©”ì¼ì„ ì²™ì²™ ë³´ë‚´ì£¼ì‹œë‹ˆ ì•„ì£¼ ê°ì‚¬í–ˆìŠµë‹ˆë‹¤. ë”êµ°ë‹¤ë‚˜ Kinesisë‚˜ Kafkaì— ê´€ì‹¬ì´ ìˆì—ˆë˜ì§€ë¼ í•™ìŠµì„ ì–´ë–»ê²Œ í•´ë³¼ê¹Œ ê³ ë¯¼í–ˆì—ˆëŠ”ë°, ì´ëŸ° í–‰ì‚¬ê°€ ì¡íˆë‹ˆ ê³ ë¯¼ì´ í•´ê²°ë  ìˆ˜ ìˆê² ë‹¤ëŠ” ê¸°ëŒ€ê°ì´ ìˆì—ˆìŠµë‹ˆë‹¤. </p><p><img src="/images/aws_immersion/immersion_day.png" alt="ë´„ í–¥ê¸° ê°€ë“í•œ ì•ˆë‚´ë¬¸"></p><p>í–‰ì‚¬ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì§„í–‰ëœë‹¤ê³  í–ˆìŠµë‹ˆë‹¤. ì €ëŠ” ë‹¤ í•„ìš”ì—†ê³  Hands On Labì´ ì•„ì£¼ ê¸°ëŒ€ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.</p><p><br></br></p><h2 id="í–‰ì‚¬ì˜-ì‹œì‘"><a href="#í–‰ì‚¬ì˜-ì‹œì‘" class="headerlink" title="í–‰ì‚¬ì˜ ì‹œì‘!"></a>í–‰ì‚¬ì˜ ì‹œì‘!</h2><p>15ì¼ 13ì‹œ ë¶€í„° ì‹œì‘ì´ ë˜ì—ˆìŠµë‹ˆë‹¤. ë¬¼ë¡  ì ì‹¬ì‹œê°„ì„ ìµœëŒ€ë¡œ í™œìš©í•˜ëŠ” ë°”ëŒì— ëŠ¦ì–´ë²„ë ¤ì„œ ì—¬ìœ ë¡­ê²Œ ì»¤í”¼í•œì”ê³¼ í•¨ê»˜ 13ì‹œ 20ë¶„ì— ì ‘ì†ì„ í–ˆìŠµë‹ˆë‹¤. AWSì˜ ë¶„ì„ íŒŒíŠ¸ì— ìˆëŠ” ì œí’ˆë“¤ì„ ì†Œê°œì‹œì¼œ ì£¼ì…¨ëŠ”ë° í¥ë¯¸ë¡œìš´ ë‚´ìš©ì´ì—ˆì§€ë§Œ ì œí’ˆì˜ ì†Œê°œê°™ì•„ì„œ 13ì‹œë¶€í„° 16ì‹œê¹Œì§€ ì§„í–‰í–ˆë˜ ë‚´ìš©ì„ ìš”ì•½í•´ì„œ ì‘ì„±ì„ í•  ê²ƒ ì…ë‹ˆë‹¤. ì˜¤ëŠ˜ì˜ ì£¼ì œëŠ” Hands On Labì´ê³  ì´ ì‹¤ìŠµì„ í•˜ë©´ì„œ ì–»ì€ êµí›ˆ(?)ì„ ì •ë¦¬í•  ê²ƒì´ê±°ë“ ìš”.</p><p><br></br></p><h3 id="AWS-Analytics"><a href="#AWS-Analytics" class="headerlink" title="AWS Analytics"></a>AWS Analytics</h3><p>ë°ì´í„° ë¶„ì„ì— ëŒ€í•œ ì „ë°˜ì ì¸ ë‚´ìš©ì´ ì£¼ë¡œ ì´ë¤˜ìŠµë‹ˆë‹¤. ë°ì´í„° ë¶„ì„ì˜ ëª©ì ì— ëŒ€í•´ì„œ ê°„ëµí•˜ê²Œ ì„¤ëª…í•´ì£¼ì‹œë©´ì„œ, ë¶„ì„ì„ í†µí•´ ì˜ì‚¬ê²°ì •ì„ ë„ì™€ì£¼ê±°ë‚˜, ì–´ë–¤ ì„œë¹„ìŠ¤ë¡œ ì´ë£¨ì–´ì ¸ì•¼ í•œë‹¤ëŠ” ë‚´ìš©ì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ ì¤‘ì— ëˆˆì— ë“¤ì–´ì™”ë˜ ê²ƒì€ ë°ì´í„° ë¶„ì„ì˜ ì†ë„ì— ëŒ€í•œ ê²ƒê³¼ ì¶”ì²œ ì‹œìŠ¤í…œì´ì—ˆìŠµë‹ˆë‹¤. ë°ì´í„° ë¶„ì„ì´ ë¹ ë¥´ê²Œ ì´ë£¨ì–´ì§ˆ ìˆ˜ë¡ ê·¸ ê°€ì¹˜ê°€ ì»¤ì§„ë‹¤ëŠ” ê²ƒì¸ë°, ì´ëŠ” íšŒì‚¬ìƒí™œì„ í•˜ë©´ì„œ ì–´ëŠì •ë„ ëŠë¼ê³  ìˆë˜ ë¶€ë¶„ì´ì—ˆìŠµë‹ˆë‹¤. </p><p><img src="/images/aws_immersion/fast_anal.png" alt="ë¹ ë¥¸ ë°ì´í„° ë¶„ì„ì˜ ê°€ì¹˜"></p><p>ë¹ ë¥¸ ë°ì´í„° ë¶„ì„ì„ ìœ„í•´ì„œëŠ” ë‹¹ì—°í•˜ê²Œë„ íŒŒì´í”„ë¼ì¸ì´ ì˜ êµ¬ì¶•ë˜ì–´ ìˆì–´ì•¼ í•˜ê² ìŠµë‹ˆë‹¤. ë‚´ìš©ì´ ì´ì–´ì§€ë©´ì„œ Kinesisì œí’ˆì„ ì†Œê°œí•´ì£¼ì…¨ìŠµë‹ˆë‹¤. KinesisëŠ” ì„¸ ì¢…ë¥˜ì˜ ì œí’ˆì´ ìˆëŠ”ë° Kinesis Data Firehose, Kinesis Data Streams, Kinesis Data Analytics ì…ë‹ˆë‹¤. FirehoseëŠ” ë°ì´í„°ë¥¼ DWë‚˜ S3ë“±ì˜ ë°ì´í„° ìŠ¤í† ì–´ë¡œ ì‰½ê²Œ ë„£ì„ ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œì´ê³ , StreamsëŠ” ì‹¤ì‹œê°„ ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë° ì„œë¹„ìŠ¤ë¡œ ì´ë¥¼ í†µí•´ ì´ìƒíƒì§€ì— ì ìš©í•˜ê±°ë‚˜ ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ Data AnalyticsëŠ” ë§ ê·¸ëŒ€ë¡œ ìŠ¤íŠ¸ë¦¬ë° ë°ì´í„°ë¥¼ ë³€í™˜ ë° ë¶„ì„í•´ì£¼ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. </p><p><img src="/images/aws_immersion/streaming.png" alt="ìŠ¤íŠ¸ë¦¬ë°ì€ ì–´ë ¤ì›Œ"></p><p>ì´ì»¤ë¨¸ìŠ¤ ì˜ì—­ì—ì„œëŠ” ì†ë„ê°€ ë§¤ìš° ì¤‘ìš”í•˜ê¸° ë•Œë¬¸ì— ìŠ¤íŠ¸ë¦¬ë° ë°ì´í„°ê°€ í•„ìˆ˜ì ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ìŠ¤íŠ¸ë¦¬ë° ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ ì‹œìŠ¤í…œ êµ¬ì¶•ì€ ìƒê°ë³´ë‹¤ í˜ì´ ë§ì´ ë“­ë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ ì„¸ì…˜ì—ì„œëŠ” ê·¹ë³µí•´ì•¼í•  ê³¼ì œë¡œ ì„¤ëª…í•´ì£¼ì…¨ìŠµë‹ˆë‹¤. Kafkaë¥¼ ì˜ˆë¡œ ë“¤ì–´ ì„¤ëª…ì„ ë§ì´ í•´ì£¼ì…¨ëŠ”ë°, KafkaëŠ” ì‰½ë‹¤ê³ ëŠ” í•˜ì§€ë§Œ ì„¤ì¹˜ê°€ ì–´ë µê³  ìœ ì§€ë³´ìˆ˜ë„ ì–´ë µê³  ì‹ ê²½ì“¸ê²Œ ì°¸ ë§ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ! ì´ í¬ì¸íŠ¸ì—ì„œ Kinesisë¥¼ ì ê·¹ ê¶Œì¥í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©í•˜ë©´ ë¬¼ë¡  ì¢‹ê² ì§€ë§Œ KinesisëŠ” ë¹„ì‹¼ í¸ì´ë¼ ê³ ë ¤ë¥¼ ì¢€ í•´ë´ì•¼ê² ìŠµë‹ˆë‹¤. </p><p><br></br></p><h2 id="Hands-On-Lab"><a href="#Hands-On-Lab" class="headerlink" title="Hands On Lab"></a>Hands On Lab</h2><p>ë“œë””ì–´ ê¸°ë‹¤ë ¸ë˜ Hands On Labì‹œê°„ì…ë‹ˆë‹¤. ì•„ê¹Œ ë§ì”€ë“œë ¸ë‹¤ì‹œí”¼, ë°ì´í„° ë¶„ì„ì„ ì´ìš©í•´ì„œ ì–´ë–¤ ì„œë¹„ìŠ¤ë¡œ ì´ë£¨ì–´ì§ˆìˆ˜ ìˆê³  ê·¸ ì¤‘ ëŒ€í‘œì ì¸ ê²ƒì€ ì¶”ì²œì‹œìŠ¤í…œì…ë‹ˆë‹¤. í•¸ì¦ˆì˜¨ ì‹œê°„ì—ëŠ” Analyticsì—ì„œ ì„¤ëª…í•œ ì œí’ˆë“¤ì„ ê°–ê³  ì¶”ì²œì‹œìŠ¤í…œ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì„±í•˜ê³  ìº í˜ì¸ê¹Œì§€ ë§Œë“¤ì–´ ë³´ëŠ” ì‹œê°„ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤. </p><p>ê°€ìƒ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì£¼ê³  ì‹¤ìŠµí•˜ëŠ” ë¶€ë¶„ì´ ì•„ì£¼ ë§˜ì— ì™ ë“¤ì—ˆìŠµë‹ˆë‹¤.</p><blockquote><p>ì—¬ëŸ¬ë¶„ë“¤ì€ ë°˜ë ¤ë™ë¬¼ ìš©í’ˆì„ íŒë§¤í•˜ëŠ” ê°€ìƒì˜ E-commerce íšŒì‚¬ì¸ â€˜ëª½ìŠ¤í† ì–´â€™ íšŒì‚¬ë¥¼ ìš´ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì§€ê¸ˆê¹Œì§€ ë¹„ì¦ˆë‹ˆìŠ¤ëŠ” ê¾¸ì¤€íˆ ì„±ì¥í•´ì™”ì§€ë§Œ ë°˜ë…„ì „ë¶€í„° ë§¤ì¶œì´ í¬ê²Œ ì„±ì¥í•˜ì§€ ëª»í•˜ê³  ë©ˆì¶° ìˆëŠ” ìƒíƒœì…ë‹ˆë‹¤. ì´ì— ë”°ë¼ ë°ì´í„° ë¶„ì„ì— ëŒ€í•œ ë‹ˆì¦ˆê°€ ë°œìƒí•˜ì˜€ìœ¼ë©°, ë°ì´í„° ë¶„ì„ì„ í†µí•´ ê°œì¸ë³„ ì¶”ì²œì„œë¹„ìŠ¤ë¥¼ ë„ì…í•˜ì—¬ ë§¤ì¶œì˜ ì„±ì¥ì„ ë„ëª¨í•  ë•Œë¼ëŠ” ê²°ë¡ ì— ì´ë¥´ë €ìŠµë‹ˆë‹¤.</p></blockquote><p>íˆ¬ì¡ ë›°ëŠ” ëŠë‚Œì´ë„ê¹Œ? ì•„ì£¼ ì„¤ë ˆëŠ” ë§ˆìŒìœ¼ë¡œ ì‹¤ìŠµì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. </p><p>ì‹¤ìŠµë‚´ìš©ì˜ ì „ì²´ ì•„í‚¤í…ì³ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p><p><img src="/images/aws_immersion/architect.png" alt="ì „ì²´ êµ¬ì„±"></p><p>AWS ì‹œìŠ¤í…œ ë‚´ì—ì„œ AWS ì œí’ˆì„ ê°–ê³  AWSë¥¼ ì´ìš©í•œ ì¶”ì²œ ì œí’ˆì¸ AWS Personalizeë¥¼ ì‚¬ìš©í•´ì„œ, ì¶”ì²œ ìº í˜ì¸ì„ ì§„í–‰í•´ë³´ìëŠ” ê²ƒì…ë‹ˆë‹¤. ì£¼ì œê°€ ë­ë¼êµ¬ìš”? AWSëƒêµ¬ìš”? ë§ê¸´í•œë° ê±°ê¸°ì— â€˜ì¶”ì²œ íŒŒì´í”„ë¼ì¸ì„ ë§Œë“¤ì–´ë´…ì‹œë‹¤!â€™ ê¹Œì§€ê°€ ì£¼ì œì…ë‹ˆë‹¤.</p><p><br></br></p><h3 id="ë³¸ê²©-ì‹¤ìŠµ"><a href="#ë³¸ê²©-ì‹¤ìŠµ" class="headerlink" title="ë³¸ê²© ì‹¤ìŠµ"></a>ë³¸ê²© ì‹¤ìŠµ</h3><p>ì‹¤ìŠµ ë‚´ìš©ì€ ìµœëŒ€í•œ ê°„ê²°í•˜ê²Œ ìš”ì•½í•´ì„œ ì •ë¦¬í•  ê²ƒì…ë‹ˆë‹¤. ì´ê±¸ ì¼ì¼ì´ ì“°ëŠ” ê²ƒë³´ë‹¤ ë“¤ì–´ê°€ì„œ í™•ì¸í•˜ë©´ ë˜ê±°ë“ ìš”. <a href="http://public-aws-workshop.s3-website.us-east-1.amazonaws.com/analyticsworkshop/">ì›Œí¬ìƒµ ë§í¬</a></p><p>ì •ë§ ê¶ê¸ˆí•˜ì‹  ë¶„ë“¤ì€ ë§í¬ë¡œ ë“¤ì–´ê°€ì„œ ì­‰ ë”°ë¼ê°€ë³´ì‹œë©´ ë©ë‹ˆë‹¤. ë¬¼ë¡  ì‹¤ìŠµ ì—”ì§„ì€ ì œê³µë˜ì§€ ì•Šê³  Cloud Formationë„ ì œê³µë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. </p><p>ì‹¤ìŠµ ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ì•˜ìŠµë‹ˆë‹¤.</p><ol><li>Cloud Formationìœ¼ë¡œ í™˜ê²½(ìŠ¤íƒ) êµ¬ì„±í•˜ê¸°</li><li>S3 ìƒì„±í•˜ê¸°</li><li>Glueë¥¼ ì´ìš©í•œ RDS DataBase í¬ë¡¤ë§</li><li>í¬ë¡¤ë§í•œ ë°ì´í„° S3ë¡œ ETL ì „ì†¡í•˜ê¸°</li><li>Web ë¡œê·¸ ë°ì´í„° Kinesis Firehoseí™œìš©í•˜ì—¬ ìˆ˜ì§‘</li><li>ìˆ˜ì§‘ ë°ì´í„° S3ë¡œ ETL</li><li>S3 ë°ì´í„° Glueí™œìš©í•˜ì—¬ ETL<ul><li>Athenaë¥¼ ì‚¬ìš©í•´ì„œ ë°ì´í„° ì‚´í´ë³´ê¸°</li></ul></li><li>Personalizeë¥¼ ì‚¬ìš©í•´ ì¶”ì²œ ë°ì´í„° ìƒì„±í•˜ê¸°</li></ol><p><br></br></p><p>Cloud Formationì„ í™œìš©í•´ì„œ ìœ„ ê·¸ë¦¼ê³¼ ê°™ì€ í™˜ê²½ì„ ë§Œë“¤ì–´ ì£¼ê²Œ ë©ë‹ˆë‹¤. ì¼ì¼ì´ ì„¸íŒ…í•´ì„œ í™˜ê²½ êµ¬ì„±ì„ í•˜ë ¤ë©´ ì‹œê°„ì´ ë„ˆë¬´ ë“¤ê²Œ ë˜ë‹ˆê¹Œ ë¹ ë¥´ê²Œ í™˜ê²½ì„ êµ¬ì¶•í•´ì¤ë‹ˆë‹¤. </p><p>Cloud Formationì„ í™œìš©í•´ êµ¬ì„±í•œ í•­ëª©ì€ ìœ„ ê·¸ë¦¼ì—ì„œ S3ê¸°ì¤€ ì™¼ìª½ ë¶€ë¶„ì´ë¼ê³  í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤. ë§ ì„¤ì •ê³¼ webserver, ê·¸ë¦¬ê³  RDSì…ë‹ˆë‹¤. </p><p>S3ë¥¼ ë§Œë“¤ì–´ ì¤„ ê²ƒì¸ë° S3ëŠ” ì—¬ê¸°ì„œ Data Lakeë¡œ í™œìš©ë©ë‹ˆë‹¤. Data LakeëŠ” ëŒ€ê·œëª¨ ë°ì´í„°ë¥¼ ê¸°ë³¸ í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ê³  ìˆëŠ” Storageë¡œ ê·¸ëŸ´ì‹¸í•´ë³´ì´ì§€ë§Œ ì œê°€ ë³´ê¸°ì—ëŠ” ë°ì´í„°ë¥¼ ë‹¤ ë•Œë ¤ë„£ëŠ” ê³³ì´ë¼ëŠ” ìƒê°ì´ ë“­ë‹ˆë‹¤. ë‹¤ë¥¸ ì˜ê²¬ì´ ìˆìœ¼ì‹  ë¶„ì€ ëŒ“ê¸€ ë‚¨ê²¨ì£¼ì„¸ìš”. ì•„ë¬´íŠ¼ S3ë¥¼ ë§Œë“¤ì–´ ì£¼ê³  Glueë¥¼ ì‚¬ìš©í•´ë³´ê² ìŠµë‹ˆë‹¤. </p><p><br></br></p><h3 id="Glue"><a href="#Glue" class="headerlink" title="Glue"></a>Glue</h3><p>GlueëŠ” ë°ì´í„° ì²˜ë¦¬ì— ì‚¬ìš©ë©ë‹ˆë‹¤. ë°ì´í„°ëŠ” ì—¬ê¸°ì„œ ë‘ ì¢…ë¥˜ë¡œ ë‚˜ë‰˜ëŠ”ë°, RDSì— ê°–ê³  ìˆëŠ” êµ¬ë§¤ì´ë ¥ ë°ì´í„°ì™€, ìˆ˜ì§‘ë˜ê³  ìˆëŠ” í–‰ë™ ë°ì´í„°, ì¦‰, ë¡œê·¸ë°ì´í„° ì…ë‹ˆë‹¤. </p><h4 id="êµ¬ë§¤ì´ë ¥-ë°ì´í„°-ì²˜ë¦¬"><a href="#êµ¬ë§¤ì´ë ¥-ë°ì´í„°-ì²˜ë¦¬" class="headerlink" title="êµ¬ë§¤ì´ë ¥ ë°ì´í„° ì²˜ë¦¬"></a>êµ¬ë§¤ì´ë ¥ ë°ì´í„° ì²˜ë¦¬</h4><ul><li>Glue<ul><li>RDSì—ì„œ í¬ë¡¤ë§, ë°ì´í„° ë² ì´ìŠ¤ì˜ ë°ì´í„° êµ¬ì¡°, ìŠ¤í‚¤ë§ˆë¥¼ ë°”ë¡œ ì•Œ ìˆ˜ ì—†ìŒ<ul><li>ìŠ¤í‚¤ë§ˆ, íŒŒí‹°ì…˜ êµ¬ì¡° ì¶”ë¡  ë’¤ ë°ì´í„° ì¹´íƒˆë¡œê·¸ ìƒì„±</li></ul></li><li>í¬ë¡¤ë§ â†’ RDSì— ìˆëŠ” ë°ì´í„° í…Œì´ë¸” í™•ì¸ ê°€ëŠ¥</li><li>2ì°¨ í¬ë¡¤ë§<ul><li>ë°ì´í„° ì¹´íƒˆë¡œê·¸ë¥¼ ìƒì„±í•œ ë’¤ ë°ì´í„°ë¥¼ S3ë¡œ ë³´ë‚´ê¸°(ETL)</li><li>Transformí• ë•ŒëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì…ë ¥, pyspark ì½”ë“œë¥¼ í™œìš©í•¨</li><li>Transformí•œ ë’¤ S3ì— ì ì¬[Load]</li></ul></li></ul></li></ul><h4 id="í–‰ë™-ë°ì´í„°-ë¡œê·¸-ë°ì´í„°-ì²˜ë¦¬"><a href="#í–‰ë™-ë°ì´í„°-ë¡œê·¸-ë°ì´í„°-ì²˜ë¦¬" class="headerlink" title="í–‰ë™ ë°ì´í„°, ë¡œê·¸ ë°ì´í„° ì²˜ë¦¬"></a>í–‰ë™ ë°ì´í„°, ë¡œê·¸ ë°ì´í„° ì²˜ë¦¬</h4><ul><li>Webserverì—ì„œ ìƒì„±ë˜ëŠ” ë°ì´í„°ë¥¼ Kinesis Data Firehoseë¥¼ ì‚¬ìš©í•´ ìˆ˜ì§‘</li><li>ìˆ˜ì§‘í•œ ë°ì´í„°ëŠ” S3ì— ì ì¬</li></ul><p>ì ì´ì œ Glueë¥¼ í†µí•´ì„œ S3ì— ì‚¬ìš©í•  ë°ì´í„°ë¥¼ ëª¨ë‘ ì ì¬í•´ ë†“ì•˜ìŠµë‹ˆë‹¤. ì´ì œ ì¶”ì²œë°ì´í„°ë¥¼ ìƒì„±í•´ë³´ê² ìŠµë‹ˆë‹¤. AWS Personalizeë¥¼ ì‚¬ìš©í•´ ë³¼ ê²ƒì¸ë°, PersonalizeëŠ” ì‚¬ìš©í•  ë°ì´í„° í˜•ì‹ì´ ë”°ë¡œ ì¡´ì¬í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì›í•˜ëŠ” í˜•ì‹ì— ë§ê²Œ ì „ì²˜ë¦¬ë¥¼ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ë˜ ë‹¤ì‹œ Glueë¥¼ ì‚¬ìš©í•´ì„œ ì „ì²˜ë¦¬í•˜ê³  Personalizeì— ì „ë‹¬í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. </p><p><br></br></p><h3 id="ì¶”ì²œ-ë°ì´í„°-ìƒì„±"><a href="#ì¶”ì²œ-ë°ì´í„°-ìƒì„±" class="headerlink" title="ì¶”ì²œ ë°ì´í„° ìƒì„±"></a>ì¶”ì²œ ë°ì´í„° ìƒì„±</h3><ul><li><p>ì „ì²˜ë¦¬, Glue</p><ul><li><p>Glueë¥¼ í†µí•´ ETLì²˜ë¦¬ë¥¼ í•´ì¤Œ, ê³¼ì •ì€ ìœ„ì™€ ìœ ì‚¬í•¨ [êµ¬ë§¤ì´ë ¥]</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> awsglue.transforms <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> awsglue.utils <span class="keyword">import</span> getResolvedOptions</span><br><span class="line"><span class="keyword">from</span> pyspark.context <span class="keyword">import</span> SparkContext</span><br><span class="line"><span class="keyword">from</span> awsglue.context <span class="keyword">import</span> GlueContext</span><br><span class="line"><span class="keyword">from</span> awsglue.job <span class="keyword">import</span> Job</span><br><span class="line"></span><br><span class="line"><span class="comment">## @params: [JOB_NAME]</span></span><br><span class="line">args = getResolvedOptions(sys.argv, [<span class="string">'JOB_NAME'</span>])</span><br><span class="line"></span><br><span class="line">sc = SparkContext()</span><br><span class="line">glueContext = GlueContext(sc)</span><br><span class="line">spark = glueContext.spark_session</span><br><span class="line">job = Job(glueContext)</span><br><span class="line">job.init(args[<span class="string">'JOB_NAME'</span>], args)</span><br><span class="line"></span><br><span class="line"><span class="comment">##create dynamic frame</span></span><br><span class="line">digital_df = glueContext.create_dynamic_frame.from_catalog(database=<span class="string">'demogo-mongstore-database'</span>, table_name=<span class="string">'product'</span>).toDF()</span><br><span class="line">digital_df.createGlobalTempView(<span class="string">"productview"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">##sql query</span></span><br><span class="line">client_df = spark.sql(<span class="string">"SELECT productcode as ITEM_ID, productname as PRODUCTNAME, category1||'|'||category2||'|'||category3 as CATEGORY FROM global_temp.productview"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">##write output to S3</span></span><br><span class="line">client_df.repartition(<span class="number">1</span>).write.format(<span class="string">'csv'</span>).option(<span class="string">'header'</span>, <span class="string">'true'</span>).save(<span class="string">'s3://demogo-mongstore-[ì‚¬ìš©ìì´ë¦„]/personalize-items'</span>)</span><br><span class="line"></span><br><span class="line">job.commit()</span><br></pre></td></tr></table></figure></li><li><p>spark sqlì„ ì‚¬ìš©í•´ì„œ Transformation ë’¤ S3ì— ì ì¬í•˜ëŠ” êµ¬ì¡°</p><ul><li><p>AS-IS, ì´ ë°ì´í„°ë¥¼</p><p><img src="/images/aws_immersion/asis_purchase.png" alt="AS-IS"></p></li><li><p>TO-BE, ì´ë ‡ê²Œ ë°”ê¿€ ê²ƒ</p><p><img src="/images/aws_immersion/tobe_purchase.png" alt="TO-BE"></p></li></ul></li></ul></li></ul><ul><li><p>ë¡œê·¸ë°ì´í„° ì²˜ë¦¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> awsglue.transforms <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> awsglue.utils <span class="keyword">import</span> getResolvedOptions</span><br><span class="line"><span class="keyword">from</span> pyspark.context <span class="keyword">import</span> SparkContext</span><br><span class="line"><span class="keyword">from</span> awsglue.context <span class="keyword">import</span> GlueContext</span><br><span class="line"><span class="keyword">from</span> awsglue.job <span class="keyword">import</span> Job</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="comment">## @params: [JOB_NAME]</span></span><br><span class="line">args = getResolvedOptions(sys.argv, [<span class="string">'JOB_NAME'</span>])</span><br><span class="line"></span><br><span class="line">sc = SparkContext()</span><br><span class="line">glueContext = GlueContext(sc)</span><br><span class="line">spark = glueContext.spark_session</span><br><span class="line">job = Job(glueContext)</span><br><span class="line">job.init(args[<span class="string">'JOB_NAME'</span>], args)</span><br><span class="line"></span><br><span class="line"><span class="comment">##create dynamic frame</span></span><br><span class="line">digital_df = glueContext.create_dynamic_frame.from_catalog(database=<span class="string">'demogo-mongstore-database'</span>, table_name=<span class="string">'purchase'</span>).toDF()</span><br><span class="line">digital_df.createGlobalTempView(<span class="string">"purchaseview"</span>)</span><br><span class="line">digital_df = glueContext.create_dynamic_frame.from_catalog(database=<span class="string">'demogo-mongstore-database'</span>, table_name=<span class="string">'accesslog2021'</span>).toDF()</span><br><span class="line">digital_df.createGlobalTempView(<span class="string">"accesslog2021view"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">##sql query</span></span><br><span class="line">client_df = spark.sql(<span class="string">"SELECT userid as USER_ID, REGEXP_REPLACE(pageurl, '[^0-9]+','') as ITEM_ID, to_unix_timestamp(CAST(time AS timestamp)) as TIMESTAMP, 'view' as EVENT_TYPE FROM global_temp.accesslog2021view UNION ALL SELECT userid as USER_ID, productcode as ITEM_ID, to_unix_timestamp(ordertime) as TIMESTAMP, 'order' as EVENT_TYPE FROM global_temp.purchaseview"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">##write output to S3</span></span><br><span class="line">client_df.repartition(<span class="number">1</span>).write.format(<span class="string">'csv'</span>).option(<span class="string">'header'</span>, <span class="string">'true'</span>).option(<span class="string">'header'</span>, <span class="string">'true'</span>).save(<span class="string">'s3://demogo-mongstore-[ì‚¬ìš©ìì´ë¦„]/personalize-interactions'</span>)</span><br><span class="line"></span><br><span class="line">job.commit()</span><br></pre></td></tr></table></figure><ul><li><p>AS-IS, ì´ ë°ì´í„°ë¥¼</p><p><img src="/images/aws_immersion/asis_log.png" alt="AS-IS"></p></li><li><p>TO-BE, ì´ë ‡ê²Œ ì²˜ë¦¬</p><p><img src="/images/aws_immersion/tobe_log.png" alt="TO-BE"></p></li></ul></li></ul><p>ì¶”ì²œ ë°ì´í„° ìƒì„±ì€ ë°ì´í„° ìŠ¤í‚¤ë§ˆ ë§¤í•‘ í›„ ë°ì´í„° ì„í¬íŠ¸ë¥¼ í•´ì£¼ë©´ ë©ë‹ˆë‹¤.  ì´ì œ ì†”ë£¨ì…˜ ìƒì„±ì„ í•´ì£¼ë©´ ë˜ëŠ”ë° ì—¬ê¸°ì—ëŠ”  1ì‹œê°„ ì´ìƒì´ ì†Œìš”ë˜ë„¤ìš”. ìº í˜ì¸ì„ ìƒì„±í•´ì„œ ë°ì´í„°ë¥¼ ë³´ë©´. ìœ ì‚¬ë„ ë³„ ë­í‚¹ì´ ë§¤ê²¨ì§„ ì¶”ì²œ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p><img src="/images/aws_immersion/personalize_recomendation.png" alt="ìƒì„±ëœ ì¶”ì²œ ë°ì´í„°"></p><p><br></br></p><h2 id="ì‹¤ìŠµ-ì¢…ë£Œ-ë¬´ì—‡ì„-ì–»ì—ˆë‚˜"><a href="#ì‹¤ìŠµ-ì¢…ë£Œ-ë¬´ì—‡ì„-ì–»ì—ˆë‚˜" class="headerlink" title="ì‹¤ìŠµ ì¢…ë£Œ, ë¬´ì—‡ì„ ì–»ì—ˆë‚˜"></a>ì‹¤ìŠµ ì¢…ë£Œ, ë¬´ì—‡ì„ ì–»ì—ˆë‚˜</h2><p>ì´ ì‹¤ìŠµì„ í†µí•´ í˜„ì¬ ì„œë¹„ìŠ¤í•˜ê³  ìˆëŠ” ì¶”ì²œ ì‹œìŠ¤í…œì˜ êµ¬ì¡°ì— ëŒ€í•´ì„œ ë‹¤ì‹œ ìƒê°í•´ë³´ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. í˜„ì¬ ì„œë¹„ìŠ¤í•˜ê³  ìˆëŠ” ì¶”ì²œ ì‹œìŠ¤í…œì€ ìì„¸í•˜ê²Œ ë°íˆì§€ëŠ” ëª»í•˜ì§€ë§Œ, ê°„ëµí•˜ê²Œ êµ¬ì¡°ë¥¼ ë§ì”€ë“œë¦¬ë©´, ë¡œê·¸ ë°ì´í„°ë¥¼ NoSQL DBë¡œ ë°›ì•„ ë„£ê³  ì´ê²ƒì„ ì¶”ì²œìš© DBì— ì¼ë¶€ ì „ì²˜ë¦¬ í•˜ì—¬ ë„£ì–´ì£¼ëŠ” í˜•íƒœì…ë‹ˆë‹¤. ì´ ì¶”ì²œìš© DBì— ë°ì´í„°ë¥¼ ëŒì–´ì™€ì„œ í•œ ê³ ê°ì‚¬ì˜ ì¶”ì²œ ë°ì´í„°ë¥¼ AWS EMRì„ ì´ìš©í•´ì„œ ë°°ì¹˜ ìŠ¤ì¼€ì¥´ë§ˆë‹¤ ìƒì„±í•˜ê³  EMRì„ ì¢…ë£Œí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì‹¤ìŠµì—ì„œ ì œì‹œëœ êµ¬ì¡°ì™€ëŠ” ë§ì€ ì°¨ì´ê°€ ì¡´ì¬í•©ë‹ˆë‹¤. ë¬¼ë¡  ì‹¤ìŠµì€ B2C ì„œë¹„ìŠ¤ë¡œ ì œì‹œë˜ì—ˆê³  í˜„ì¬ íšŒì‚¬ëŠ” B2B ì„œë¹„ìŠ¤ê¸° ë•Œë¬¸ì— ì°¨ì´ëŠ” ìˆìŠµë‹ˆë‹¤ë§Œ, ì°¨ì´ì ì„ ì •ë¦¬í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p><ol><li>Data Lake</li><li>ETL íŒŒì´í”„ë¼ì¸ì˜ ë¶€ì¬</li><li>Transformí•œ ë°ì´í„°ì˜ ì ì¬</li></ol><h4 id="ë¨¼ì €-Data-Lakeê°€-ì—†ìŠµë‹ˆë‹¤"><a href="#ë¨¼ì €-Data-Lakeê°€-ì—†ìŠµë‹ˆë‹¤" class="headerlink" title="ë¨¼ì € Data Lakeê°€ ì—†ìŠµë‹ˆë‹¤."></a>ë¨¼ì € Data Lakeê°€ ì—†ìŠµë‹ˆë‹¤.</h4><p>Data Lakeê°€ ê¼­ í•„ìš”í•˜ë‹¤ê³ ëŠ” í•  ìˆ˜ ì—†ê³ , ëª©ì ì— ë”°ë¼ êµ¬ì„±í•­ëª©ì— ë„£ê¸°ë„ í•©ë‹ˆë‹¤. ë¬¼ë¡  íšŒì‚¬ì—ì„œë„ ì „ì²´ ë°ì´í„°ê°€ ë‹¤ ë“¤ì–´ìˆëŠ” DBëŠ” ìˆìŠµë‹ˆë‹¤ë§Œ, S3ì œí’ˆë§Œí¼ ê³ ê°€ìš©ì„±ì´ ë³´ì¥ëœë‹¤ê³ ëŠ” í•  ìˆ˜ ì—†ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. S3ì—ë„ connection pool sizeê°€ ìˆìŠµë‹ˆë‹¤, ê·¸ë ‡ì§€ë§Œ í˜„ì¬ ì‚¬ìš©í•˜ê³  ìˆëŠ” DBë³´ë‹¤ì•¼ í›¨ì”¬ sizeê°€ í¬ê³  ê´€ë¦¬í•˜ê¸°ë„ í¸í•˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ë ‡ê²Œ ê³ ê°€ìš©ì„±ì´ ë³´ì¥ë˜ëŠ” Data Lakeê°€ ìˆìœ¼ë©´ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ êµ¬ìƒí•˜ë”ë¼ë„ connection poolì´ë‚˜ ë©”ëª¨ë¦¬ ë•Œë¬¸ì— ì¥ì• ë‚˜ëŠ” ìƒí™©ì´ ê±°ì˜ ì—†ê¸° ë•Œë¬¸ì— ì•ˆì •ì ìœ¼ë¡œ ìƒˆ ì„œë¹„ìŠ¤ë¥¼ ìƒê°í•´ë³´ê³  í† ì´ í”„ë¡œì íŠ¸ë¥¼ í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜„ì¬ ìš´ì˜ê³¼ ê°œë°œDBê°€ ìˆê¸´ í•˜ì§€ë§Œ ê°œë°œDBì— ë¬¸ì œê°€ ì¢€â€¦</p><h4 id="ETL-íŒŒì´í”„ë¼ì¸ì´-ì œëŒ€ë¡œ-êµ¬ì„±ë˜ì§€-ì•Šì€-ê²ƒ-ê°™ìŠµë‹ˆë‹¤"><a href="#ETL-íŒŒì´í”„ë¼ì¸ì´-ì œëŒ€ë¡œ-êµ¬ì„±ë˜ì§€-ì•Šì€-ê²ƒ-ê°™ìŠµë‹ˆë‹¤" class="headerlink" title="ETL íŒŒì´í”„ë¼ì¸ì´ ì œëŒ€ë¡œ êµ¬ì„±ë˜ì§€ ì•Šì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤."></a>ETL íŒŒì´í”„ë¼ì¸ì´ ì œëŒ€ë¡œ êµ¬ì„±ë˜ì§€ ì•Šì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</h4><p>ì´ ì‹¤ìŠµì—ì„œëŠ” E, T, Lì´ ëª…í™•í•˜ê²Œ ë‚˜ë‰˜ì–´ì ¸ ìˆë‹¤ëŠ” ê²ƒì´ ëŠê»´ì§€ëŠ”ë°, ì´ ì‹¤ìŠµì„ í•˜ê³  íšŒì‚¬ ì„œë¹„ìŠ¤ë¥¼ ëŒì•„ë³´ë‹ˆ ì–´ë””ë¶€í„° ì–´ë””ê¹Œì§€ê°€ ETLì¸ì§€ êµ¬ë¶„ì´ ì˜ ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. Transformì„ í•˜ê¸´ í•˜ëŠ”ë° Loadë¥¼ ì•ˆí•˜ëŠ” ê²ƒ ê°™ê³ â€¦ Transformì´ ì œëŒ€ë¡œ ë˜ê³  ìˆëŠ” ê±´ì§€â€¦ ë­ ì´ëŸ° ìƒê°ì„ í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ Glueë¥¼ ì‚¬ìš©í•œë‹¤ê³  ìƒê°í•˜ê³  êµ¬ì„±ì„ ìƒê°í•´ë´¤ì„ ë•Œ, í¬ê²Œ ì–´ë ¤ìš¸ ê²ƒ ê°™ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. Glueë¥¼ ê°„ë‹¨íˆ ì‚´í´ë³´ê¸´ í–ˆì§€ë§Œ, ETLí”„ë¡œì„¸ìŠ¤ì´ê³  Transformì€ ê±°ì˜ Pysparkë¡œ ëŒì•„ê°€ê³  ìˆì—ˆìŠµë‹ˆë‹¤. Pysparkë¡œ ì´ë¯¸ ì¶”ì²œ ë°ì´í„°ë¥¼ ìƒì„±í•˜ê³  ìˆê¸°ì— íŒŒì´í”„ë¼ì¸ì„ ì •ë¦¬í•´ì£¼ë©´ ê¸ˆë°© ì ìš©í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ ìƒê°í•´ë´¤ìŠµë‹ˆë‹¤. ì–´ë””ì„œ ëŒì–´ì˜¤ê³ , ì ì¬í• ì§€ë¥¼ ì˜ ì •í•˜ëŠ” ê²Œ ì¤‘ìš”í•  ê²ƒì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ DBë¥¼ ì˜ ì•Œì•„ì•¼ í•˜ëŠ”ë°, ì´ë ‡ê²Œ ê³µë¶€ í¬ì¸íŠ¸ê°€ ëŠ˜ì–´ë‚¬ìŠµë‹ˆë‹¤! í•˜í•˜</p><h4 id="Transformí•œ-ë°ì´í„°ëŠ”-ì–´ë””"><a href="#Transformí•œ-ë°ì´í„°ëŠ”-ì–´ë””" class="headerlink" title="Transformí•œ ë°ì´í„°ëŠ” ì–´ë””?"></a>Transformí•œ ë°ì´í„°ëŠ” ì–´ë””?</h4><p>í° ë¬¸ì œì  ì¤‘ì— í•˜ë‚˜ë¼ê³  ìƒê°í•˜ëŠ”ë°, í˜„ì¬ ë¹„ìš© íš¨ìœ¨ì ì¸ ì•„í‚¤í…ì³ë¥¼ ì§€í–¥í•˜ê³  ìˆê¸° ë•Œë¬¸ì— EMRì„ ìƒì‹œ êµ¬ë™í•˜ê³  ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.      ìƒì„±í•œ ì¶”ì²œ ë°ì´í„°ëŠ” DBì— ë„£ê³  ìˆì§€ë§Œ, ì „ì²˜ë¦¬í•œ ë°ì´í„°ëŠ” ì—¬ì§€ì—†ì´ ì‚­ì œë˜ê³  ë§™ë‹ˆë‹¤. ì‹¤ìŠµì„ ì§„í–‰í•˜ê³  ìƒê°í•´ë³´ë‹ˆ ì´ ë°ì´í„°ê°€ ë„ˆë¬´ ì•„ê¹ë‹¤ëŠ” ìƒê°ì„ í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë§Œì•½ ì „ì²˜ë¦¬í•œ ë°ì´í„°ê°€ ë‚¨ì•„ìˆë‹¤ë©´ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì— ì ìš©ì„ í•´ë³¼ ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. ì¶”ì²œì— ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ê°€ ì–´ë–»ê²Œ ë³´ë©´ êµ¬ë§¤ë‚˜, í´ë¦­, Viewì— ëŒ€í•œ íŒ¨í„´ ë¶„ì„ëœ ë°ì´í„°ì¸ë°, ì´ê²ƒì„ ê³ ê°ì‚¬ ë ˆí¬íŒ…ì´ë‚˜ ê¸°íƒ€ ë¶„ì„ ì‹œìŠ¤í…œì— í™œìš©í•  ì—¬ì§€ê°€ ë§ì„ ê²ƒ ê°™ì•˜ìŠµë‹ˆë‹¤. </p><p><br></br></p><hr><h2 id="Kaizen"><a href="#Kaizen" class="headerlink" title="Kaizen!"></a>Kaizen!</h2><p>ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ ê°œì„ í•  ìˆ˜ ìˆì„ê¹Œìš”? TAë‹˜ì´ë‚˜ íŒ€ì¥ë‹˜ê³¼ ì˜ë…¼ì„ ê°™ì´ í•˜ë©´ì„œ êµ¬ì²´í™”í•´ì•¼ê² ì§€ë§Œ ìš°ì„  ìƒê°ë‚˜ëŠ” ê°œì„ ì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. </p><ol><li>Extractí•˜ëŠ” ë°ì´í„° í¬ì¸íŠ¸ë¥¼ ë³€ê²½</li><li>Data Warehouse</li><li>ìƒì‹œ êµ¬ë™ EMRì„œë²„ êµ¬ì„±</li></ol><p>ì´ê²Œ ëª…í™•í•œ ë‹µì´ ë ì§€ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ìš°ì„  ì´ë ‡ê²Œ ê¸€ë¡œ ë§Œë“¤ì–´ë†“ê³  ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ì˜ê²¬ì„ ë°›ì•„ì„œ ë‘ë“¤ê²¨ ë§ìœ¼ë©° ê³ ì³ë‚˜ê°€ëŠ” ê²Œ ë§ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ì¼ë‹¨ ì €ì§ˆëŸ¬ì•¼ ë³€í™”ê°€ ìƒê¸°ë‹ˆê¹Œìš”.</p><p>ë°ì´í„° í¬ì¸íŠ¸ë¥¼ ë³€ê²½í•œë‹¤ëŠ” ê²ƒì€ Extractí•˜ëŠ” ë°ì´í„° ë² ì´ìŠ¤ê°€ í˜¹ì‚¬ë‹¹í•˜ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë„ˆë¬´ ìì£¼ ë°ì´í„°ë¥¼ ëŒì–´ì˜¤ê³  ë‚˜ê°€ê³  ìˆëŠ” ìƒí™©ì´ê¸° ë•Œë¬¸ì—, ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ë¥¼ ë”°ë¡œ ì €ì¥í•˜ëŠ” DBë¥¼ ë§Œë“¤ë©´ ì–´ë–¨ê¹Œ ìƒê°í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ëŠ” 2ë²ˆê³¼ ì´ì–´ì§€ëŠ”ë°, ì´ê²ƒì„ Data Warehouseë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ DWëŠ” Big Queryë¥¼ ê²€í† í•˜ê³  ìˆìŠµë‹ˆë‹¤. Big Queryì— ì¼ë‹¨ ì ì¬ë¥¼ í•˜ê³  ì „ì²˜ë¦¬ ìŠ¤ì¼€ì¥´ì„ ê±¸ì–´ì„œ ì¶”ì²œì— ì‚¬ìš©í•  ë°ì´í„°ë¥¼ ì•„ì£¼ ì˜ˆì˜ê²Œ êµ¬ì„±í•´ ë†“ì„ ì˜ˆì •ì…ë‹ˆë‹¤. ë§ˆì¹˜ Personalizeì— Glueë¥¼ ì‚¬ìš©í•´ì„œ ë°ì´í„°ë¥¼ ì „ì²˜ë¦¬í•˜ê³  ë„£ëŠ” ê²ƒ ì²˜ëŸ¼ìš”. ë™ì‹œì— EMR ì„œë²„ë¥¼ ìƒì‹œ êµ¬ì„±í•´ë†”ì„œ ì¶”ì²œ ìƒì„±í•  ë•Œ ë°œìƒí•˜ëŠ” ì¼ë¶€ ë°ì´í„°ë¥¼ DWì— ì €ì¥í•´ë†“ìœ¼ë ¤ê³  í•©ë‹ˆë‹¤. ë¬¼ë¡  ì¤‘ê°„ì— ë°ì´í„°ë¥¼ í™•ì¸í•´ë³´ê³  ì´ê²Œ ì‚¬ìš©í• ë§Œí•œ ê°€ì¹˜ê°€ ìˆì„ì§€ ë¶„ì„ê°€ë¶„ë“¤ê³¼ ê³ ë¯¼í•´ë´ì•¼ê² ì§€ë§Œ, êµ¬ìƒì€ ì´ë ‡ê²Œ í•´ë†“ê³  ìˆìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ ë³´ë©´ DWì— ìŠ¤ì¼€ì¥´ì„ ê±¸ì–´ì„œ ì‘ì—…ì„ ëŒë ¤ë†“ìœ¼ë©´ ì¤‘ê°„ì— EMRë¡œ ì‘ì—…í•˜ë©´ì„œ ë‚˜ì˜¤ëŠ” ë°ì´í„°ëŠ” êµ³ì´ í•„ìš”ê°€ ì—†ì„ ìˆ˜ë„ ìˆê² ìŠµë‹ˆë‹¤. </p><p>í—›ëœ êµ¬ìƒì¼ ìˆ˜ ìˆê² ì§€ë§Œ, ë°œì „í•  ìˆ˜ ìˆëŠ” í¬ì¸íŠ¸ë¥¼ ì–´ëŠì •ë„ ì°¾ì€ ê²ƒ ê°™ì•„ì„œ ì–»ì€ê²Œ ìˆëŠ” ì„¸ì…˜ì´ì—ˆë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ì´ì œ í•´ì•¼í•  ê²ƒì€ TAë‹˜ê³¼ íŒ€ì¥ë‹˜ê³¼ì˜ ë¯¸íŒ…, ê·¸ë¦¬ê³  ë¶€ì¡±í•œ ë¶€ë¶„ì„ ì±„ì›Œë„£ëŠ” í•™ìŠµ ì‹œê°„ì´ê² ìŠµë‹ˆë‹¤. </p>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2021/04/18/AWS-Immersion-DAY/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Airflow Clusterization</title>
      <link>http://tkdguq05.github.io/2021/04/04/airflow-clusterization/</link>
      <guid>http://tkdguq05.github.io/2021/04/04/airflow-clusterization/</guid>
      <pubDate>Sun, 04 Apr 2021 06:23:20 GMT</pubDate>
      <description>
      
        &lt;p&gt;Airflowë¥¼ ë‚˜ëˆ ë´¤ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì´ì œ Autoscalingì„ ê³ë“¤ì¸&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>Airflowë¥¼ ë‚˜ëˆ ë´¤ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì´ì œ Autoscalingì„ ê³ë“¤ì¸</p><a id="more"></a><h1 id="Airflow-Clusterization"><a href="#Airflow-Clusterization" class="headerlink" title="Airflow Clusterization"></a>Airflow Clusterization</h1><h2 id="Airflowë¥¼-ë‚˜ëˆ ë´¤ìŠµë‹ˆë‹¤-ê·¸ëŸ°ë°-ì´ì œ-Autoscalingì„-ê³ë“¤ì¸"><a href="#Airflowë¥¼-ë‚˜ëˆ ë´¤ìŠµë‹ˆë‹¤-ê·¸ëŸ°ë°-ì´ì œ-Autoscalingì„-ê³ë“¤ì¸" class="headerlink" title="Airflowë¥¼ ë‚˜ëˆ ë´¤ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì´ì œ Autoscalingì„ ê³ë“¤ì¸"></a>Airflowë¥¼ ë‚˜ëˆ ë´¤ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì´ì œ Autoscalingì„ ê³ë“¤ì¸</h2><p>Airflowì˜ êµ¬ì„±ìš”ì†Œë“¤ì„ ë‹¤ ìª¼ê°œë³¼ ê²ë‹ˆë‹¤. ì–´ë–»ê²Œ ë‚˜ëˆŒ ê²ƒì´ëƒë©´, í¬ê²Œ Airflow Main, Airflow DB, Airflow Workerì…ë‹ˆë‹¤. Airflow Mainì—ëŠ” ì›¹ ì„œë²„ì™€ ìŠ¤ì¼€ì¥´ëŸ¬ë¥¼ ëŒì•„ê°€ê²Œ ë§Œë“¤ ê²ƒì´ê³ , DBì—ëŠ” MySQLì„ ë„ì›Œ ë†“ì„ ê²ƒì…ë‹ˆë‹¤. WorkerëŠ” ì˜¤í† ìŠ¤ì¼€ì¼ë§ì„ ê±¸ì–´ë‘˜ ê²ƒì´êµ¬ìš”. ê·€ì°®ê²Œ <strong>ì™œ ì´ë ‡ê²Œ í•˜ëƒêµ¬ìš”?</strong></p><p>ê¸°ì¡´ì— AirflowëŠ” í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ ì˜ ëŒì•„ê°€ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ <a href="https://tkdguq05.github.io/2021/02/21/airflow-basic2/#more">Airflow Basic</a> ê¸€ì„ í†µí•´ì„œ ì •ë¦¬í•´ ë†“ê¸°ë„ í–ˆìŠµë‹ˆë‹¤. ë¬¸ì œëŠ” ì²˜ë¦¬í•  DAGì™€ Taskê°€ ë„ˆë¬´ ë§ì•„ì§„ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. Airflowì˜ êµ¬ì„±ìš”ì†Œ ê°ê°ì´ ì–´ë–¤ ì—­í• ì„ í•˜ëŠ”ì§€ ê¶ê¸ˆí•˜ì‹œê±°ë‚˜ ì˜ ê¸°ì–µì´ ì•ˆë‚˜ì‹œëŠ” ë¶„ì€ <a href="https://tkdguq05.github.io/2021/02/21/airflow-basic2/#more">ì´ ê¸€</a>ì„ ì½ì–´ë³´ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤.</p><p>ì²˜ë¦¬í•  ì‘ì—…ì´ ë§ì•„ì§€ë©´ Worker í•˜ë‚˜ë¡œëŠ” ì²˜ë¦¬í•˜ê¸° ë¶€ë‹´ìŠ¤ëŸ¬ì›Œì§‘ë‹ˆë‹¤. ìŠ¤ì¼€ì¥´ëŸ¬ê°€ ë‚´ë ¤ì¤€ ë§ì€ ì‘ì—…ì„ ì²˜ë¦¬í•˜ë‹¤ê°€ ë‹¤ë¥¸ ì‘ì—…ì„ ëª»í•˜ê²Œ í˜„ìƒì´ ìì£¼ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ! ì›Œì»¤ë¥¼ ëŠ˜ë ¤ì¤˜ì•¼ê² ë‹¤ëŠ” ìƒê°ì„ í•œ ê²ƒì…ë‹ˆë‹¤. ì›Œì»¤ì— ì˜¤í† ìŠ¤ì¼€ì¼ë§ì„ ê±¸ì–´ì„œ, ì‘ì—… ë¶€í•˜ê°€ ê±¸ë¦¬ë©´ ì›Œì»¤ë¥¼ ëŠ˜ë ¤ì„œ ì²˜ë¦¬í•˜ê³ , ë¶€í•˜ê°€ ì¤„ì–´ë“¤ë©´ ì›Œì»¤ë¥¼ ì¤„ì´ë ¤ëŠ” ê²ƒì…ë‹ˆë‹¤.<br><img src="https://miro.medium.com/max/2800/1*W0hyXlN4H0x0BNK4NwYPTw.gif" alt="í˜ë“¤ë•Œ ë„ì™€ì¤˜!"></p><hr><p>ì‘ì—… ê³„íšì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p><ol><li>Airflow Main ì„¸íŒ…</li><li>Airflow DB ì„¸íŒ…</li><li>Airflow Worker ê¸°ë³¸ ì´ë¯¸ì§€ ì„¸íŒ…</li><li>Airflow Worker ì„¸íŒ…</li><li>Assemble!</li></ol><hr><p><br></br></p><h2 id="Airflow-Main"><a href="#Airflow-Main" class="headerlink" title="Airflow Main"></a>Airflow Main</h2><p>Airflow Mainì—ëŠ” Webserverì™€ Schedulerë¥¼ êµ¬ì„±í•´ ë†“ì„ ê²ƒì…ë‹ˆë‹¤. Airflow Mainì˜ ê¸°ë³¸ì ì¸ ì„¤ì •ì€ <a href="https://tkdguq05.github.io/2020/12/13/airflow-on-ec2/#more">ì´ ê¸€</a>ì—ì„œì˜ ì„¤ì •ê³¼ ê°™ìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ MySQLì„ ë”°ë¡œ ê°€ì ¸ê°ˆ ê²ƒì´ë‹ˆ MySQLì„¤ì •ë§Œ ë¹¼ë†“ê³  ë”°ë¼í•˜ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë‹¤ë§Œ ì €ëŠ” Airflow 1.10.14 ë²„ì „ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ìµœì‹  2.0ì´ìƒ ë²„ì „ì€ DAGê°€ ì¡°ê¸ˆ ë‹¬ë¼ì ¸ì„œ ìˆ˜ì •ì„ í•´ì¤˜ì•¼ í•˜ê±°ë“ ìš”.<br><br></br></p><h3 id="Airflow-Home"><a href="#Airflow-Home" class="headerlink" title="Airflow Home"></a>Airflow Home</h3><p>ë¨¼ì € ì €ëŠ” AWSí™˜ê²½ì„ ì´ìš©í•´ì„œ êµ¬ì¶•ì„ í•  ê²ƒì´ê¸° ë•Œë¬¸ì— EC2ë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ì£¼ê³ , ìƒˆë¡œ ìƒê¸´ ì¸ìŠ¤í„´ìŠ¤ì— Airflow homeì„ ì¡ì•„ì£¼ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> AIRFLOW_HOME=/home/ec2-user/airflow <span class="comment">#ê¸°ë³¸ì£¼ì†Œ</span></span><br></pre></td></tr></table></figure><p><strong>ì´ HOMEì£¼ì†ŒëŠ” ê½¤ë‚˜ ì¤‘ìš”í•©ë‹ˆë‹¤</strong>. Airflowê°€ ì‹œì‘ë˜ëŠ” ê³³ì´ê¸°ë„ í•˜ê³ , <strong>ì„¤ì • íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ê³³</strong>ì´ê¸°ë„ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.  ì›í•˜ëŠ” ì£¼ì†Œë¡œ ì‘ì„±í•˜ì‹œë˜, Workerì—ë„ ë™ì¼í•œ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ <code>execute_command encountered a CalledProcessError</code> ,<code>Celery command Failed</code> ë¥¼ ë§Œë‚˜ì‹œê²Œ ë  ê²ƒì…ë‹ˆë‹¤. <sup><a href="#footnote_1">1</a></sup></p><p>Airflowì˜ Dagë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ <strong>airflowë¥¼ êµ¬ì„±í•˜ê³  ìˆëŠ” ëª¨ë“  ì„œë²„ì— ë™ì¼í•œ ê²½ë¡œì™€ ì´ë¦„ìœ¼ë¡œ DAGíŒŒì¼ì´ ì¡´ì¬</strong>í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•´ì£¼ì„¸ìš”.<br><br></br></p><h3 id="Redis-ì„¤ì •"><a href="#Redis-ì„¤ì •" class="headerlink" title="Redis ì„¤ì •"></a>Redis ì„¤ì •</h3><p>ë ˆë””ìŠ¤ ì„¤ì •ì€ ë‹¤í–‰íˆ ì €ë²ˆ ê¸€ì— ë‚˜ì™€ ìˆëŠ” ê²ƒê³¼ ë˜‘ê°™ìŠµë‹ˆë‹¤. ê·¸ëŒ€ë¡œ ë”°ë¼í•˜ì‹œë©´ ë©ë‹ˆë‹¤.<br><br></br></p><h3 id="Airflow-ì„¤ì¹˜"><a href="#Airflow-ì„¤ì¹˜" class="headerlink" title="Airflow ì„¤ì¹˜"></a>Airflow ì„¤ì¹˜</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sudo yum update -y</span><br><span class="line"></span><br><span class="line">sudo yum install group <span class="string">"Development tools"</span> -y</span><br><span class="line"></span><br><span class="line">sudo yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel python3-devel.x86_64 cyrus-sasl-devel.x86_64 -y</span><br><span class="line"></span><br><span class="line">sudo yum install libevent-devel -y</span><br><span class="line"></span><br><span class="line">sudo pip3 install apache-airflow==1.10.14</span><br><span class="line"></span><br><span class="line">airflow version <span class="comment">#ë²„ì „ì´ ëœ¬ë‹¤ë©´ ì„±ê³µ!</span></span><br></pre></td></tr></table></figure><p>ì„¤ì¹˜ê°€ ë˜ì—ˆìœ¼ë©´ <code>airflow initdb</code> ,  <code>airflow webserver</code>ë¥¼ ì‚¬ìš©í•´ì„œ airflowê°€ ëœ¨ëŠ”ì§€ í™•ì¸í•´ ë´…ë‹ˆë‹¤.</p><p>ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤êµ¬ìš”? ê·¸ë ‡ë‹¤ë©´ ì•„ë˜ Trouble Shooting ë¶€ë¶„ì„ ì°¸ê³ í•´ë³´ì„¸ìš”. (sqlalchemy version ì¡°ì •) <sup><a href="#footnote_2">2</a></sup>  </p><hr><p><br></br></p><h2 id="MySQL-ì„¤ì •"><a href="#MySQL-ì„¤ì •" class="headerlink" title="MySQL ì„¤ì •"></a>MySQL ì„¤ì •</h2><p>Airflow Main ì„¸íŒ…ì´ ëë‚¬ë‹¤ë©´, DBë¡œ ì‚¬ìš©í•  ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê³  MySQLì„ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤.</p><p>ì´ì „ ê¸€ê³¼ ë‹¬ë¼ì§€ëŠ” ë¶€ë¶„ì´ DB ì„¸íŒ…ì—ì„œ ë°œìƒí•©ë‹ˆë‹¤. mysql 5.7ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ê²ƒ ê¹Œì§€ëŠ” ë™ì¼í•©ë‹ˆë‹¤. </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo wget https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm</span><br><span class="line">sudo yum localinstall mysql57-community-release-el7-11.noarch.rpm </span><br><span class="line">sudo yum install mysql-community-server</span><br><span class="line"></span><br><span class="line"><span class="comment"># ì„¤ì¹˜ëœ ì´í›„</span></span><br><span class="line">sudo service mysqld start</span><br></pre></td></tr></table></figure><p>airflow ì‚¬ìš©ìë¥¼ ì¶”ê°€í•´ë´…ì‹œë‹¤. ë¨¼ì € rootë¡œ ì ‘ì†ì„ í•©ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -u root -p</span><br><span class="line"><span class="comment"># íŒ¨ìŠ¤ì›Œë“œë¥¼ ì…ë ¥</span></span><br><span class="line">Enter Password : <span class="comment">#/var/log/mysqld.logì— ìˆëŠ” ì„ì‹œë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©</span></span><br></pre></td></tr></table></figure><p><strong>ë‹¬ë¼ì§€ëŠ” ë¶€ë¶„ì´ ë°œìƒí•˜ëŠ” ê³³ì´ ì—¬ê¸°ì…ë‹ˆë‹¤.</strong> airflow ì‚¬ìš©ìë¥¼ ìƒì„±í•  ë•Œ ëª¨ë“  ì ‘ì† <code>%</code> ì— ëŒ€í•´ì„œ í—ˆìš©í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ê¸°ì¡´ì—ëŠ” ë‚´ë¶€ ì£¼ì†Œ, <code>localhost</code>ì— ëŒ€í•´ì„œ í—ˆìš©í–ˆìŠµë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ì‚¬ìš©ì ìƒì„±</span></span><br><span class="line">create user <span class="string">'airflow'</span>@<span class="string">'%'</span> identified by <span class="string">'ë¹„ë°€ë²ˆí˜¸'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># DB ê¶Œí•œ ë¶€ì—¬</span></span><br><span class="line">grant all privileges on *.* to <span class="string">'airflow'</span>@<span class="string">'%'</span>;</span><br><span class="line"></span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>DBê°€ ì„¤ì •ë˜ì—ˆìœ¼ë©´ Airflow Mainê³¼ ì—°ê²°ì„ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ DB ì„œë²„ê°€ ì‚¬ìš©í•˜ëŠ” Private IPê°€ ìˆìŠµë‹ˆë‹¤. ì´ ì£¼ì†Œë¥¼ AWSì—ì„œ í™•ì¸í•˜ê³  Airflow Mainì˜ airflow.cfgì— ë„£ì–´ì¤˜ì„œ ì–´ë–¤ DBë¥¼ ë°”ë¼ë³¼ì§€ Airflow Mainì—ê²Œ ì•Œë ¤ì¤˜ì•¼ í•©ë‹ˆë‹¤.</p><p>ê¸°ë³¸ì ì¸ airflow mainì˜ airflow.cfg ì„¤ì •ì€ ì´ë ‡ê²Œ í•´ì¤ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ì‚¬ìš©í•  dag í´ë” ì§€ì •</span></span><br><span class="line"><span class="comment"># subfolder in a code repository. This path must be absolute. ê¼­ ì ˆëŒ€ê²½ë¡œ!</span></span><br><span class="line">dags_folder = /home/ec2-user/airflow/dags <span class="comment">#ì›í•˜ëŠ” ìœ„ì¹˜ì™€ ë””ë ‰í† ë¦¬ë¡œ ì§€ì •</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># executor = SequentialExecutor</span></span><br><span class="line">executor = CeleryExecutor <span class="comment">#ì›í•˜ëŠ” Executor ì„ íƒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sql_alchemy_conn = sqlite:////home/airflow/airflow/airflow.db</span></span><br><span class="line">sql_alchemy_conn =  mysql+pymysql://airflow:@[mysqlì„œë²„PrivateIP]:3306/airflow</span><br><span class="line"></span><br><span class="line"><span class="comment"># catchup_by_default = True</span></span><br><span class="line">catchup_by_default = False</span><br><span class="line"></span><br><span class="line"><span class="comment"># broker_url = sqla+mysql://airflow:airflow@127.0.0.1:3306/airflow</span></span><br><span class="line">broker_url = redis://airflow@[mainì„œë²„PrivateIP]:6379/0</span><br><span class="line"></span><br><span class="line"><span class="comment"># result_backend = db+mysql://airflow:airflow@localhost:3306/airflow</span></span><br><span class="line">result_backend = db+mysql://airflow:ë¹„ë°€ë²ˆí˜¸@[mysqlì„œë²„PrivateIP]:3306/airflow</span><br><span class="line"></span><br><span class="line"><span class="comment"># load_examples = True</span></span><br><span class="line">load_examples = False <span class="comment">#ì˜ˆì‹œë¥¼ ë³´ê³  ì‹¶ë‹¤ë©´ True</span></span><br></pre></td></tr></table></figure><p><code>broker_url</code> , <code>cluster_address</code>ì—ëŠ” Mainì˜ Private IPì£¼ì†Œë¥¼ ë„£ê³ , <code>sql_alchemy_conn</code>, <code>result_backend</code> ì—ëŠ” DBì˜ Private IPì£¼ì†Œë¥¼ ë„£ìŠµë‹ˆë‹¤.</p><p>ì´ë ‡ê²Œ ì„¤ì •í•´ì£¼ê³  ë‹¤ì‹œ í•œë²ˆ <code>airflow initdb</code> ë¥¼ í•´ì£¼ë©´ ìƒˆë¡œ ì‘ì„±í•´ì¤€ ì£¼ì†Œë¡œ DBê²½ë¡œê°€ ì…ë ¥ì´ ë©ë‹ˆë‹¤.</p><p>ì¶”ê°€ë¡œ, <strong>MySQLì„œë²„ì—ë„ Redisë¥¼ ì„¤ì¹˜í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤</strong>. brokerì¸ Redisë¥¼ í†µí•´ schedulerì™€ executorë¥¼ ì—°ê²°í•´ì£¼ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. </p><p><img src="https://d2908q01vomqb2.cloudfront.net/f1f836cb4ea6efb2a0b1b99f41ad8b103eff4b59/2019/04/17/sagemaker-airflow-2.gif" alt="AWS Managed Airflow ì‚¬ì§„ ì°¸ì¡°"></p><p>ìœ„ ê·¸ë¦¼ì—ì„œ ë³´ë“¯ì´ mainì€ webserverì™€ schedulerë¥¼ ë‹´ë‹¹í•˜ê³  MySQL ì„œë²„ëŠ” DBì™€ executorìª½ì„ ë‹´ë‹¹í•˜ê²Œ ë©ë‹ˆë‹¤. executorì— ë³´ë‚¼ ë§¤ê°œê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ë¸Œë¡œì»¤ì¸ Redisë¥¼ ì„¤ì •í•´ì¤ë‹ˆë‹¤.<br><br></br></p><h3 id="RBAC"><a href="#RBAC" class="headerlink" title="RBAC"></a>RBAC</h3><p>webserverë¥¼ ë„ìš°ê³  ì˜ ë˜ëŠ”ì§€ í™•ì¸í•´ë´…ì‹œë‹¤. ì˜ ë‚˜ì˜¤ë©´ ë‹¤í–‰ì…ë‹ˆë‹¤. ê·¸ëŸ°ë° 1.10.10 ì´ìƒ ë²„ì „ìœ¼ë¡œ ì˜¤ë©´ì„œ UIì— ë³€í™”ëœ ë¶€ë¶„ì´ ìˆìŠµë‹ˆë‹¤. ì•„ì£¼ ì¢‹ì€ ê¸°ëŠ¥ì´ë¼ê³  ìƒê°í•˜ëŠ” ê²ƒ ì¤‘ í•˜ë‚˜ì¸ë°, ê·¸ê±´ ì‹œê°„ëŒ€ë¥¼ ë“œë””ì–´ ì„¤ì •í•´ì„œ ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê¸°ì¡´ì—ëŠ” UTCê°€ ê³ ì •ì´ì–´ì„œ +9í•´ì„œ ê³„ì‚°í•˜ëŠ”ê²Œ ì˜ ë³„ë¡œì˜€ê±°ë“ ìš”. </p><p><img src="/images/airflow_cluster/airflow_ui.png" alt="ã…‡"></p><p>ì‚¬ì§„ì—ì„œ ë³´ë‹¤ì‹œí”¼ <strong>KSTë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</strong>. ê·¸ë¦¬ê³  ìœ ì €ë„ ì„¤ì •í•´ì„œ ë³¼ ìˆ˜ ìˆì£ . ì´ê±¸ ì ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” configì—ì„œ í•˜ë‚˜ë¥¼ ë” ìˆ˜ì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.</p><p>ë‹¤ì‹œ airflow.cfgë¡œ ë“¤ì–´ê°€ì„œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use FAB-based webserver with RBAC feature</span></span><br><span class="line">rbac=True</span><br></pre></td></tr></table></figure><p>ì´ë ‡ê²Œ ì„¤ì •í•´ì¤ë‹ˆë‹¤. <strong>RBACëŠ” Role-Based Access Control</strong>ì˜ ì•½ìë¡œì¨, ì•„ê¹Œ ë³´ì…¨ë“¯ì´ ìœ ì €ë³„ë¡œ ì ‘ê·¼ì„ í†µì œí•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ìœ ì €ë„ ë§Œë“¤ì–´ì£¼ì–´ì•¼ê² ì£ .</p><p>Airflow Mainì˜ ì‰˜ë¡œ ë“¤ì–´ê°€ì„œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">airflow create_user -r Admin -u admin -e emailì£¼ì†Œ -f admin -l user -p ë¹„ë°€ë²ˆí˜¸</span><br></pre></td></tr></table></figure><p>ì´ë ‡ê²Œ ì…ë ¥ì„ í•´ì¤ì‹œë‹¤. ê° í”Œë˜ê·¸ì˜ ì˜ë¯¸ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p><ul><li>-r : Role, ì—­í• . Admin, Op, User, Viewer, Public ì´ ì •í•´ì ¸ ìˆê³ , ì»¤ìŠ¤í…€ ë¡¤ ìƒì„± ê°€ëŠ¥. (ìì„¸í•œ ë‚´ìš©ì€ <a href="https://oboki.net/workspace/data-engineering/airflow/rbac/">ì—¬ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì„¸ìš”)</li><li>-u : Userëª…</li><li>-e : Email ì£¼ì†Œ</li><li>-f : First Name</li><li>-l : Last Name</li><li>-p : Password, ë¹„ë°€ë²ˆí˜¸</li></ul><p>ì´ì œ webserverë¥¼ ì—´ì–´ì£¼ê³  ë“¤ì–´ê°€ë©´</p><p><img src="/images/airflow_cluster/lotsofcircles.png" alt="wtf"></p><p>ì•„ë¦„ë‹¤ìš´ ì› ìš´ë™ì„ ë°”ë¼ë³´ë©´ì„œ ë©˜íƒˆì´ í”ë“¤ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ ë‚˜ì˜¤ê²Œ ëœ ê²ƒì€ í•œ ê°€ì§€ë¥¼ ë¹¼ë¨¹ì—ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì•ì„œì„œ ìš°ë¦¬ê°€ ì¤‘ìš”í•œ configë¥¼ ë°”ê¿¨ì„ ë•ŒëŠ” DBì— ì•Œë ¤ì¤€ ê²ƒì„ ê¸°ì–µí•˜ì‹¤ ê²ƒì…ë‹ˆë‹¤. RBACëŠ” ë³´ì•ˆì— ê´€ë ¨ëœ ê²ƒì´ë‹ˆê¹Œ ì¤‘ìš”í•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ DBì—ë„ ë­ê°€ ë°”ë€Œì—ˆëŠ”ì§€ ì•Œë ¤ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">airflow upgradedb</span><br></pre></td></tr></table></figure><p>ì´ ëª…ë ¹ì–´ëŠ” DBë¥¼ ì´ˆê¸°í™” ì‹œí‚¤ì§€ ì•Šê³  ì„¤ì •ê°’ì„ DBì— ì—…ë°ì´íŠ¸ ì‹œì¼œì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì´ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì£¼ë©´?</p><p><img src="/images/airflow_cluster/upgradedb.png" alt="í•´-ê²°!"></p><p><img src="/images/airflow_cluster/airflow_ui.png" alt="UI ë“±ì¥"></p><p>ì§ ! 1.10.14ì˜ UIê°€ ë“±ì¥í–ˆìŠµë‹ˆë‹¤. ì˜¤ë¥¸ìª½ ìƒë‹¨ì˜ ì‹œê°„ ì„¤ì •ì´ ê°€ëŠ¥í•˜ë‹¤ë©´ ì„±ê³µí•˜ì‹  ê²ƒì…ë‹ˆë‹¤.  </p><p><br></br></p><h3 id="Fernet-Key"><a href="#Fernet-Key" class="headerlink" title="Fernet Key"></a>Fernet Key</h3><p>RBACë¥¼ í†µí•´ ë³´ì•ˆì´ ê°•í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í™œì„±í™” ëœ ê²ƒì´ í•˜ë‚˜ ë” ìˆë‹¤ë©´, <code>fernet_key</code> ë¥¼ í†µí•œ encryptionì…ë‹ˆë‹¤. Variableì´ë‚˜ Connectionì„ ì´ìš©í•˜ëŠ” ë¶„ì´ë¼ë©´, DAGë¥¼ ì‹¤í–‰ì‹œì¼°ì„ ë•Œ <code>JSONDecodeError: Expecting value: line 1 column 1</code> ì´ëŸ° ì—ëŸ¬ë¥¼ ë§ˆì£¼í•  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì‹¤ì œ ì—ëŸ¬ê°€ ë‚œ ë¶€ë¶„ì„ ë³´ë©´ Variableì˜ Valueë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¶€ë¶„ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ ì–´ë–¤ Valueë¥¼ ê°€ì ¸ì˜¤ëŠ”ì§€ í™•ì¸í•´ë³´ë©´, â€œg8dgasv90s8fd09x9adxfcxâ€ ê°™ì´ ì•Œ ìˆ˜ ì—†ëŠ” ì•”í˜¸ë¬¸ìœ¼ë¡œ ë˜ì–´ ìˆëŠ” ê²ƒì„ ëª©ê²©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p>â€˜ì•„ ê·¸ë ‡ë‹¤ë©´ encrypt ì˜µì…˜ì„ Falseë¡œ ë°”ê¿”ì•¼ì§€!â€™ë¼ëŠ” ìƒê°ìœ¼ë¡œ mysqlë¡œ ë“¤ì–´ê°€ì„œ variablesë¥¼ ì°¾ì€ ë’¤ì— <code>is_encrypt</code> ë¥¼ ë‹¤ 0ìœ¼ë¡œ ë³€ê²½í•´ë´¤ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ í•´ë„ ì´ë¯¸ Variableì— ë“±ë¡í•  ë•Œì— ì•”í˜¸í™”ëœ ì½”ë“œë¡œ DBì— ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì— keyê°’ìœ¼ë¡œ valueë¥¼ ì¡°íšŒí•´ë„ ë‚˜ì˜¤ëŠ” ê°’ì€ ìœ„ì— ìˆëŠ” ì•Œ ìˆ˜ ì—†ëŠ” ì•”í˜¸ë¬¸ì…ë‹ˆë‹¤. </p><p>ê²°êµ­ì—ëŠ” ì´ê²ƒì„ í•´ë…í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ ì•”í˜¸ë¥¼ í•´ë…í•´ì£¼ëŠ” ì—´ì‡ ê°€ ë°”ë¡œ <code>fernet_key</code> ì…ë‹ˆë‹¤. fernet_keyëŠ” í•œë²ˆ ìƒì„±í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> cryptography.fernet <span class="keyword">import</span> Fernet</span><br><span class="line">fernet_key= Fernet.generate_key()</span><br><span class="line">print(fernet_key.decode())</span><br></pre></td></tr></table></figure><p>ì—¬ê¸°ì„œ ë‚˜ì˜¨ í‚¤ ê°’ì„ ë³µì‚¬í•´ì„œ airflow.cfgì˜ fernet_key ë¶€ë¶„ì— ë„£ì–´ì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ í‚¤ ê°’ì€ ì €ì¥í•´ë†¨ë‹¤ê°€ airflow workerì— ìˆëŠ” airflow.cfgì—ë„ ë™ì¼í•˜ê²Œ ì ìš©ì„ í•´ì¤ë‹ˆë‹¤.  </p><hr><p><br></br></p><h2 id="Airflow-Worker-ê¸°ë³¸-ì´ë¯¸ì§€-ì„¸íŒ…"><a href="#Airflow-Worker-ê¸°ë³¸-ì´ë¯¸ì§€-ì„¸íŒ…" class="headerlink" title="Airflow Worker ê¸°ë³¸ ì´ë¯¸ì§€ ì„¸íŒ…"></a>Airflow Worker ê¸°ë³¸ ì´ë¯¸ì§€ ì„¸íŒ…</h2><p>Airflow Workerë¥¼ ì„¸íŒ…í•´ë³´ê² ìŠµë‹ˆë‹¤. ê·¸ ì „ì— ê¸°ë³¸ ì´ë¯¸ì§€ë¥¼ ì„¤ì •í•´ ì¤„ ê²ƒì…ë‹ˆë‹¤. ë¬¼ë¡  Workerë¥¼ ì«™ ì„¤ì¹˜í•˜ê³  ì„¸íŒ…í•´ì¤€ë‹¤ìŒì— AMIë¥¼ ë§Œë“¤ì–´ì„œ ì˜¤í† ìŠ¤ì¼€ì¼ë§ì„ ì§„í–‰í•´ë„ ë˜ì§€ë§Œ, ë§Œì•½ ì„¤ì •ê°’ì„ ë°”ê¿€ì¼ì´ ìƒê¸´ë‹¤ë©´? ê·¸ë•Œë§ˆë‹¤ AMIë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤. ë‹¹ì—°íˆ AWSê´€ë¦¬ìë‚˜ TAë¶„ê³¼ì˜ ê´€ê³„ê°€ ì¢‹ì§€ ì•Šì•„ì§ˆ ê²ƒì…ë‹ˆë‹¤. </p><p>ì œê°€ ì„ íƒí•œ ë°©ë²•ì€ Dockerì…ë‹ˆë‹¤. Dockerë¥¼ ì´ìš©í•´ì„œ ìœ„ì—ì„œ ì§„í–‰í•œ ì„¸íŒ…ì„ í•œë²ˆì— ì¡ì•„ì¤„ ê²ƒì´ê³ , ì´ ì´ë¯¸ì§€ë¥¼ ì‹œì‘ í…œí”Œë¦¿ìœ¼ë¡œ ì„¤ì •í•  ê²ƒì…ë‹ˆë‹¤. ì„¤ì • ê°’ì„ ë°”ê¿€ ì¼ì´ ìˆë‹¤ë©´ ì´ë¯¸ì§€ê°€ ì €ì¥ëœ ê³³ì— ë“¤ì–´ê°€ì„œ ë³€ê²½í•œ í›„ ë‹¤ì‹œ Pushí•´ì£¼ë©´ ë©ë‹ˆë‹¤. </p><p>ê¸°ë³¸ ì´ë¯¸ì§€ëŠ” Dockerì™€ ê¸°íƒ€ ì‚¬ìš©í•  ëª…ë ¹ì–´ì— ëŒ€í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ëœ ì •ë„ë©´ ë©ë‹ˆë‹¤. ì €ëŠ” Dockerì •ë„ë§Œ ì„¤ì¹˜í–ˆê³  ì´ê²ƒì„ AMIë¡œ ë§Œë“¤ì–´ ì¤¬ìŠµë‹ˆë‹¤. ì´ AMIë¥¼ ì‹œì‘í…œí”Œë¦¿ì— ë„£ì„ ê²ƒì´ê³  ì‹œì‘í…œí”Œë¦¿ì— ìˆëŠ” ê³ ê¸‰ ì„¤ì •ì„ í†µí•´ ì„œë²„ê°€ ì‹œì‘ë˜ë©´ì„œ Docker Imageë¥¼ Run í•´ ì¤„ ìˆ˜ ìˆëŠ” ëª…ë ¹ì–´ë¥¼ ë„£ì–´ì¤„ ê²ƒì…ë‹ˆë‹¤.</p><p><img src="/images/airflow_cluster/docker_ami.png" alt="Airflow%20Clusterization%202f196f07c5a7412285ad666bc5db2e46/docker_ami.png">  </p><p><br></br></p><h3 id="Docker-Airflow-Worker-ì´ë¯¸ì§€-êµ¬ì„±"><a href="#Docker-Airflow-Worker-ì´ë¯¸ì§€-êµ¬ì„±" class="headerlink" title="Docker Airflow Worker ì´ë¯¸ì§€ êµ¬ì„±"></a>Docker Airflow Worker ì´ë¯¸ì§€ êµ¬ì„±</h3><p><strong>ë³¸ê²©ì ìœ¼ë¡œ Worker ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.</strong></p><p>êµ¬ì„±ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p><ul><li>Dockerfile</li><li>files<ul><li>airflow.cfg</li><li>config<ul><li>log_config.py</li></ul></li></ul></li><li>sources<ul><li>airflow.sh</li><li>cron</li><li>hostname_resolver.py</li><li>requirements.txt</li></ul></li></ul><p>ë””ë ‰í† ë¦¬ëª…ì€ ì„ì˜ë¡œ ì •í•´ë†“ì€ ê²ƒì´ê¸° ë•Œë¬¸ì— ë‹¤ë¥´ê²Œ ì„¤ì •í•˜ì…”ë„ ë©ë‹ˆë‹¤. filesë¶€í„° ì„¤ëª…ë“œë¦¬ë©´, airflow.cfgëŠ” ìœ„ì—ì„œ ë³´ì…¨ë˜ ê·¸ ì„¤ì •íŒŒì¼ì…ë‹ˆë‹¤. airflow mainì—ì„œ ì„¤ì •í–ˆë˜ íŒŒì¼ì„ ë³µì‚¬í•´ì„œ ë„£ì–´ì£¼ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤. config í´ë”ì—ëŠ” airflowì˜ logì„¤ì •ê³¼ ê´€ë ¨ëœ íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤.</p><p>sourcesì—ëŠ” airflow.shë¡œ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹ì´ ë‹´ê²¨ ìˆê³ , cronì‘ì—…ì„ ìœ„í•œ cron, ë„ì»¤ ë‚´ë¶€ì—ì„œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ë„ì»¤ì˜ í˜¸ìŠ¤íŠ¸ë¥¼ ì•Œë ¤ì£¼ëŠ” hostname_resolver.py, ê·¸ë¦¬ê³  í•„ìš”í•œ python ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ë¥¼ ìœ„í•œ requirements.txtê°€ ìˆìŠµë‹ˆë‹¤.  </p><p><br></br></p><h4 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu:18.04</span><br><span class="line">RUN apt-get update &amp;&amp; apt-get install -y \</span><br><span class="line">  git \</span><br><span class="line">  cron \</span><br><span class="line">  vim \</span><br><span class="line">  python3-pip \</span><br><span class="line">  python3-dev \</span><br><span class="line">  build-essential \</span><br><span class="line">  libmysqlclient-dev \</span><br><span class="line">  libssl-dev \</span><br><span class="line">  libkrb5-dev \</span><br><span class="line">  libsasl2-dev \</span><br><span class="line">&amp;&amp; rm -rf /var/lib/apt/lists/*</span><br><span class="line"></span><br><span class="line">ADD ./<span class="built_in">source</span>/* /app/</span><br><span class="line">ADD ./files/airflow.cfg /app/</span><br><span class="line">ADD ./files/config/ /data/airflow/config/</span><br><span class="line">ADD ./<span class="built_in">source</span>/hostname_resolver.py /usr/<span class="built_in">local</span>/lib/python3.6/dist-packages/airflow/</span><br><span class="line">RUN chmod 0744 /app/airflow.sh</span><br><span class="line">RUN <span class="built_in">export</span> AIRFLOW__CORE__HOSTNAME_CALLABLE=airflow.hostname_resolver:resolve</span><br><span class="line">RUN <span class="built_in">export</span> AIRFLOW__CORE__FERNET_KEY=***</span><br><span class="line">ADD ./<span class="built_in">source</span>/cron /etc/cron.d/</span><br><span class="line">RUN chmod 0744 /etc/cron.d/cron</span><br><span class="line">RUN crontab /etc/cron.d/cron</span><br><span class="line">RUN touch /var/<span class="built_in">log</span>/cron.log</span><br><span class="line"></span><br><span class="line">WORKDIR /app</span><br><span class="line">RUN mkdir -p /data/airflow/DAGS <span class="comment">#ì œê°€ ë§Œë“  DAG í´ë”</span></span><br><span class="line">RUN git <span class="built_in">clone</span> DAGS <span class="comment">#ì œ githubì— ìˆëŠ” DAGs</span></span><br><span class="line"></span><br><span class="line">RUN pip3 install -r requirements.txt</span><br><span class="line">RUN python3 -m pip install sqlalchemy==1.3.15 <span class="comment">#ì—ëŸ¬ ë°©ì§€</span></span><br><span class="line"><span class="comment">#CMD ["tail","-f","/var/log/cron.log"]</span></span><br><span class="line">CMD ./airflow.sh <span class="variable">$NAME</span></span><br></pre></td></tr></table></figure><p>ê¸°ë³¸ ì„¸íŒ…ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì¢€ ìˆìŠµë‹ˆë‹¤. gitì´ë‚˜ cron, vimë“±ì€ ìì£¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ ì™¸ì— ADD ë¶€ë¶„ì„ ë³´ì‹œë©´ /sourceë¼ë“ ê°€ /filesê°€ ìˆëŠ”ë° ì´ê²ƒì€ ì œê°€ ë¹Œë“œí•˜ê¸° ì „ì— ë§Œë“¤ì–´ ë†“ì€ ë””ë ‰í† ë¦¬ ì…ë‹ˆë‹¤. ì´ ë””ë ‰í† ë¦¬ ì•ˆì— í•„ìš”í•œ íŒŒì¼ë“¤ì„ ë„£ì–´ë†¨ê³ , ë¹Œë“œ í›„ì— ì›í•˜ëŠ” ìœ„ì¹˜ë¡œ ì˜®ê¸°ê³  ì‹¤í–‰í•´ì¤„ ê²ƒì…ë‹ˆë‹¤.</p><p>exportë¡œ í™˜ê²½ ì„¤ì • í•´ì£¼ëŠ” ë¶€ë¶„ì´ ìˆëŠ”ë° ì—¬ê¸°ì— ì›ë˜ëŠ” AIRFLOW_HOME ì„¤ì •ë„ í•´ì¤¬ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ê²ƒì€ docker runí•  ë•Œ ë„£ì–´ì£¼ê¸° ë•Œë¬¸ì— ë¹¼ë†¨ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  fernet keyë¶€ë¶„ì€ ì•„ë˜ì—ì„œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.  </p><p><br></br></p><h4 id="airflow-sh"><a href="#airflow-sh" class="headerlink" title="airflow.sh"></a>airflow.sh</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">export</span> C_FORCE_ROOT=<span class="string">"true"</span></span><br><span class="line">crontab /etc/cron.d/cron</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/airflow initdb</span><br><span class="line">mv /app/airflow.cfg /data/airflow/</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/airflow worker -q <span class="variable">$1</span> &amp;</span><br><span class="line">cron &amp;&amp; tail -f /var/<span class="built_in">log</span>/cron.log</span><br></pre></td></tr></table></figure><p>ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì—ëŠ” Celery ì‘ì—…ì„ ìœ„í•œ <code>C_FORCE_ROOT</code>ê°€ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ root ê¶Œí•œìœ¼ë¡œ ì…€ëŸ¬ë¦¬ë¥¼ ëŒë¦¬ê² ë‹¤ëŠ” í‘œì‹œì´êµ¬ìš”. ê·¸ ì™¸ì—ëŠ” cron ë“±ë¡, db initialize ë“±ì´ ìˆëŠ”ë° worker -qì— $1ì´ ìˆëŠ” ì´ìœ ëŠ” dockerë¥¼ runí•  ë•Œ ì–´ë–¤ í ê°’ìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¬ ê±´ì§€ ì •í•˜ê¸° ìœ„í•´ì„œ ì…ë‹ˆë‹¤. ì›Œì»¤ë¥¼ ì—¬ëŸ¬ ëŒ€ ë‘˜ ìˆ˜ ìˆëŠ”ë° íë¥¼ ë”°ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë©´ ì¢‹ìœ¼ë‹ˆê¹Œìš”.  </p><p><br></br></p><h4 id="cron"><a href="#cron" class="headerlink" title="cron"></a>cron</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* * * * * <span class="built_in">cd</span> /data/airflow/DAGs &amp;&amp; git fetch --all &amp;&amp; git reset --hard origin/master</span><br><span class="line">* * * * * find /data/airflow/logs/* -ctime +7 -<span class="built_in">exec</span> rm -f &#123;&#125; \;</span><br></pre></td></tr></table></figure><p>cron ì‘ì—…ì—ëŠ” ì‚¬ìš©í•  DAGë“¤ì´ ìˆëŠ” git repoë¥¼ ë°›ëŠ” ë¶€ë¶„ê³¼, logê´€ë¦¬í•˜ëŠ” ì½”ë“œê°€ ê°™ì´ ë“¤ì–´ìˆìŠµë‹ˆë‹¤.  </p><p><br></br></p><h4 id="hostname-resolver-py"><a href="#hostname-resolver-py" class="headerlink" title="hostname_resolver.py"></a>hostname_resolver.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">resolve</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> requests.get(<span class="string">'http://169.254.169.254/latest/meta-data/local-ipv4'</span>).text</span><br></pre></td></tr></table></figure><p>hostname_resolver.pyì—ëŠ” awsì˜ ë©”íƒ€ ë°ì´í„°ë¥¼ ì´ìš©í•´ì„œ dockerì˜ hostëª…ì„ ê°€ì ¸ì˜¤ëŠ” ì½”ë“œê°€ ë“¤ì–´ìˆìŠµë‹ˆë‹¤. í˜¹ì‹œ ì›¹ ì„œë²„ì—ì„œ DAG ì‘ì—…ë¡œê·¸ë¥¼ ë³´ë ¤ê³  í•˜ëŠ”ë° ë‚˜ì˜¤ì§€ ì•ŠëŠ”ë‹¤ë©´, ì´ ë¶€ë¶„ì„ ì˜ì‹¬í•´ ë³´ì„¸ìš”.  </p><p><br></br></p><h4 id="requirements-txt"><a href="#requirements-txt" class="headerlink" title="requirements.txt"></a>requirements.txt</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">boto3==<span class="number">1.12</span><span class="number">.0</span></span><br><span class="line">pymongo==<span class="number">3.10</span><span class="number">.1</span></span><br><span class="line">celery==<span class="number">4.4</span><span class="number">.0</span></span><br><span class="line">mysqlclient==<span class="number">1.4</span><span class="number">.6</span></span><br><span class="line">pymysql==<span class="number">0.9</span><span class="number">.3</span></span><br><span class="line">redis==<span class="number">3.4</span><span class="number">.1</span></span><br><span class="line">apache-airflow==<span class="number">1.10</span><span class="number">.14</span></span><br></pre></td></tr></table></figure><p>requirementsì—ëŠ” í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ ë‹´ê²¨ìˆìŠµë‹ˆë‹¤.</p><p>ì´ë ‡ê²Œ ì›Œì»¤ ì´ë¯¸ì§€ë¥¼ êµ¬ì„±í–ˆìœ¼ë©´, ë¹Œë“œë¥¼ ì‹œì‘í•´ë´…ì‹œë‹¤.   </p><p><br></br></p><h3 id="Docker-Build-and-Run"><a href="#Docker-Build-and-Run" class="headerlink" title="Docker Build and Run"></a>Docker Build and Run</h3><p>ë§Œë“  ì´ë¯¸ì§€ë¥¼ AWS ECRì— ì˜¬ë ¤ë³¼ ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œì˜ ì‘ì—…ì„ ìˆ˜í–‰í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.</p><ol><li><p>ì¸ì¦ í† í°ì„ ê²€ìƒ‰í•˜ê³  ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ëŒ€í•´ Docker í´ë¼ì´ì–¸íŠ¸ë¥¼ ì¸ì¦í•©ë‹ˆë‹¤. AWS CLI ì‚¬ìš©:</p><p><code>aws ecr get-login-password --region ap-northeast-2 | docker login --username AWS --password-stdin *******</code></p><p>ì°¸ê³ : AWS CLIë¥¼ ì‚¬ìš©í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ìµœì‹  ë²„ì „ì˜ AWS CLI ë° Dockerê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì‹­ì‹œì˜¤.</p></li><li><p>ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤. ë„ì»¤ íŒŒì¼ì„ ì²˜ìŒë¶€í„° ìƒˆë¡œ ë¹Œë“œí•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ <a href="http://docs.aws.amazon.com/AmazonECS/latest/developerguide/docker-basics.html">ì—¬ê¸°</a>  ì§€ì¹¨ì„ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤. ì´ë¯¸ì§€ë¥¼ ì´ë¯¸ ë¹Œë“œí•œ ê²½ìš°ì—ëŠ” ì´ ë‹¨ê³„ë¥¼ ê±´ë„ˆë›¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><code>docker build -t ì´ë¯¸ì§€ëª… .</code></p></li><li><p>ë¹Œë“œê°€ ì™„ë£Œë˜ë©´ ì´ë¯¸ì§€ì— íƒœê·¸ë¥¼ ì§€ì •í•˜ì—¬ ì´ ë¦¬í¬ì§€í† ë¦¬ì— í‘¸ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><code>docker tag ì´ë¯¸ì§€ëª…:tag ë¦¬í¬ì§€í† ë¦¬ì£¼ì†Œ/ì´ë¯¸ì§€ëª…:tag</code></p></li><li><p>ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ ì´ ì´ë¯¸ì§€ë¥¼ ìƒˆë¡œ ìƒì„±í•œ AWS ë¦¬í¬ì§€í† ë¦¬ë¡œ í‘¸ì‹œí•©ë‹ˆë‹¤.<br><code>docker push ë¦¬í¬ì§€í† ë¦¬ì£¼ì†Œ/ì´ë¯¸ì§€ëª…:tag</code></p></li></ol><p>ìœ„ì— ìˆëŠ” ê²ƒë“¤ì€ ECRì˜ í‘¸ì‹œ ëª…ë ¹ì— ìˆëŠ” ê²ƒë“¤ì´ê¸° ë•Œë¬¸ì— í•´ë‹¹ í˜ì´ì§€ì— ìˆëŠ” ì½”ë“œë¥¼ ë³µì‚¬í•´ì„œ ë„£ìœ¼ì‹œë©´ ë©ë‹ˆë‹¤.</p><p>ë¹Œë“œê°€ ë˜ì—ˆë‹¤ë©´, ì´ë¯¸ì§€ êµ¬ì„±ì€ ëì…ë‹ˆë‹¤. ì´ì œ í•„ìš”í•œ ê²ƒì€ ì‹œì‘ í…œí”Œë¦¿ì„ ë°©ê¸ˆê¹Œì§€ ë§Œë“  ì´ë¯¸ì§€ë¥¼ ì´ìš©í•´ì„œ êµ¬ì„±í•˜ê³ , ì´ê²ƒì„ ì˜¤í† ìŠ¤ì¼€ì¼ë§ ê·¸ë£¹ì— ë„£ì–´ì„œ ì›Œì»¤ë¥¼ ì«™ ë§Œë“¤ì–´ ì£¼ë©´ ë©ë‹ˆë‹¤.  </p><p><br></br></p><h3 id="Start-Template"><a href="#Start-Template" class="headerlink" title="Start Template"></a>Start Template</h3><p>ì‹œì‘ í…œí”Œë¦¿ êµ¬ì„±</p><p><img src="/images/airflow_cluster/start_template.png" alt="ë„ì»¤ ê¸°ë³¸ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê³  ì—¬ê¸°ì— ë„£ì–´ì£¼ê¸°"></p><p>ì‹œì‘ í…œí”Œë¦¿ ì´ë¦„ì€ ì˜ ë„£ì–´ì£¼ì‹œë©´ ë˜ê³ , AMIì—ëŠ” ì•„ê¹Œ êµ¬ì„±í•œ Docker AMIë¥¼ ë„£ì–´ì£¼ë„ë¡ í•©ë‹ˆë‹¤. ì´ ë„ì»¤ AMIë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì¹˜í•˜ê³  ê·¸ ìœ„ì— ë„ì»¤ ì´ë¯¸ì§€ë¥¼ Run í•´ ì¤„ ê²ƒì…ë‹ˆë‹¤.</p><p>ì´ì œ ë§¨ ë°‘ì— ê³ ê¸‰ ì„¸ë¶€ ì •ë³´ë¡œ ë“¤ì–´ì™€ì„œ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤.</p><p><img src="/images/airflow_cluster/advanced_template.png" alt="ì—¬ê¸°ì— docker ëª…ë ¹ì–´ë¥¼ ë„£ì–´ì£¼ì"></p><p>ì‚¬ìš©ì ë°ì´í„°ëŠ” ì´ ì‹œì‘ í…œí”Œë¦¿ì´ ì‹œì‘ë  ë•Œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤. ì—¬ê¸°ì— docker run ëª…ë ¹ì–´ë¥¼ ë„£ì„ ê²ƒì…ë‹ˆë‹¤. </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">su - ubuntu -c <span class="string">"aws ecr get-login-password --region ap-northeast-2 | docker login --username AWS --password-stdin *******;docker run -p 8793:8793 -e AIRFLOW_HOME=/data/airflow -e NAME=main -d ***********/ì‘ì„±í•œì´ë¯¸ì§€ëª…:íƒœê·¸"</span></span><br></pre></td></tr></table></figure><p><strong>shebangì„ ê¼­ ë„£ì–´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.</strong></p><p>shebangì„ ë„£ì§€ ì•Šìœ¼ë©´ ì´ ëª…ë ¹ì–´ë¥¼ ì¸ì‹í•  ìˆ˜ ì—†ì–´ì„œ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤. í•œ ë²ˆ ë” ê°•ì¡°í•©ë‹ˆë‹¤. <strong>shebang ê¼­ ë„£ì–´ì•¼ í•œë‹¤ê³ !</strong>  ë¹¼ë¨¹ì–´ì„œ ì € ì²˜ëŸ¼ ì‚½ì§ˆ ë§ì´ í•˜ì§€ ë§ˆì‹­ì‹œì˜¤. ê·¸ ë’· ë¶€ë¶„ì—ëŠ” su ubuntuê°€ ìˆìŠµë‹ˆë‹¤. ì´í›„ì— ì‹¤í–‰í•  ëª…ë ¹ì–´ëŠ” ubuntuìœ ì €ë¡œ ì‹¤í–‰í•´ì•¼í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ switch userë¥¼ í•´ì£¼ì‹œê³  ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì¤ë‹ˆë‹¤.</p><p>í•˜ë‚˜ì”© ìì„¸íˆ ë³¼ê¹Œìš”?</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aws ecr get-login-password --region ap-northeast-2 | docker login --username AWS --password-stdin *******</span><br></pre></td></tr></table></figure><p>ì´ê²ƒì€ ì•„ê¹Œ ì‚¬ìš©í–ˆë˜ ëª…ë ¹ì–´ë¡œ, ì¸ì¦ í† í°ì„ ê²€ìƒ‰í•˜ê³  ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ëŒ€í•´ Docker í´ë¼ì´ì–¸íŠ¸ë¥¼ ì¸ì¦í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 8793:8793 -e AIRFLOW_HOME=/data/airflow -e NAME=main -d ***********/ì‘ì„±í•œì´ë¯¸ì§€ëª…:íƒœê·¸</span><br></pre></td></tr></table></figure><p>ë„ì»¤ ì´ë¯¸ì§€ë¥¼ runí•˜ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤. 8793í¬íŠ¸ë¥¼ ì—´ì–´ì¤˜ì•¼ ì›Œì»¤ì— ëŒ€í•´ì„œ í†µì‹ ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. <code>-p</code>ë¥¼ ì´ìš©í•´ í¬íŠ¸ë¥¼ ì ì–´ì£¼ì„¸ìš”. <code>-e</code> ëª…ë ¹ì–´ëŠ” ë„ì»¤ì—ì„œ í™˜ê²½ì„¤ì • ê´€ë ¨ëœ ë¶€ë¶„ì…ë‹ˆë‹¤. airflow homeì„ airflow mainê³¼ ê°™ì€ ìœ„ì¹˜ë¡œ ì¡ì•„ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. <code>NAME</code>ì€ worker -q ë‹¤ìŒì— ë“¤ì–´ê°ˆ íì˜ topic ëª…ì…ë‹ˆë‹¤. ì œê°€ ì‘ì„±í•œ DAGë“¤ì€ main í† í”½ì„ ì‚¬ìš©í•˜ë¯€ë¡œ mainìœ¼ë¡œ í–ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ topicì„ ì‚¬ìš©í•˜ì‹œëŠ” ë¶„ì€ ë‹¤ë¥¸ ê±¸ë¡œ ë„£ì–´ì£¼ì„¸ìš”. <code>-d</code>ëŠ” ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰ì‹œí‚¨ë‹¤ëŠ” ì˜ë¯¸ì´ë©°, ê·¸ ë‹¤ìŒì—ëŠ” ECR ì´ë¯¸ì§€ì˜ ì£¼ì†Œë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤.</p><p>ì‹œì‘í…œí”Œë¦¿ ì‘ì„±ì´ ëë‚¬ìŠµë‹ˆë‹¤.   </p><hr><p><br></br></p><h3 id="Assemble"><a href="#Assemble" class="headerlink" title="Assemble!"></a>Assemble!</h3><p>ì´ì œ êµ¬ì„±ì´ ëª¨ë‘ ë˜ì—ˆìŠµë‹ˆë‹¤. airflow mainì— ë“¤ì–´ê°€ì„œ airflow webserverì™€ airflow schedulerë¥¼ ì˜¬ë ¤ì¤ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nohup airflow webserver &amp;</span><br><span class="line">nohup airflow scheduler &amp;</span><br></pre></td></tr></table></figure><p>ì˜¤í† ìŠ¤ì¼€ì¼ë§ ê·¸ë£¹ì—ë„ ì›Œì»¤ë¥¼ ëŠ˜ë ¤ì£¼ê³  ë„ì»¤ ì´ë¯¸ì§€ê°€ ì˜¬ë¼ì˜¬ ë•Œê¹Œì§€ ì¡°ê¸ˆ ê¸°ë‹¤ë ¤ì¤ë‹ˆë‹¤. ë‹¤ ì˜¬ë¼ì˜¤ê³  ë‚˜ë©´ dagë¥¼ ì˜ ëŒë¦¬ëŠ”ì§€ test í•´ ë´…ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">airflow list_tasks [TASKëª…]</span><br><span class="line">airflow [TASKëª…] [DAG id] [Task id] [date]</span><br></pre></td></tr></table></figure><p>ì˜ ëŒì•˜ë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤!</p><p><img src="https://media.makeameme.org/created/yas-yaas.jpg" alt=""></p><hr><p>  <br></br></p><h2 id="Trouble-Shooting"><a href="#Trouble-Shooting" class="headerlink" title="Trouble Shooting"></a>Trouble Shooting</h2><h3 id="1-DAGê°€-ë¬´í•œ-ìƒì„±"><a href="#1-DAGê°€-ë¬´í•œ-ìƒì„±" class="headerlink" title="1. DAGê°€ ë¬´í•œ ìƒì„±?"></a>1. DAGê°€ ë¬´í•œ ìƒì„±?</h3><p><img src="/images/airflow_cluster/catchup.png" alt="ê·¸ë§ŒëŒì•„!"></p><p>ê°“ ë§Œë“  ë”°ëˆë”°ëˆí•œ DAGë¥¼ Oní–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° DAGí•˜ë‚˜ê°€ ëë‚˜ê¸°ë„ ì „ì— ìƒˆë¡œìš´ DAGë“¤ì´ ê³„ì†í•´ì„œ ì‹¤í–‰ë˜ëŠ” í˜„ìƒì„ ëª©ê²©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê²½ìš°ëŠ” <code>catch_up</code> ì˜µì…˜ì´ í™œì„±í™” ë˜ì–´ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. catupupì€ <code>start_date</code>ë¶€í„° í˜„ì¬ ì‹œê°„ê¹Œì§€ ì‹¤í–‰í•˜ì§€ ëª»í•œ DAGë“¤ì„ ì‹¤í–‰í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ì„ì‹œë¡œ ì‹¤í–‰í•˜ëŠ” DAGì•¼ ì‹ ê²½ ì•ˆì¨ë„ í° ë¬¸ì œëŠ” ë˜ì§€ ì•Šê² ì§€ë§Œ, APIê°€ ì—®ì–´ìˆê±°ë‚˜ ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ëŒì–´ì„œ ì‚¬ìš©í•˜ëŠ” DAGë¼ë©´ ë¬¸ì œê°€ ì»¤ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” airflow.cfgì—ì„œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">catchup_by_default = False</span><br></pre></td></tr></table></figure><p>airflow.cfgì—ì„œ <code>catchup_by_default</code> ì˜µì…˜ì„ ì°¾ì•„ì„œ Falseë¡œ ë³€ê²½í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. ê¸°ë³¸ê°’ì€ Trueì…ë‹ˆë‹¤. </p><p>í˜¹ì‹œ ì´ë ‡ê²Œ í–ˆëŠ”ë°ë„ ë¬¸ì œê°€ ê³„ì† ë°œìƒí•œë‹¤ë©´, <strong>ì›¹ ì„œë²„ì™€ ìŠ¤ì¼€ì¥´ëŸ¬ë¥¼ ëª¨ë‘ ì¢…ë£Œí•˜ì‹  í›„ì— ë‹¤ì‹œ ì‹¤í–‰ì‹œì¼œ ìˆ˜ì •í•œ ì˜µì…˜ ê°’ì„ ì ìš©í•´ì£¼ë©´ ë©ë‹ˆë‹¤</strong>.<br><br></br></p><h3 id="2-pip3-permission-denied"><a href="#2-pip3-permission-denied" class="headerlink" title="2. pip3 permission denied"></a>2. pip3 permission denied</h3><p>ì—´ì‹¬íˆ ê¸€ì„ ë”°ë¼ ì¹˜ëŠ”ë° ëœ¬ê¸ˆì—†ì´ <code>pip3 permission denied</code> ì´ëŸ° ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê²½ìš°ì—ëŠ” </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install [library]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ìœ„ ëª…ë ¹ì–´ê°€ ì•ˆëœë‹¤ë©´</span></span><br><span class="line">python3 -m pip install --user [library]</span><br></pre></td></tr></table></figure><p>ìœ„ì™€ ê°™ì€ ëª…ë ¹ì–´ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </p><p><br></br></p><h3 id="3-Command-python-setup-py-egg-info-failed-with-error-code-1"><a href="#3-Command-python-setup-py-egg-info-failed-with-error-code-1" class="headerlink" title="3. Command python setup.py egg_info failed with error code 1"></a>3. Command python <a href="http://setup.py/">setup.py</a> egg_info failed with error code 1</h3><p>ì—­ì‹œë‚˜ ec2-userì—ì„œ ì—´ì‹¬íˆ ì„¤ì¹˜ë¥¼ í•˜ëŠ” ì¤‘ì— ì´ ì—ëŸ¬ë¥¼ ë§ˆì£¼ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì—ëŸ¬ëŠ” pip ì—…ë°ì´íŠ¸ê°€ ë˜ì§€ ì•Šì•„ ë°œìƒí•œ ì—ëŸ¬ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo -H pip install --upgrade --ignore-installed pip setuptools</span><br><span class="line"></span><br><span class="line"><span class="comment"># ë˜ëŠ”</span></span><br><span class="line">python3 -m pip install -U pip</span><br></pre></td></tr></table></figure><p>  <br></br></p><h3 id="4-ModuleNotFoundError-No-module-named-â€˜sqlalchemy-ext-declarative-clsregistryâ€™"><a href="#4-ModuleNotFoundError-No-module-named-â€˜sqlalchemy-ext-declarative-clsregistryâ€™" class="headerlink" title="4. ModuleNotFoundError: No module named â€˜sqlalchemy.ext.declarative.clsregistryâ€™"></a>4. ModuleNotFoundError: No module named â€˜sqlalchemy.ext.declarative.clsregistryâ€™</h3><p> <a name="footnote_2">2</a><br>ìœ„ì˜ ì—ëŸ¬ëŠ” sqlalchemy ë²„ì „ì´ ë§ì§€ ì•Šì•„ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ë²„ì „ì„ ë‚®ì¶°ì£¼ë©´ ë©ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#sqlalchemy ë²„ì „ ë‚®ì¶”ë©´ì„œ í•´ê²°</span></span><br><span class="line">python3 -m pip install sqlalchemy==1.3.15</span><br></pre></td></tr></table></figure><p><br></br></p><hr><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a name="footnote_1">1</a> ì¶œì²˜ : <a href="https://louisdev.tistory.com/26">https://louisdev.tistory.com/26</a></li><li><a href="https://yahwang.github.io/posts/87">https://yahwang.github.io/posts/87</a></li><li><a href="https://potensj.tistory.com/73">https://potensj.tistory.com/73</a></li><li><a href="https://oboki.net/workspace/data-engineering/airflow/rbac/">https://oboki.net/workspace/data-engineering/airflow/rbac/</a></li><li><a href="https://github.com/puckel/docker-airflow/issues/387">https://github.com/puckel/docker-airflow/issues/387</a></li><li><a href="https://airflow.apache.org/docs/apache-airflow/stable/security/secrets/fernet.html#rotating-encryption-keys">https://airflow.apache.org/docs/apache-airflow/stable/security/secrets/fernet.html#rotating-encryption-keys</a></li><li><a href="https://devlog.jwgo.kr/2019/07/05/celery-daemonization/">https://devlog.jwgo.kr/2019/07/05/celery-daemonization/</a></li><li><a href="https://aws.amazon.com/ko/blogs/korea/build-end-to-end-machine-learning-workflows-with-amazon-sagemaker-and-apache-airflow/">https://aws.amazon.com/ko/blogs/korea/build-end-to-end-machine-learning-workflows-with-amazon-sagemaker-and-apache-airflow/</a></li></ul>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2021/04/04/airflow-clusterization/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Aprioriì™€ FP-Growth. ì¶”ì²œ ì‹œìŠ¤í…œ ì‹œë¦¬ì¦ˆ</title>
      <link>http://tkdguq05.github.io/2021/03/07/apriori-FP/</link>
      <guid>http://tkdguq05.github.io/2021/03/07/apriori-FP/</guid>
      <pubDate>Sun, 07 Mar 2021 13:09:05 GMT</pubDate>
      <description>
      
        &lt;p&gt;ì¶”ì²œ ì‹œìŠ¤í…œì— ëŒ€í•´ì„œ, Aprioriì™€ FP-Growth&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>ì¶”ì²œ ì‹œìŠ¤í…œì— ëŒ€í•´ì„œ, Aprioriì™€ FP-Growth</p><a id="more"></a><h2 id="ì¶”ì²œì‹œìŠ¤í…œì€"><a href="#ì¶”ì²œì‹œìŠ¤í…œì€" class="headerlink" title="ì¶”ì²œì‹œìŠ¤í…œì€?"></a>ì¶”ì²œì‹œìŠ¤í…œì€?</h2><p><strong>ì¶”ì²œì‹œìŠ¤í…œì€ ì‚¬ìš©ìì—ê²Œ ìƒí’ˆì„ ì œì•ˆí•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ë„êµ¬ ì´ì ê¸°ìˆ ì…ë‹ˆë‹¤</strong>. ì¶”ì²œ ì‹œìŠ¤í…œì€ ì‚¬ìš©ì ì…ì¥ì—ì„œ ìˆ˜ì‹­ ë§Œê°œì˜ ìƒí’ˆ í’€ì—ì„œ ì›í•˜ëŠ” ê²ƒì„ ë¹ ë¥´ê²Œ ì°¾ì„ ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ í° ì˜ì˜ê°€ ìˆìŠµë‹ˆë‹¤. ì œê°€ ê°€ì¥ ë§ì´ ì ‘í•˜ëŠ” Youtube ì¶”ì²œ ì˜ìƒì„ ìƒê°í•´ë³´ë©´ ì´í•´ê°€ ë¹ ë¦…ë‹ˆë‹¤. ì˜ìƒì€ í•˜ë£¨ì—ë„ ìˆ˜ì–µê°œê°€ ì˜¬ë¼ì˜¬í…Œì§€ë§Œ, ì œê°€ ì›í•˜ëŠ” ê²ƒì´ ì•„ì£¼ ì˜ ì˜¬ë¼ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¶”ì²œ ì‹œìŠ¤í…œì´ ì—†ë‹¤ë©´ ì˜ìƒì„ ì°¾ëŠ”ë° ì‹œê°„ì´ ë„ˆë¬´ ì˜¤ë˜ ê±¸ë¦´ ê²ƒì…ë‹ˆë‹¤. ê¸°ì—… ì…ì¥ì—ì„œë„ ì¶”ì²œì€ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì˜ìƒì„ ì°¾ëŠ”ë° ë„ˆë¬´ ë§ì€ ì‹œê°„ì„ ì†Œë¹„í•œë‹¤ë©´, ì§œì¦ì„ ëŠë‚„ ê²ƒì´ê³  ì´ í”Œë«í¼ì— ëŒ€í•œ ì´ìš©ìœ¨ì´ ë–¨ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤. ë˜í•œ ì»¤ë¨¸ìŠ¤ë¼ë©´ ì ì ˆí•œ ìƒí’ˆì„ ì¶”ì²œì„ í•¨ìœ¼ë¡œì¨ ë§¤ì¶œì„ ê·¹ëŒ€í™” ì‹œí‚¬ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.</p><p>ê·¸ë ‡ë‹¤ë©´ ì¶”ì²œ ì‹œìŠ¤í…œì—ì„œëŠ” ì‚¬ìš©ìê°€ ëˆ„êµ¬ì¸ì§€ íƒ€ê²ŸíŒ… í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•´ì§‘ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì‚¬ìš©ìë¥¼ íƒ€ê²ŸíŒ…í•˜ëŠ” ê²ƒì€ ì‚¬ì—…ë¶€ë‚˜ ë§ˆì¼€íŒ… ì…ì¥ì—ì„œ ì•„ì£¼ ìƒì´í•œ ì ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì¶”ì²œ ëª©ì ë„ ë„ë©”ì¸ ë§ˆë‹¤ ìƒì´í•˜ë¯€ë¡œ ì´ ë¶€ë¶„ì€ ìƒëµí•˜ê³  ë„˜ì–´ê°€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. </p><p><br></br></p><h2 id="ì¶”ì²œ-ì‹œìŠ¤í…œì˜-íë¦„"><a href="#ì¶”ì²œ-ì‹œìŠ¤í…œì˜-íë¦„" class="headerlink" title="ì¶”ì²œ ì‹œìŠ¤í…œì˜ íë¦„"></a>ì¶”ì²œ ì‹œìŠ¤í…œì˜ íë¦„</h2><img src="/images/recommendation_association/flow.png" alt="ì¶”ì²œì‹œìŠ¤í…œì˜ íë¦„" style="zoom:50%;" /><p>ì¶”ì²œ ì‹œìŠ¤í…œì´ ì–´ë–»ê²Œ ë°œì „í•´ ì™”ëŠ”ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. 05ë…„ì— ë¨¼ì € ì‹œì‘ëœ ê²ƒì€ ì—°ê´€ ìƒí’ˆ ì¶”ì²œ, ì¥ë°”êµ¬ë‹ˆ ë¶„ì„ìœ¼ë¡œë„ ì˜ ì•Œë ¤ì§„ Association Ruleê³¼ Apriori ì•Œê³ ë¦¬ì¦˜ì…ë‹ˆë‹¤. ì´ ì•Œê³ ë¦¬ì¦˜ì€ ê°™ì´ êµ¬ë§¤í•˜ëŠ” ìƒí’ˆì˜ íŒ¨í„´ì„ ì˜ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ì•Œê³ ë¦¬ì¦˜ì´ì˜€ìŠµë‹ˆë‹¤. ì´ê²ƒì´ ë°œì „í•˜ëŠ” ì™€ì¤‘ì— í˜‘ì—… í•„í„°ë§ì´ ìƒˆë¡­ê²Œ ë“±ì¥í–ˆê³  ë„·í”Œë¦­ìŠ¤ ì¶”ì²œëŒ€íšŒë¥¼ í†µí•´ ALSë“±ì˜ ê³ ê¸‰ í…Œí¬ë‹‰ì´ ë‚˜ì˜¤ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë˜ ì™€ì¤‘ Aprioriì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ë ¤ëŠ” ì‹œë„ë¡œ ë§Œë“¤ì–´ì§„ FP-Growthê°€ ë“±ì¥í–ˆìŠµë‹ˆë‹¤. 2010ë…„ëŒ€ê°€ ë„˜ì–´ê°€ë©´ì„œ ë§ì€ ë°ì´í„°ë¥¼ ìŒ“ì•„ë‘ê¸° ì‹œì‘í•˜ëŠ” ë¹…ë°ì´í„° ì‹œëŒ€ê°€ ì—´ë¦¬ê²Œ ë˜ì—ˆê³ , ì´ ì—­ì‚¬ì  íë¦„ì— ë§ì¶° Sparkì™€ Sparkë¥¼ ì´ìš©í•œ ë‹¤ì–‘í•œ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ì´ ë“±ì¥í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ì´í›„ì—ëŠ” ë”¥ëŸ¬ë‹ì„ ì´ìš©í•œ ë‹¤ì–‘í•œ ì¶”ì²œì‹œìŠ¤í…œì´ ë‚˜ì™”ê³ , ìµœê·¼ì—ëŠ” ê°œì¸í™” ì¶”ì²œì‹œìŠ¤í…œìœ¼ë¡œ ë„˜ì–´ê°€ê³  ìˆìŠµë‹ˆë‹¤. ì´ íë¦„ì—ì„œ ì˜¤ëŠ˜ì€ ì¶”ì²œì˜ íë¦„ ë§¨ ì•ë‹¨ì¸, ì—°ê´€ìƒí’ˆ ì¶”ì²œ ë¶€ë¶„ì„ ë‹¤ë¤„ë³´ê² ìŠµë‹ˆë‹¤.</p><p><br></br></p><h2 id="Association-Analysis"><a href="#Association-Analysis" class="headerlink" title="Association Analysis"></a>Association Analysis</h2><p>Association AnalysisëŠ” <strong>ë£° ê¸°ë°˜</strong>ì˜ ë¶„ì„ì…ë‹ˆë‹¤. ìƒí’ˆê³¼ ìƒí’ˆ ì‚¬ì´ì— ì–´ë–¤ ì—°ê´€ì´ ìˆëŠ”ì§€ ì•Œì•„ë³´ê¸° ìœ„í•´ ì‹œì‘í•œ ë¶„ì„ì…ë‹ˆë‹¤. ìš°ë¦¬ë§ë¡œ í•´ì„í•˜ë©´ <code>ì—°ê´€ ë¶„ì„</code>ì´ ë˜ê² ìŠµë‹ˆë‹¤. </p><p>ì—¬ê¸°ì„œ ì—°ê´€ì— ëŒ€í•´ì„œ ì •ì˜í•´ë³¼ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. <strong>ì—°ê´€</strong>ì€ ë¬´ì—‡ì¼ê¹Œìš”?</p><p>ì—°ê´€ì€ ì–¼ë§ˆë‚˜ ì¦ì€ ë¹ˆë„ë¡œ êµ¬ë§¤ë¥¼ í•˜ëŠ”ì§€, Aì—ì„œ Bë¥¼ êµ¬ë§¤í•˜ëŠ” íŒ¨í„´ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ ì—°ê´€ ë¶„ì„ì€ í”íˆ ì¥ë°”êµ¬ë‹ˆ ë¶„ì„ì´ë¼ê³ ë„ ë¶ˆë¦¬ë©°, ê°€ì¥ ìœ ëª…í•œ ì˜ˆì‹œëŠ” ì—­ì‹œ ë§¥ì£¼ê³¼ ê¸°ì €ê·€ ë¶„ì„ì¼ ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ ë§¥ì£¼ì™€ ê¸°ì €ê·€ ì˜ˆì‹œì—ì„œ ë³´ë”ë¼ë„, ì´ ë¶„ì„ìœ¼ë¡œ ë‚˜ì˜¨ ê²°ê³¼ê°€ ìƒê´€ ê´€ê³„ê°€ ê·¸ë¦¬ í¬ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. </p><h3 id="Association-Analysis-Metric"><a href="#Association-Analysis-Metric" class="headerlink" title="Association Analysis, Metric"></a>Association Analysis, Metric</h3><p>ì´ ê·œì¹™ì˜ í‰ê°€ ì§€í‘œì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. ì–´ë–¤ ë¶„ì„ì—ëŠ” í•­ìƒ ì§€í‘œê°€ ìˆì–´ì•¼ í‰ê°€ë¥¼ í•  ìˆ˜ ìˆê³ , ì´ í‰ê°€ë¥¼ í†µí•´ì„œ ë¶„ì„ ë°©ë²•ì„ ê°œì„ í• ìˆ˜ë„ ìˆê² ìŠµë‹ˆë‹¤. ì´ ì§€í‘œëŠ” ì„¸ ê°€ì§€ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.</p><ul><li>support, ì§€ì§€ë„<ul><li>Aâ†’Bì— ëŒ€í•´ì„œ ì¡°ê±´ Aì— ëŒ€í•œ í™•ë¥ ì„ ë³´ëŠ” ê²ƒ.</li><li>P(A) ë˜ëŠ” P(A,B)</li><li>$P(A)$</li></ul></li><li>confidence, ì‹ ë¢°ë„<ul><li>Aìƒí’ˆì„ êµ¬ë§¤í–ˆì„ ë•Œ, Bìƒí’ˆì˜ êµ¬ë§¤ê¹Œì§€ ì´ì–´ì§ˆ í™•ë¥ </li><li>$confidence(A\rightarrow B)=\dfrac {P(A,B)}{P(A)}$</li></ul></li><li>lift, í–¥ìƒë„<ul><li>ì‚¬ê±´ì´ ë™ì‹œì— ì–¼ë§ˆë‚˜ ë°œìƒí•˜ëŠ”ì§€ ë¹„ìœ¨, ë…ë¦½ì„±ì„ ì¸¡ì •</li><li>$lift(A\rightarrow B)=\dfrac {P(A,B)}{P(A)\cdot P(B)}$</li></ul></li></ul><p>ì—°ê´€ ë¶„ì„ ê´€ë ¨ ì•Œê³ ë¦¬ì¦˜ì€ í”íˆ ì§€ì§€ë„ë¥¼ ë² ì´ìŠ¤ë¡œ ì¡ê³  ì—°ê´€ë„ë¥¼ ì¸¡ì •í•˜ëŠ”ë°, ì‹ ë¢°ë„ì™€ í–¥ìƒë„ë¥¼ í•­ìƒ ê³ ë ¤í•˜ë©´ì„œ ì¶”ì²œ ë¶„ì„ì„ ì§„í–‰í•´ì•¼ ì¢‹ì€ ê²°ê³¼ê°€ ë‚˜ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><h3 id="Association-Analysis-ì ìš©í•˜ê¸°"><a href="#Association-Analysis-ì ìš©í•˜ê¸°" class="headerlink" title="Association Analysis ì ìš©í•˜ê¸°"></a>Association Analysis ì ìš©í•˜ê¸°</h3><p>ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ ì—°ê´€ ë¶„ì„ì„ ì§„í–‰í•´ ë³´ê² ìŠµë‹ˆë‹¤. ë¨¼ì € ìƒí’ˆì´ 4ê°œ ìˆë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤. ì´ ì—°ê´€ ë¶„ì„ì€ ê°€ëŠ¥í•œ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ì°¾ì•„ë‚´ê³  ì§€ì§€ë„ì™€ ì‹ ë¢°ë„, í–¥ìƒë„ê°€ ë†’ì€ ê·œì¹™ë“¤ì„ ì°¾ì•„ë‚´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ëŠ” ëª‡ ê°€ì§€ê°€ ë ê¹Œìš”? ê³ ë“±í•™êµ ìˆ˜í•™ì‹œê°„ì— ë°°ìš´ ê°œë…ì„ í•œ ë²ˆ ë– ì˜¬ë ¤ ë´…ì‹œë‹¤. </p><ul><li>4ê°œì˜ ìƒí’ˆì¼ ë•Œ ê²½ìš°ì˜ ìˆ˜<ul><li>${}_4 \mathrm{C}_1+ {}_4 \mathrm{C}_2 +{}_4 \mathrm{C}_3 + {}_4 \mathrm{C}_4 = 15$</li></ul></li></ul><p>15ê°œì˜ ê²½ìš°ì˜ ìˆ˜ê°€ ë‚˜ì™”ìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ì—°ê´€ ë¶„ì„ì€ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ê³„ì‚°í•´ì„œ ì§„í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì•„ì´í…œ ìˆ˜ê°€ ë§ì•„ì§„ë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? ê²°ê³¼ê°€ ì˜ˆìƒë˜ê¸° ì‹œì‘í•©ë‹ˆë‹¤. </p><img src="/images/recommendation_association/exponential.png" alt="ê¸‰ê²©í•˜ê²Œ ìƒìŠ¹í•˜ëŠ” ê·œì¹™ ìˆ˜" style="zoom:50%;" /><p>ì•„ì´í…œì´ 100ê°œë¼ë©´ $1.26\times10^{30}$ ìœ¼ë¡œ ì—„ì²­ë‚œ ì½”ìŠ¤íŠ¸ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ì„œ, <strong>Apriroriê°€ ë“±ì¥í–ˆìŠµë‹ˆë‹¤.</strong></p><h2 id="Apriori"><a href="#Apriori" class="headerlink" title="Apriori"></a>Apriori</h2><p>AprioriëŠ” ì•„ì´í…œ ì…‹ì˜ ì¦ê°€ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì¤„ì´ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ê°€ì •ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p><ul><li>ë¹ˆë²ˆí•œ ì•„ì´í…œì…‹ì€ í•˜ìœ„ ì•„ì´í…œ ì…‹ ë˜í•œ ë¹ˆë²ˆí•  ê²ƒ</li><li>ë¹ˆë²ˆí•˜ì§€ ì•Šì€ ì•„ì´í…œì…‹ì€ í•˜ìœ„ ì•„ì´í…œ ì…‹ë„ ë¹ˆë²ˆí•˜ì§€ ì•Šë‹¤. ê³ ë¡œ ë¹¼ë²„ë¦¬ì!</li></ul><p>ê¸€ë¡œëŠ” ì´í•´ê°€ ì˜ ì•ˆë˜ë‹ˆ í° ê·¸ë¦¼ì„ ê°–ê³  ì´í•´ë¥¼ í•œ ë²ˆ í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><img src="/images/recommendation_association/association_rule.png" alt="Apriori Rule" style="zoom:50%;" /><ul><li>ë§¨ ì²˜ìŒì— 4ê°œì˜ ì•„ì´í…œì— ëŒ€í•´ì„œ ë‹¨ì¼ í•­ëª©ì§‘ë‹¨ì„ ë§Œë“¤ì–´ ëƒ…ë‹ˆë‹¤. </li><li>2,3 ì•„ì´í…œ ì…‹ì´ ë¹ˆë²ˆí•˜ì§€ ì•Šë‹¤ê³  í•œë‹¤ë©´(ì„œí¬íŠ¸ê°€ ê°€ì¥ ë‚®ë‹¤ë©´), ê°€ì •ì— ë”°ë¼ ê·¸ í•˜ìœ„ì¸ 023, 123, 0123ë„ ë¹ˆë²ˆí•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤!<ul><li>$Support(2,3) &gt; Support(0,2,3), (1,2,3)$</li></ul></li></ul><p>ì´ëŸ° ì‹ìœ¼ë¡œ ì§„í–‰ì´ ë©ë‹ˆë‹¤. ì´ê²ƒì„ ì •ë¦¬í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p><ul><li>kê°œì˜ ì•„ì´í…œì„ ê°€ì§€ê³  ë‹¨ì¼í•­ëª©ì§‘ë‹¨ ìƒì„±</li><li>ë‹¨ì¼í•­ëª©ì§‘ë‹¨ì—ì„œ ì§€ì§€ë„ ê³„ì‚° í›„ ìµœì†Œ ì§€ì§€ë„ ì´ìƒì˜ í•­ëª©ë§Œ ì„ íƒ</li><li>2ì—ì„œ ì„ íƒëœ í•­ëª© ë§Œì„ ëŒ€ìƒìœ¼ë¡œ 2ê°œí•­ëª©ì§‘ë‹¨ ìƒì„±</li><li>2ê°œí•­ëª©ì§‘ë‹¨ì—ì„œ ìµœì†Œ ì§€ì§€ë„ í˜¹ì€ ì‹ ë¢°ë„ ì´ìƒì˜ í•­ëª©ë§Œ ì„ íƒ</li><li>ìœ„ì˜ ê³¼ì •ì„  kê°œì˜ k-item frequent setì„ ìƒì„±í•  ë•Œê¹Œì§€ ë°˜ë³µ</li></ul><p>ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ ì˜ˆë¥¼ ë“¤ì–´ ì§„í–‰í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><h2 id="Apriori-ì ìš©í•˜ê¸°"><a href="#Apriori-ì ìš©í•˜ê¸°" class="headerlink" title="Apriori ì ìš©í•˜ê¸°"></a>Apriori ì ìš©í•˜ê¸°</h2><img src="/images/recommendation_association/tran_to_sparse.png" alt="Transaction ë°ì´í„°ë¥¼ Sparse Matrixë¡œ" style="zoom:50%;" /><img src="/images/recommendation_association/data.png" alt="Sparse Data" style="zoom:50%;" /><p>ë‹¤ìŒê³¼ ê°™ì´ ìœ„ì— Transaction ë°ì´í„°ê°€ ì£¼ì–´ì¡ŒìŠµë‹ˆë‹¤. ì´ ë°ì´í„°ë¥¼ ì˜ ë¶„ë¦¬í•´ì„œ 0ê³¼ 1ë¡œ ì´ë£¨ì–´ì§€ëŠ” Sparse Matrixë¡œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. ì¬ë£Œê°€ ì¤€ë¹„ë˜ì—ˆë‹¤ë©´, ì•„ê¹Œì™€ ê°™ì´ ë‹¨ì¼ í•­ëª©ì§‘ë‹¨ì„ ìƒì„±í•´ì¤ë‹ˆë‹¤.</p><ul><li><p>ë‹¨ì¼ í•­ëª©ì§‘ë‹¨ ìƒì„± ë° ìµœì†Œ ì§€ì§€ë„ ê³„ì‚°</p><img src="/images/recommendation_association/min_support.png" alt="ë‹¨ì¼í•­ëª©ì§‘ë‹¨ ìƒì„±" style="zoom:50%;" /><p>ìœ„ì˜ ë§¤íŠ¸ë¦­ìŠ¤ë¥¼ ê°–ê³  ê° í•­ëª©ì— ëŒ€í•´ ì„œí¬íŠ¸ë¥¼ ê³„ì‚°í•´ë´…ì‹œë‹¤. ìš°ìœ ëŠ” ì „ì²´ 4ê±´ì˜ ê±°ë˜ë²ˆí˜¸ì—ì„œ 2ê°œë§Œ ìˆìœ¼ë¯€ë¡œ 0.5ê°€ ë˜ê³ , ì–‘ìƒì¶”ë¥¼ 4ê±´ì—ì„œ 3ê°œê°€ ìˆìœ¼ë¯€ë¡œ 0.75ê°€ ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ ë³´ë“¯ì´ ì„œí¬íŠ¸ëŠ” í™•ë¥ ì— ëŒ€í•œ ê°’ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ ìµœì†Œì˜ ì„œí¬íŠ¸ë¥¼ ê°€ì§€ëŠ” ì¥¬ìŠ¤ë¥¼ ê³¼ê°í•˜ê²Œ ì‚­ì œí•´ì¤ë‹ˆë‹¤.<br><br></br></p></li><li><p>2ê°œ í•­ëª©ì§‘ë‹¨ ìƒì„±</p><img src="/images/recommendation_association/min_support2.png" alt="ìµœì†Œ ì„œí¬íŠ¸ ì´ìƒ í•­ëª© ì„ íƒ" style="zoom:50%;" /><p>ìœ„ì—ì„œ ì„ íƒí•œ í•­ëª©ì„ ê¸°ë°˜ìœ¼ë¡œ 2ê°œ í•­ëª© ì§‘ë‹¨ì„ ë§Œë“­ë‹ˆë‹¤. 4ê°œì˜ í•­ëª©ì„ ê°€ì§€ê³  2ê°œì”© ë¶™ì—¬ì£¼ëŠ” ì§‘í•©ì„ êµ¬ì„±í•˜ë©´ ë©ë‹ˆë‹¤. ì¡°í•©ì„ ì´ìš©í•˜ë©´ ${}_4 \mathrm{C}_2=6$ 6ê°œì˜ ì§‘ë‹¨ì´ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤. ì´ ì—­ì‹œ ì„œí¬íŠ¸ë¥¼ ê³„ì‚°í•´ì£¼ê³  ìµœì†Œ ì„œí¬íŠ¸ë¥¼ ê°€ì§„ ì§‘ë‹¨ì„ ì§€ì›Œì¤ë‹ˆë‹¤. </p><img src="/images/recommendation_association/summary.png" alt="ì •ë¦¬ë¥¼ í•˜ë©´?!" style="zoom:50%;" /><p>ì´ê²ƒì„ ì •ë¦¬í•´ì£¼ë©´ ìœ„ì™€ ê°™ì´ ì§„í–‰ë©ë‹ˆë‹¤. ìƒê°ë³´ë‹¤ ë§ì€ ì—°ì‚°ì´ ì¤„ì–´ë“  ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ê¹Œì§€ Supportë¥¼ ë°”íƒ•ìœ¼ë¡œ ì•Œê³ ë¦¬ì¦˜ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. confidenceì™€ liftë„ í™œìš©í•´ì„œ ì§„í–‰í•  ìˆ˜ ìˆê³ , ë‹¤ë¥¸ ì§€í‘œë“¤ë„ ì˜ í™•ì¸í•´ì•¼ í•œë‹¤ëŠ” ì ì„ ê¼­ ì•Œì•„ ë‘ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤.</p></li></ul><h2 id="Aprioriì˜-ì¥-ë‹¨ì "><a href="#Aprioriì˜-ì¥-ë‹¨ì " class="headerlink" title="Aprioriì˜ ì¥ ë‹¨ì "></a>Aprioriì˜ ì¥ ë‹¨ì </h2><p>ì´ ì•Œê³ ë¦¬ì¦˜ì˜ ì¥ ë‹¨ì ì€ ëª…í™•í•©ë‹ˆë‹¤. ì¥ì ì€ ì¼ë‹¨ ë„ˆë¬´ ì‰½ìŠµë‹ˆë‹¤. <strong>ì›ë¦¬ê°€ ê°„ë‹¨í•´ì„œ</strong> ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆê³  ì´ ì˜ë¯¸ë¥¼ ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ìœ ì˜í•œ ì—°ê´€ì„±ì„ ê°–ëŠ” êµ¬ë§¤íŒ¨í„´ì„ ë‹¤ì–‘í•˜ê²Œ ì°¾ì•„ì£¼ëŠ” ì¥ì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. </p><p>ë‹¤ë§Œ, ë‹¨ì ì€ ë°ì´í„°ê°€ ì»¤ì§ˆ ë•Œ ë°œìƒí•©ë‹ˆë‹¤. ë°ì´í„°ê°€ í¬ë‹¤ë©´ ì†ë„ê°€ ëŠë¦¬ê³  ì—°ì‚°ëŸ‰ì´ ê·¸ë˜ë„ ë˜ ë§ì•„ì§‘ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì‹¤ì œ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ë„ˆë¬´ ë§ì€ ì—°ê´€ìƒí’ˆë“¤ì´ ë‚˜íƒ€ë‚˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì¥ì ì—ì„œë„ ë³´ì´ë“¯ì´ ìƒí’ˆë“¤ì˜ <strong>ìœ ì˜í•œ ì—°ê´€ì„±</strong>, ì¦‰ ì—°ê´€ ìƒí’ˆë“¤ì´ ìƒê´€ê´€ê³„ëŠ” ì˜ë¯¸í•˜ì§€ë§Œ <strong>ê·¸ê²ƒì´ ì¸ê³¼ë¥¼ ì˜ë¯¸í•˜ì§„ ì•ŠìŠµë‹ˆë‹¤.</strong> ê²°ê³¼ë§Œì„ ë³¸ë‹¤ë©´ ì–´ë–¤ ê²ƒì´ ì›ì¸ì¸ì§€ íŒŒì•…í•˜ê¸° í˜ë“­ë‹ˆë‹¤. ì¹˜í‚¨ê³¼ ì¹˜í‚¨ë¬´ë¥¼ ì˜ˆë¥¼ ë“¤ì–´ë³´ë©´, ì´ ë‘˜ì€ ì¥ë°”êµ¬ë‹ˆì— ê°™ì´ ë‹´ê¸°ëŠ” íŒ¨í„´ì´ êµ‰ì¥íˆ ë§ì„ ê²ƒì…ë‹ˆë‹¤. ì„œí¬íŠ¸ê°€ ë†’ê¸° ë•Œë¬¸ì— ì¶”ì²œ ì…‹ìœ¼ë¡œ ë§ì´ ë“±ì¥í•  ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ê²°ê³¼ë§Œì„ ë³´ê³  ì¹˜í‚¨ë¬´ë¥¼ ìƒ€ê¸° ë•Œë¬¸ì— ì¹˜í‚¨ì„ êµ¬ë§¤í•œ ê²ƒì¸ì§€, ì¹˜í‚¨ ë•Œë¬¸ì— ì¹˜í‚¨ë¬´ë¥¼ ì‚° ê²ƒì¸ì§€ ì•Œê¸°ëŠ” í˜ë“­ë‹ˆë‹¤. ìš°ë¦¬ì˜ ê²½í—˜ì— ì˜í•œ ì§€ì‹ìœ¼ë¡œ ë‹¹ì—°íˆ ì¹˜í‚¨ì´ ì›ì¸ì´ë¼ëŠ” ê²ƒì„ ë‹¨ë²ˆì— ì•Œ ìˆ˜ëŠ” ìˆì§€ë§Œ, ë³µì¡í•œ íŒ¨í„´ì´ ë‚˜ì˜¤ë©´ íŒë‹¨í•˜ê¸° ì‰½ì§€ ì•ŠìŠµë‹ˆë‹¤. </p><h2 id="FP-Growth-Frequent-Pattern"><a href="#FP-Growth-Frequent-Pattern" class="headerlink" title="FP-Growth(Frequent Pattern)"></a>FP-Growth(Frequent Pattern)</h2><p>FP-GrowthëŠ” ë°ì´í„°ê°€ ì ì  ë§ì´ ìŒ“ì´ê¸° ì‹œì‘í•˜ë©´ì„œ Aprioriì˜ ì—°ì‚° ì†ë„ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ ë“±ì¥í–ˆìŠµë‹ˆë‹¤. ì´ ì—°ê´€ ê·œì¹™ì„ ì–´ë–»ê²Œ íš¨ê³¼ì ìœ¼ë¡œ ë¹ ë¥´ê²Œ ë§Œë“¤ ìˆ˜ ìˆì—ˆì„ê¹Œìš”? ì½”ë”© ì•Œê³ ë¦¬ì¦˜ì„ ë°°ìš°ë©´ ë§ì´ ë“±ì¥í•˜ëŠ” ê°œë…ì´ ìˆìŠµë‹ˆë‹¤. <code>Tree</code> ì…ë‹ˆë‹¤.</p><h3 id="í•µì‹¬-ì•„ì´ë””ì–´-ì—°ê´€-ê·œì¹™ì„-íŠ¸ë¦¬ë¡œ-ë§Œë“¤ì–´-ë‹¨ì ì„-ê°œì„ í•´ë³´ì"><a href="#í•µì‹¬-ì•„ì´ë””ì–´-ì—°ê´€-ê·œì¹™ì„-íŠ¸ë¦¬ë¡œ-ë§Œë“¤ì–´-ë‹¨ì ì„-ê°œì„ í•´ë³´ì" class="headerlink" title="í•µì‹¬ ì•„ì´ë””ì–´ : ì—°ê´€ ê·œì¹™ì„ íŠ¸ë¦¬ë¡œ ë§Œë“¤ì–´ ë‹¨ì ì„ ê°œì„ í•´ë³´ì!"></a>í•µì‹¬ ì•„ì´ë””ì–´ : ì—°ê´€ ê·œì¹™ì„ íŠ¸ë¦¬ë¡œ ë§Œë“¤ì–´ ë‹¨ì ì„ ê°œì„ í•´ë³´ì!</h3><p>FP-Growthë„ ê¸°ë³¸ì ì¸ ì„±ì§ˆì€ Apriorië¥¼ ë”°ë¼ê°‘ë‹ˆë‹¤. ë”°ë¼ì„œ ê¸°ë³¸ì ì¸ ì„¤ì •ì€ Aprioriì™€ ê±°ì˜ ê°™ìŠµë‹ˆë‹¤. Tree êµ¬ì¡°ë¥¼ í™œìš©í–ˆë‹¤ëŠ” ì ë§Œ ë‹¤ë¥´ë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•Œê³ ë¦¬ì¦˜ì„ ì ìš©í•˜ëŠ” ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p><ul><li><p>ëª¨ë“  ê±°ë˜ë¥¼ í™•ì¸í•´ ê° ì•„ì´í…œë§ˆë‹¤ì˜ ì„œí¬íŠ¸ë¥¼ ê³„ì‚°í•˜ê³  ìµœì†Œ ì§€ì§€ë„ ì´ìƒì˜ ì•„ì´í…œë§Œ ì„ íƒ</p></li><li><p>ëª¨ë“  ê±°ë˜ì—ì„œ ë¹ˆë„ê°€ ë†’ì€ ì•„ì´í…œ ìˆœì„œëŒ€ë¡œ ìˆœì„œë¥¼ ì •ë ¬(ì—¬ê¸°ì„œ ë¶€í„° ë‹¬ë¼ì§)</p></li><li><p>ë¶€ëª¨ ë…¸ë“œë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ê±°ë˜ë¥¼ ìì‹ë…¸ë“œë¡œ ì¶”ê°€í•´ì£¼ë©´ì„œ treeë¥¼ ìƒì„±</p></li><li><p>ìƒˆë¡œìš´ ì•„ì´í…œì´ ë‚˜ì˜¬ ê²½ìš°ì—ëŠ” ë¶€ëª¨ë…¸ë“œë¶€í„° ì‹œì‘í•˜ê³ , ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ê¸°ì¡´ì˜ ë…¸ë“œì—ì„œ í™•ì¥</p></li><li><p>ìœ„ì˜ ê³¼ì •ì„ ëª¨ë“  ê±°ë˜ì— ëŒ€í•´ ë°˜ë³µí•˜ì—¬ FP Treeë¥¼ ë§Œë“¤ê³  ìµœì†Œ ì§€ì§€ë„ ì´ìƒì˜ íŒ¨í„´ë§Œì„ ì¶”ì¶œ</p></li></ul><p>ì, ì´ì œ ì•„ê¹Œì˜ ë°ì´í„°ë¥¼ ê°–ê³  FP-Growthë¥¼ ì ìš©í•´ë´…ì‹œë‹¤.</p><h3 id="FP-Growth-ì ìš©í•˜ê¸°"><a href="#FP-Growth-ì ìš©í•˜ê¸°" class="headerlink" title="FP-Growth ì ìš©í•˜ê¸°"></a>FP-Growth ì ìš©í•˜ê¸°</h3><img src="/images/recommendation_association/data.png" alt="Data" style="zoom:50%;" /><p>ë°ì´í„°ëŠ” ë˜‘ê°™ì´ ì¤€ë¹„í•´ ë†“ì•˜ìŠµë‹ˆë‹¤.</p><ul><li><p>ì£¼ìŠ¤ëŠ” ë˜‘ê°™ì´ ì‚­ì œ</p><img src="/images/recommendation_association/fp-growth.png" alt="ì£¼ìŠ¤ ë°ì´í„°ëŠ” ì‚­ì œ" style="zoom:50%;" /><p>ì£¼ìŠ¤ë¥¼ ì‚­ì œí•˜ê³  ì •ë¦¬ë¥¼ í•œë²ˆ í•´ì¤ë‹ˆë‹¤.</p></li><li><p>íŠ¸ë¦¬ í˜•ì„±</p><img src="/images/recommendation_association/sorted_data.png" alt="ì •ë ¬ëœ ë°ì´í„°" style="zoom:50%;" /><img src="/images/recommendation_association/fp-growth2.png" alt="FP-Tree ê·¸ë¦¬ê¸° 1" style="zoom:50%;" /><p>íŠ¸ë¦¬ë¥¼ ë§Œë“œëŠ” ê³¼ì •ì€ ìƒê°ë³´ë‹¤ ê°„ë‹¨í•©ë‹ˆë‹¤. ë¨¼ì € Root ë…¸ë“œë¥¼ ë§Œë“¤ì–´ì£¼ê³ , ê°€ì¥ ë¹ˆë„ê°€ ë†’ì€ ìˆœìœ¼ë¡œ ë…¸ë“œ ì˜†ì— ë¶™ì—¬ì¤ë‹ˆë‹¤. ì—¬ê¸°ì—ì„œëŠ” ê¸°ì €ê·€ì™€ ì–‘ìƒì¶”ë¡œ ë…¸ë“œë¥¼ êµ¬ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤. ê±°ë˜ë²ˆí˜¸ 0ì˜ ì•„ì´í…œëŒ€ë¡œ ê¸°ì €ê·€ ì˜†ì— ìš°ìœ  ë…¸ë“œë¥¼ ë¶™ì—¬ì£¼ê³ , ì–‘ìƒì¶”ì—ë„ ê¸°ì €ê·€ì™€ ë§¥ì£¼, ìš°ìœ ë¥¼ ë¶™ì—¬ì¤ë‹ˆë‹¤. ê±°ë˜ë²ˆí˜¸ë¥¼ ë”°ë¼ê°€ë©´ì„œ ê°™ì€ ì•„ì´í…œì´ ë‚˜ì˜¨ë‹¤ë©´, ê·¸ë¦¼ê³¼ ê°™ì´ ì•„ì´í…œ ì˜†ì— ìˆ«ìë¥¼ +1 ì‹œì¼œì¤ë‹ˆë‹¤. </p><img src="/images/recommendation_association/fp-growth3.png" alt="FP-Tree ê·¸ë¦¬ê¸° 2" style="zoom:50%;" /></li></ul><ul><li><p>ì—°ê´€ ê·œì¹™ ì°¾ê¸°, ì§€ì§€ë„ ë‚®ì€ ìˆœì„œ ë¶€í„° ì¡°ê±´ë¶€ íŒ¨í„´ì„ ìƒì„± (ìš°ìœ ë¶€í„° ì‹œì‘)</p><img src="/images/recommendation_association/conditional1.png" alt="ì¡°ê±´ë¶€ íŒ¨í„´ 1" style="zoom:50%;" /><p>ì´ì œ ì„œí¬íŠ¸ê°€ ë‚®ì€ ìˆœì„œë¶€í„° ì¡°ê±´ë¶€ íŒ¨í„´ì„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. ìš°ìœ ì˜ ì„œí¬íŠ¸ê°€ ê°€ì¥ ë‚®ìœ¼ë¯€ë¡œ ìš°ìœ ê°€ ë¶™ì–´ìˆëŠ” ë…¸ë“œë¥¼ ë”°ë¼ê°€ì„œ  ì¡°ê±´ë¶€ íŒ¨í„´ì„ íŒŒì•…í•´ì¤ë‹ˆë‹¤.</p><img src="/images/recommendation_association/conditional2.png" alt="ì¡°ê±´ë¶€ íŒ¨í„´ 2" style="zoom:50%;" /><p>ì´ëŸ°ì‹ìœ¼ë¡œ ì¡°ê±´ë¶€ íŒ¨í„´ì„ ë‹¤ íŒŒì•…í–ˆë‹¤ë©´, ì–´ë–¤ ì•„ì´í…œì´ ë“¤ì–´ì™”ì„ ë•Œ íŠ¸ë¦¬ë¥¼ í†µí•´ì„œ ì¶”ì²œ ì•„ì´í…œì„ ì „ë‹¬í•  ìˆ˜ ìˆê²Œë©ë‹ˆë‹¤. ìœ„ì˜ ì¡°ê±´ë¶€ íŒ¨í„´ í‘œë¥¼ ë³´ê³ , ë§¥ì£¼ë¥¼ êµ¬ë§¤í•œ ê³ ê°ì´ ë“±ì¥í•œ ê²½ìš°ë¥¼ ìƒê°í•´ë³´ê² ìŠµë‹ˆë‹¤. ë§¥ì£¼ê°€ ë“¤ì–´ì˜¨ ê³ ê°ì—ê²ŒëŠ” ê¸°ì €ê·€ë¥¼ êµ¬ë§¤í•œ ê²½ìš°ì™€ ì–‘ìƒì¶”ë¥¼ êµ¬ë§¤í•œ ê²½ìš°ë¡œ ë‚˜ë‰˜ê²Œ ë©ë‹ˆë‹¤. ì–‘ìƒì¶”ë¥¼ êµ¬ë§¤í•œ ê²½ìš°ëŠ” ê±°ê¸°ì„œ ë” ì§„í–‰ì´ ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ëì´ë‚˜ê³ , ê¸°ì €ê·€ë¥¼ êµ¬ë§¤í–ˆë‹¤ë©´ ë” ê¹Šê²Œ ë“¤ì–´ê°€ ì–‘ìƒì¶”ê¹Œì§€ êµ¬ë§¤í•œ íŒ¨í„´ì„ ì•Œ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. Treeë¥¼ íƒ€ê³  ì§„í–‰ì´ ëœë‹¤ëŠ” ê²ƒì´ ëŠê»´ì§€ì‹œë‚˜ìš”? <strong>Treeêµ¬ì¡°ë¼ëŠ” ì ì´ FP-Growthì˜ ê°€ì¥ í° íŠ¹ì§•ì…ë‹ˆë‹¤.</strong></p></li></ul><h3 id="FP-Growth-ì¥-ë‹¨ì "><a href="#FP-Growth-ì¥-ë‹¨ì " class="headerlink" title="FP-Growth ì¥ ë‹¨ì "></a>FP-Growth ì¥ ë‹¨ì </h3><p>ì¥ì ì€ ì—­ì‹œ Treeêµ¬ì¡°ì´ê¸° ë•Œë¬¸ì— Apriorië³´ë‹¤ í›¨ì”¬ <strong>ë¹ ë¥´ë©°</strong>, DBì—ì„œ ìŠ¤ìº”í•˜ëŠ” íšŸìˆ˜ë„ ì¤„ì–´ë“¤ê²Œ ë©ë‹ˆë‹¤. Aprioriì™€ ë¹„êµí•˜ë©´, AprioriëŠ” ìµœì†Œ í•œ ë²ˆì˜ DBìŠ¤ìº”ì—ì„œë¶€í„° ê°€ì¥ ê¸´ íŠ¸ëœì­ì…˜ì˜ ì•„ì´í…œ ì…‹ì„ ë’¤ì ¸ì•¼ í•  ê°€ëŠ¥ì„±ì´ ìˆëŠ” ë°˜ë©´, FP-GrowthëŠ” ì²«ë²ˆì§¸ ìŠ¤ìº”ìœ¼ë¡œ ë‹¨ì¼ í•­ëª©ì§‘ë‹¨ì„ ë§Œë“¤ê³ , ë‘ ë²ˆì§¸ ìŠ¤ìº”ìœ¼ë¡œ Treeêµ¬ì¡°ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤. ì™„ì„±í•œ FP-Treeë¥¼ ì´ìš©í•´ì„œ ë¶„ì„í•˜ë©´ ë˜ë‹ˆê¹Œ, <strong>ë”± 2ë²ˆë§Œ ìŠ¤ìº”í•˜ë©´ ë©ë‹ˆë‹¤</strong>. í›„ë³´ Itemsetì„ ìƒì„±í•  í•„ìš”ì—†ì´, Treeë§Œ êµ¬ì„±í•˜ë©´ ëì¸ ê²ƒì…ë‹ˆë‹¤. </p><p>ë‹¨ì ì€ <strong>ì•„ì§ë„ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì…‹</strong>ì—ì„œ ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ì´ˆê¸° ì•Œê³ ë¦¬ì¦˜ì´ë¼ ê·¸ëŸ° ì ì´ ìˆì§€ë§Œ ì´ í•œê³„ ë•Œë¬¸ì— ë‹¤ì–‘í•œ ì‹œë„ë“¤ì´ ì œì•ˆë˜ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ Aprioriì— ë¹„í•´ ì„¤ê³„í•˜ê¸° ì–´ë µê³ , ì„œí¬íŠ¸ì˜ ê³„ì‚°ì€ ë¬´ì¡°ê±´ FP-Treeê°€ ë§Œë“¤ì–´ì ¸ì•¼ ê°€ëŠ¥í•˜ë‹¤ëŠ” ë‹¨ì ì´ ì¡´ì¬í•©ë‹ˆë‹¤. </p><p><br></br></p><hr><h3 id="ì—°ê´€-ë¶„ì„-ì•Œê³ ë¦¬ì¦˜ì˜-í•œê³„"><a href="#ì—°ê´€-ë¶„ì„-ì•Œê³ ë¦¬ì¦˜ì˜-í•œê³„" class="headerlink" title="ì—°ê´€ ë¶„ì„ ì•Œê³ ë¦¬ì¦˜ì˜ í•œê³„"></a>ì—°ê´€ ë¶„ì„ ì•Œê³ ë¦¬ì¦˜ì˜ í•œê³„</h3><p>ë§ˆì§€ë§‰ìœ¼ë¡œ ì´ ì•Œê³ ë¦¬ì¦˜ë“¤ì˜ í•œê³„ì— ëŒ€í•´ì„œ ì§€ì í•´ë³´ë©´ì„œ ê¸€ì„ ë§ˆë¬´ë¦¬ í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤. ê¸€ì„ ì­‰ ì½ë‹¤ë³´ë©´, ìµœì†Œ ì„œí¬íŠ¸ì— ëŒ€í•œ ê°œë…ì´ ìì£¼ ë“±ì¥í•©ë‹ˆë‹¤. ìµœì†Œ ì„œí¬íŠ¸ëŠ” ì•„ì´í…œì´ ë§ì•„ì§€ê²Œ ë˜ë©´ì„œ ì„¤ê³„ìê°€ ì§ì ‘ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì•„ì´í…œ ì…‹ì„ ì–¼ë§ˆë‚˜ ë½‘ì•„ë‚¼ì§€, ì–¼ë§ˆë‚˜ ìƒê´€ê´€ê³„ê°€ ê´œì°®ì€ì§€ì— ë”°ë¼ ì„œí¬íŠ¸ ê°’ì„ ì„¤ì •í•´ì£¼ì–´ì•¼ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ, <strong>ìµœì†Œ ì§€ì§€ë„ë¥¼ ì„ ì •</strong>í•˜ëŠ” ì •ë‹µì€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê³„ì‚° ê³µì‹ì€ ì—†ê³  ì—¬ëŸ¬ ì§€í‘œë“¤ì„ ì¡°í•©í•´ì„œ ë¶„ì„í•˜ë©´ì„œ ìµœì ì˜ ê°’ì„ ì§€ì •í•˜ê³¤ í•©ë‹ˆë‹¤. ê°€ì¥ í° í•œê³„ì ìœ¼ë¡œ, ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ìµœì  ì„œí¬íŠ¸ ê°’ì´ ë§¤ë²ˆ ë°”ë€Œë¯€ë¡œ ê³„ì‚°í•˜ëŠ” ê³µì‹ì´ í•„ìš”í•œë°, ì‚¬ì‹¤ìƒ ë§Œë“¤ê¸°ëŠ” ë¶ˆê°€í•´ì„œ ì„œë¹„ìŠ¤ì— ì˜ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ ë§ì€ íŒ¨í„´ë“¤ì„ ë³´ì—¬ì£¼ëŠ” ì¥ì ì´ ìˆê¸° ë•Œë¬¸ì— ë² ì´ìŠ¤ë¼ì¸ìœ¼ë¡œ ì‚¬ìš©í•´ì„œ EDAí•˜ëŠ” ì‹ìœ¼ë¡œ ë§ì´ í™œìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. </p><p>ë˜í•œ <strong>ì¸ê³¼ë¥¼ ì•Œê¸° ì–´ë µë‹¤ëŠ” í•œê³„</strong>ê°€ ë°œê²¬ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ ì›ì¸ê³¼ ê²°ê³¼ë¥¼ í™•ì‹¤í•˜ê²Œ ë¶„ì„í•˜ê³  ì‹¶ë‹¤ëŠ” ì•„ì´ë””ì–´ê°€ ë“±ì¥í•˜ë©´ì„œ Casual Inferenceë¼ëŠ” ì—°êµ¬ë¶„ì•¼ê°€ ìì—°ìŠ¤ëŸ½ê²Œ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤. ì¸ê³¼ ì¶”ë¡ ì— ê´€ì‹¬ìˆëŠ” ë¶„ë“¤ì€ Causual Inference í‚¤ì›Œë“œë¡œ ì°¾ì•„ë³´ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤. </p><p>ê·¸ë¦¬ê³  <strong>ë©”ëª¨ë¦¬ì™€ ì‹œê°„ì„ ë„ˆë¬´ ë§ì´ ì†Œë¹„</strong>í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ê¸° ë•Œë¬¸ì—, ì¦‰, ê°€ì„±ë¹„ê°€ ì˜ ë‚˜ì˜¤ì§€ ì•Šì•„ ì‚¬ìš©í•˜ê¸° í˜ë“­ë‹ˆë‹¤. ìµœê·¼ì´ì•¼ Sparkë¥¼ í†µí•´ì„œ ëŒ€ìš©ëŸ‰ ì²˜ë¦¬ë„ ê°€ëŠ¥í•´ì¡Œê¸´ í•˜ì§€ë§Œ, êµ³ì´ í° ë¹„ìš©ì„ ë“¤ì´ë©´ì„œê¹Œì§€ ì—°ê´€ë¶„ì„ì„ í•˜ë ¤ëŠ” ì‹œë„ëŠ” ë§ì´ ë³´ì´ì§€ ì•ŠëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ìœ„ì—ì„œ ì§€ì í•œëŒ€ë¡œ ì§€í‘œë¥¼ ì§ì ‘ ì§€ì •í•´ì¤˜ì•¼í•˜ëŠ” ë¬¸ì œì™€ ë”ë¶ˆì–´ ì„œë¹„ìŠ¤ì— ì˜ í™œìš©ë˜ì§€ ì•ŠëŠ” í° ì´ìœ  ì¤‘ì— í•˜ë‚˜ì…ë‹ˆë‹¤. </p><p>ì´ëŸ° í•œê³„ë“¤ ë•Œë¬¸ì— <strong>Collaborative Filtering</strong> ê³„ì—´ ì•Œê³ ë¦¬ì¦˜ì´ ë¶€ìƒí•˜ê¸° ì‹œì‘í–ˆê³ , ëª©ì ì— ë”°ë¼ user basedì¶”ì²œ, item based ì¶”ì²œì„ ìƒì„±í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. CFì˜ í•œê³„ì™€ ë” ì¢‹ì€ ì„±ëŠ¥ì„ ìœ„í•´ì„œ ë”¥ëŸ¬ë‹ì„ í™œìš©í•´ íŒ¨í„´ì„ ì¸ì‹ì‹œí‚¤ê³ ì í•˜ì˜€ê³ , ìµœê·¼ì—ëŠ” ê°œì¸í™” ì¶”ì²œê¹Œì§€ ë°œì „í•´ì˜¤ê³  ìˆëŠ” íë¦„ì…ë‹ˆë‹¤. </p><hr><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul><li>T-Academy : <a href="https://tacademy.skplanet.com/live/player/onlineLectureDetail.action?seq=194">https://tacademy.skplanet.com/live/player/onlineLectureDetail.action?seq=194</a></li><li>ratsgoâ€™s blog ì—°ê´€ê·œì¹™ : <a href="https://ratsgo.github.io/machine%20learning/2017/04/08/apriori/">https://ratsgo.github.io/machine learning/2017/04/08/apriori/</a></li><li>ì‹œê°„ì—¬í–‰ì ë¸”ë¡œê·¸ : <a href="http://openuiz.blogspot.com/2018/11/fp-growth-algorithm-frequent-pattern.html">http://openuiz.blogspot.com/2018/11/fp-growth-algorithm-frequent-pattern.html</a></li><li>ë–¡ì¶˜ë‹˜ ë¸”ë¡œê·¸ : <a href="https://blog.naver.com/sindong14/220661064114">https://blog.naver.com/sindong14/220661064114</a></li></ul>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2021/03/07/apriori-FP/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Airflow Basic. ë‘ ë²ˆì§¸</title>
      <link>http://tkdguq05.github.io/2021/02/21/airflow-basic2/</link>
      <guid>http://tkdguq05.github.io/2021/02/21/airflow-basic2/</guid>
      <pubDate>Sun, 21 Feb 2021 06:52:24 GMT</pubDate>
      <description>
      
        &lt;p&gt;Airflow êµ¬ì¡° íŒŒì•…í•˜ê¸°, ì‹¤ìˆ˜ ì¤„ì´ê¸°&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>Airflow êµ¬ì¡° íŒŒì•…í•˜ê¸°, ì‹¤ìˆ˜ ì¤„ì´ê¸°</p><a id="more"></a><h1 id="ê¸€ì—-ë“¤ì–´ê°€ê¸°-ì „ì—â€¦"><a href="#ê¸€ì—-ë“¤ì–´ê°€ê¸°-ì „ì—â€¦" class="headerlink" title="ê¸€ì— ë“¤ì–´ê°€ê¸° ì „ì—â€¦"></a>ê¸€ì— ë“¤ì–´ê°€ê¸° ì „ì—â€¦</h1><p>Airflowì˜ êµ¬ì¡°ì— ëŒ€í•´ì„œ ë“¤ì–´ê°€ê¸° ì „ì—, Airflowì˜ ì»¨ì…‰ì— ëŒ€í•´ì„œ ê°„ëµí•˜ê²Œ ì„¤ëª…í•œ ê¸€ì´ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ì¸ ê°œë…ì— ëŒ€í•´ì„œ ë¨¼ì € ì•Œê³  ì‹¶ìœ¼ì‹  ë¶„ì€ <a href="https://tkdguq05.github.io/2020/03/14/airflow-start/#more">Airflow Basic</a>ì„ ì½ì–´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤. ê°„ë‹¨í•˜ê²Œ ì»¨ì…‰ì„ ì´í•´í•œ ë’¤ì— ì´ ê¸€ì„ ì½ìœ¼ì‹œë©´ ë”ìš± ì¢‹ìŠµë‹ˆë‹¤.</p><br></br><h2 id="Airflow-êµ¬ì„±ìš”ì†Œ"><a href="#Airflow-êµ¬ì„±ìš”ì†Œ" class="headerlink" title="Airflow êµ¬ì„±ìš”ì†Œ"></a>Airflow êµ¬ì„±ìš”ì†Œ</h2><p>Airflowì˜ êµ¬ì„±ìš”ì†ŒëŠ” í¬ê²Œ 3ê°œì…ë‹ˆë‹¤. Airflow Webserver, Scheduler ê·¸ë¦¬ê³  Worker ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ Airflowë¥¼ ì„¤ì¹˜í•˜ì…¨ë‹¤ë©´, <code>airflow webserver</code>, <code>airflow scheduler</code>, <code>airflow worker</code> ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤. ì„¸ ëª…ë ¹ì–´ë¥¼ ë‹¤ ì…ë ¥í–ˆë‹¤ë©´, airflowë¥¼ ë‹¤ ë„ì› ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš´ì˜í•˜ê³  ìˆëŠ” Airflow ì„œë²„ì—ì„œë„ ì´ìƒì´ ìˆìœ¼ë©´ ì²´í¬í•˜ëŠ” ê²ƒì´ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œ ì„¸ ê°œì˜ êµ¬ì„±ìš”ì†Œì…ë‹ˆë‹¤. ë¨¼ì € Airflowì˜ êµ¬ì„±ìš”ì†Œì— ëŒ€í•œ í° ê·¸ë¦¼ì„ ë³´ê³  ê° êµ¬ì„±ìš”ì†Œë“¤ì— ëŒ€í•´ì„œ ì„¤ëª…í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><img src="/images/airflow_basic2/airflow_arc.png" alt="Airflow Architecture" style="zoom:50%;" /><br></br><h3 id="Airflow-Scheduler"><a href="#Airflow-Scheduler" class="headerlink" title="Airflow Scheduler"></a>Airflow Scheduler</h3><p>Airflowì˜ ìŠ¤ì¼€ì¥´ëŸ¬ëŠ” ë§ ê·¸ëŒ€ë¡œ Airflowì˜ ì‘ì—…ë“¤ì„ ìŠ¤ì¼€ì¥´ë§ í•´ì¤ë‹ˆë‹¤. DAGë“¤ì„ íŒŒì‹±í•´ì„œ ìŠ¤ì¼€ì¥´ëœ ì‘ì—…ë“¤ì˜ ì‘ì—… ê°„ê²©ì„ í™•ì¸í•˜ê³  ì‹¤ì œë¡œ ì‘ì—… ëª…ë ¹ì„ ì›Œì»¤ì— ì „ë‹¬í•©ë‹ˆë‹¤. ë˜í•œ DAGì— ê±¸ë ¤ìˆëŠ” ì˜ì¡´ì„±ì„ í™•ì¸í•˜ê³  ê±¸ë ¤ìˆë‹¤ë©´, ì‹¤í–‰ íì— ë”í•´ì¤ë‹ˆë‹¤. ì´ì™€ê°™ì´ ìŠ¤ì¼€ì¥´ëŸ¬ëŠ” Airflowì˜ ì‹¬ì¥ê³¼ ê°™ì€ ì—­í• ì„ ìˆ˜í–‰í•˜ê³  DAGì™€ ì§ì ‘ì ìœ¼ë¡œ ë¶™ì–´ìˆìŠµë‹ˆë‹¤. ë¶™ì–´ì•¼ í•˜ëŠ” DAGì˜ ìœ„ì¹˜ëŠ” airflow.cfg íŒŒì¼ì—ì„œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. airflow.cfgëŠ” airflowì— ëŒ€í•œ ì„¤ì •ë“¤ì´ ëª¨ì—¬ì ¸ ìˆëŠ” íŒŒì¼ì…ë‹ˆë‹¤.</p><img src="/images/airflow_basic2/airflow_dag_path.png" alt="Airflow Dagì˜ ê²½ë¡œ" style="zoom:50%;" /><p>í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ ëŒì•„ê°€ëŠ” ì‹±ê¸€êµ¬ì¡°ì˜ Airflowë¼ë©´ ì´ ì„¤ì •ì—ì„œ ë”±íˆ ì¡°ì •í•  ê²ƒì€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë§Œ mysqlì— ì ‘ì†í• ë•Œ ì‚¬ìš©í•˜ëŠ” userëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë„£ì–´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ì‹±ê¸€êµ¬ì¡°ê°€ ì•„ë‹ˆë¼ë©´(ì›Œì»¤ì™€ ìŠ¤ì¼€ì¥´ëŸ¬ê°€ ë¶„ë¦¬ë˜ì–´ ìˆë‹¤ë©´) ìŠ¤ì¼€ì¥´ëŸ¬ì˜ ipì£¼ì†Œë„ ë„£ì–´ì¤ë‹ˆë‹¤. configurationì—ì„œ <code>result_backend</code>ì™€ <code>sql_alchemy_conn</code>ì„ ì°¾ì•„ì„œ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤. Airflowì˜ mysql ì„¤ì •ì´ ê¶ê¸ˆí•˜ì‹  ë¶„ë“¤ì€ <a href="https://tkdguq05.github.io/2020/12/13/airflow-on-ec2/">Airflow EC2ì— êµ¬ì¶•í•˜ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤.</p><img src="/images/airflow_basic2/airflow_mysql_path1.png" alt="result_backendë¥¼ ìˆ˜ì •í•´ì£¼ì" style="zoom:50%;" /><img src="/images/airflow_basic2/airflow_mysql_path2.png" alt="sql_alchemy_connì„ ìˆ˜ì •í•˜ì" style="zoom:50%;" /><br></br><h3 id="Airflow-Worker"><a href="#Airflow-Worker" class="headerlink" title="Airflow Worker"></a>Airflow Worker</h3><p>Airflow ì›Œì»¤ëŠ” ìŠ¤ì¼€ì¥´ëŸ¬ì—ì„œ í• ë‹¹í•´ë†“ì€ ì‘ì—…ë“¤ì„ DBì—ì„œ ê°–ê³ ì™€ì„œ ì‹¤ì œë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤. ì‘ì—…ë“¤ì€ DAGë¥¼ êµ¬ì„±í• ë•Œ queueë¥¼ ì´ìš©í•´ì„œ ì–´ë–¤ ì›Œì»¤ì—ì„œ ìˆ˜í–‰í• ì§€ ê²°ì •ë˜ê³  ì›Œì»¤ëŠ” íë¥¼ ì„¤ì •í•´ì„œ ê¸°ë™í•©ë‹ˆë‹¤. ì›Œì»¤ëŠ” <code>airflow worker -q main</code> ê³¼ ê°™ì´ íë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. DAGì—ì„œ queueë¥¼ ì•„ë˜ì™€ ê°™ì´ ì§€ì •í•´ë†“ìœ¼ë©´ ìŠ¤ì¼€ì¥´ëŸ¬ëŠ” í•´ë‹¹ íì— ë§ê²Œ ì‘ì—…ì„ ë‚˜ëˆ ë†“ê³  ì›Œì»¤ëŠ” ìì‹ ì˜ íì— ë§ëŠ” ì‘ì—…ì„ ì°¾ì•„ì„œ ê°–ê³ ì˜µë‹ˆë‹¤. ì°¾ì€ íë¥¼ ì›Œì»¤ì—ì„œ ì‹¤í–‰í•˜ê³ , ì‹¤í–‰í›„ ë‚˜ì˜¨ ë¡œê·¸ë“¤ì„ íšŒìˆ˜í•©ë‹ˆë‹¤. ì´ ë¡œê·¸ë“¤ì€ Metastore(Airflow DB)ì— ì €ì¥ë˜ê³  ì €ì¥ëœ ë¡œê·¸ë“¤ì€ ì›¹ ì„œë²„ë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">t1 = BashOperator(</span><br><span class="line">    task_id=<span class="string">'t1'</span>,</span><br><span class="line">    bash_command=<span class="string">"sleep 1"</span>,</span><br><span class="line">    queue=<span class="string">"main"</span>,</span><br><span class="line">    dag=dag)</span><br><span class="line"></span><br><span class="line">t2 = BashOperator(</span><br><span class="line">    task_id=<span class="string">'t2'</span>,</span><br><span class="line">    bash_command=<span class="string">"sleep 1"</span>,</span><br><span class="line">    queue=<span class="string">"main2"</span>,</span><br><span class="line">    dag=dag)</span><br><span class="line"></span><br><span class="line">t3 = BashOperator(</span><br><span class="line">    task_id=<span class="string">'t3'</span>,</span><br><span class="line">    bash_command=<span class="string">"sleep 1"</span>,</span><br><span class="line">    queue=<span class="string">"main3"</span>,</span><br><span class="line">    dag=dag)</span><br></pre></td></tr></table></figure><p><strong>ì›Œì»¤ê°€ íë¥¼ ì°¾ì•„ ê°€ì ¸ì˜¤ëŠ” êµ¬ì¡°ê°€ ì¢€ íŠ¹ì´í•©ë‹ˆë‹¤</strong>. ì¼ë°˜ì ìœ¼ë¡œ ìƒê°í•˜ê¸°ì—ëŠ” ìŠ¤ì¼€ì¥´ëŸ¬ê°€ ì›Œì»¤ì— ì‘ì—…ì„ ë³´ë‚´ì¤„ ê²ƒ ê°™ì€ë°, ê·¸ë ‡ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ íë¥¼ ê°€ì ¸ì˜¤ëŠ” êµ¬ì¡° ë¼ëŠ” íŠ¹ì„± ë•Œë¬¸ì— Airflowë¥¼ ì‹±ê¸€êµ¬ì¡°ì—ì„œ ì›Œì»¤ì™€ DB, ìŠ¤ì¼€ì¥´ëŸ¬ë¡œ ë‚˜ëˆ„ëŠ” êµ¬ì¡°ë¡œ ë³€ê²½í• ë•Œ, ë³´ì•ˆê·¸ë£¹ ì„¤ì •ì—ì„œ ìŠ¤ì¼€ì¥´ëŸ¬ì˜ ì¸ë°”ìš´ë“œ í¬íŠ¸ë§Œ ì—´ì–´ì£¼ê²Œ ë©ë‹ˆë‹¤. ìŠ¤ì¼€ì¥´ëŸ¬ì˜ ì¸ë°”ìš´ë“œ í¬íŠ¸ë§Œ ì—´ì–´ì£¼ê³ , ì›Œì»¤ì˜ airflow.cfgë¡œ ë“¤ì–´ê°€ì„œ ì–´ë–¤ metastoreì—ì„œ ì‘ì—…ì„ í• ë‹¹ë°›ì„ì§€ ì£¼ì†Œë¥¼ ì ì–´ì£¼ë©´ ëì…ë‹ˆë‹¤. ì‚¬ì‹¤ìƒ ìŠ¤ì¼€ì¥´ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ì˜ airflow.cfgë§Œ ê°€ì ¸ì™€ì„œ ê·¸ëŒ€ë¡œ ë¶™ì—¬ì£¼ë©´ ì•„ì£¼ ì‰½ê²Œ ì„¤ì •ì´ ëë‚©ë‹ˆë‹¤.</p><br></br><h3 id="Airflow-Webserver"><a href="#Airflow-Webserver" class="headerlink" title="Airflow Webserver"></a>Airflow Webserver</h3><p>ì›¹ ì„œë²„ëŠ” Airflowì˜ Metastore ì €ì¥ëœ ë¡œê·¸ë¥¼ ë³´ì—¬ì£¼ê±°ë‚˜ ìŠ¤ì¼€ì¥´ëŸ¬ì— ì˜í•´ íŒŒì‹±ëœ DAGë“¤ì„ ì‹œê°í™”í•´ì„œ ì œê³µí•©ë‹ˆë‹¤. ì´ UIë¥¼ í†µí•´ DAGë“¤ì´ ëŒì•„ê°€ëŠ” ìƒí™©ê³¼ ê²°ê³¼ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><img src="/images/airflow_basic2/airflow_web.png" alt="Airflow ì›¹ ì„œë²„" style="zoom:50%;" /><p>Dagë¥¼ ë§Œë“  í›„ì— ìŠ¤ì¼€ì¥´ëŸ¬ê°€ Dagí´ë”ì˜ ìœ„ì¹˜ë¥¼ ì°¾ìœ¼ë©´ ì—¬ê¸°ì— ìˆëŠ” Dagë¥¼ íŒŒì‹±í•´ì„œ ì›¹ìœ¼ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤. ê°€ì¥ ì™¼ìª½ì— Onì´ë¼ê³  ë˜ì–´ ìˆëŠ” ë¶€ë¶„ì´ ìˆëŠ”ë°, ë§¨ ì²˜ìŒì—ëŠ” Offë¡œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì„ Onìœ¼ë¡œ ë°”ê¿”ì£¼ê³ , í˜„ì¬ ì‹œê°„ì´ Dagì— ì„¤ì •ëœ <code>start_date</code> ë³´ë‹¤ ë‚˜ì¤‘ ì‹œê°„ì´ë¼ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ì—…ì„ ì‹¤í–‰í•˜ê³ , ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì‘ì—…ì„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. </p><br></br><h3 id="ì£¼ì˜í•´ì•¼-í• -ì "><a href="#ì£¼ì˜í•´ì•¼-í• -ì " class="headerlink" title="ì£¼ì˜í•´ì•¼ í•  ì "></a>ì£¼ì˜í•´ì•¼ í•  ì </h3><ol><li><p>Timezone, - UTC, KST</p></li><li><p>dag_name</p></li><li><p>ë³‘ë ¬ì‘ì—… ì„¤ì •</p></li></ol><p>Airflow Basicì— ìˆëŠ” ë‚´ìš©ë“¤ì„ ì¢…í•©í•˜ë©´ ê°„ë‹¨í•œ DagëŠ” ì‘ì„±í•´ì„œ íŒŒì´í”„ë¼ì¸ì„ ë§Œë“¤ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ì—¬ê¸°ì„œë¶€í„°ëŠ” ì‘ì—…í•˜ë©´ì„œ ì‹¤ìˆ˜ê°€ ì¦ì•˜ë˜ ë¶€ë¶„ì— ëŒ€í•´ì„œ ë‹¤ë¤„ë³´ë ¤ê³  í•©ë‹ˆë‹¤. </p><p>ì²« ë²ˆì§¸ëŠ” ì‹œê°„ëŒ€ ì„¤ì •ì…ë‹ˆë‹¤. ì´ ê¸€ì„ ë³´ê³  ê³„ì‹œëŠ” ëŒ€ë¶€ë¶„ì˜ ë¶„ë“¤ì€ KSTì‹œê°„ëŒ€ë¥¼ ì‚¬ìš©í•˜ì‹œëŠ” ë¶„ë“¤ì¼ ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ AirflowëŠ” í•œêµ­ì¸ì´ ë§Œë“  ê²ƒì´ê¸° ì•„ë‹ˆê¸° ë•Œë¬¸ì—, ëª¨ë“  ì‚¬ëŒë“¤ì´ ë‹¤ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì‹œê°„ëŒ€ë¥¼ UTCë¡œ ì„¤ì •í•´ë‘ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ, ì‘ì—…í•˜ëŠ” ì‹œê°„ëŒ€ì™€ Webserverì—ì„œ ë³´ì—¬ì§€ëŠ” ì‹œê°„ëŒ€ëŠ” UTCë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ìœ„ UIì—ì„œë„ Last Runì´ ë³´ì´ëŠ”ë°, ì´ê²ƒì€ UTCì‹œê°„ëŒ€ë¥¼ ì ìš©í•´ì„œ ë‚˜ì˜¤ëŠ” ì‹œê°„ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ, ë§Œì•½ì— Airflowë¥¼ AWSìœ„ì— ì˜¬ë ¤ì„œ ì‚¬ìš©í•˜ê³  cron ìŠ¤ì¼€ì¥´ì„ ì¡ì•„ì„œ ì‹¤í–‰í•œë‹¤ë©´, ì´ cronìŠ¤ì¼€ì¥´ì€ KSTë¥¼ ì ìš©ë°›ìŠµë‹ˆë‹¤. </p><img src="/images/airflow_basic2/schedule_interval.png" alt="schedule_interval" style="zoom:50%;" /><p>ìœ„ì˜ ì‚¬ì§„ì—ì„œ ë³´ë“ ì´ schedule_intervalì—ëŠ” cron ìŠ¤ì¼€ì¥´ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤. ì‘ì„±ëœ ìŠ¤ì¼€ì¥´ì„ ê·¸ëŒ€ë¡œ ì½ìœ¼ë©´ AM 01:30ë¶„ì— ëŒì•„ê°€ê²Œ ë©ë‹ˆë‹¤. ì§€ê¸ˆì€ ê¸€ë¡œ ì„¤ëª…ë˜ì–´ ìˆì–´ì„œ â€˜ì´ê²Œ ì™œ í—·ê°ˆë¦¬ì§€â€™ ë¼ê³  ìƒê°í•˜ì‹¤ ìˆ˜ë„ ìˆê² ì§€ë§Œ, Last Runì´ë‚˜ Airflowì˜ Tree Viewë¥¼ ë³´ë©´ì„œ ì‘ì—… ìˆ˜í–‰ ì‹œê°„ì„ í™•ì¸í•˜ë‹¤ ë³´ë©´ ìŠ¤ì¼€ì¥´ ì¸í„°ë²Œì— UCTë¡œ ì‘ì„±í•˜ëŠ” í° ì‹¤ìˆ˜ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¼ë¡  ì´ê²ƒì€ ê°œì¸ì˜ ê²½í—˜ì— ì˜í•œ ê²½ê³ ì…ë‹ˆë‹¤. ì‹œê°„ì„ ì˜ í™•ì¸í•˜ëŠ” ìŠµê´€ì„ ë“¤ì…ì‹œë‹¤.</p><blockquote><p>Airflow 1.10.10 ë²„ì „ ë¶€í„°ëŠ” UIì—ì„œ Timezoneì„ ì„ íƒí•  ìˆ˜ ìˆë‹¤ê³  í•©ë‹ˆë‹¤. </p><p><a href="https://github.com/apache/airflow/pull/8046">https://github.com/apache/airflow/pull/8046</a></p></blockquote><p>ë‘ ë²ˆì§¸ëŠ” dag_nameì…ë‹ˆë‹¤. Dagë¥¼ ë§Œë“¤ê³  ì˜ ëŒì•„ê°€ë©´ ë³´í†µ Dagë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì„œ êµ¬ì„±í•˜ê¸° ë³´ë‹¤ëŠ”, ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ê³  ìì˜í•œ ë¶€ë¶„ë§Œì„ ìˆ˜ì •í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì €ë„ ê·¸ë ‡ìŠµë‹ˆë‹¤. ì´ëŸ´ ê²½ìš°ì— ë‹¤ë¥¸ ìì˜í•œ, ì¤‘ìš”í•œ ë¡œì§ê³¼ ê´€ë ¨ëœ ë¶€ë¶„ë“¤ì€ ìˆ˜ì •ì„ ì˜ í•˜ëŠ”ë°, dag_nameì„ ë°”ê¿”ë†“ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ë˜ë©´, Webserverì—ì„œ Graph viewë¥¼ ë³¼ ë•Œ, Dagê°€ ìƒˆë¡œê³ ì¹¨ í• ë•Œë§ˆë‹¤ ë³€ê²½ë˜ëŠ” ê¸°ì´í•œ í˜„ìƒì„ ëª©ê²©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¶„ëª…íˆ ë³€ê²½ì´ ëœ ê²ƒì„ Codeì—ì„œ í™•ì¸ì„ í–ˆëŠ”ë°, ì‹¤ì œë¡œ Graph Viewì— ë‚˜ì˜¤ëŠ” ê²ƒì€ ì´ì „ ì½”ë“œì…ë‹ˆë‹¤. ìƒˆë¡œ ê³ ì¹¨ì„ í•˜ë©´ ë˜ ìˆ˜ì •ëœ ì½”ë“œë¡œ ë³´ì…ë‹ˆë‹¤. ì´ê²ƒì€ ë§Œë“¤ì–´ì§„ dagíŒŒì¼ëª…ì€ ë‹¤ë¥´ì§€ë§Œ dag_nameì´ ê°™ì•„ì„œ ì›¹ ì„œë²„ê°€ ê°™ì€ dag_nameì„ í˜¸ì¶œí•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. í”íˆ dagíŒŒì¼ëª…ìœ¼ë¡œ Airflow ì›¹ ì„œë²„ê°€ êµ¬ë¶„í•  ê²ƒì´ë¼ê³  ìƒê°í•˜ì§€ë§Œ, ì›¹ ì„œë²„ëŠ” dag_nameì„ ì½ì–´ì˜µë‹ˆë‹¤. ì´ dag_nameì€ ìœ„ ì‚¬ì§„ì—ì„œì²˜ëŸ¼, with DAG()ì•ˆì— ë“¤ì–´ê°‘ë‹ˆë‹¤.</p><p>ì„¸ ë²ˆì§¸ëŠ” ë³‘ë ¬ì‘ì—… ì„¤ì •ì…ë‹ˆë‹¤.</p><img src="/images/airflow_basic2/airflow_paralell.png" alt="ë³‘ë ¬ì‹¤í–‰" style="zoom:50%;" /><p>ì–´ë–¤ ì‘ì—…ì„ ì‚¬ì§„ì²˜ëŸ¼ ë³‘ë ¬ë¡œ ì˜ˆì˜ê²Œ ì‹¤í–‰ì‹œí‚¤ê³  ì‹¶ì„ ë•Œê°€ ìˆìŠµë‹ˆë‹¤. ë¬¼ë¡  ì´ê²ƒì€ ê·¸ë¦¼ìœ¼ë¡œë§Œ ë³‘ë ¬ì´ê³ , ì‹¤ì œë¡œëŠ” ì‘ì—…ì´ í•˜ë‚˜ì”© ëŒì•„ê°€ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ì½”ë“œë¥¼ í™•ì¸í•´ë³´ë©´ ë©ë‹ˆë‹¤. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">  step_adder = EmrAddStepsOperator(</span><br><span class="line">    task_id=<span class="string">"emr_connection_&#123;&#125;"</span>.format(file),</span><br><span class="line">    job_flow_id=created_job_flow_id,</span><br><span class="line">    aws_conn_id=<span class="string">"aws_default"</span>,</span><br><span class="line">    steps=get_pyspark_execute_step(file),</span><br><span class="line">    queue=<span class="string">"main"</span>,</span><br><span class="line">    dag=dag</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  step_checker = EmrStepSensor(</span><br><span class="line">    task_id=<span class="string">"job_execution_&#123;&#125;"</span>.format(file),</span><br><span class="line">    job_flow_id=created_job_flow_id,</span><br><span class="line">    step_id=<span class="string">"&#123;&#123;&#123;&#123; task_instance.xcom_pull('emr_connection_&#123;&#125;', key='return_value')[0] &#125;&#125;&#125;&#125;"</span>.format(file),</span><br><span class="line">    aws_conn_id=<span class="string">"aws_default"</span>,</span><br><span class="line">    queue=<span class="string">"main"</span>,</span><br><span class="line">    dag=dag</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">dataloader_checker &gt;&gt; step_adder &gt;&gt; step_checker &gt;&gt; preprocessing_end</span><br></pre></td></tr></table></figure><p>ë³‘ë ¬ êµ¬ì¡°ë¡œ ëŒë¦¬ëŠ” ê²ƒì€ ì‚¬ì‹¤ forë¬¸ìœ¼ë¡œ ë¬¶ì—¬ìˆìŠµë‹ˆë‹¤. ë³‘ë ¬ì²˜ëŸ¼ ë¬¶ëŠ” ë°©ë²•ì€ ë‹¤ì–‘í•˜ì§€ë§Œ ì—¬ê¸°ì„œëŠ” forë¬¸ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ forë¬¸ìœ¼ë¡œ êµ¬ì„±í•˜ê³  ì‘ì—… ìˆœì„œë¥¼ ë¶€ë“±í˜¸ë¥¼ ì´ìš©í•´ì„œ ì •í•´ì£¼ë©´ ëì´ì§€ë§Œ, ì—¬ê¸°ì„œ ì‹¤ìˆ˜ê°€ ìì£¼ ë°œìƒí•©ë‹ˆë‹¤. <code>indentation</code> ì„ ì§‘ì¤‘í•´ì„œ ë³´ì…”ì•¼ í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ ì‘ì—… ìˆœì„œê°€ ì íŒ dataloader~~ ë¶€ë¶„ì„ ë¶€ë©´ forë¬¸ ì•ˆìª½ìœ¼ë¡œ indentationì´ ì¡í˜€ìˆìŠµë‹ˆë‹¤. ë³´í†µ  forë¬¸ì„ ë‹¤ ì‘ì„±í•˜ë©´ â€˜ë‹¤ ëë‹¤!â€™ë¼ëŠ” ìƒê°ì— tabì„ ì¹˜ì§€ ì•Šê³  ì‘ì—…ìˆœì„œë¥¼ ë„£ëŠ”ë°, ì´ë ‡ê²Œ ë˜ë©´ ë³‘ë ¬ë¡œ ì¡íê±°ë¼ê³  ìƒê°í–ˆë˜ ì‘ì—…ì´ ë‹¤ ê¹¨ì ¸ë²„ë¦¬ê²Œ ë©ë‹ˆë‹¤. Tabì„ ê¼­ í•œë²ˆ ëˆŒëŸ¬ì£¼ê³  ì‘ì—… ìˆœì„œë¥¼ ì‘ì„±í•´ì£¼ì‹œë©´ ì•„ì£¼ ì¢‹ìŠµë‹ˆë‹¤.</p><hr><h3 id="ë§ë¶™ì—¬"><a href="#ë§ë¶™ì—¬" class="headerlink" title="ë§ë¶™ì—¬,"></a>ë§ë¶™ì—¬,</h3><p>Airflowë¥¼ ì´ìš©í•˜ë©´ ìœ„ ì½”ë“œì—ì„œì²˜ëŸ¼ EMRì„ ì—°ê³„í•´ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Airflowì˜ ì¥ì ì¤‘ì— í•˜ë‚˜ì¸ë°, ë‹¤ì–‘í•œ Hookê³¼ Operatorê°€ ë§ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. Hookê³¼ Operatorë¥¼ ì¡°í•©í•˜ë©´ ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ íŒŒì´í”„ë¼ì¸ì„ ê°œë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Airflowì™€ EMRì„ ì—°ê³„í•´ì„œ Spark jobì„ ì‹¤í–‰í•˜ê³  ê°’ì„ ì €ì¥ ë¶€ë¶„ì€ ë‹¤ìŒ ê¸€ë¡œ ì‘ì„±í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ë¶€ì¡±í•œ ê¸€ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2021/02/21/airflow-basic2/#disqus_thread</comments>
    </item>
    
    <item>
      <title>AWS ë¹„ìš©ê´€ë¦¬ì˜ ì„œë§‰, EMR</title>
      <link>http://tkdguq05.github.io/2021/01/24/cost-mgt-emr/</link>
      <guid>http://tkdguq05.github.io/2021/01/24/cost-mgt-emr/</guid>
      <pubDate>Sun, 24 Jan 2021 06:36:52 GMT</pubDate>
      <description>
      
        &lt;p&gt;FinOps? EMR ë¹„ìš©ê´€ë¦¬&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>FinOps? EMR ë¹„ìš©ê´€ë¦¬</p><a id="more"></a><h1 id="ë¹„ìš©ê´€ë¦¬ì˜-ì„œë§‰-FinOps"><a href="#ë¹„ìš©ê´€ë¦¬ì˜-ì„œë§‰-FinOps" class="headerlink" title="ë¹„ìš©ê´€ë¦¬ì˜ ì„œë§‰, FinOps?"></a>ë¹„ìš©ê´€ë¦¬ì˜ ì„œë§‰, FinOps?</h1><p>ë¹„ìš©ê´€ë¦¬ë¥¼ ë³¸ê²©ì ìœ¼ë¡œ ì‹œì‘í•˜ê²Œë˜ëŠ” ë•ŒëŠ” ì–¸ì œì¼ê¹Œìš”? ë¹„ìš©ê´€ë¦¬ì— ëŒ€í•œ ì±…ì— ê°ëª…ì„ ë°›ì•„ì„œ? ë¬¼ë¡  FinOpsì— ê´€í•œ ì±…ì„ ì¶”ì²œ ë°›ì•˜ê³  ì´ëŸ° ì±…ì´ ìˆë‹¤ëŠ” ê²ƒì— ëŒ€í•´ì„œ ë†€ë¼ê¸°ë„ í–ˆìŠµë‹ˆë‹¤. ë³¸ê²©ì ìœ¼ë¡œ ë¹„ìš©ê´€ë¦¬ë¥¼ ì²´ê³„ë¥¼ ê°–ì¶”ì–´ í•´ì•¼ê² ë‹¤ëŠ” ìƒê°ë„ ê°™ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì¼ë°˜ì ìœ¼ë¡œëŠ” AWS ìš”ê¸ˆì´ ê³¼í•˜ê²Œ ë¶€ê³¼ëœ ë‚ ì´ì§€ ì•Šì„ê¹Œ í•©ë‹ˆë‹¤. 12ì›”ì˜ í‰í™”ë¡œìš´ ì–´ëŠ ë‚ ì— ê°œë°œ íŒ€ì¥ë‹˜ê»˜ì„œ ì¡°ìš©íˆ ì €ë¥¼ ë¶€ë¥´ì…¨ê³ , ì¶©ê²©ì ì¸ 12ì›”ì˜ ìš”ê¸ˆì„ ë³´ë©´ì„œ ë¹„ìš©ê´€ë¦¬ì˜ í•„ìš”ì„±ì„ ê¹¨ë‹«ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. </p><p>ì•ì„œ FinOpsì— ê´€í•œ ì±…ì„ ì¶”ì²œ ë°›ì•˜ë‹¤ê³  í–ˆëŠ”ë°, ì´ ì±…ì„ ê¸°ë°˜ìœ¼ë¡œ ë¹„ìš© ê´€ë¦¬ë¥¼ í•´ì•¼ê² ë‹¤ê³  ë§ˆìŒì„ ë¨¹ì—ˆìŠµë‹ˆë‹¤. ì´ ì±…ì€ ë§ˆì´í´ í’€ëŸ¬ì˜ <a href="https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQ12PNmpt2mrX5XbiP5lOyLJ1hA5trRV5ficm1fL_vGDRuCpvRb">Cloud FinOps: Collaborative, Real-Time Cloud Financial Management</a> ì…ë‹ˆë‹¤.<br><img src="https://image.yes24.com/Goods/74391396/L" alt="cloud finops">ì±…ì— ëŒ€í•œ ì†Œê°œê¸€ì„ ì‘ì„±í•˜ë ¤ê³  í•œê²Œ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ê°„ë‹¨í•˜ê²Œ ì±…ì— ëŒ€í•´ì„œ ì½ì–´ë³¸ ì†Œê°ì„ ë§í•˜ìë©´, ì—„ì²­ë‚˜ê²Œ ì„¸ë°€í•˜ê²Œ ê´€ë¦¬í¬ì¸íŠ¸ë¥¼ ì§‘ì–´ì£¼ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ì œê°€ ì•„ëŠ” ë‚´ìš©ì´ ë§ì§€ ì•Šì•„ì„œ ê·¸ëŸ´ ìˆ˜ë„ ìˆê² ìŠµë‹ˆë‹¤. ë¹„ìš©ê´€ë¦¬ë¼ëŠ” ë§ì„ ë“£ê³  ì–´ë–»ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆì„ê¹Œ? ì— ëŒ€í•´ì„œ ìƒê°í•´ë³´ë©´ ë‚˜ì˜¤ëŠ” ê°œë…ë“¤ì´ ì •í™•í•œ ìš©ì–´ë¡œ ì„¤ëª…ì´ ë˜ì–´ìˆê¸°ëŠ” í•©ë‹ˆë‹¤. ë‚˜ìœ ì±…ì€ ì•„ë‹ˆë¼ê³  ìƒê°í•©ë‹ˆë‹¤. ì‹¤ë¬´ìë³´ë‹¤ëŠ” ìœ— ë¶„ë“¤ì´ ë¨¼ì € ì½ì—ˆìœ¼ë©´ í•©ë‹ˆë‹¤.</p><h2 id="FinOps"><a href="#FinOps" class="headerlink" title="FinOps"></a>FinOps</h2><p>FinOpsëŠ” Finance + DevOpsê°€ ê²°í•©ëœ ë§ì…ë‹ˆë‹¤. í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ì¬ë¬´ì™€ ê°œë°œ/ìš´ì˜ì„ ê¸´ë°€íˆ ê²°í•©í•¨ìœ¼ë¡œì¨ ë¹„ìš©ì„ ìµœì í™”í•˜ì—¬ ê´€ë¦¬í•˜ê³  í†µì œí•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. í´ë¼ìš°ë“œ ë¹„ìš© ìµœì í™”ë¥¼ ìœ„í•œ ë² ìŠ¤íŠ¸ í”„ë ‰í‹°ìŠ¤ì™€ ê³µí†µëœ í‘œì¤€ ì •ì±…ìœ¼ë¡œ ê¸°ìˆ ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤, ì¬ë¬´ ì „ë¬¸ê°€ë¥¼ ê²°í•©í•¨ìœ¼ë¡œì¨ ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜ ê·¹ëŒ€í™”í•˜ë ¤ëŠ” ê²ƒì…ë‹ˆë‹¤.(ì¶œì²˜ : Bespin Global)<br>íšŒì‚¬ì—ì„œ ë¹„ìš©ê´€ë¦¬ë¥¼ ì œëŒ€ë¡œ ì‹œì‘í•˜ê²Œ ë˜ë©´ì„œ FinOpsë¼ëŠ” ë§ì„ ë¶™ì´ì§€ëŠ” ì•Šì•˜ìŠµë‹ˆë‹¤. ì¬ë¬´ì— ê´€ë ¨ëœ ì¸ì›ì„ í¬í•¨í•˜ê¸° ì–´ë ¤ì› ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ëŒ€ì‹ ì— ë¹„ìš©ê´€ë¦¬ì— ê´€ë ¨ëœ ì‚¬ëŒë“¤ì´ ëª¨ì˜€ìŠµë‹ˆë‹¤. AWSì˜ ë¹„ìš© ê¸‰ìƒìŠ¹ì— ê´€ë ¨ëœ ë¶€ì„œì˜ ì‹¤ë¬´ìì™€ ê°œë°œ íŒ€ì¥ë‹˜, TA, ê¸°íš íŒ€ì¥ë‹˜ì…ë‹ˆë‹¤. ì‚¬ì‹¤ìƒ ìš´ì˜ì— ê´€ë ¨ëœ ëª¨ë“  ì‚¬ëŒì´ ëª¨ì´ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ëª¨ì¸ ì‚¬ëŒë“¤ê³¼ ë¹„ìš©ì— ëŒ€í•´ì„œ ë…¼ì˜í–ˆê³  í˜„ì¬ëŠ” 1ì°¨ì ì¸ ìµœì í™” ì‘ì—…ì„ ì™„ë£Œí•˜ì˜€ìŠµë‹ˆë‹¤. </p><h2 id="ë¹„ìš©ì˜-ì›ì¸-EMR"><a href="#ë¹„ìš©ì˜-ì›ì¸-EMR" class="headerlink" title="ë¹„ìš©ì˜ ì›ì¸, EMR"></a>ë¹„ìš©ì˜ ì›ì¸, EMR</h2><p>ë‹¤ì‹œ ë¬¸ì œì˜ 12ì›”ì˜ ëìë½ìœ¼ë¡œ ëŒì•„ì™€ì„œ, ì›ì¸ íŒŒì•…ì„ í•´ë³´ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ì›ì¸ ì¤‘ í•˜ë‚˜ëŠ” EMR ë¹„ìš©ì˜ ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì¦ê°€ì˜€ìŠµë‹ˆë‹¤. EMRì´ ë¬´ì—‡ì¼ê¹Œìš”? êµ¬ê¸€ì— ê²€ìƒ‰í•˜ë©´ ê¸°ë‹¤ë ¸ë‹¤ëŠ” ë“¯ì´ AWSëŠ” <a href="https://docs.aws.amazon.com/ko_kr/emr/latest/ManagementGuide/emr-what-is-emr.html">ë¬¸ì„œ</a>ë¥¼ ë§Œë“¤ì–´ ë†“ì•˜ìŠµë‹ˆë‹¤. ì‰½ê²Œ ë§í•˜ìë©´, EMRì€ AWS ìœ„ì—ì„œ Hadoopì´ë‚˜ ê·¸ ê¸°ë°˜ í”„ë ˆì„ì›Œí¬ë“¤ì„ ìœ„í•œ ë¹… ë°ì´í„° í”„ë ˆì„ì›Œí¬ ì‹¤í–‰ì„ ê°„ì†Œí™”í•˜ëŠ” ê´€ë¦¬í˜• í´ëŸ¬ìŠ¤í„° í”Œë«í¼ì…ë‹ˆë‹¤. ì €í¬ì˜ ê²½ìš° Sparkë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ EMRì„ ì“°ê³  ìˆìŠµë‹ˆë‹¤. </p><h3 id="ì˜ˆìƒë˜ëŠ”-ë¹„ìš©-í¬ì¸íŠ¸"><a href="#ì˜ˆìƒë˜ëŠ”-ë¹„ìš©-í¬ì¸íŠ¸" class="headerlink" title="ì˜ˆìƒë˜ëŠ” ë¹„ìš© í¬ì¸íŠ¸"></a>ì˜ˆìƒë˜ëŠ” ë¹„ìš© í¬ì¸íŠ¸</h3><ol><li>ë§ì€ ê³ ê°ì‚¬ì— ëŒ€í•œ ëŒ€ì‘</li><li>ì˜¤ë²„ ì‚¬ì´ì§•ëœ í´ëŸ¬ìŠ¤í„°</li><li>Airflow TerminateJobFlow</li><li>EMR Cluster ê´€ë¦¬</li></ol><p>ì²« ë²ˆì§¸ëŠ” ë§ì€ ê³ ê°ì‚¬ì— ëŒ€í•œ ëŒ€ì‘ì´ì˜€ìŠµë‹ˆë‹¤. ìƒˆë¡­ê²Œ ì˜¤í”ˆí•œ ì„œë¹„ìŠ¤ë¡œ ì¸í•´ ê³ ê°ì‚¬ê°€ ê°‘ìê¸° ë§ì´ ë“¤ì–´ì˜¤ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. FinOps ì±…ì— ë‚˜ì˜¨ëŒ€ë¡œ, ë¹„ìš©ì€ $ì‚¬ìš©ëŸ‰\timesìš”ìœ¨$ ì´ë¯€ë¡œ ì‚¬ìš©ëŸ‰ì´ ëŠ˜ì–´ë‚¬ê¸° ë•Œë¬¸ì— ë¹„ìš©ì´ ê°‘ìê¸° ì¦ê°€ë  ìˆ˜ ë°–ì— ì—†ì—ˆìŠµë‹ˆë‹¤. ê°‘ìê¸° ëŠ˜ì–´ë‚œ ê³ ê°ì‚¬ë¥¼ ì¤„ì¼ ìˆ˜ë„ ì—†ëŠ” ë…¸ë¦‡ì´ë¯€ë¡œ, ë‹¤ë¥¸ ê´€ë¦¬ í¬ì¸íŠ¸ë¥¼ ì°¾ì•„ ë´¤ìŠµë‹ˆë‹¤. </p><p>ë‘ ë²ˆì§¸ëŠ” ì˜¤ë²„ ì‚¬ì´ì§•ëœ í´ëŸ¬ìŠ¤í„°ì˜€ìŠµë‹ˆë‹¤. í˜„ì¬ ì œê³µí•˜ê³  ìˆëŠ” ì„œë¹„ìŠ¤ë“¤ì€ ëŒ€ë¶€ë¶„ Airflowë¥¼ ì‚¬ìš©í•´ì„œ Sparkë¡œ ì‘ì—…ì„ ì²˜ë¦¬í•œ ë’¤ ì¢…ë£Œë˜ëŠ” êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì‘ì—…ì„ í•  ë•Œ ë§Œë“¤ì–´ì§€ëŠ” í´ëŸ¬ìŠ¤í„°ë“¤ì˜ ìŠ¤í™ì€ ëŒ€ë¶€ë¶„ ë™ì¼í•œë°, ì†Œê·œëª¨ ê³ ê°ì‚¬ì— ëŒ€í•´ì„œ ì„œë¹„ìŠ¤ë¥¼ í•  ë•Œë„ ê°™ì€ ìŠ¤í™ì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ê³ ê°ì‚¬ì˜ ì¼ í‰ê·  ë°©ë¬¸ ìˆ˜ì™€ ìƒí’ˆì˜ sku ìˆ˜ë¥¼ ë”°ì ¸ì„œ ê³ ê°ì‚¬ ê·œëª¨ë¥¼ ì¸¡ì •í•˜ëŠ”ë°, ì´ ê¸°ì¤€ì—ì„œ ì‘ì€ ê³ ê°ì‚¬ë¡œ ë¶„ë¥˜ë˜ëŠ” ê³ ê°ì‚¬ë“¤ì˜ í´ëŸ¬ìŠ¤í„° ìŠ¤í™ì„ ì¡°ì •í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤. </p><p>ì„¸ ë²ˆì§¸ëŠ” Airflowì˜ TerminateJobFlowì…ë‹ˆë‹¤. ì•ì„œ ì„¤ëª…í•œëŒ€ë¡œ, EMR í´ëŸ¬ìŠ¤í„°ëŠ” ì‘ì—…ì„ ë§ˆì¹˜ë©´ Airflowì˜ TerminateJobFlow ì˜¤í¼ë ˆì´í„°ë¥¼ ì´ìš©í•´ ì‘ì—…ì„ ì¢…ë£Œí•´ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚­ì œí•˜ê²Œ ë©ë‹ˆë‹¤. EMRì€ ì˜¤ë˜ ëŒ ìˆ˜ë¡ ìš”ê¸ˆì´ ì–´ë§ˆì–´ë§ˆí•˜ê²Œ ë¶€ê³¼ë˜ê¸° ë•Œë¬¸ì— ì´ëŸ° íŒŒì´í”„ë¼ì¸ì„ ë§Œë“¤ì–´ ë‘ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ê°€ë” ì´ ì˜¤í¼ë ˆì´í„°ê°€ ë§ì„ ì•ˆë“£ëŠ” ê²½ìš°ê°€ ë°œìƒí•˜ê³¤ í•©ë‹ˆë‹¤. í˜„ì¬ì˜ Airflowì— ìˆëŠ” DAGë“¤ì€ ìƒˆë²½ì—ë„ ë§ì´ ì‹¤í–‰ë˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì¶œê·¼í–ˆì„ ë•Œ ìƒˆë²½ ë‚´ë‚´ ëŒê³  ìˆëŠ” EMR í´ëŸ¬ìŠ¤í„°ë“¤ì„ ë§ˆì£¼í•˜ê²Œ ë˜ëŠ” ê²½ìš°ê°€ ì¢…ì¢… ìˆì—ˆìŠµë‹ˆë‹¤. </p><p>ì´ëŸ° ì™€ì¤‘ì— EMR ì½˜ì†” í˜ì´ì§€ì— ë‚˜ì˜¤ì§€ëŠ” ì•Šì§€ë§Œ EC2 í˜ì´ì§€ì— ë“±ì¥í•˜ëŠ” EMR í´ëŸ¬ìŠ¤í„°ë“¤ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. 12ì›” ì´ˆ ë¶€í„° ìŒ©ìŒ© ë„ëŠ” ì¸ìŠ¤í„´ìŠ¤ë“¤ì´ì—ˆëŠ”ë°, ë„¤ì„ íƒœê·¸ë„ ë‹¬ë ¤ìˆì§€ ì•Šì€, ì•Œ ìˆ˜ ì—†ëŠ” ê²ƒë“¤ì´ì—ˆìŠµë‹ˆë‹¤. 12ì›” ì´ˆ ë¶€í„° ê³„ì† ëŒê³  ìˆì—ˆê¸° ë•Œë¬¸ì—, ì—¬ê¸°ì„œ í° ë¹„ìš©ì´ ë°œìƒí•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.<br><img src="/images/cost_mgt/screen2_edit.png" alt="ìŒ©ìŒ© ë„ëŠ” ì¸ìŠ¤í„´ìŠ¤ë“¤"></p><p>ê·¸ë˜ì„œ ì´ ì¸ìŠ¤í„´ìŠ¤ë“¤ì´ ì™œ ë‚¨ì•„ìˆëŠ”ì§€ ì•Œê¸° ìœ„í•´ì„œ AWSì¸¡ì— ë¬¸ì˜ë¥¼ ë„£ì—ˆìŠµë‹ˆë‹¤. ëª‡ ë²ˆì˜ í•‘íì´ ì˜¤ê°”ê³ <br>â€œAs you can observe above, that either the cluster didnâ€™t finish the step it was running or the step itself didnâ€™t get submitted to it or the TerminateJobFlows API call was not made by the Airflow workflow.â€<br>ì´ëŸ¬í•œ ë‹µë³€ê³¼ ê¸°íƒ€ ë“±ë“±ì„ ì–»ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ê²°êµ­ ë¯¸íŒ…ì„ ì¡ê³  ì´ì•¼ê¸° í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.(ì°¸ê³ ë¡œ ë³´í†µ ì´ëŸ° ë¯¸íŒ…ì„ í•˜ê²Œ ë˜ë©´ ì¸ë„ ì¶œì‹  ì—”ì§€ë‹ˆì–´ì™€ ì´ì•¼ê¸°ë¥¼ í•˜ê²Œ ë©ë‹ˆë‹¤. ì €ëŠ” ì¸ë„ ì•…ì„¼íŠ¸ì— ì¹œìˆ™í•˜ì§€ ì•Šì•„ì„œ ì• ë¥¼ ë§ì´ ë¨¹ì—ˆìŠµë‹ˆë‹¤. <del>ì „í™” ë¯¸íŒ…ì´ì—ˆì§€ë§Œ ì´ì—­ë§Œë¦¬ íƒ€êµ­ê³¼ì˜ í†µí™”ì— ê°ì‚¬í•¨ë³´ë‹¤ëŠ” ì‹¤ì‹œê°„ ì±„íŒ…ì— ë” ê°ì‚¬í•˜ê²Œ ë˜ì—ˆë‹¤ëŠ” í›„ê¸°</del>)</p><p>AWS ì¸¡ê³¼ ì–˜ê¸°ë¥¼ í•œ í›„ ì¶”ê°€ë¡œ ì•Œê²Œ ëœ ì‚¬ì‹¤ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ê²ƒì€ <code>VisibleToAllUsers</code>ë¼ëŠ” ì˜µì…˜ì´ì—ˆìŠµë‹ˆë‹¤. AWS EMRì—ëŠ” ë…íŠ¹í•˜ê²Œ ëª¨ë“  ìœ ì €ì—ê²Œ í´ëŸ¬ìŠ¤í„°ë¥¼ ë³´ì´ëŠ”, VisibleToAllUsersì´ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ ì˜µì…˜ì´ ì²´í¬ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´, í´ëŸ¬ìŠ¤í„° í˜ì´ì§€ì—ì„œ í•´ë‹¹ í´ëŸ¬ìŠ¤í„°ë¥¼ ë³¼ ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤. 12ì›”ì— ì¢…ë£Œë˜ì§€ ì•Šì€ ì´ í´ëŸ¬ìŠ¤í„°ë“¤ì€ ì´ ì˜µì…˜ì— ì²´í¬ë˜ì–´ ìˆì§€ ì•Šì€ ìƒíƒœë¡œ ìƒì„±ì´ ë˜ì—ˆê³ , ê·¸ë˜ì„œ í´ëŸ¬ìŠ¤í„° ì½˜ì†” í˜ì´ì§€ì—ì„œ ê´€ë¦¬ë¥¼ í•  ìˆ˜ ì—†ì—ˆë˜ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. </p><p>Airflowì—ì„œ EMR í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•  ë•Œë„ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤. <code>VisibleToAllUsers</code>ì˜µì…˜ì„ ì§€ì •í•´ì„œ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì˜µì…˜ì´ ì œëŒ€ë¡œ ì§€ì •ë˜ì§€ ì•Šì•˜ê³ , ê·¸ë˜ì„œ ì‚­ì œë˜ì§€ ì•Šê³  ê´€ë¦¬ë˜ì§€ ëª»í•œ ì¸ìŠ¤í„´ìŠ¤ë“¤ì´ ë°œìƒí•œ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. 12ì›” ì´ˆì— ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ Airflow ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒˆë¡œ ë§Œë“¤ì—ˆëŠ”ë°, ì´ íŒŒë¼ë¯¸í„°ê°’ì„ ê´€ë¦¬í•˜ëŠ” Connection ë¶€ë¶„ì´ ì´ˆê¸°í™” ë˜ì—ˆë˜ ê²ƒì…ë‹ˆë‹¤. ë‹¹ì‹œì— ì¸ìˆ˜ì¸ê³„ë‹¤ ë­ë‹¤ ì •ì‹ ì´ ì—†ì—ˆê³  ê·¸ëŸ° ìƒí™©ì—ì„œ ì²´í¬ë¥¼ ì œëŒ€ë¡œ í•˜ì§€ ì•Šê³  ë„˜ì–´ê°”ë˜ ê²ƒì´ í™”ê·¼ì´ì—ˆìŠµë‹ˆë‹¤. </p><p>ì•„ë¬´íŠ¼ ì´ë ‡ê²Œ í•´ì„œ Connectionì—ì„œ emr_default ë¶€ë¶„ì— <code>VisibleToAllUsers</code>ì„ trueë¡œ ë³€ê²½í•´ ì£¼ì—ˆê³ , í´ëŸ¬ìŠ¤í„° í˜ì´ì§€ì— ë‚˜íƒ€ë‚˜ì§€ ì•ŠëŠ” ì¸ìŠ¤í„´ìŠ¤ë“¤ì€ ì‚¬ë¼ì§€ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì¶”ê°€ ëŒ€ì‘ ë°©ì•ˆì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤. (AWS ì¸¡ì—ì„œëŠ” Airflow ë§¤ë‹ˆì§€ë“œ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë¼ê³  í–ˆì§€ë§Œ, ì§„ì‹¬ ë„ˆë¬´ ë¹„ìŒ‰ë‹ˆë‹¤. ì´ë ‡ê²Œ ëœê±° GCPë¡œ ì˜®ê¸°ë©´ ì–´ë–¨ê¹Œ? Composer ì°¸ ì‹¼ë°, ë³´ê³  ìˆë‚˜ AWS?? You See Me??)</p><p>ë„¤ ë²ˆì§¸ëŠ” EMR Cluster ê´€ë¦¬ì— ëŒ€í•œ ê²ƒì…ë‹ˆë‹¤. EMR Cluster í˜ì´ì§€ì— ì§ì ‘ ë“¤ì–´ê°€ì„œ ì‚­ì œë˜ì§€ ì•Šì€ í´ëŸ¬ìŠ¤í„°ë“¤ì„ ì¼ì¼ì´ ë³´ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ë§˜ì— ë“¤ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ìë™í™”ì— ì§‘ì°©í•˜ëŠ” ì§‘ì°©ë§¨ì´ê¸° ë•Œë¬¸ì—, ì¢€ ë” ì„¸ë ¨ëœ ë°©ë²•ì„ ì°¾ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤. TA ë¶„ê³¼ ì´ì•¼ê¸° í•´ ë³¸ ê²°ê³¼ boto3ë¥¼ ì´ìš©í•˜ë©´ í´ëŸ¬ìŠ¤í„°ì— í˜ì´ì§€ì— ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. </p><h2 id="boto3ë¡œ-í´ëŸ¬ìŠ¤í„°-ê´€ë¦¬í•˜ê¸°"><a href="#boto3ë¡œ-í´ëŸ¬ìŠ¤í„°-ê´€ë¦¬í•˜ê¸°" class="headerlink" title="boto3ë¡œ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬í•˜ê¸°"></a>boto3ë¡œ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬í•˜ê¸°</h2><p>Boto3ëŠ” AWSì—ì„œ ì œê³µí•˜ëŠ” íŒŒì´ì¬ ìš© SDK(software development kit)ì…ë‹ˆë‹¤. boto3ë¥¼ ì‚¬ìš©í•˜ë©´, S3ë‚˜ EMRë“± AWSì˜ ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p><p>boto3ê°€ ì—†ë‹¤ë©´ <code>pip3 install boto3</code>ë¡œ ì„¤ì¹˜í•´ ì£¼ì‹œê³ , AWSì— ë¡œê·¸ì¸ í•´ì¤ë‹ˆë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import boto3</span><br><span class="line">from pprint import pprint</span><br><span class="line"></span><br><span class="line">client &#x3D; boto3.client(&#39;emr&#39;)</span><br><span class="line"></span><br><span class="line">response &#x3D; client.describe_cluster(ClusterId&#x3D;&#39;j-xxxxxxxxxx&#39;)</span><br><span class="line"></span><br><span class="line">pprint(response)</span><br></pre></td></tr></table></figure><p>ì´ë ‡ê²Œ ì…ë ¥ì„ í•´ì£¼ë©´ í•´ë‹¹ í´ëŸ¬ìŠ¤í„° ì•„ì´ë””ì— ëŒ€í•œ ê°’ë“¤ì´ ì«™ ë‚˜ì˜¤ê²Œ ë©ë‹ˆë‹¤. <del>ë„ˆë¬´ ì‰½ì£ ? AWSë¥¼ ì“°ì„¸ìš”. boto3ëŠ” ì°¸ ì¢‹ìŠµë‹ˆë‹¤. ëŒ€ì‹  ë”ëŸ½ê²Œ ë¹„ìŒ‰ë‹ˆë‹¤.</del> ì´ ì •ë³´ë“¤ì€ dictionaryë¡œ ë˜ì–´ ìˆìœ¼ë‹ˆ, í‚¤ ê°’ì„ ì˜ ì¡°íšŒ í•´ì„œ ê°’ì— ì ‘ê·¼í•˜ë©´ ë©ë‹ˆë‹¤.</p><p>ëŒ€í‘œì ì¸ í‚¤ ê°’ì€ Cluster, Ec2InstanceAttributes, Id, Name, NormalizedInstanceHours, Status, Timeline ë“±ì…ë‹ˆë‹¤. ì €ëŠ” TimeLineì„ ì´ìš©í•´ì„œ ìƒì„±ì‹œê°„ê³¼ í˜„ì¬ì‹œê°„ì˜ ì°¨ë¥¼ êµ¬í•œ ë‹¤ìŒ, í•­ìƒ ë„ì–´ë†“ëŠ” ë¶„ì„ìš© EMR ì‹œê°„ë³´ë‹¤ ì‘ê³  5ì‹œê°„ ì´ìƒ RUNNINGí•˜ê±°ë‚˜ WAITINGí•˜ê³  ìˆëŠ” í´ëŸ¬ìŠ¤í„°ë“¤ì„ ì¢…ë£Œì‹œí‚¬ ìƒê°ì…ë‹ˆë‹¤. í™œìš©ë°©ì•ˆì€ ë‹¤ì–‘í•˜ë‹ˆ ê°ìì˜ ê´€ë¦¬í¬ì¸íŠ¸ëŒ€ë¡œ ì‘ì—…í•˜ì‹œë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p><hr><h2 id="ì´ë ‡ê²Œ-í•´ì„œ"><a href="#ì´ë ‡ê²Œ-í•´ì„œ" class="headerlink" title="ì´ë ‡ê²Œ í•´ì„œ"></a>ì´ë ‡ê²Œ í•´ì„œ</h2><p>ë¹„ìš©ê´€ë¦¬ê°€ ë°œìƒí•œ ìƒí™©ê³¼, FinOps, EMR, ê´€ë¦¬ ë°©ë²•ì— ëŒ€í•´ì„œ ê°„ë‹¨í•˜ê²Œ ì‘ì„±í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë¬¸ì œ ìƒí™©ë¶€í„° ì§€ê¸ˆê¹Œì§€ ìš°ì—¬ê³¡ì ˆì´ ì°¸ ë§ì•˜ëŠ”ë°, ì •ë¦¬í•˜ë‹ˆê¹Œ ë‚´ìš©ì€ ê·¸ë ‡ê²Œ ë§ì§€ ì•Šë„¤ìš”. ì‚½ì§ˆì„ ë§ì´ í–ˆë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ë“¤ì€ ë¶€ë”” ì‚½ì§ˆì„ ìµœì†Œí™”í•˜ì‹œê³  ë§ì€ ì´ë“ì„ ì·¨í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤. ì§§ë§‰í•œ ì‚½ì§ˆ ê¸€ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. </p>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2021/01/24/cost-mgt-emr/#disqus_thread</comments>
    </item>
    
    <item>
      <title>20201227. 2020ë…„ íšŒê³ í•˜ê¸°</title>
      <link>http://tkdguq05.github.io/2020/12/27/20201227/</link>
      <guid>http://tkdguq05.github.io/2020/12/27/20201227/</guid>
      <pubDate>Sun, 27 Dec 2020 10:21:27 GMT</pubDate>
      <description>
      
        &lt;p&gt;ì•½ì†ë“¤ì´ ëˆˆì— ë³´ì´ì§€ ì•ŠëŠ” ìº˜ë¦°ë”ë¥¼ ë³´ë©°, ì¼ ë…„ì´ ì™œ ì´ë ‡ê²Œ ë¹ ë¥¸ì§€ ìƒê°í•˜ë‹¤ê°€, í•œ í•´ë¥¼ ì˜ ë³´ëƒˆë‹¤ëŠ” ë¿Œë“¯í•¨ ë³´ë‹¤ëŠ” í—ˆë¬´í•¨ì´ ëª°ë ¤ì™”ë‹¤.&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>ì•½ì†ë“¤ì´ ëˆˆì— ë³´ì´ì§€ ì•ŠëŠ” ìº˜ë¦°ë”ë¥¼ ë³´ë©°, ì¼ ë…„ì´ ì™œ ì´ë ‡ê²Œ ë¹ ë¥¸ì§€ ìƒê°í•˜ë‹¤ê°€, í•œ í•´ë¥¼ ì˜ ë³´ëƒˆë‹¤ëŠ” ë¿Œë“¯í•¨ ë³´ë‹¤ëŠ” í—ˆë¬´í•¨ì´ ëª°ë ¤ì™”ë‹¤.</p><a id="more"></a><h1 id="2020ë…„-ëŒì•„ë³´ê¸°"><a href="#2020ë…„-ëŒì•„ë³´ê¸°" class="headerlink" title="2020ë…„ ëŒì•„ë³´ê¸°"></a>2020ë…„ ëŒì•„ë³´ê¸°</h1><iframe width="400" height="230" src="https://www.youtube.com/embed/5rGpxaKQPw0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>   <h2 id="ë¨¼ì €-ìº˜ë¦°ë”ë¥¼-ì—´ì–´ë´¤ë‹¤"><a href="#ë¨¼ì €-ìº˜ë¦°ë”ë¥¼-ì—´ì–´ë´¤ë‹¤" class="headerlink" title="ë¨¼ì € ìº˜ë¦°ë”ë¥¼ ì—´ì–´ë´¤ë‹¤."></a>ë¨¼ì € ìº˜ë¦°ë”ë¥¼ ì—´ì–´ë´¤ë‹¤.</h2><p> ì˜¬ í•œí•´ ë§ì€ ì¼ì´ ì¼ì–´ë‚¬ë‹¤ê³  ìƒê°í–ˆë‹¤. ë¨¸ë¦¬ ì†ì´ ë³µì¡í•´ì„œ ìº˜ë¦°ë”ë¥¼ ë³´ë©´ì„œ í•˜ë‚˜ì”© ì •ë¦¬í•˜ê³  ì‹¶ì–´ì¡Œë‹¤. ìº˜ë¦°ë”ë¥¼ ì—´ì–´ì„œ 1ì›”ë¶€í„° ëª‡ ë²ˆ ì•„ë˜ë¡œ ë‚´ë ¤ê°€ë‹ˆ ë²Œì¨ 2020ë…„ 12ì›”ì´ì—ˆë‹¤. ì—…ë¬´ ë‚´ìš©ì´ë‚˜ ì•½ì†ì´ ê°„ë‹¨í•˜ê²Œ ì íŒ, ê·¸ë‚˜ë§ˆë„ í•œ ë‹¬ í•œ ë‹¬ì´ ìŠ¤í¬ë¡¤ì„ ë‚´ë¦´ìˆ˜ë¡ ê°œì¸ì ì¸ ì¼ë“¤ê³¼ ì•½ì†ë“¤ì´ ëˆˆì— ë³´ì´ì§€ ì•ŠëŠ” ìº˜ë¦°ë”ë¥¼ ë³´ë©°, ì¼ ë…„ì´ ì™œ ì´ë ‡ê²Œ ë¹ ë¥¸ì§€ ìƒê°í•˜ë‹¤ê°€, í•œ í•´ë¥¼ ì˜ ë³´ëƒˆë‹¤ëŠ” ë¿Œë“¯í•¨ ë³´ë‹¤ëŠ” í—ˆë¬´í•¨ì´ ëª°ë ¤ì™”ë‹¤. ì˜¬ í•´ì— ë‚´ê°€ í•œ ì¼ë“¤ì„ ì •ë¦¬í•˜ê³  ìƒˆë¡œìš´ ê³„íšì„ ì„¸ì›Œë´ì•¼ê² ë‹¤ê³  ë¨¸ë¦¿ì†ìœ¼ë¡œ ë‹¤ì§í–ˆëŠ”ë° ë§ˆìŒì´ ë¨¹ì–´ì§€ì§€ê°€ ì•ŠëŠ”ë‹¤. ìƒˆ ê³„íšì€ ë‚´ë…„ì— í•˜ê¸°ë¡œ í•˜ê³ , ê·¸ë³´ë‹¤ëŠ” ë‚˜ì—ê²Œ ë§ˆìŒì •ë¦¬ê°€ ë” í•„ìš”í•œ ê²ƒ ê°™ë‹¤.</p><hr><h2 id="1ì›”ë¶€í„°-6ì›”ì€"><a href="#1ì›”ë¶€í„°-6ì›”ì€" class="headerlink" title="1ì›”ë¶€í„° 6ì›”ì€"></a>1ì›”ë¶€í„° 6ì›”ì€</h2><p> 2020ë…„ì´ ì‹œì‘ë˜ê³  ë‚˜ì„œëŠ” êµ‰ì¥íˆ ë°”ë¹´ì—ˆë‹¤. ì‘ë…„ì— ì—°êµ¬ì†Œ ì¡°ì§ì´ ê°œí¸ë˜ë©´ì„œ TFTê°€ ì¡°ì§ë˜ì—ˆê³  ì¸ìˆ˜ì¸ê³„ ì‚¬í•­ìœ¼ë¡œ ë‚˜ì˜¨ Sparkë¥¼ ì—…ë¬´ì— ì ìš©í•´ì•¼ í–ˆì—ˆë‹¤. ê¸°ë³¸ì ì¸ Sparkì— ëŒ€í•œ ì´í•´ë¶€í„° ì‹œì‘í•´ì„œ Pyspark, conf ì„¸íŒ… ë“±, í•˜ë£¨í•˜ë£¨ í•´ì•¼í•  ê²Œ ë§ì•˜ê³  ë°°ìš°ê³  ì„±ì¥í•˜ê¸° ë°”ë¹´ë‹¤. íšŒì‚¬ì—ì„œ ì›Œí¬ìƒµë„ ê°”ì—ˆê³  ì—°ë´‰í˜‘ìƒë„ ì²˜ìŒí•´ë³´ê³  ìƒˆë¡œ ì ‘í•˜ëŠ” ì¼ì´ ë§ì•˜ë‹¤. <code>ë°ì´í„° ì—”ì§€ë‹ˆì–´ë§</code>ì—ë„ ê´€ì‹¬ì´ ìƒê²¨ì„œ ì„¸ì…˜ì´ ìˆìœ¼ë©´ ì£¼ë§ì—ë„ ì°¸ê°€í•´ì„œ ì •ë¦¬ë¥¼ í–ˆê³ , ë‚´ìš©ì´ ê´œì°®ìœ¼ë©´ ì´ë¥¼ ì •ë¦¬í•´ì„œ ë¸”ë¡œê·¸ì— ì—…ë¡œë“œë¥¼ í•˜ë˜ê°€ íŒ€ì›ë“¤ì—ê²Œ ê³µìœ ë¥¼ í–ˆë‹¤. ë°°ìš°ê³  ê³µë¶€í•˜ëŠ”ê²Œ ì¬ë°Œì—ˆë˜ ê²ƒ ê°™ì•˜ë‹¤. íŒ€ ë‚´ë¶€ì ìœ¼ë¡œë„ ìŠ¤í„°ë””ê°€ ê³„ì† ì§€ì†ë˜ì—ˆì—ˆê³  êµ¬ë§¤í™•ë¥  ì˜ˆì¸¡ê³¼ ê°™ì€ ì—…ë¬´ ë‚´ìš©ë„ í¥ë¯¸ë¡œì› ë‹¤. </p><p> 3ì›” 4ì›”ì—ëŠ” <code>ìƒˆë¡œìš´ íŒ€ì›</code>ë“¤ì´ ë“¤ì–´ì™€ì„œ íŒ€ ê·œëª¨ê°€ ì»¤ì¡Œë‹¤.  ìƒˆ íŒ€ì› ì¤‘ í•œ ë¶„ì€ ê¸°ì¡´ì— ì„œë¹„ìŠ¤ë˜ê³  ìˆë˜ ëª¨ë¸ì— ê´€ì‹¬ì´ ë§ì•˜ê³ , í•´ë‹¹ ë¶„ì•¼ë¥¼ ë‹¤ë¤„ë³¸ ê²½í—˜ë„ ìˆì–´ ëª¨ë¸ì„ ê³ ë„í™”í•´ë³´ê¸°ë„ í–ˆë‹¤. ëª¨ë¸ ê³ ë„í™” ì¸¡ë©´ ë¿ ì•„ë‹ˆë¼, ìƒˆ ì‚¬ëŒë“¤ì´ ë“¤ì–´ì˜¤ë‹ˆ ìƒˆë¡œìš´ ì‹œê°ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ëŒì•„ë³¼ ìˆ˜ë„ ìˆì—ˆê³  ì—…ë¬´ ë‚´ìš©ì— ëŒ€í•´ ë‹¤ì–‘í•œ ë…¼ì˜ë¥¼ í•  ìˆ˜ ìˆì—ˆë‹¤. ì½”ë¡œë‚˜ê°€ ì´ ë•Œ ê°‘ìê¸° ì‹¬í•´ì§€ê¸° ì‹œì‘í•˜ë©´ì„œ í–‰ë™ì— ì œì•½ì´ ìƒê¸°ê¸° ì‹œì‘í–ˆì§€ë§Œ, ê¸°ì¡´ TFT íŒ€ì›ë“¤ì˜ ì—…ë¬´ëŠ¥ë ¥ë“¤ì´ ì¡°í™”ë¥¼ ì´ë£¨ë©´ì„œ 1ë…„ë„ ì•ˆë˜ëŠ” ì‹œê°„ë§Œì—, ë‚˜ë¦„ ë°ì´í„° íŒ€ ë‹µê²Œ ì¼ì„ í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤ê³  ìƒê°í–ˆë‹¤. 6ì›”ì—ëŠ” ì œì£¼ë„ ì—¬í–‰ì„ ë– ë‚¬ë‹¤.</p><h2 id="7ì›”-ë¶€í„°-12ì›”ì€"><a href="#7ì›”-ë¶€í„°-12ì›”ì€" class="headerlink" title="7ì›” ë¶€í„° 12ì›”ì€"></a>7ì›” ë¶€í„° 12ì›”ì€</h2><p> ì–´ë–¤ ì¼ì— ì œëŒ€ë¡œ ë§ˆìŒë¨¹ê¸° ì‹œì‘í•  ë•Œ í•­ìƒ ì œë™ì´ ê±¸ë ¸ë‹¤. ê°œì¸ì ì¸ ì¼ì´ë“  ì—…ë¬´ì ì¸ ì¼ì´ë“  ì œëŒ€ë¡œ í•˜ë ¤ê³  í•˜ë©´ ì˜ ì•ˆëë‹¤. <code>ë­ë“  ê°„ì— ì‚¬ëŒì´ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤ëŠ” ê±¸ ì œëŒ€ë¡œ ëŠë¼ê²Œ ë˜ì—ˆë‹¤.</code> ê°œì¸ì ì¸ ì¼ì€ ì œì³ë‘ê³  ì¼ì— ëŒ€í•´ì„œë§Œ ìƒê°í•´ë³´ì. í•˜ë°˜ê¸°ê°€ í˜ëŸ¬ê°€ë©´ì„œ í‡´ì‚¬ìë¶„ë“¤ì´ ë§ì´ ë‚˜ì™”ë‹¤. ê°œë°œíŒ€ì—ì„œ íŠ¹íˆ ë§ì´ ë‚˜ì™”ëŠ”ë°, ì˜¤ë˜ ê³„ì…¨ë˜ ë¶„ë“¤ì´ ì£¼ë¡œ ë‚˜ê°€ê²Œ ë˜ì—ˆê³ , ì´ë¡œ ì¸í•´ íšŒì‚¬ ë¶„ìœ„ê¸°ê°€ ì–´ìˆ˜ì„ í–ˆì—ˆë‹¤. íŒ€ ë‚´ë¶€ì ìœ¼ë¡œë¼ë„ ê²°ì†ì‹œí‚¤ê³  ì‹¶ì—ˆê³ , ë­ë“  ìƒˆë¡œ í•˜ëŠ” ì¼ì— ì—´ì‹¬íˆ í•˜ë ¤ê³  í–ˆê³  ìƒˆ ë§ˆìŒê°€ì§ì„ ê°€ì§€ë ¤ê³  í–ˆëŠ”ë°, ì˜†ì— ìˆëŠ” ë™ë£Œê°€ í˜ë“¤ì–´í•˜ë‹ˆ ì˜ ì•ˆë˜ë”ë¼. ì• ë§¤í•œ ìƒíƒœë¡œ ì‹œê°„ì´ ì§€ë‚¬ê³ , ê²°êµ­ ëª‡ ëª…ì´ íŒ€ì„ ë– ë‚˜ê²Œ ë˜ì—ˆë‹¤. ê·¸ ì¤‘ì—ëŠ” ì˜¤ë˜ ì¼ì„ ê°™ì´ í•˜ê³  ë¯¿ì—ˆë˜ ë™ë£Œë„ ìˆì—ˆë‹¤. ë•ë¶„ì— ë°ì´í„° ì—”ì§€ë‹ˆì–´ë§ íŒŒíŠ¸ì— ëŒ€í•´ì„œ ì¸ìˆ˜ì¸ê³„ë¥¼ ë°›ê²Œë˜ê³  ì—…ë¬´ë¥¼ ì‹œì‘í•˜ê²Œ ë˜ì—ˆë‹¤. ì´ì™€ ë”ë¶ˆì–´ ì—¬ëŸ¬ê°€ì§€ ì¼ì´ í•œêº¼ë²ˆì— ë®ì¹˜ë©´ì„œ ë©˜íƒˆ ì±™ê¸°ê¸°ê°€ í˜ë“¤ì–´ì¡Œë‹¤. ê±°ê¸°ì— ì½”ë¡œë‚˜ê¹Œì§€ ë‚œë¦¬ë¥¼ ì³ëŒ€ëŠ” ë°”ëŒì— í—¬ìŠ¤ì¥ì´ ë¬¸ì„ ë‹«ê²Œ ë˜ì—ˆê³ , ê±°ì˜ ìœ ì¼í•œ ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ ì°½êµ¬ì´ì, ë‚˜ì—ê²Œ ì§‘ì¤‘í•  ìˆ˜ ìˆëŠ” ì‹œê°„ì´ì—ˆë˜ <code>ìš´ë™ì‹œê°„</code>ì´ ì‚¬ë¼ì§€ê²Œ ë˜ì—ˆë‹¤. </p><p> ìš´ë™ì„ ê³„ì†í•˜ë‹¤ê°€ ì•ˆí•˜ê²Œ ë˜ë‹ˆê¹Œ ìŠ¤íŠ¸ë ˆìŠ¤ì— ëŒ€ì‘í•˜ëŠ”ê²Œ ë§ì´ í˜ë“¤ì–´ì¡Œë‹¤. ì—…ë¬´ì ìœ¼ë¡œ í˜ë“¤ê±°ë‚˜ ë‹¤ë¥¸ ì¼ë¡œ í˜ë“¤ì–´ë„ í—¬ìŠ¤ì¥ì— ê°€ì„œ ìš´ë™ í•œë²ˆ í•˜ê³  ì˜¤ë©´ ë§ë”í•˜ê²Œ ê³ ë¯¼ì´ ì‚¬ë¼ì¡ŒëŠ”ë°, ê·¸ëŸ´ ìˆ˜ ì—†ì—ˆë‹¤. ë™ì‹œì— ëª©ê³¼ ì–´ê¹¨ê°€ ì•„í”„ê¸° ì‹œì‘í•´ì„œ ì¼ì— ì§‘ì¤‘í•˜ê¸°ë„ í˜ë“¤ì–´ì¡Œë‹¤. í‰ì†ŒëŒ€ë¡œë¼ë©´ ë„ìˆ˜ì¹˜ë£Œë¼ë„ ë°›ìœ¼ëŸ¬ ê°€ê² ì§€ë§Œ, êµ‰ì¥íˆ ë°€ì ‘í•˜ê²Œ ì ‘ì´‰í•´ì•¼í•˜ëŠ” í™˜ê²½ì´ë¼ ê°€ê¸°ê°€ êº¼ë ¤ì¡Œë‹¤. ì ê¹ í˜ë“¤ì–´í–ˆì—ˆëŠ”ë°, â€˜ê·¸ë˜ ê·¼ë° ë­ ì–´ì©Œë¼ê³ â€™ í•˜ëŠ” ìƒê°ìœ¼ë¡œ ë‹¤ì‹œ ë›°ê¸° ì‹œì‘í–ˆë‹¤. ë¯¸ì„¸ë¨¼ì§€ê°€ ì—„ì²­ ì‹¬í•˜ì§€ ì•Šìœ¼ë©´ ë‚˜ê°€ì„œ 3í‚¤ë¡œ ì´ìƒ ë›°ì—ˆë˜ ê²ƒ ê°™ë‹¤. ìš´ë™í•˜ë‹ˆê¹Œ í™•ì‹¤íˆ ë‚˜ì•„ì¡Œë‹¤. ëª¸ì˜ ë³‘ì´ë“  ë§ˆìŒì˜ ë³‘ì´ë“  ì¼ë‹¨ ì›€ì§ì—¬ì•¼ ë‚«ëŠ” ê²ƒ ê°™ë‹¤.</p><h2 id="ë‹¤ì‹œ"><a href="#ë‹¤ì‹œ" class="headerlink" title="ë‹¤ì‹œ"></a>ë‹¤ì‹œ</h2><p> ë©˜íƒˆì´ ì¢€ ë‚˜ì•„ì§€ë‹ˆ íŒ€ì„ ì¢€ ì¶”ìŠ¤ë ¤ì•¼ê² ë‹¤ëŠ” ìƒê°ì„ í–ˆë‹¤. ê°‘ìê¸° ì¸ì›ì¡°ì •ì„ í•˜ê²Œ ë˜ì—ˆê³ , ì—…ë¬´ ë‹´ë‹¹ìë„ ë°”ë€Œê²Œ ë˜ì–´ ì •ë¦¬ë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ í˜¼ë€ì´ ìˆì„ ê²ƒ ê°™ì•˜ë‹¤. ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ ê³ ë¯¼í•˜ë‹¤ê°€, ì–´ë””ì„œë¶€í„° ì˜ëª»ë˜ì—ˆì„ê¹Œ, ë­˜ ì•ˆí•˜ê¸° ì‹œì‘í–ˆì„ê¹Œ ìƒê°í–ˆë‹¤. íŒ€ì´ í˜ë“¤ì–´ì§€ë©´ì„œëŠ” 10ì‹œì— í–ˆì—ˆë˜ ìŠ¤í¬ëŸ¼ ë¯¸íŒ…ì´ ìƒëµë˜ì—ˆê³  ì½”ë“œ ë¦¬ë·°, ë¬¸ì„œ ì •ë¦¬, íŒ€ ë‚´ë¶€ ë¯¸íŒ…ê³¼ ìŠ¤í„°ë”” ë“±ì´ ì ì°¨ì ìœ¼ë¡œ ì‚¬ë¼ì§€ê²Œ ë˜ì—ˆë‹¤. ê°œì¸ì´ ë§¡ì€ ì—…ë¬´ë§Œ í•˜ê²Œ ë˜ê³  ì–»ì€ ì§€ì‹ì€ ê³ ì‚¬í•˜ê³  ì§„í–‰ì‚¬í•­ë„ íŒŒì•…í•˜ê¸° í˜ë“¤ì–´ì¡Œë‹¤. ì—¬ê¸°ì„œë¶€í„° ì‹œì‘í•´ì•¼ê² ë‹¤ê³  ìƒê°í–ˆë‹¤. ì•„ë§ˆ ë‚¨ì€ íŒ€ì›ë“¤ ëª¨ë‘ ì´ë ‡ê²Œ ìƒê°í–ˆì„ ê²ƒ ê°™ë‹¤. ë‹¹ì¥ <code>ìŠ¤í¬ëŸ¼</code>ì„ ë‹¤ì‹œ ì¬ê°œí–ˆê³  í•˜ë£¨ì— ì–´ë–¤ ì¼ì„ í•  ê±´ì§€ ì§€ë‚œ ì—…ë¬´ ì§„í–‰ìƒí™©ê³¼ ì–´ë ¤ìš´ ì ì„ ê°„ëµí•˜ê²Œ ì–˜ê¸°í–ˆë‹¤. ìŠ¤í¬ëŸ¼ì—ì„œ ë‹¤ ê°™ì´ ë…¼ì˜í•´ì„œ í•´ì•¼í•  ë¬¸ì œê°€ ìˆìœ¼ë©´ ë¯¸íŒ…ì„ ì¡ì•„ì„œ ë”°ë¡œ ì–˜ê¸°í–ˆë‹¤. ì´ëŸ° ìƒí™©ì—ì„œ ë°ì´í„° íŒ€ì„ ìœ„í•œ ì¹¸ë°˜ë³´ë“œê°€ í•„ìš”í•˜ë‹¤ëŠ” ì˜ê²¬ì´ ë‚˜ì™”ê³ , í•´ì™¸ ê¸°ì—…ë“¤ì˜ ë°ì´í„° ì¡°ì§ì˜ ìŠ¤í¬ëŸ¼ ë°©ì‹ê³¼ ì¹¸ë°˜ë³´ë“œ ë“±ì„ ì¡°í•©í•´ì„œ ìš°ë¦¬ë§Œì˜ ì¹¸ë°˜ë³´ë“œë¥¼ ë§Œë“¤ì–´ëƒˆë‹¤(ë¬¼ë¡  ë¸”ë¡œê·¸ì˜ ë‹¤ìŒ ê¸€ì€ ì´ ë‚´ìš©ì´ ë  ê²ƒì´ë‹¤). ì—…ë¬´ ë‚´ìš©ì„ ì •ë¦¬í•˜ê³  ë‚´ë…„ì— ë‹¨ê¸°ì ìœ¼ë¡œ ê·¸ë¦¬ê³  ì¥ê¸°ì ìœ¼ë¡œ í•´ì•¼í•  ì¼ë“¤ì„ ì‘ì„±í–ˆë‹¤. ì´ë ‡ê²Œ ì •ë¦¬í•˜ê³  ë‚˜ë‹ˆ í•˜ë£¨í•˜ë£¨ ë­˜ í•´ì•¼í• ì§€ ëª…í™•í•´ì¡Œê³  ì–´ë–¤ ë‚´ìš©ì„ ê³µë¶€í• ì§€ë„ ì •í•´ì¡Œë‹¤. ìŠ¤í„°ë””ê°€ ìì—°ìŠ¤ë ˆ í•„ìš”í•´ì¡Œë‹¤. íŒ€ì›ë“¤ë¼ë¦¬ ëª¨ì—¬ì„œ ì–´ë–¤ ë‚´ìš©ì„ ê°™ì´ ê³µë¶€í• ì§€ ì˜ë…¼í–ˆê³  ê·¸ ë‚´ìš©ì— ëŒ€í•œ ë„ì„œë¥¼ êµ¬ë§¤í•˜ê²Œ ë˜ì—ˆë‹¤. ë¬¼ë¡  ì•„ì§ ì—¬ëŸ¬ ê±±ì •ê±°ë¦¬ë“¤ì´ ë‚¨ê¸´í–ˆì§€ë§Œ, ì ì€ íŒ€ì›ë“¤ë¡œë„ í•  ìˆ˜ ìˆêµ¬ë‚˜ë€ ìƒê°ì´ ë“¤ì—ˆê³ , ì–´ë–¤ ì—…ë¬´ì— ëŒ€í•´ì„œ ì¸ì›ì„ ì¶©ì›í•´ì•¼í•  ì§€ë„ ëª…í™•í•´ì§„ ê²ƒ ê°™ë‹¤. ê·¸ë¦¬ê³  íŒ€ì´ ì˜ˆì „ê³¼ ë¹„ìŠ·í•œ ì •ë„ì˜ í™œê¸°ë¥¼ ë˜ì°¾ê²Œ ë˜ì—ˆë‹¤. ë§ˆìŒì´ ì˜ ë§ëŠ” ì‚¬ëŒë“¤ì´ë¼ ì •ë§ ë‹¤í–‰ì´ê³  ê°ì‚¬í•˜ë‹¤. ì¢‹ì€ ì‚¬ëŒë“¤ì´ë‹¤.</p><hr><h2 id="ë‚¨ì€-2020ë…„ì—ëŠ”-ì—°ì°¨ë¥¼-ì¼ë‹¤"><a href="#ë‚¨ì€-2020ë…„ì—ëŠ”-ì—°ì°¨ë¥¼-ì¼ë‹¤" class="headerlink" title="ë‚¨ì€ 2020ë…„ì—ëŠ” ì—°ì°¨ë¥¼ ì¼ë‹¤"></a>ë‚¨ì€ 2020ë…„ì—ëŠ” ì—°ì°¨ë¥¼ ì¼ë‹¤</h2><p> ì—°ì°¨ë¥¼ ê³„ì‚°í•´ë³´ë‹ˆ ìƒê°ë³´ë‹¤ ë§ì´ ë‚¨ì•„ì„œ 24ì¼ë¶€í„° ë‚¨ì€ ì—°ì°¨ë¥¼ ëª¨ë‘ ì¼ë‹¤. ê·¸ëŸ¬ë‹ˆê¹Œ ê¸€ì„ ì“°ê³ ë‚œ ë‚´ì¼ì—ë„ ë‚˜ëŠ” ì¶œê·¼ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤. ë‹¹ì¥ ë‚´ì¼ì€ í• ê²Œ ì¢€ ë§ì•„ ë³´ì¸ë‹¤. íšŒì‚¬ì—ì„œ ì‘ì„±í•˜ë¼ëŠ” Self Reviewë¥¼ ëŠ¦ì¥ë¶€ë¦¬ë‹¤ê°€ ëª» ì¼ê¸° ë•Œë¬¸ì´ë‹¤. ë‚´ì¼ì€ SRì„ ë§ˆì € ì“°ê³  ì‚¬ë†“ì€ ì±…ë“¤ì„ ì°¬ì°¬íˆ ë³¼ ì˜ˆì •ì´ë‹¤. ë‹¤í–‰íˆë„ ì˜¤ëŠ˜ê¹Œì§€ ë³´ê³ ì‹¶ì—ˆë˜ ë„·í”Œë¦­ìŠ¤ì˜ ìŠ¤ìœ„íŠ¸í™ˆì„ ëª°ì•„ì„œ ë‹¤ ë´¤ê³ , ì›¹íˆ°ê¹Œì§€ 3ë§Œì›ì„ ê²°ì œí•´ì„œ ê²°ë§ê¹Œì§€ ë´ë²„ë ¸ë‹¤. ë°©í•´í• ê²Œ ì•„ë¬´ê²ƒë„ ì—†ì–´ì„œ ë§˜ í¸íˆ ì±…ì„ ë³´ê³  ê³µë¶€í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤. ë‹¤ë§Œ í•˜ë‚˜ ê±¸ë¦¬ëŠ” ì ì´ ìˆë‹¤ë©´ ëª©ë¼ˆê°€ ë„ˆë¬´ ì•„í”„ë‹¤ëŠ” ê±´ë°, ì–¼ë¥¸ ê³ ì³ë²„ë ¤ì„œ ë­˜ í•˜ë“  ì œì•½ì— ê±¸ë¦¬ì§€ ì•Šê³  ë°”ë¡œ í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ì•¼ê² ë‹¤. 2020ë…„ì´ ë‹¤ ê°€ê¸° ì „ì— ë‚¨ì€ í˜ë“  ì ê³¼ ê¸°ë¶„ì¢‹ì•„ì§€ê²Œ í•˜ëŠ” ì ë“¤ì„ ì¨ë†“ì•„ì•¼ê² ë‹¤.</p><h3 id="í˜ë“ -ê²ƒë“¤"><a href="#í˜ë“ -ê²ƒë“¤" class="headerlink" title="í˜ë“  ê²ƒë“¤"></a>í˜ë“  ê²ƒë“¤</h3><ul><li>ëª©ê³¼ ì–´ê¹¨ê°€ ìŠ¤íŠ¸ë ˆì¹­ì„ í•´ë„ ì•„í”„ë‹¤. ì ì–´ë„ í•œ 5ë…„ì¹˜ ë¬µí˜€ë†“ì€ ê±°ë¼ ì˜ ì•ˆí’€ë¦¬ê² ì§€ë§Œ ì¹˜ë£Œí•´ë³´ì.</li><li>í•˜ë„ ê·¼ë ¥ìš´ë™ì„ ì•ˆí•˜ë‹¤ ë³´ë‹ˆ ê·¼ìœ¡ì´ ë§ì´ ë¹ ì§€ê³  ì‚´ì´ ìª˜ë‹¤. ë§¨ëª¸ìš´ë™ ì—´ì‹¬íˆ í•˜ì.</li><li>ì—°ë§ì´ ë˜ë‹ˆ ì¸ê°„ê´€ê³„ì— ëŒ€í•´ ìƒê°ì´ ë§ì•„ì§„ë‹¤. ì ê²Œ ìƒê°í•˜ê³  ì—°ë½ì´ë‚˜ í•œ ë²ˆ í•´ë³´ì.</li><li>ë­ê°€ í˜ë“ ì§€ ì‚¬ì‹¤ ëŒ€ì¶© ìƒê°í•´ë†¨ì—ˆëŠ”ë°, ê·¸ ì¤‘ í•˜ë‚˜ëŠ” 1ë…„ì„ íšŒê³ í•˜ë ¤ëŠ” ìƒê°ì— ë§ˆìŒì´ ë§ì´ ë¬´ê±°ì› ë‹¤ëŠ” ì ì´ë‹¤. ê²°ì½” ì˜¬ í•´ëŠ” ì•ˆ ì¢‹ì•˜ë˜ ë‚ ì´ ì¢‹ì•˜ë˜ ë‚ ë³´ë‹¤ ë§ì•˜ë˜ ë‚  ê°™ê³  ë­”ê°€ ë’¤ìˆ­ìˆ­í–ˆë‹¤. ê·¸ëŸ°ë° ê¸€ì„ ì“°ë‹¤ë³´ë‹ˆ ê´œì°®ì•„ì¡Œë‹¤. ë‹¤ ì“°ê³ ë³´ë‹ˆ ì‘ë…„ë³´ë‹¤ ê³ ë¯¼ì´ ì¢€ ì—†ì–´ì§„ ê²ƒ ê°™ê¸°ë„ í•˜ê³ â€¦</li></ul><h3 id="ê¸°ë¶„-ì¢‹ì•„ì§€ê²Œ-í•˜ëŠ”-ê²ƒë“¤"><a href="#ê¸°ë¶„-ì¢‹ì•„ì§€ê²Œ-í•˜ëŠ”-ê²ƒë“¤" class="headerlink" title="ê¸°ë¶„ ì¢‹ì•„ì§€ê²Œ í•˜ëŠ” ê²ƒë“¤"></a>ê¸°ë¶„ ì¢‹ì•„ì§€ê²Œ í•˜ëŠ” ê²ƒë“¤</h3><ul><li>ì½”ë¡œë‚˜ê°€ ì‹¬í•´ì§€ë©´ì„œ ì¬íƒê·¼ë¬´ê°€ ì‹œì‘ë˜ì—ˆë‹¤. 3ì¼ì— í•œë²ˆ ì¬íƒì„ í•˜ëŠ” ê±°ê¸´ í•˜ì§€ë§Œ, ê²½ê¸°ë„ì—ì„œ ì¶œí‡´ê·¼í•˜ë‹¤ê°€ 1ì´ˆë§Œì— ì¶œí‡´ê·¼í•˜ê²Œ ë˜ëŠ”ê²Œ ë„ˆë¬´ í–‰ë³µí•˜ë‹¤. ë¬¼ë¡  ì¼ì€ ê³„ì† ì¡ê³ ìˆê²Œ ë˜ì„œ ê³ ë¯¼ì´ê¸´ í•˜ì§€ë§Œ.</li><li>ê³¨ìˆ˜ ë‚˜ì–¼ íŒ¬ì¸ë° ìµœê·¼ì— ë‚˜ì–¼ ë‹˜ì´ ìœ íŠœë¸Œë¥¼ ì‹œì‘í–ˆë‹¤.  <code>ë‚˜ì–¼ì˜ ìŒì•…ì„¸ê³„</code> í•œ 10ë…„ ì „ì— KBS ì‹¬ì•¼ ë¼ë””ì˜¤ì—ì„œ ì§„í–‰í–ˆë˜ í”„ë¡œê·¸ë¨ ëª…ê³¼ ë™ì¼í•˜ë‹¤. ì¼ë‹¨ ì ì„ ìì•¼í•´ì„œ ë¼ë””ì˜¤ë¥¼ ë…¹ìŒí•˜ê³  ë‹¤ìŒ ë‚ ì— ì±™ê²¨ ë“¤ì—ˆì—ˆë˜ ê¸°ì–µì´ ìˆë‹¤. ê·¼ë° ì´ì œ í† ìš”ì¼ë§ˆë‹¤ ìœ íŠœë¸Œì—ì„œ LPíŒìœ¼ë¡œ ë‚˜ì–¼ í˜•ì´ ì§ì ‘ í‹€ì–´ì¤€ë‹¤. ì˜›ë‚  ìƒê°ë‚˜ê³  ë„ˆë¬´ í–‰ë³µí•˜ë‹¤.</li><li>ì§ì ‘ ë§Œë“  <code>ì‚¬ê³¼ì¼</code>ì´ ë„ˆë¬´ ë§›ìˆë‹¤. ì¬íƒí• ë•Œ ì•„ì¹¨ë§ˆë‹¤ ë¹µì´ë‘ ë¨¹ì—ˆëŠ”ë° ì‚´ ë§ì´ ìª˜ë‹¤.</li><li>ì˜¤ëŠ˜ ê¸€ì„ ì“°ë‹¤ê°€ â€˜Justice Derâ€™ë¼ëŠ” ê¸°íƒ€ ì•„í‹°ìŠ¤íŠ¸ë¥¼ ì•Œê²Œ ë˜ì—ˆë‹¤. ìœ íŠœë¸Œì— ë˜ í˜œììŠ¤ëŸ½ê²Œ 2ì‹œê°„ 40ë¶„ì§œë¦¬ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ì–´ë’€ë‹¤. ì ì–´ë„ 1ì£¼ì¼ì€ ë“¤ì„ ê²ƒ ê°™ë‹¤. </li></ul>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2020/12/27/20201227/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Airflow EC2ì— êµ¬ì¶•í•˜ê¸°</title>
      <link>http://tkdguq05.github.io/2020/12/13/airflow-on-ec2/</link>
      <guid>http://tkdguq05.github.io/2020/12/13/airflow-on-ec2/</guid>
      <pubDate>Sun, 13 Dec 2020 08:05:59 GMT</pubDate>
      <description>
      
        &lt;p&gt;Airflowë¥¼ AWS EC2ì—ì„œ ì‹¤í–‰ì‹œì¼œ ë³´ì!&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>Airflowë¥¼ AWS EC2ì—ì„œ ì‹¤í–‰ì‹œì¼œ ë³´ì!</p><a id="more"></a><h2 id="AWS-EC2-ìœ„ì—-Airflow-êµ¬ì¶•í•˜ê¸°"><a href="#AWS-EC2-ìœ„ì—-Airflow-êµ¬ì¶•í•˜ê¸°" class="headerlink" title="AWS  EC2 ìœ„ì— Airflow êµ¬ì¶•í•˜ê¸°"></a>AWS  EC2 ìœ„ì— Airflow êµ¬ì¶•í•˜ê¸°</h2><p>Airflowë¥¼ ë¡œì»¬ì— êµ¬ì¶•í•  ìˆ˜ë„ ìˆì§€ë§Œ ì•ˆì •ì„±ì„ ìœ„í•´ì„œë¼ë©´ êº¼ì§€ì§€ ì•ŠëŠ” ì»´í“¨í„°ì— Airflowë¥¼ êµ¬ì¶•í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì…ë‹ˆë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” ì‹¤ì œ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ì„œ Airflowë¥¼ EC2 ìœ„ì— êµ¬ì¶•í•˜ëŠ” ë‚´ìš©ì„ ë‹´ì•„ë³´ê² ìŠµë‹ˆë‹¤.</p><p>Airflowì— ëŒ€í•œ ê¸°ë³¸ ê°œë…ì´ ê¶ê¸ˆí•˜ì‹  ë¶„ë“¤ì€ <a href="https://tkdguq05.github.io/2020/03/14/airflow-start/#more">Airflow Basic</a> ì„ í™•ì¸í•˜ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤.</p><h2 id="ì¤€ë¹„ë¬¼"><a href="#ì¤€ë¹„ë¬¼" class="headerlink" title="ì¤€ë¹„ë¬¼"></a>ì¤€ë¹„ë¬¼</h2><p>Airflowë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•´ì„œëŠ” ì¤€ë¹„ë¬¼ì´ í•„ìš”í•©ë‹ˆë‹¤. ì²«ë²ˆì§¸ë¡œëŠ” EC2 ì„œë²„ì…ë‹ˆë‹¤. ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì´ì¦ˆê°€ ì‘ì•„ë„ í¬ê²Œ ìƒê´€ì€ ì—†ê² ì§€ë§Œ ì—¬ìœ ë¡­ê²Œ t3.largeë¥¼ ì„ íƒí•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ì¸ìŠ¤í„´ìŠ¤ ì„¤ì •ì´ ëë‚˜ë©´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ë°”ë¡œ ì¸ìŠ¤í„´ìŠ¤ ì•ˆìœ¼ë¡œ ë“¤ì–´ê°€ ë³´ë„ë¡ í•©ë‹ˆë‹¤.</p><p>ssh ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ì„œ ì¸ìŠ¤í„´ìŠ¤ ì£¼ì†Œë¥¼ ì…ë ¥í•´ ì ‘ì†í•©ë‹ˆë‹¤. ì ‘ì†ì´ ì•ˆëœë‹¤ë©´ ë³´ì•ˆê·¸ë£¹ì—ì„œ 22ë²ˆ í¬íŠ¸ë¥¼ ì—´ì–´ì¤ì‹œë‹¤.</p><p>ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ Airflowë¥¼ êµ¬ì¶•í•´ ë³¼ ê²ƒì…ë‹ˆë‹¤. êµ¬ì¶• ì‹œì— í™•ì¸í•´ì•¼ í•  ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ì–´ ë‘¡ë‹ˆë‹¤.</p><ul><li><input disabled="" type="checkbox"> Airflow ê¸°ë³¸ ì„¸íŒ…</li><li><input disabled="" type="checkbox"> Redis</li><li><input disabled="" type="checkbox"> MySQL</li><li><input disabled="" type="checkbox"> ê¸°íƒ€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜</li><li><input disabled="" type="checkbox"> AMI ì´ë¯¸ì§€ ìƒì„±í•˜ê¸°</li></ul><p>ë§ˆì§€ë§‰ì— ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ëŠ” ì´ìœ ëŠ” ì´ ì‘ì—…ì„ ë°˜ë³µí•˜ë ¤ë©´ ë„ˆë¬´ ê·€ì°®ê³  í˜ë“¤ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì™„ë²½íˆ êµ¬ì¶•ì´ ë˜ê³  ì˜ ëŒì•„ê°€ëŠ” Airflow ì´ë¯¸ì§€ë¥¼ ìƒì„±í•´ ë‘ë©´ ë‚˜ì¤‘ì— í™œìš©í•  ì¼ì´ ë§ìŠµë‹ˆë‹¤. Airflowë¥¼ í´ëŸ¬ìŠ¤í„°í™” í•œë‹¤ë˜ê°€ ê·¸ëŸ° ê³³ì— ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ë©´ ì‰½ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ë ˆí¬ë¦¬ìŠ¤íŠ¸ì—ëŠ” Redisì™€ MySQLì´ í¬í•¨ë˜ì–´ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ ì„¸íŒ…ìœ¼ë¡œ ì‹¤í–‰í•´ë„ ìƒê´€ì—†ì§€ë§Œ ê¸°ë³¸ ì„¸íŒ…ì˜ ExecutorëŠ” Sequential Executorë¡œ ë³‘ë ¬ë¡œ Taskë¥¼ ìˆ˜í–‰í•  ìˆ˜ë°–ì— ì—†ìŠµë‹ˆë‹¤. ì‹¤ì œ ì„œë¹„ìŠ¤ì—ëŠ” ë§ì€ Taskê°€ ë™ì‹œì— ì‹¤í–‰í•´ì•¼ í•  ê²½ìš°ê°€ ìì£¼ ë°œìƒí•˜ë¯€ë¡œ ë³‘ë ¬ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•œ Celery Executorë¥¼ ì‚¬ìš©í•  ê²ƒì´ê³  ì´ ExecutorëŠ” ë©”ì‹œì§€ ë¸Œë¡œì»¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë©”ì‹œì§€ ë¸Œë¡œì»¤ì—ëŠ” RabbitMQë‚˜ Redis ë“±ì´ ì‚¬ìš©ë˜ëŠ”ë° ì´ë²ˆ ê¸€ì—ì„œëŠ” Redisë¥¼ ì‚¬ìš©í•´ ë³´ê² ìŠµë‹ˆë‹¤. </p><hr><h2 id="ê¸°ë³¸-ì„¸íŒ…ì—-ëŒ€í•œ-ì˜ë¬¸ì "><a href="#ê¸°ë³¸-ì„¸íŒ…ì—-ëŒ€í•œ-ì˜ë¬¸ì " class="headerlink" title="ê¸°ë³¸ ì„¸íŒ…ì— ëŒ€í•œ ì˜ë¬¸ì "></a>ê¸°ë³¸ ì„¸íŒ…ì— ëŒ€í•œ ì˜ë¬¸ì </h2><h3 id="Redis-vs-RabbitMQ"><a href="#Redis-vs-RabbitMQ" class="headerlink" title="Redis vs RabbitMQ?"></a>Redis vs RabbitMQ?</h3><p>RedisëŠ” NoSQL DBë¡œ ì˜ ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤. In Memeory ë°©ì‹ì´ë©° key-valueë°ì´í„° êµ¬ì¡° ìŠ¤í† ì–´ ì´ê¸° ë•Œë¬¸ì— ë¹ ë¥¸ Read, Write ì„±ëŠ¥ì„ ë³´ì¥í•©ë‹ˆë‹¤.</p><p>RabbitMQëŠ” DBë³´ë‹¤ëŠ” ë©”ì„¸ì§• ë¸Œë¡œì»¤ë¡œ ì˜ ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤. ë©”ì‹œì§€ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì§€ì›í•˜ë©° í¬ê³  ë³µì¡í•œ ë©”ì‹œì§€ë¥¼ ë‹¤ë£°ë•Œ ì í•©í•©ë‹ˆë‹¤.</p><p>Airflowì˜ ë¸Œë¡œì»¤ë¡œ ì–´ë–¤ê±¸ ì‚¬ìš©í• ì§€ëŠ” í˜„ì¬ ì„œë¹„ìŠ¤í•  ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œì„¸ìŠ¤ì— ë”°ë¼ íŒë‹¨í•˜ë©´ ë©ë‹ˆë‹¤. ì œê°€ êµ¬ì¶•í•  ì„œë¹„ìŠ¤ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œì„¸ìŠ¤ì—ëŠ” ë³µì¡í•œ ë©”ì‹œì§€ë¥¼ ë‹¤ë£¨ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ì œê°€ íŒë‹¨í•˜ê¸°ì— ì´ ì„œë¹„ìŠ¤ì—ëŠ” ì†ë„ê°€ ë” ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ In Memory ë°©ì‹ì˜ Redisì€ ì„±ëŠ¥ì´ ë³´ì¥ë˜ê¸° ë•Œë¬¸ì— Redisë¡œ ì„ íƒì„ í–ˆìŠµë‹ˆë‹¤. Airflowë¥¼ êµ¬ì¶•í•˜ì‹œëŠ” ë¶„ë“¤ë„ ë¬´ì‘ì • ë”°ë¼í•˜ê¸°ë³´ë‹¤ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒê°í•´ë³´ì‹œê³  ì•Œë§ëŠ” ë¡œì§ì— ë”°ë¼ ì–´ë–¤ê±¸ ì‚¬ìš©í• ì§€ ì„ íƒí•˜ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p><blockquote><p><strong>ì°¸ê³ ! Celeryë€?</strong><br>Celery ëŠ” Python ìœ¼ë¡œ ì‘ì„±ëœ ë¶„ì‚° ë©”ì‹œì§€ ì „ë‹¬ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ë¹„ë™ê¸° ì‘ì—… íë¡œ, Worker ì˜ í•œ ì¢…ë¥˜ì…ë‹ˆë‹¤.<br>ë³„ë„ë¡œ ì‹¤í–‰ ì¤‘ì¸ Worker Processê°€ Brokerë¡œë¶€í„° Messageë¥¼ ì „ë‹¬ ë°›ì•„ ì‘ì—…ì„ ëŒ€ì‹  ìˆ˜í–‰í•´ ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.<br>ì¶œì²˜ : <a href="https://velog.io/@jisoo1170/Redis-RabbitMQ-%EC%B0%A8%EC%9D%B4%EC%A0%90%EC%9D%84-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90">https://velog.io/@jisoo1170/Redis-RabbitMQ-%EC%B0%A8%EC%9D%B4%EC%A0%90%EC%9D%84-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90</a></p></blockquote><h3 id="Sqlite-vs-MySQL"><a href="#Sqlite-vs-MySQL" class="headerlink" title="Sqlite vs MySQL?"></a>Sqlite vs MySQL?</h3><p>ë˜í•œ Airflowì˜ meta storeëŠ” sqliteì¸ë° sqliteë¡œëŠ” Hello World ì •ë„ë§Œ í…ŒìŠ¤íŠ¸í•  ì •ë„ì˜ ìˆ˜ì¤€ì´ê¸° ë•Œë¬¸ì— MySQLì„ DBë¡œ ì‚¬ìš©í•´ ë³¼ ê²ƒì…ë‹ˆë‹¤. ë³´í†µ sqliteëŠ” ë¡œì»¬ì—ì„œ í˜¼ì ì‚¬ìš©í•˜ëŠ” ìš©ë„ì´ë©° ë§ì€ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸°ì—ëŠ” ë²„ê²ìŠµë‹ˆë‹¤. ë°˜ë©´ MySQLì€ ì—¬ëŸ¬ ê°œì˜ ì‘ì—…ê³¼ ì‚¬ìš©ìì˜ SQLì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì‹¤ì œ ì„œë¹„ìŠ¤ì— sqliteë³´ë‹¤ ì í•©í•  ê²ƒì…ë‹ˆë‹¤.</p><p>ì˜ë¬¸ì ì´ í•´ê²°ë˜ì—ˆë‹¤ë©´ ë³¸ê²©ì ìœ¼ë¡œ Airflowë¥¼ êµ¬ì¶•í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><hr><h2 id="1-Airflow-ê¸°ë³¸-ì„¸íŒ…"><a href="#1-Airflow-ê¸°ë³¸-ì„¸íŒ…" class="headerlink" title="1. Airflow ê¸°ë³¸ ì„¸íŒ…"></a>1. Airflow ê¸°ë³¸ ì„¸íŒ…</h2><p>Airflow êµ¬ì¶• ì „ì— ë°˜ë“œì‹œ í•´ì•¼í•  ê²ƒ ì¤‘ì— í•˜ë‚˜ëŠ” Airflow Home ê²½ë¡œë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì €ì˜ ê²½ìš°ì—ëŠ” í•­ìƒ ê²½ë¡œ ì„¸íŒ…ì„ ë‚˜ì¤‘ì— í•˜ë‹¤ê°€ ìŠì–´ë²„ë ¤ì„œ ì—ëŸ¬ê°€ ë‚˜ëŠ” ê²½ìš°ê°€ ë§ì•„ì„œ ê¼­ ë¨¼ì € ì„¤ì •í•´ë‘ê³¤ í•©ë‹ˆë‹¤.</p><p><img src="/images/airflow_on_ec2/airflow_quick.png" alt="Airflow Quick Start"></p><p>ì¶œì²˜ : <a href="https://airflow.apache.org/docs/apache-airflow/stable/start.html">https://airflow.apache.org/docs/apache-airflow/stable/start.html</a></p><p>Airflow ê³µì‹ ë¬¸ì„œì— ë”°ë¥´ë©´ ê¸°ë³¸ ê²½ë¡œëŠ” ìœ„ ì‚¬ì§„ì— ë‚˜ì™€ìˆëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. ê·¸ëƒ¥ ë†”ë‘¬ë„ ë˜ì§€ë§Œ ë‚˜ì¤‘ì— ê²½ë¡œë¥¼ ì˜®ê¸¸ ë•Œë¥¼ ëŒ€ë¹„í•´ì„œ í•œë²ˆ ì„¸íŒ…í•´ë´…ì‹œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># EC2</span></span><br><span class="line"><span class="built_in">export</span> AIRFLOW_HOME=/home/ec2-user/airflow</span><br></pre></td></tr></table></figure><p>EC2 ì¸ìŠ¤í„´ìŠ¤ë¼ë©´ ê¸°ë³¸ ê²½ë¡œë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•´ ì¤ë‹ˆë‹¤.</p><p>(ì—¬ê¸°ì„œ airflowë¥¼ ë°”ë¡œ ì„¤ì¹˜í•´ë„ ë˜ê¸´ í•˜ì§€ë§Œ pip3 install apache-airflowë¡œ ì„¤ì¹˜ë¥¼ í•˜ê²Œë˜ë©´ ìì˜í•œ ì—ëŸ¬ë“¤ì„ ë§Œë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ ê³¼ì •ì„ ë§ˆì¹œ ë’¤ ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ ê¹”ë”í•˜ê²Œ ì„¤ì¹˜ë˜ë‹ˆ ì˜ ë”°ë¼ê°€ë³´ë„ë¡ í•©ë‹ˆë‹¤. )<br><br></br></p><h2 id="2-Redis-ì„¸íŒ…"><a href="#2-Redis-ì„¸íŒ…" class="headerlink" title="2. Redis ì„¸íŒ…"></a>2. Redis ì„¸íŒ…</h2><p>ì´ì œ ë¸Œë¡œì»¤ë¡œ ì‚¬ìš©í•  Redisë¥¼ ì„¤ì¹˜í•´ ì¤ì‹œë‹¤. ë¨¼ì € AWS Linuxì˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë„êµ¬ì¸ <code>yum</code>ì„ ì—…ë°ì´íŠ¸í•˜ê³  í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum -y update</span><br><span class="line">$ sudo yum -y install gcc make</span><br></pre></td></tr></table></figure><p>ì´ì œ Redisë¥¼ ë‹¤ìš´ ë°›ìŠµë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /tmp</span><br><span class="line">$ wget http://download.redis.io/releases/redis-4.0.0.tar.gz</span><br><span class="line">$ tar xzf redis-4.0.0.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> redis-4.0.0</span><br><span class="line">$ make</span><br></pre></td></tr></table></figure><p>Redis ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ê³  íŒŒì¼ì„ ë³µì‚¬í•©ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mkdir /etc/redis </span><br><span class="line">$ sudo mkdir /var/lib/redis</span><br><span class="line">$ sudo cp src/redis-server src/redis-cli /usr/<span class="built_in">local</span>/bin/</span><br><span class="line">$ sudo cp redis.conf /etc/redis/</span><br></pre></td></tr></table></figure><p>Redisì˜ configure íŒŒì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/redis/redis.conf</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/etc/redis/redis.conf</span></span><br><span class="line">[..]</span><br><span class="line">daemonize yes</span><br><span class="line">[..]</span><br><span class="line">  </span><br><span class="line">[..]</span><br><span class="line"><span class="built_in">bind</span> 0.0.0.0</span><br><span class="line">[..]</span><br><span class="line">  </span><br><span class="line">[..]</span><br><span class="line">dir /var/lib/redis</span><br><span class="line">[..]</span><br><span class="line">  </span><br><span class="line">logfile /var/<span class="built_in">log</span>/redis_6379.log</span><br></pre></td></tr></table></figure><p>Redis-Server initializize ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì„¸íŒ…í•©ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /tmp</span><br><span class="line">$ wget https://raw.github.com/saxenap/install-redis-amazon-linux-centos/master/redis-server</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mv redis-server /etc/init.d</span><br><span class="line">$ sudo chmod 755 /etc/init.d/redis-server</span><br><span class="line">$ sudo vim /etc/init.d/redis-server</span><br><span class="line"></span><br><span class="line">-&gt;  redis=<span class="string">"/usr/local/bin/redis-server"</span> í™•ì¸</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo chkconfig --add redis-server</span><br><span class="line">$ sudo chkconfig --level 345 redis-server on</span><br></pre></td></tr></table></figure><p>ì„œë²„ ì‹¤í–‰!</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo service redis-server start</span><br><span class="line">$ redis-cli ping -&gt; PONG</span><br><span class="line"></span><br><span class="line"><span class="comment"># ê°•ì œ ì¢…ë£Œì‹œ</span></span><br><span class="line"><span class="variable">$sudo</span> service redis-server stop</span><br></pre></td></tr></table></figure><p><code>sudo service redis-server start</code>ë¥¼ í•´ë„ ë³„ ë°˜ì‘ì´ ì—†ë‹¤ë©´ ctrl+cë¡œ ì¢…ë£Œí•˜ê³  ì‹¤ì œë¡œ ëŒì•„ê°€ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep redis</span><br></pre></td></tr></table></figure><p>ì œëŒ€ë¡œ ì„¸íŒ…ì´ ë˜ì—ˆë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ì˜¬ ê²ƒì…ë‹ˆë‹¤.</p><p><img src="/images/airflow_on_ec2/redis_on.png" alt="Redisê°€ ëŒì•„ê°€ê³  ìˆë‹¤"></p><p>ë¸Œë¡œì»¤ëŠ” êµ¬ì¶•ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.<br><br></br></p><h2 id="3-MySQL-ì„¸íŒ…"><a href="#3-MySQL-ì„¸íŒ…" class="headerlink" title="3. MySQL ì„¸íŒ…"></a>3. MySQL ì„¸íŒ…</h2><p>Airflow êµ¬ì¶•ì„ í•˜ë©´ì„œ ê°€ì¥ ì‚½ì§ˆë„ ë§ì´ í•˜ê³  ì‹œê°„ì„ ë§ì´ ë‚­ë¹„í•œ ë¶€ë¶„ì…ë‹ˆë‹¤. ìµìˆ™í•˜ì§€ ì•Šì•„ì„œì¸ì§€ ì´ìƒí•˜ê²Œ MySQLì„ ë‹¤ë£° ë•Œë§ˆë‹¤ ì—ëŸ¬í•¸ë“¤ë§ì„ ì˜¤ë˜ í•˜ê²Œ ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p><p>MySQL ì„¤ì¹˜</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install mysql56-server</span><br></pre></td></tr></table></figure><p>ì›¹ì— ê²€ìƒ‰í•˜ë©´ ìœ„ì™€ ê°™ì€ ëª…ë ¹ì–´ê°€ ë§ì´ ë“±ì¥í•©ë‹ˆë‹¤. ì˜ˆì „ ë²„ì „ì˜ AWS CLIì˜€ìœ¼ë©´ ëª…ë ¹ì–´ê°€ ì ìš©ë˜ì—ˆì„ ê²ƒ ê°™ì€ë° mysqlì´ ì„¤ì¹˜ê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p><p>ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ì„¤ì¹˜ë¥¼ í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo wget https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm</span><br><span class="line">$ sudo yum localinstall mysql57-community-release-el7-11.noarch.rpm </span><br><span class="line">$ sudo yum install mysql-community-server</span><br></pre></td></tr></table></figure><p>ì„¤ì¹˜ê°€ ì™„ë£Œë˜ë©´ mysql ë°ëª¬ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld.service</span><br></pre></td></tr></table></figure><p><img src="/images/airflow_on_ec2/mysql_error.png" alt="ì™œ ì•ˆë˜ì§€"></p><p><img src="/images/airflow_on_ec2/heavy_ki.png" alt="ë‹µë‹µí•˜ë©´ ì§ì ‘ í•˜ë©´ ëœë‹¤"></p><p>ì´ë ‡ê²Œ ì‹¤í–‰í•˜ë¼ëŠ” ì†Œë¦¬ê°€ ë§ì€ë° ì—­ì‹œë‚˜ ì‹¤í–‰ì´ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì™œ ê¼­ í•œë²ˆì— ë˜ê²Œ ì •ë¦¬í•´ ë†“ì€ ë¬¸ì„œëŠ” ì—†ì„ê¹Œìš”? ë‹µë‹µí•˜ë©´ ì œê°€ ì •ë¦¬í•´ì„œ ê¸€ì„ ì˜¬ë¦¬ë©´ ë©ë‹ˆë‹¤. ë¬µ-ì§í•˜ê²Œ!</p><p>ì—ëŸ¬ê°€ ë‚œë‹¤ë©´ ì½”ë“œë¥¼ ë‹¤ìŒê³¼ ë°”ê¿”ì„œ ì³ë´…ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysqld start</span><br></pre></td></tr></table></figure><p>mysqldê°€ ì‹¤í–‰ë˜ì—ˆê³  ì´ì œ mysql ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ëŠ” ê²Œ ê°€ëŠ¥í•´ì¡ŒìŠµë‹ˆë‹¤.</p><p>Airflowì—ì„œ MySQLì„ DBë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— í•´ì£¼ì–´ì•¼ í•  ì‘ì—…ì´ ë‚¨ì•˜ìŠµë‹ˆë‹¤. Airflow ìœ ì €ë¥¼ ë§Œë“¤ì–´ ì¤˜ì•¼í•˜ê³  airflow databaseë¥¼ ë§Œë“¤ì–´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ìœ ì €ê°€ ì—†ë‹¤ë©´ databaseì— ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•˜ë©°, airflow databaseê°€ ì—†ë‹¤ë©´ Airflow ì‹¤í–‰ì— í•„ìš”í•œ í…Œì´ë¸”ë“¤ì„ ë§Œë“¤ì§€ ëª»í•©ë‹ˆë‹¤.</p><p>ë”°ë¼ì„œ <code>root</code>ìœ ì €ë¡œ ì ‘ì†í•´ì„œ ìœ ì €ë¥¼ ë§Œë“¤ê³  ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë§Œë“¤ì–´ì¤˜ì•¼ í•©ë‹ˆë‹¤.</p><h3 id="MySQL-ì„¸ë¶€-ì„¸íŒ…"><a href="#MySQL-ì„¸ë¶€-ì„¸íŒ…" class="headerlink" title="MySQL ì„¸ë¶€ ì„¸íŒ…"></a>MySQL ì„¸ë¶€ ì„¸íŒ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -u root -p</span><br><span class="line"><span class="comment"># íŒ¨ìŠ¤ì›Œë“œë¥¼ ì…ë ¥</span></span><br><span class="line">Enter Password :</span><br></pre></td></tr></table></figure><p>ë£¨íŠ¸ ìœ ì €ë¡œ ì ‘ì†í•˜ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë°©ê¸ˆ MySQLì„ ì„¤ì¹˜í–ˆê¸° ë•Œë¬¸ì— ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•œ ì ì´ ì—†ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ê·¸ëƒ¥ ì—”í„°ë¥¼ ì³ë´…ë‹ˆë‹¤.</p><p><img src="/images/airflow_on_ec2/mysql_error.png" alt="ì™œ ì•Šë˜2"></p><p>ë ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p><p>MySQLì€ ì„¤ì¹˜ê°€ ë ë•Œ root ìœ ì €ì— ëŒ€í•œ ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë§Œë“¤ì–´ ë†“ê¸° ë•Œë¬¸ì— ì ‘ì†ì´ ì•ˆë˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì°¾ì•„ ì™€ì•¼ í•©ë‹ˆë‹¤. ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ëŠ” íœ´ëŒ€í° ì¸ì¦ì„ í†µí•´ì„œ ì´ë©”ì¼ë¡œ ë°›ëŠ”ê²Œ ì •ì„ì´ì§€ë§Œ MySQLì€ ì¡°ê¸ˆ ë‹¤ë¦…ë‹ˆë‹¤. </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /var/<span class="built_in">log</span>/mysqld.log</span><br></pre></td></tr></table></figure><p><code>/var/log/mysqld.log</code> ì—¬ê¸°ì— ì„ì‹œë¹„ë°€ë²ˆí˜¸ê°€ ìˆìŠµë‹ˆë‹¤. ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³µì‚¬í•´ ë†“ì€ í›„ ë‹¤ì‹œ ì…ë ¥í•´ ë´…ë‹ˆë‹¤.</p><p>mysql í”„ë¡¬í¬íŠ¸ê°€ ë‚˜ì™”ë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤.</p><p>ì´ì œ root ìœ ì €ì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì„¤ì •í•´ì£¼ê³  airflow ìœ ì €ë¥¼ ìƒì„±í•˜ê³  databaseë¥¼ ë§Œë“¤ì–´ ì£¼ë©´ ì„¸íŒ…ì€ ëë‚©ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UPDATE mysql.user SET Password=PASSWORD(<span class="string">'íŒ¨ìŠ¤ì›Œë“œ'</span>)</span><br><span class="line">           WHERE User=<span class="string">'root'</span>;</span><br></pre></td></tr></table></figure><p>ê²€ìƒ‰í•´ì„œ ë‚˜ì˜¨ ìœ„ ëª…ë ¹ì–´ë¡œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¸íŒ…í•´ì¤ë‹ˆë‹¤.</p><p>ì—¬ê¸°ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ”ë° ë‘ ê°€ì§€ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.</p><ol><li>syntax ì—ëŸ¬</li><li>Your password does not satisfy the current policy requirements</li></ol><p>1ë²ˆ ì—ëŸ¬ì˜ ê²½ìš°ì—ëŠ” <code>&#39;</code> ë¥¼ ì˜ ì‚´í´ë³´ê³  ëª¨ì–‘ì´ ë§ëŠ”ì§€ í•œë²ˆ ì˜ í™•ì¸í•´ ë´…ë‹ˆë‹¤. í˜¹ì€ mysql ë²„ì „ì— ë§ì§€ ì•ŠëŠ” ëª…ë ¹ì–´ì¼ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. mysql 5.7ì´ìƒì˜ ëª…ë ¹ì–´ì¸ì§€ í™•ì¸ì„ ë‹¤ì‹œ í•´ë´…ë‹ˆë‹¤.</p><p>2ë²ˆ ì—ëŸ¬ì˜ ê²½ìš°ì—ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë„ˆë¬´ ì‰½ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. mysqlì—ëŠ” ë¹„ë°€ë²ˆí˜¸ ì •ì±…ì´ ìƒ ì¤‘ í•˜ë¡œ ë‚˜ëˆ„ì–´ì ¸ ìˆëŠ”ë° ê¸°ë³¸ ì„¤ì •ì€ MEDIUMì…ë‹ˆë‹¤. ë³µì¡í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ê¸°ëŠ” ì‹«ì—ˆê¸° ë•Œë¬¸ì— ì €ëŠ” ì´ê²ƒì„ LOWë¡œ ë³€ê²½í•  ê²ƒì…ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> global validate_password_policy=<span class="string">'LOW'</span>;</span><br><span class="line"><span class="comment"># ì¿¼ë¦¬ ì„±ê³µ!</span></span><br></pre></td></tr></table></figure><p>LOWë¡œ ì„¤ì •ë˜ì—ˆë‹¤ë©´ ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒìœ¼ë¡œë§Œ ì„¸íŒ…í•˜ë©´ ë©ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter user <span class="string">'root'</span>@<span class="string">'localhost'</span> identified by <span class="string">'8ì ì´ìƒ íŒ¨ìŠ¤ì›Œë“œ'</span>;</span><br><span class="line">use mysql;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>ì´ì œ airflow ì‚¬ìš©ìë¥¼ ë§Œë“¤ì–´ì£¼ê³  databaseë„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ì‚¬ìš©ì ìƒì„±</span></span><br><span class="line">create user <span class="string">'airflow'</span>@<span class="string">'localhost'</span> identified by <span class="string">'ë¹„ë°€ë²ˆí˜¸'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># DB ê¶Œí•œ ë¶€ì—¬</span></span><br><span class="line">$ grant all privileges on *.* to <span class="string">'airflow'</span>@<span class="string">'localhost'</span>;</span><br><span class="line">$ grant all privileges on DBì´ë¦„.* to <span class="string">'airflow'</span>@<span class="string">'localhost'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># database ìƒì„±</span></span><br><span class="line">create database airflow;</span><br><span class="line"></span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install <span class="string">'apache-airflow[mysql]'</span></span><br></pre></td></tr></table></figure><p>í—˜ë‚œ í–ˆë˜ MySQL ì„¸íŒ…ì€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.<br><br></br></p><h2 id="4-Airflow-ì„¤ì¹˜-ë°-ì„¸íŒ…"><a href="#4-Airflow-ì„¤ì¹˜-ë°-ì„¸íŒ…" class="headerlink" title="4. Airflow ì„¤ì¹˜ ë° ì„¸íŒ…"></a>4. Airflow ì„¤ì¹˜ ë° ì„¸íŒ…</h2><p>ì´ì œ Airflowë¥¼ ì„¤ì¹˜í•´ë´…ì‹œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum update -y</span><br><span class="line"></span><br><span class="line">$ sudo yum install group <span class="string">"Development tools"</span> -y</span><br><span class="line"></span><br><span class="line">$ sudo yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel python3-devel.x86_64 cyrus-sasl-devel.x86_64 -y</span><br><span class="line"></span><br><span class="line">$ sudo yum install libevent-devel -y</span><br><span class="line"></span><br><span class="line">$ sudo pip3 install apache-airflow</span><br></pre></td></tr></table></figure><p>ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆë‹¤ë©´ airflow í´ë”ì•  ìˆëŠ” airflow.cfgë¥¼ ìˆ˜ì •í•´ì„œ ì•ì„œ ì„¤ì¹˜í•œ redisì™€ mysqlì„ airflowì™€ ì´ì–´ì¤˜ì•¼ í•©ë‹ˆë‹¤.</p><p><strong>í•˜ì§€ë§Œ ì•„ë¬´ë¦¬ ì°¾ì•„ë´ë„ airflow í´í„°ê°€ ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤. ë¶„ëª…íˆ ì„¤ì¹˜ë¥¼ í–ˆëŠ”ë°!</strong></p><p>airflowë¥¼ ì…ë ¥í•´ì„œ airflow ëª…ë ¹ì–´ê°€ ë™ì‘í•˜ëŠ”ì§€ ë¨¼ì € í™•ì¸í•©ë‹ˆë‹¤. ë§Œì•½ ëª…ë ¹ì–´ê°€ ì‘ë™í•œë‹¤ë©´ ì•„ê¹Œ ì„¤ì •í•´ë‘” <code>AIRFLOW_HOME</code>ê²½ë¡œì— airflow í´ë”ê°€ ìƒì„±ë  ê²ƒì…ë‹ˆë‹¤. ê·¸ ì•ˆì— configuration íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤.</p><p>ë§Œì•½ <code>airflow: command not found</code>ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:~/.<span class="built_in">local</span>/bin</span><br></pre></td></tr></table></figure><p>í™˜ê²½ë³€ìˆ˜ë¥¼ ì¡°ì •í•´ì„œ airflowê°€ binì—ì„œ ì‹¤í–‰ë˜ë„ë¡ í•©ë‹ˆë‹¤.</p><h3 id="airflow-cfg-ì„¤ì •"><a href="#airflow-cfg-ì„¤ì •" class="headerlink" title="airflow.cfg ì„¤ì •"></a>airflow.cfg ì„¤ì •</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ì‚¬ìš©í•  dag í´ë” ì§€ì •</span></span><br><span class="line"><span class="comment"># subfolder in a code repository. This path must be absolute. ê¼­ ì ˆëŒ€ê²½ë¡œ!</span></span><br><span class="line">dags_folder = /home/ec2-user/airflow/dags</span><br><span class="line"></span><br><span class="line"><span class="comment"># executor = SequentialExecutor</span></span><br><span class="line">executor = CeleryExecutor</span><br><span class="line"></span><br><span class="line"><span class="comment"># sql_alchemy_conn = sqlite:////home/airflow/airflow/airflow.db</span></span><br><span class="line">sql_alchemy_conn =  mysql+pymysql://airflow:ë¹„ë°€ë²ˆí˜¸@127.0.0.1:3306/airflow</span><br><span class="line"></span><br><span class="line"><span class="comment"># catchup_by_default = True</span></span><br><span class="line">catchup_by_default = False</span><br><span class="line"></span><br><span class="line"><span class="comment"># broker_url = sqla+mysql://airflow:airflow@127.0.0.1:3306/airflow</span></span><br><span class="line">broker_url = redis://airflow@127.0.0.1:6379/0</span><br><span class="line"></span><br><span class="line"><span class="comment"># result_backend = db+mysql://airflow:airflow@localhost:3306/airflow</span></span><br><span class="line">result_backend = db+mysql://airflow:ë¹„ë°€ë²ˆí˜¸@127.0.0.1:3306/airflow</span><br><span class="line"></span><br><span class="line"><span class="comment"># load_examples = True</span></span><br><span class="line">load_examples = False</span><br></pre></td></tr></table></figure><p>ì´ ì •ë„ë§Œ ì„¸íŒ… í•´ì¤ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install boto3</span><br><span class="line">sudo pip3 install celery</span><br><span class="line">sudo pip3 install redis</span><br></pre></td></tr></table></figure><p>ì‹¤í–‰ì— í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¥¼ ì„¤ì¹˜í•´ì£¼ê³  airflow dbë¥¼ ì´ˆê¸°í™” í•´ë´…ì‹œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">airflow initdb</span><br></pre></td></tr></table></figure><p>Done!ì´ ë‚˜ì™”ë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤.</p><hr><p><br></br></p><h2 id="Airflow-ì‹¤í–‰"><a href="#Airflow-ì‹¤í–‰" class="headerlink" title="Airflow ì‹¤í–‰"></a>Airflow ì‹¤í–‰</h2><p>AirflowëŠ” ìŠ¤ì¼€ì¥´ëŸ¬, ì›¹ì„œë²„, ì›Œì»¤ë¡œ êµ¬ì„±ë˜ì–´ìˆìŠµë‹ˆë‹¤. í•˜ë‚˜í•˜ë‚˜ ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰ì‹œì¼œì¤ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nohup airflow webserver &gt; /dev/null 2&gt;&amp;1 &amp;</span><br><span class="line">nohup airflow scheduler &gt; /dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line"><span class="comment"># queueë¥¼ ì„¤ì •í–ˆë‹¤ë©´ -që¥¼ í†µí•´ ì¶”ê°€í•œë‹¤</span></span><br><span class="line">nohup airflow worker &gt; /dev/null 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><p><img src="/images/airflow_on_ec2/airflow_ui.png" alt="ëë‹¤!!!!!"></p><p>ì›¹ UIê°€ ì˜ˆì˜ê²Œ ëœ¬ë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤!</p><p>example dagë¥¼ ì‹¤í–‰í•´ë³´ê³  ì•ˆëœë‹¤ë©´ ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰ëœ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œí•œ ë’¤ nohupëª…ë ¹ì–´ë¥¼ ë¹¼ê³  ì‹¤í–‰í•©ë‹ˆë‹¤. ë¡œê·¸ê°€ ë‚˜ì˜¤ë¯€ë¡œ í•´ë‹¹ ì—ëŸ¬ë¥¼ ëª¨ë‘ í•´ê²°í•œ ë’¤ì— ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰ì‹œì¼œ ì£¼ë©´ ì™„ë£Œê°€ ë©ë‹ˆë‹¤.</p><hr><p><br></br></p><h2 id="ìì˜í•œ-ì—ëŸ¬-í•¸ë“¤ë§"><a href="#ìì˜í•œ-ì—ëŸ¬-í•¸ë“¤ë§" class="headerlink" title="ìì˜í•œ ì—ëŸ¬ í•¸ë“¤ë§"></a>ìì˜í•œ ì—ëŸ¬ í•¸ë“¤ë§</h2><ol><li><p><code>Exception: Global variable explicit_defaults_for_timestamp needs to be on (1) for mysql</code></p><p> ìœ„ ì—ëŸ¬ê°€ ë“±ì¥í•œë‹¤ë©´ mysqlì—ì„œ timestamp ì„¤ì •ì„ ë³€ê²½í•´ ì£¼ì–´ì•¼ í•œë‹¤.</p><p> root ê³„ì •ìœ¼ë¡œ ë“¤ì–´ê°€ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì¤€ë‹¤.</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET GLOBAL explicit_defaults_for_timestamp = 1;</span><br></pre></td></tr></table></figure></li><li><p><code>ModuleNotFoundError: No module named &#39;MySQLdb&#39;</code></p><p>  ë˜ëŠ” OSError: mysql_config not found ì´ëŸ° ì—ëŸ¬ ë©”ì„¸ì§€ë¡œ ë“±ì¥í•  ìˆ˜ ìˆë‹¤.</p><p> ì•„ë˜ ëª…ë ¹ì–´ë¡œ í•´ê²°í•œë‹¤.</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install mysql-devel</span><br><span class="line"></span><br><span class="line">pip3 install <span class="string">'apache-airflow[mysql]'</span></span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://airflow.apache.org/docs/">https://airflow.apache.org/docs/</a></p><p><a href="https://boomkim.github.io/2020/01/08/airflow-install-amazon-linux-2/">https://boomkim.github.io/2020/01/08/airflow-install-amazon-linux-2/</a></p><p><a href="https://openmind8735.com/aws/redis/2017/07/21/aws-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%EC%97%90-redis-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/">https://openmind8735.com/aws/redis/2017/07/21/aws-ec2-ì¸ìŠ¤í„´ìŠ¤ì—-redis-ì„¤ì¹˜í•˜ê¸°/</a></p><p><a href="https://serverfault.com/questions/894457/amazon-linux-2-ami-aws-how-to-install-mysql-in-amazon-linux-2">https://serverfault.com/questions/894457/amazon-linux-2-ami-aws-how-to-install-mysql-in-amazon-linux-2</a></p><p><a href="https://lemontia.tistory.com/943">https://lemontia.tistory.com/943</a></p><p><a href="https://m.blog.naver.com/aim4u/221766568746">https://m.blog.naver.com/aim4u/221766568746</a></p>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2020/12/13/airflow-on-ec2/#disqus_thread</comments>
    </item>
    
    <item>
      <title>ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ë¥¼ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ Part 2</title>
      <link>http://tkdguq05.github.io/2020/11/29/network-part2/</link>
      <guid>http://tkdguq05.github.io/2020/11/29/network-part2/</guid>
      <pubDate>Sun, 29 Nov 2020 09:20:50 GMT</pubDate>
      <description>
      
        &lt;p&gt;Part 1ì—ì„œ ë‹¤ë£¬ ì´ë¡ ì„ ë°”íƒ•ìœ¼ë¡œ AWS í™”ë©´ê³¼ ì¹œìˆ™í•´ì§€ì&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>Part 1ì—ì„œ ë‹¤ë£¬ ì´ë¡ ì„ ë°”íƒ•ìœ¼ë¡œ AWS í™”ë©´ê³¼ ì¹œìˆ™í•´ì§€ì</p><a id="more"></a><h1 id="ë°ì´í„°-ì‚¬ì´ì–¸ìŠ¤ë¥¼-ìœ„í•œ-ë„¤íŠ¸ì›Œí¬-Part-2"><a href="#ë°ì´í„°-ì‚¬ì´ì–¸ìŠ¤ë¥¼-ìœ„í•œ-ë„¤íŠ¸ì›Œí¬-Part-2" class="headerlink" title="ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ë¥¼ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ Part 2"></a>ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ë¥¼ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ Part 2</h1><p>ì´ë²ˆ ê¸€ì—ì„œëŠ” AWSë¥¼ ë‹¤ë£¨ë©´ì„œ ë³´ëŠ” ìµìˆ™í•˜ì§€ë§Œ ìƒì†Œí•œ ìš©ì–´ë“¤ì—ì„œ ë‹¤ë£¨ë ¤ê³  í•©ë‹ˆë‹¤. ìì£¼ë´ì„œ ìµìˆ™í•˜ê¸°ëŠ” í•˜ì§€ë§Œ ì–´ë–¤ ì—­í• ì„ í•˜ëŠ”ì§€, ì–´ë–¤ ê°œë…ì¸ì§€ëŠ” ì˜ ëª¨ë¥´ê³  ë„˜ì–´ê°€ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ê²½í—˜ ìƒ ì´ëŸ¬í•œ ê°œë…ì ì¸ ë¶€ë¶„ì´ ì œëŒ€ë¡œ ë‹¤ì ¸ì§€ì§€ ì•Šìœ¼ë©´ ì—…ë¬´ë¥¼ í• ë•Œë§ˆë‹¤ ì°¾ì•„ë³´ê²Œ ë˜ì„œ ìƒì‚°ì„±ì´ ë‚®ì•„ì§€ê³¤ í–ˆìŠµë‹ˆë‹¤. ì´ë²ˆ ê¸€ì„ í†µí•´ ê°œë…ì„ ì œëŒ€ë¡œ ë‹¤ì§€ëŠ” ê³„ê¸°ê°€ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.</p><h2 id="AWS-GCPëŠ”-ë­ì—ìš”"><a href="#AWS-GCPëŠ”-ë­ì—ìš”" class="headerlink" title="AWS? GCPëŠ” ë­ì—ìš”?"></a>AWS? GCPëŠ” ë­ì—ìš”?</h2><p>AWSë€? ì´ë¼ê³  ê²€ìƒ‰í–ˆì„ë•Œ ë‚˜ì˜¤ëŠ” ê²°ê³¼ë“¤ì€ ëŒ€ì²´ë¡œ â€˜í´ë¼ìš°ë“œ ì»´í“¨íŒ… í”Œë«í¼â€™ì´ë¼ê³  ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤. í´ë¼ìš°ë“œ ì»´í“¨íŒ… í”Œë«í¼ ì„œë¹„ìŠ¤ë¼ê³  í•˜ë©´ Amazonê°™ì€ ê±°ëŒ€í•œ íšŒì‚¬ì— ìˆëŠ” ê±°ëŒ€í•œ ì„œë²„ë¥¼ ë¹„ìš©ì„ ì§€ë¶ˆí•˜ê³  ë‚´ê°€ ì“¸ ë§Œí¼ë§Œ ì‚¬ìš©í•˜ëŠ” ì„œë¹„ìŠ¤ë¼ê³  ìƒê°í•˜ì‹¤ ê²ë‹ˆë‹¤. ë§ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ í•œ ë°œìêµ­ ë” ë“¤ì–´ê°€ì„œ ìƒê°í•´ë³´ë©´, â€˜ë‚´ê°€ ì“¸ ë§Œí¼? ì–´ë–»ê²Œ ë‚´ê°€ ì“°ëŠ” ë¶€ë¶„ì„ ë”°ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ”ê±°ì§€?â€™ë¼ëŠ” ì˜ë¬¸ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚¬ìš©í•˜ë©´ì„œë„ ì–´ë–»ê²Œ ë‚´ ê²ƒë§Œ ì˜ ë¶„ë¦¬ê°€ ë˜ëŠ”ì§€ ì˜ë¬¸ì´ ë“œì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h3 id="VPC-Virtual-Private-Cloud"><a href="#VPC-Virtual-Private-Cloud" class="headerlink" title="VPC(Virtual Private Cloud)"></a>VPC(Virtual Private Cloud)</h3><p>AWSëŠ” VPCë¥¼ ì´ìš©í•´ì„œ ë‹¤ë¥¸ ì‚¬ìš©ìì™€ ë‚˜ë¥¼ ë¶„ë¦¬ì‹œí‚µë‹ˆë‹¤. ì„¤ëª…ì— ë“¤ì–´ê°€ê¸° ì „ì— ë¨¼ì € VPNì—ì„œ ë‹¤ë¤„ë³´ê² ìŠµë‹ˆë‹¤. VPNì€ Virtual Private Networkìœ¼ë¡œ ì‹¤ì œë¡œëŠ” ê°™ì€ ë„¤íŠ¸ì›Œí¬ ë§ì— ìˆì§€ë§Œ, ë…¼ë¦¬ì ìœ¼ë¡œ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ì¸ ê²ƒì²˜ëŸ¼ ë™ì‘í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. VPCì—­ì‹œ ê°™ì€ í´ë¼ìš°ë“œì§€ë§Œ, ë…¼ë¦¬ì ìœ¼ë¡œ êµ¬ì—­ì„ ë‚˜ëˆ ë†“ì€ ê²ƒì…ë‹ˆë‹¤.</p><p><img src="/images/network_part2/vpc1.png" alt=""></p><p><img src="/images/network_part2/vpc2.png" alt=""></p><p>VPCë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ìœ„ ê·¸ë¦¼ì—ì„œ ì•„ë˜ ê·¸ë¦¼ìœ¼ë¡œ êµ¬ì¡°ê°€ ë³€ê²½ë©ë‹ˆë‹¤. ë³µì¡í•˜ë˜ ì‹œìŠ¤í…œì´ ê°„ë‹¨í•˜ê²Œ ë°”ë€Œì—ˆê³  ê°ê°ì˜ VPCëŠ” ì™„ì „íˆ ë…ë¦½ëœ ë„¤íŠ¸ì›Œí¬ì²˜ëŸ¼ ì‘ë™í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p><p>VPCë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•´ì„œëŠ” ì‚¬ì„¤ ì•„ì´í”¼, Private IP ëŒ€ì—­ì— ë§ì¶°ì•¼ í•©ë‹ˆë‹¤. ì¼ë°˜ì ì¸ IPëŠ” Public IPë¡œ, ì™¸ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ”, í•œ ê³³ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì•„ì´í”¼ì…ë‹ˆë‹¤. ì–´ë–¤ ì‚¬ëŒì´ IPë¥¼ ì ìœ í–ˆë‹¤ë©´, ê·¸ IPëŠ” ë‹¤ë¥¸ ì‚¬ëŒì´ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. Private IPëŠ” ë‚´ë¶€ ì‚¬ìš©ìë“¤ë¼ë¦¬ ì‚¬ìš©í•˜ëŠ” IPì…ë‹ˆë‹¤. ë”°ë¼ì„œ 192.168.0.53ì´ë¼ëŠ” IPëŠ” ëˆ„êµ°ê°€ì˜ ì§‘ ì»´í“¨í„°ì—ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ” Private IPì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²°ë¡ ì ìœ¼ë¡œ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ì‹œìŠ¤í…œì€ ì–´ë–»ê²Œ ë‚´ê°€ ì‚¬ìš©í•  í´ë¼ìš°ë“œë¥¼ ë‚˜ëˆ„ëƒë©´, ì´ Private IP ë²”ìœ„ë¥¼ ì´ìš©í•´ì„œ êµ¬ì—­ì„ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. </p><p>Public IPì™€ Private IPê°€ ì‰½ê²Œ ë‹¤ê°€ì˜¤ì§€ ì•Šì„ ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë¹„ìœ ë¥¼ í•´ë³´ìë©´, ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ XXì•„íŒŒíŠ¸ 1302ë™ 704í˜¸ëŠ” Public IPë¼ê³  í•  ìˆ˜ ìˆê³  ê·¸ ì§‘ ë‚´ë¶€ì˜ ì•ˆë°©ì€ Private IPë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„íŒŒíŠ¸ì˜ ì£¼ì†ŒëŠ” ì„¸ìƒì— ë”± í•˜ë‚˜ì´ì§€ë§Œ, ì•ˆë°©ì€ ì–´ë–¤ ì§‘ì—ì„œë„ ê°–ê³  ìˆëŠ” ê³³ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p><p>ì´ë ‡ê²Œ í•œë²ˆ ì„¤ì •ëœ ì•„ì´í”¼ ëŒ€ì—­ì€ ìˆ˜ì •ì´ ë¶ˆê°€í•˜ë©° ê° VPCëŠ” í•˜ë‚˜ì˜ ë¦¬ì „ì— ì¢…ì†ë©ë‹ˆë‹¤. ê°ê°ì˜ VPCëŠ” ì™„ì „íˆ ë…ë¦½ì ì´ë©°, ë§Œì•½ VPCê°„ í†µì‹ ì„ ì›í•œë‹¤ë©´ VPC í”¼ì–´ë§ ì„œë¹„ìŠ¤ë¥¼ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h3 id="ì„œë¸Œë„·"><a href="#ì„œë¸Œë„·" class="headerlink" title="ì„œë¸Œë„·"></a>ì„œë¸Œë„·</h3><p><img src="/images/network_part2/subnet.png" alt=""></p><p>ì´ì œ ì„œë¸Œë„·ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì²˜ìŒ AWS EC2ë¥¼ ë§Œë“¤ ë•Œ ì–´ë µê³  ë‚œê°í–ˆë˜ ê°œë…ì´ ì„œë¸Œë„·ì´ì˜€ìŠµë‹ˆë‹¤. ì„œë¸Œë„·ì€ ê·¸ë¦¼ì—ì„œ ë³´ë“¯ì´ VPCë¥¼ ë” ì˜ê²Œ ìª¼ê°  ê²ƒì…ë‹ˆë‹¤. ëª©ì ì— ë”°ë¼ì„œ í¼ë¸”ë¦­ ë˜ëŠ” í”„ë¼ì´ë¹—ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í¼ë¸”ë¦­ì€ ëˆ„êµ¬ë‚˜ ë“¤ì–´ì˜¬ ìˆ˜ ìˆë„ë¡ ì„¤ì •í•œ ê²ƒì´ê³ , í”„ë¼ì´ë¹—ì€ íŠ¹ì • ëŒ€ìƒë§Œ ë“¤ì–´ì˜¤ëŠ” ê²ƒì„ í—ˆìš©í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ëˆ„êµ¬ë‚˜ ë“¤ì–´ì˜¬ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì€ ì¸í„°ë„· í†µì‹ ì´ ììœ ë¡­ë‹¤ëŠ” ë§ì…ë‹ˆë‹¤.</p><p>ë³´í†µ íšŒì‚¬ì—ì„œëŠ” ë³´ì•ˆ ë•Œë¬¸ì— í”„ë¼ì´ë¹— ì„œë¸Œë„·ì„ êµ¬ì„±í•´ë†“ê³  íŠ¹ì • ëŒ€ì—­ì„ ì—´ì–´ ì„œë¹„ìŠ¤í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ë§Œì•½ í”„ë¼ì´ë¹— ì„œë¸Œë„·ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ í…ì„œí”Œë¡œë¥¼ ì‚¬ìš©í•  ì¼ì´ ìˆì–´ <code>pip install tensorflow</code> ë¥¼ í•œë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? í”„ë¼ì´ë¹— ì„œë¸Œë„·ì€ ì¸í„°ë„· í†µì‹ ì´ ììœ ë¡­ì§€ ì•Šê¸° ë•Œë¬¸ì— ë³„ë„ì˜ ì„¤ì •ì´ ì—†ë‹¤ë©´ ì„¤ì¹˜ê°€ ë˜ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤.</p><h3 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h3><p>ê·¸ë˜ì„œ NAT ê²Œì´íŠ¸ì›¨ì´ê°€ í•„ìš”í•©ë‹ˆë‹¤. NAT ê²Œì´íŠ¸ ì›¨ì´ëŠ” í”„ë¼ì´ë¹— ì„œë¸Œë„·ì´ ì¸í„°ë„·ê³¼ í†µì‹ í•˜ê¸° ìœ„í•œ ì•„ì›ƒë°”ìš´ë“œ ì¸ìŠ¤í„´ìŠ¤ì…ë‹ˆë‹¤. í”„ë¼ì´ë¹— ë„¤íŠ¸ì›Œí¬ê°€ ì™¸ë¶€ì—ì„œ ìš”ì²­ë˜ëŠ” ì¸ë°”ìš´ë“œëŠ” í•„ìš” ì—†ë”ë¼ë„ ì¸ìŠ¤í„´ìŠ¤ì˜ íŒì›¨ì–´ë‚˜ í˜¹ì€ ì£¼ê¸°ì ì¸ ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•˜ì—¬ ì•„ì›ƒë°”ìš´ë“œ íŠ¸ë˜í”½ë§Œ í—ˆìš©ë˜ì•¼ í•  ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ì´ë•Œ í¼ë¸”ë¦­ ì„œë¸Œë„· ìƒì—ì„œ ë™ì‘í•˜ëŠ” NAT ê²Œì´íŠ¸ì›¨ì´ëŠ” í”„ë¼ì´ë¹— ì„œë¸Œë„·ì—ì„œ ì™¸ë¶€ë¡œ ìš”ì²­í•˜ëŠ” ì•„ì›ƒë°”ìš´ë“œ íŠ¸ë˜í”½ì„ ë°›ì•„ ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ì™€ ì—°ê²°í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ë˜ë©´ í”„ë¼ì´ë¹— ì„œë¸Œë„· ì•ˆì—ì„œë„ ììœ ë¡­ê²Œ í…ì„œí”Œë¡œë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h3 id="ë³´ì•ˆê·¸ë£¹"><a href="#ë³´ì•ˆê·¸ë£¹" class="headerlink" title="ë³´ì•ˆê·¸ë£¹"></a>ë³´ì•ˆê·¸ë£¹</h3><p>ìœ„ì— ê°œë…ì„ ìˆ™ì§€í•˜ê³  í˜¸ê¸°ë¡­ê²Œ AWS í´ë¼ìš°ë“œë¥¼ ì´ìš©í•˜ë ¤ê³  í•˜ë©´ ë‘ ë²ˆì§¸ë¡œ ë§ˆì£¼ì¹˜ëŠ” ë²½ì´ ë°”ë¡œ ë³´ì•ˆê·¸ë£¹ì…ë‹ˆë‹¤. ì¼ì¢…ì˜ ë°©í™”ë²½ìœ¼ë¡œ ì‰½ê²Œ ë§í•˜ìë©´, í—ˆìš©í•  IPëŒ€ì—­ê³¼ Portë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê´€ë¦¬í•˜ëŠ” ë¶€ë¶„ì€ ì¸ë°”ìš´ë“œ íŠ¸ë˜í”½ê³¼ ì•„ì›ƒë°”ìš´ë“œ íŠ¸ë˜í”½ì…ë‹ˆë‹¤. ë³´í†µ ì•„ì›ƒë°”ìš´ë“œ íŠ¸ë˜í”½ì€ ì œí•œì„ ê±¸ì–´ë‘ì§€ ì•ŠìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ê°€ ë‚˜ê°€ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— í¬ê²Œ ì‹ ê²½ì„ ì“°ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ëŒ€ë¶€ë¶„ì…ë‹ˆë‹¤. ì¤‘ìš”í•œ ê²ƒì€ ë“¤ì–´ì˜¤ëŠ”, ì¸ë°”ìš´ë“œ íŠ¸ë˜í”½ì…ë‹ˆë‹¤. íšŒì‚¬ë‚˜ ì§‘ì— ì•„ë¬´ë‚˜ ë“¤ì–´ì˜¬ ìˆ˜ ì—†ëŠ” ê²ƒì²˜ëŸ¼, í´ë¼ìš°ë“œì—ì„œë„ ë³´ì•ˆê·¸ë£¹ì„ ì´ìš©í•´ì„œ ë“¤ì–´ì˜¬ ì¸í„°ë„· í†µì‹ ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. ë°©í™”ë²½ ì—­í• ì„ í•˜ëŠ” ê²ƒì—ëŠ” ì‚¬ì‹¤ ë„¤íŠ¸ì›Œí¬ ACLë„ ìˆì§€ë§Œ ìƒëµí•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ë§Œì•½ ë³´ì•ˆì •ì±…ì¸ ë„¤íŠ¸ì›Œí¬ ACLê³¼ ë³´ì•ˆê·¸ë£¹ì´ ì¶©ëŒí•œë‹¤ë©´ ë³´ì•ˆê·¸ë£¹ì´ ë” ë†’ì€ ìš°ì„ ìˆœìœ„ë¥¼ ê°–ìŠµë‹ˆë‹¤.</p><h3 id="Port-amp-Protocol"><a href="#Port-amp-Protocol" class="headerlink" title="Port &amp; Protocol"></a>Port &amp; Protocol</h3><p>ë³´ì•ˆê·¸ë£¹ ì„¤ì •ì„ ì‹¤ì œë¡œ í•˜ë ¤ê³  ë“¤ì–´ê°€ë©´ ì„¤ì •í•  ê²ƒì´ Portì™€ Protocolì…ë‹ˆë‹¤. í”„ë¡œí† ì½œì„ ë¨¼ì € ì„ íƒí•˜ê²Œ ë˜ëŠ”ë°, ì‹¤ì œë¡œ í´ë¦­í•˜ê²Œ ë˜ë©´ ê°ì¢… ì•Œìˆ˜ì—†ëŠ” ì˜ì–´ë“¤ì˜ ë¦¬ìŠ¤íŠ¸ê°€ ì£¼ë¥´ë¥µ í˜ëŸ¬ë‚˜ì˜µë‹ˆë‹¤. ëŒ€í‘œì ì¸ ëª‡ ê°€ì§€ë§Œ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><p><img src="/images/network_part2/list.png" alt="ì‹¤ì œ AWSì—ì„œ ë‚˜ì˜¤ëŠ” í™”ë©´"></p><p>í”„ë¡œí† ì½œ ìœ í˜•ì—ì„œ <code>ëª¨ë“  íŠ¸ë˜í”½</code>ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…ì„ í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ëª¨ë“  íŠ¸ë˜í”½ì˜ ìœ— ë¶€ë¶„ì€ TCP/UDPì— ê´€í•œ ë‚´ìš©ì´ê³  ê·¸ ì•„ë«ë¶€ë¶„ì€ well-known í¬íŠ¸ë¡œ ë§ì´ ì‚¬ìš©í•˜ëŠ” í¬íŠ¸ì— ëŒ€í•´ì„œ ë¯¸ë¦¬ ì§€ì •í•´ ë†“ì€ ê²ƒì…ë‹ˆë‹¤. ë³´í†µ well-known í¬íŠ¸ëŠ” 0~1023ì˜ ë²”ìœ„ì…ë‹ˆë‹¤.</p><h3 id="TCP-UDP"><a href="#TCP-UDP" class="headerlink" title="TCP / UDP"></a>TCP / UDP</h3><p>TCPì™€ UDPëŠ” OCI 7 Layerì—ì„œ 4ë²ˆì§¸ Layerì¸ Transport Layerì— í•´ë‹¹ë©ë‹ˆë‹¤. ì´ ë ˆì´ì–´ì˜ ì—­í• ì€ ì €ë²ˆ ê¸€ì—ì„œë„ ë‹¤ë¤˜ë“¯ì´, End to End ì„œë¹„ìŠ¤ , ì»¤ë„¥ì…˜(ì—°ê²°)ì„ ê´€ë¦¬í•˜ê³  ì„œë¹„ìŠ¤ì™€ ì„œë¹„ìŠ¤ì˜ ì—°ê²°ì„ ê´€ë¦¬í•˜ë©° TCP UDP ì†Œì¼“ì„ í†µí•œ í”„ë¡œì„¸ìŠ¤ ë³„ í†µì‹ ì„ í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ ë ˆì´ì–´ì—ì„œëŠ” port to portë¡œ í†µì‹ , ë°ì´í„°ëŠ” segmentë¼ê³  ë¶ˆë¦¬ìš°ê³  ìˆìŠµë‹ˆë‹¤. TCPì™€ UDPëŠ” ì„±ê²©ì´ ì¡°ê¸ˆ ë‹¤ë¦…ë‹ˆë‹¤. TCPëŠ” í†µì‹ ì—ì„œ ì •í™•ì„±(ì‹ ë¢°ì„± ìˆëŠ” ì „ì†¡ê¸°ëŠ¥)ì„ ì¤‘ì‹œí•œë‹¤ë©´ UDPëŠ” ì†ë„ë¥¼ ë” ì¤‘ì‹œí•©ë‹ˆë‹¤.</p><p>TCP í”„ë¡œí† ì½œì€ ì–¸ì œ ì‚¬ìš©í• ê¹Œìš”? ì€í–‰ ì„œë¹„ìŠ¤ë¥¼ ìƒê°í•´ ë´…ì‹œë‹¤. ë¹ ë¥¸ ì†ë„ë¥¼ ìœ„í•´ ì‹ ë¢°ì„±ì€ ì‹ ê²½ì“°ì§€ì•Šê³  ì€í–‰ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì¶•í–ˆê³  ê°€ì¡±ì—ê²Œ 1ì–µì›ì„ ì†¡ê¸ˆí–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì²˜ë¦¬ë˜ëŠ” ë„ì¤‘ì— ì—ëŸ¬ê°€ ë°œìƒí•´ 1ë§Œì›ì„ ë³´ë‚¸ ê²ƒì´ë¼ê³  ì²˜ë¦¬ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ì¬ì•™ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p><p>TCPëŠ” ì´ë ‡ë“¯ ì‹ ë¢°ì„±ìˆëŠ” ë°ì´í„° ì „ì†¡(RDT, Reliable Data Transfer)ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ ì™¸ì— ì—°ê²° ì œì–´, íë¦„ ì œì–´, í˜¼ì¡ ì œì–´ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>UDPëŠ” TCPì— ë¹„í•´ ê°„ë‹¨í•©ë‹ˆë‹¤. TCPì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ì•Šìœ¼ë©´ UDPê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê¸°ëŠ¥ì´ ì ì–´ì¡Œìœ¼ë¯€ë¡œ êµ‰ì¥íˆ ê°€ë²¼ì›Œ Overheadê°€ ë§¤ìš° ì ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ë§ì€ ìš”ì²­ì— ëŒ€í•´ì„œ ì²˜ë¦¬í•´ì•¼ í•˜ê³ , ì‹ ë¢°ì„±ì´ í•„ìš”í•˜ì§€ ì•Šì€ ì„œë¹„ìŠ¤ì—ì„œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ë©ë‹ˆë‹¤. í˜¹ì‹œ UDPê°€ ìµìˆ™í•˜ì§€ ì•Šìœ¼ì‹ ê°€ìš”? </p><p><img src="/images/network_part2/starcraft.png" alt="ì•¼ UDPí•˜ë¼ê³ "></p><p><strong>í•™êµ ì»´í“¨í„°ì‹¤ì—ì„œ ìŠ¤íƒ€í¬ë˜í”„íŠ¸</strong>ë¥¼ í•  ë•Œ ë°©ì„ ë§Œë“¤ë•Œë©´ ê¼­, UDPë¥¼ ì‚¬ìš©í–ˆì—ˆë˜ ê²ƒì´ ì–´ë ´í’‹ì´ ê¸°ì–µì´ ë‚˜ì‹¤ ìˆ˜ë„ ìˆê² ìŠµë‹ˆë‹¤. ì´ë ‡ë“¯, ì˜¨ë¼ì¸ ê²Œì„ì´ë‚˜ DNS, ìŒì„± ì¸í„°ë„· í”„ë¡œí† ì½œ, ë™ì˜ìƒ ì„œë¹„ìŠ¤ ë“±ì—ì„œ UDP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><hr><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://medium.com/harrythegreat/aws-%EA%B0%80%EC%9E%A5%EC%89%BD%EA%B2%8C-vpc-%EA%B0%9C%EB%85%90%EC%9E%A1%EA%B8%B0-71eef95a7098">https://medium.com/harrythegreat/aws-ê°€ì¥ì‰½ê²Œ-vpc-ê°œë…ì¡ê¸°-71eef95a7098</a></p><p><a href="https://brunch.co.kr/@toughrogrammer/15">https://brunch.co.kr/@toughrogrammer/15</a></p>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2020/11/29/network-part2/#disqus_thread</comments>
    </item>
    
    <item>
      <title>ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ë¥¼ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ Part 1</title>
      <link>http://tkdguq05.github.io/2020/11/29/network-part1/</link>
      <guid>http://tkdguq05.github.io/2020/11/29/network-part1/</guid>
      <pubDate>Sun, 29 Nov 2020 08:58:54 GMT</pubDate>
      <description>
      
        &lt;p&gt;ë§‰ìƒ ê³µë¶€í•˜ê¸°ëŠ” ê·€ì°®ì€ ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•´ ê³µë¶€í•´ë³´ì&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>ë§‰ìƒ ê³µë¶€í•˜ê¸°ëŠ” ê·€ì°®ì€ ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•´ ê³µë¶€í•´ë³´ì</p><a id="more"></a><h1 id="ë°ì´í„°-ì‚¬ì´ì–¸ìŠ¤ë¥¼-ìœ„í•œ-ë„¤íŠ¸ì›Œí¬-Part-1"><a href="#ë°ì´í„°-ì‚¬ì´ì–¸ìŠ¤ë¥¼-ìœ„í•œ-ë„¤íŠ¸ì›Œí¬-Part-1" class="headerlink" title="ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ë¥¼ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ Part 1"></a>ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ë¥¼ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ Part 1</h1><h2 id="ì™œ-ë„¤íŠ¸ì›Œí¬ë¥¼-ê³µë¶€í•˜ê²Œ-ë˜ì—ˆë‚˜"><a href="#ì™œ-ë„¤íŠ¸ì›Œí¬ë¥¼-ê³µë¶€í•˜ê²Œ-ë˜ì—ˆë‚˜" class="headerlink" title="ì™œ ë„¤íŠ¸ì›Œí¬ë¥¼ ê³µë¶€í•˜ê²Œ ë˜ì—ˆë‚˜?"></a>ì™œ ë„¤íŠ¸ì›Œí¬ë¥¼ ê³µë¶€í•˜ê²Œ ë˜ì—ˆë‚˜?</h2><p>ë°ì´í„° ë¶„ì•¼ì˜ ë§ì€ ë¶„ë“¤ì´ ìì£¼ ì ‘í•˜ì‹œì§€ë§Œ ì˜ ëŠë¼ì§€ ëª»í•˜ëŠ” ë¶€ë¶„ ì¤‘ì— í•˜ë‚˜ê°€ ë„¤íŠ¸ì›Œí¬ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. ì €ë§Œ í•˜ë”ë¼ë„ ë°ì´í„° ì—”ì§€ë‹ˆì–´ë§ ì—…ë¬´ë¥¼ ë§¡ê¸° ì „ê¹Œì§€ëŠ” ë°ì´í„°ê°€ ì–´ë–»ê²Œ ì „ë‹¬ë˜ê³  ë°›ëŠ” ê²ƒì¸ì§€ ëª°ëê³ , ì•Œ í•„ìš”ë„ ì—†ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì—…ë¬´ë¥¼ ì§„í–‰í•˜ë©´ í•  ìˆ˜ë¡, íŠ¹íˆ AWSë¥¼ ìì£¼ ì ‘í•˜ê²Œ ë  ìˆ˜ë¡ ë²½ì— ë¶€ë”ªíˆëŠ” ëŠë‚Œì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. ë‘ ê°€ì§€ ë²½ì´ì—ˆëŠ”ë° í•˜ë‚˜ëŠ” ì»´í“¨í„°ê°€ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ëª¨ë¥¸ë‹¤ëŠ” ì ì´ì—ˆê³ (CS, OSì˜ì—­) ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•œ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ì´ í•œê³„ë¥¼ ê·¹ë³µí•˜ê³ ì ê³µë¶€ë¥¼ ì‹œì‘í–ˆê³  ì´ë¥¼ í†µí•´ ì¡°ê¸ˆì´ë‚˜ë§ˆ ë„“ì–´ì§„ ì‹œì•¼ë¥¼ ì–»ê²Œë˜ì–´ ì œê°€ ê°–ê²Œëœ ì§€ì‹ì˜ ì¼ë¶€ë¶„ì„ ì˜ ì •ë¦¬í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤. </p><p>Part 1ì—ì„œëŠ” ì „ë°˜ì ì¸ ê°œìš”ì™€ ì´ë¡ ì ì¸ ì„¤ëª… -OSI 7 Layerì— ëŒ€í•´ì„œ ì„¤ëª…í•  ì˜ˆì •ì´ë©°, Part2ì—ì„œëŠ” AWSë¥¼ ì‚¬ìš©í•  ë•Œ ìì£¼ ë“±ì¥í•˜ëŠ” ìš©ì–´ë“¤ì— ëŒ€í•œ ì •ë¦¬ì™€ ì„¤ëª…ì„ í•  ì˜ˆì •ì…ë‹ˆë‹¤.</p><h2 id="ë„¤íŠ¸ì›Œí¬"><a href="#ë„¤íŠ¸ì›Œí¬" class="headerlink" title="ë„¤íŠ¸ì›Œí¬"></a>ë„¤íŠ¸ì›Œí¬</h2><p>ë„¤íŠ¸ì›Œí¬ëŠ” <code>ì†Œì…œ</code>ì´ë¼ëŠ” ë§ê³¼ ê°™ì´ ìˆì„ ë•Œ í›¨ì”¬ ë” ì¹œìˆ™í•˜ê²Œ ëŠê»´ì§€ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. â€˜ì†Œì…œ ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤â€™ë€ ì‚¬ìš©ì ê°„ì˜ ììœ ë¡œìš´ ì˜ì‚¬ì†Œí†µê³¼ ì •ë³´ ê³µìœ , ê·¸ë¦¬ê³  ì¸ë§¥ í™•ëŒ€ ë“±ì„ í†µí•´ ì‚¬íšŒì  ê´€ê³„ë¥¼ ìƒì„±í•˜ê³  ê°•í™”í•´ì£¼ëŠ” ì˜¨ë¼ì¸ í”Œë«í¼ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ SNSì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„ì€ ì´ ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ì‚¬íšŒì  ê´€ê³„ë§ì„ í˜•ì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.(ì¶œì²˜: ìœ„í‚¤ë°±ê³¼)</p><p>ê²°êµ­ ë„¤íŠ¸ì›Œí¬ëŠ” ì–´ë–¤ ë§ì´ë¼ëŠ” ê²ƒì„ ëœ»í•©ë‹ˆë‹¤. ì†Œì…œ ë„¤íŠ¸ì›Œí¬ëŠ” ì‚¬ëŒ ê°„ì˜ ì‚¬íšŒì ì¸ ê´€ê³„ë§ì„ ì˜ë¯¸í•˜ê³ , ìš°ë¦¬ê°€ íŒŒê³ ë“¤ ë„¤íŠ¸ì›Œí¬ëŠ” ì¸í„°ë„· ë§, ê·¸ë¦¬ê³  ì»´í“¨í„° ì—°ê²° ë§ì„ ëœ»í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p><p>ìœ„í‚¤ë°±ê³¼ì—ì„œëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…í•©ë‹ˆë‹¤. â€œì»´í“¨í„° ë„¤íŠ¸ì›Œí¬ ë˜ëŠ” ì»´í“¨í„°ë§ì€ ë…¸ë“œë“¤ì´ ìì›ì„ ê³µìœ í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ë””ì§€í„¸ ì „ê¸°í†µì‹ ë§ì˜ í•˜ë‚˜. ì¦‰, ë¶„ì‚°ë˜ì–´ ìˆëŠ” ì»´í“¨í„°ë¥¼ í†µì‹ ë§ìœ¼ë¡œ ì—°ê²°í•œ ê²ƒì„ ë§í•œë‹¤. ì»´í“¨í„° ë„¤íŠ¸ì›Œí¬ì—ì„œ ì»´í“¨íŒ… ì¥ì¹˜ë“¤ì€ ë…¸ë“œ ê°„ ì—°ê²°ì„ ì‚¬ìš©í•˜ì—¬ ì„œë¡œì—ê²Œ ë°ì´í„°ë¥¼ êµí™˜í•œë‹¤.â€</p><p>ë„¤íŠ¸ì›Œí¬ì˜ êµ¬ì¡°ëŠ” ì§‘ë‹¨ í¬ê¸°ì™€ ì‚¬ìš©ìì˜ ëŒ€ì—­í­ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤. ì‚¬ëŒì´ ì–¼ë§ˆë‚˜ ë§ì´ ì“°ëŠëƒì— ë”°ë¼ êµ¬ì¡°ë¥¼ ë°”ê¿”ì•¼ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.  ì—…ì¢…ì— ë”°ë¼ì„œë„ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë¹„ìŠ¤ì˜ ì¤‘ìš”ë„ì— ë”°ë¼ì„œ ë‹¬ë¼ì§€ëŠ” ê²ƒì¸ë°, ì˜ˆë¥¼ ë“¤ì–´ ê³µê³µê¸°ê´€ê³¼ ê²Œì„ ì—…ì¢…ì˜ ë„¤íŠ¸ì›Œí¬ì˜ êµ¬ì¡°ëŠ” ê·¸ ì„œë¹„ìŠ¤ì˜ ì¤‘ìš”ë„ì— ë”°ë¼ì„œ ì°¨ì´ê°€ ë‚˜ê²Œ ë©ë‹ˆë‹¤.</p><p>ë„¤íŠ¸ì›Œí¬ì˜ í†µì‹ ì€ ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ë°©ì‹, ê·¸ë¦¬ê³  ìµìˆ™í•œ P2P(Peer to Peer)ê°€ ìˆìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì„±í•˜ëŠ” í˜•íƒœëŠ” ë‹¤ì–‘í•˜ë©° ëŒ€í‘œì ìœ¼ë¡œ star, ring, mesh, bus, tree, redundancyê°€ ìˆìŠµë‹ˆë‹¤. ì†Œê°œë§Œ í•˜ê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.</p><p>ë„¤íŠ¸ì›Œí¬ëŠ” ì§‘ë‹¨ì˜ í¬ê¸°ë‚˜ ì„œë¹„ìŠ¤ì˜ ì¤‘ìš”ë„ë‚˜ ëŒ€ì—­í­ì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤ê³  ì•ì„œ ë§ì”€ ë“œë ¸ìŠµë‹ˆë‹¤. ì´ì— ë”°ë¼ í¬ê²Œ ì„¸ ì¢…ë¥˜ë¡œ ë‚˜ëˆ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í™ˆ ë„¤íŠ¸ì›Œí¬, ê¸°ì—…ìš© ë„¤íŠ¸ì›Œí¬, ê·¸ë¦¬ê³  í´ë¼ìš°ë“œ ë„¤íŠ¸ì›Œí¬ ì…ë‹ˆë‹¤.</p><p>ë„¤íŠ¸ì›Œí¬ì˜ ì¢…ë¥˜ì— ë”°ë¼ ì¸í„°ë„·ì´ ê±°ì¹˜ê²Œ ë˜ëŠ” ê²½ë¡œê°€ ë‹¬ë¼ì§€ê²Œ ë˜ëŠ”ë° ê°„ë‹¨í•˜ê²Œ ìš”ì•½í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p><ol><li>í™ˆ ë„¤íŠ¸ì›Œí¬<ul><li>ì¸í„°ë„·â†’ISP(íšŒì„  ì—…ì²´)â†’ëª¨ë€(ëª¨ë€ì—ëŠ” í•œ ëŒ€ì˜ ì»´í“¨í„°ë§Œ ì—°ê²°)â†’ê³µìœ ê¸°(ì—¬ëŸ¬ëŒ€ ì‚¬ìš©ê°€ëŠ¥)â†’ì»´í“¨í„°</li></ul></li><li>ê¸°ì—…ìš© ë„¤íŠ¸ì›Œí¬<ul><li>ISP â†’ ì „ìš©ì„  â†’ ë¼ìš°í„° â†’ ë°©í™”ë²½ â†’ L3 ë°±ë³¸ â†’ L2 ìŠ¤ìœ„ì¹˜ â†’ ì„œë²„,ì»´í“¨í„° â†’ L4 ë¡œë“œë°¸ëŸ°ì„œ â†’ DMZ(ì™¸ë¶€ ê³µê°œ)</li></ul></li><li>í´ë¼ìš°ë“œ ë„¤íŠ¸ì›Œí¬(AWS)<ul><li>ì¸í„°ë„· â†’ Route53(DNS ì„œë¹„ìŠ¤) â†’ IGW â†’ VPC â†’ ELB â†’ Auto Scaling â†’ Security Group â†’ EC2</li></ul></li></ol><p>í™ˆ ë„¤íŠ¸ì›Œí¬ì˜ ê²½ë¡œë§Œ ëˆˆì— ìµìˆ™í•˜ê³  ë‹¤ë¥¸ ê²½ë¡œë“¤ì—ì„œëŠ” ë‚¯ì„  ìš©ì–´ë“¤ì´ ë§ì´ ë³´ì¼ ê²ƒìœ¼ë¡œ ìƒê°ë©ë‹ˆë‹¤. ê·¸ë‚˜ë§ˆ í´ë¼ìš°ë“œ ë„¤íŠ¸ì›Œí¬ì—ì„œ ì¡°ê¸ˆ ë‹¤ë¤„ë³¸ ìš©ì–´ë“¤ì´ ë“±ì¥í•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ë¥¼ ë‹¤ë¤„ë³´ë©´ì„œ ìš©ì–´ë“¤ì— ìµìˆ™í•´ì ¸ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><hr><h2 id="OSI-7-Layer-Open-Systems-Interconnection"><a href="#OSI-7-Layer-Open-Systems-Interconnection" class="headerlink" title="OSI 7 Layer(Open Systems Interconnection)"></a>OSI 7 Layer(Open Systems Interconnection)</h2><p>ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•´ì„œ ì¡°ê¸ˆ ë§› ë§Œì´ë¼ë„ ë³¸ ë¶„ë“¤ì€ OSI 7 Layerë¥¼ ë“¤ì–´ë³´ì…¨ì„ ê²ƒì…ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ í•˜ë©´ ë°”ë¡œ ë‚˜ì˜¤ëŠ” ê²Œ ì‚¬ì‹¤ OSI 7 Layerì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ëˆ„êµ°ê°€ê°€ ê°‘ìê¸° ì™€ì„œ Layer 4ê°€ ë­ì§€ ë¼ê³  ë¬¼ì–´ë³´ê±°ë‚˜ OSI 7 Layer ìì²´ê°€ ë¬´ì—‡ì´ëƒê³  ë¬¼ì–´ë³´ë©´ ë‹¹í™©í•˜ëŠ” í‘œì •ì„ ìˆ¨ê¸°ë©° ì• ì¨ ë­ì˜€ì§€ ë­ì˜€ì§€ ë°°ì› ëŠ”ë°, ê¸°ì–µí•˜ëŠ” ì²™ì„ í•˜ëŠ” ìì‹ ì„ ë§Œë‚˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. </p><p>ì´ì œ OSI 7 Layerì— ëŒ€í•´ ì•Œì•„ë³´ë©´ì„œ ë°ì´í„°ì˜ íë¦„ì´ ì–´ë–»ê²Œ ë˜ëŠ” ê±´ì§€ íŒŒì•…í•˜ë©´ì„œ ìì—°ìŠ¤ëŸ½ê²Œ ë¨¸ë¦¬ì— ë‚¨ê²¨ ë³´ë„ë¡ í•©ì‹œë‹¤.</p><p>OSI 7 LayerëŠ” ê°œë°©í˜• ì‹œìŠ¤í…œìœ¼ë¡œ, ë„¤íŠ¸ì›Œí¬ í”„ë¡œí† ì½œê³¼ í†µì‹ ì„ 7ê³„ì¸µìœ¼ë¡œ í‘œí˜„í•œ ê²ƒì…ë‹ˆë‹¤. í”„ë¡œí† ì½œì„ ê¸°ëŠ¥ ë³„ë¡œ ë‚˜ëˆ„ê³  ê³„ì¸µ ë³„ë¡œ êµ¬ë¶„ì„ í•˜ê¸° ìœ„í•´ì„œ ë§Œë“¤ì–´ ì¡ŒìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ë‚˜ëˆˆ ì´ìœ ëŠ” ë²¤ë” ê°„ì— í˜¸í™˜ì„±ì„ ìœ„í•œ <strong><code>í‘œì¤€</code></strong>ì´ í•„ìš”í–ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ëŸ° ì²´ê³„ê°€ ì¡íŒ ì´í›„ì— í‘œì¤€ì— ì˜í•œ ìš©ì´ì„±ê³¼ ì‰¬ìš´ ì ‘ê·¼ì„±, ê·¸ë¦¬ê³  ìœ ì§€ê´€ë¦¬ì˜ ìˆ˜ì›”ì„±ì„ í†µí•´ ê¸°ìˆ ì˜ ë°œì „ì´ ì¼ì–´ë‚˜ê²Œ ë˜ì—ˆê³  ì§€ê¸ˆì²˜ëŸ¼ ë„¤íŠ¸ì›Œí¬ì˜ íŠ¸ë˜í”½ íë¦„ì„ ì‚´í´ë³¼ ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ìì˜í•œ ì—­ì‚¬ëŠ” ë„˜ì–´ê°€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><h3 id="OSI-7-Layersì˜-êµ¬ì¡°"><a href="#OSI-7-Layersì˜-êµ¬ì¡°" class="headerlink" title="OSI 7 Layersì˜ êµ¬ì¡°"></a>OSI 7 Layersì˜ êµ¬ì¡°</h3><p><img src="/images/network_part1/layers.png" alt="OSI 7 Layers"></p><p>ì•„ë˜ë¡œ ê°ˆìˆ˜ë¡ ê¸°ê³„ê°€ ë°›ì•„ë“¤ì´ê¸° ì‰¬ìš´ ì–¸ì–´ì´ë©° ìœ„ë¡œ ê°ˆìˆ˜ë¡ ì‚¬ëŒì´ ë³´ê¸° í¸í•œ ì–¸ì–´ì…ë‹ˆë‹¤. ì¦‰, ì „ê¸°ì  ì‹ í˜¸ê°€ ì¸ê°„ì´ ì´í•´í•˜ëŠ” ì–¸ì–´ë¡œ ë°”ë€Œì–´ ê°€ëŠ” ê³¼ì •ì´ë¼ê³  ë³´ë©´ ì´í•´ê°€ ë˜ì‹¤ ê²ë‹ˆë‹¤. ì´ ë ˆì´ì–´ë¥¼ ê±°ì¹˜ë©´ì„œ ì–´ë–»ê²Œ ì „ê¸° ì‹ í˜¸ê°€ ì¸ê°„ì—ê²Œ ë„ë‹¬í•˜ëŠ” ì§€ ì‚´í´ ë³´ê² ìŠµë‹ˆë‹¤. </p><p>ê°„ë‹¨í•˜ê²Œ ì‚´í´ë³´ê³  ê¹Šê²Œ ë“¤ì–´ê°€ë³´ê² ìŠµë‹ˆë‹¤. ê°€ì¥ ë°‘ë‹¨ì˜ LayerëŠ” 1ë‹¨ê³„ë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤. 1ë‹¨ê³„ì—ì„œë¶€í„° ì‹œì‘í•˜ê³  7ë‹¨ê³„ë¡œ ì˜¬ë¼ê°€ì„œ ìš°ë¦¬ê°€ ë³¼ìˆ˜ìˆëŠ”, ì¸ê°„ì—ê²Œ ì¹œìˆ™í•œ ë³€í™˜ëœ ì •ë³´ë¥¼ ë§ˆì£¼í•˜ê²Œ ë©ë‹ˆë‹¤. </p><p>ì´ì œ, ì¸í„°ë„· ì„ ì„ ì»´í“¨í„°ì— ê½‚ê² ìŠµë‹ˆë‹¤.</p><h3 id="Layer-1"><a href="#Layer-1" class="headerlink" title="Layer 1"></a>Layer 1</h3><p>Physical. <strong>ë¬¼ë¦¬ ê³„ì¸µìœ¼ë¡œì„œ ë„¤íŠ¸ì›Œí¬ í•˜ë“œì›¨ì–´ ì „ì†¡ ê¸°ìˆ ë“¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤</strong>. </p><p>ì¥ì¹˜(ì»´í“¨í„°)ì™€ í†µì‹  ë§¤ì²´ ì‚¬ì´ì˜ ë¹„ì •í˜• ë°ì´í„°ì˜ ì „ì†¡ì„ ë‹´ë‹¹í•˜ë©° í•˜ë“œì›¨ì–´ ë¶€ë¶„ì— í•´ë‹¹ë©ë‹ˆë‹¤. ë””ì§€í„¸ bitì¸ 0,1ì„ ì „ê¸° ë¬´ì„  ë˜ëŠ” ê´‘ ì‹ í˜¸ë¡œ ë³€í™˜í•˜ê³ , ì „ì†¡ë˜ëŠ” ë°©ë²•ê³¼ ì œì–´ ì‹ í˜¸, ê¸°ê³„ì  ì†ì„± ë“±ì„ ì •ì˜í•©ë‹ˆë‹¤. ë°ì´í„° ì „ë‹¬ì˜ ì—­í• ë§Œì„ í•©ë‹ˆë‹¤. ëŒ€í‘œì ì¸ ì¥ë¹„ë¡œëŠ” ì¼€ì´ë¸”, ì¸í„°í˜ì´ìŠ¤(110V 220V), í—ˆë¸Œ, ë¦¬í”¼í„° ë“±ì´ ìˆìŠµë‹ˆë‹¤.</p><h3 id="Layer-2"><a href="#Layer-2" class="headerlink" title="Layer 2"></a>Layer 2</h3><p>Data Link. <strong>ì´ë”ë„·, ëœì¹´ë“œ, MAC í†µì‹ ì„ ë‹´ë‹¹í•˜ë©° ì—ëŸ¬ë¥¼ ê²€ì¶œí•˜ê³  ì¬ì „ì†¡í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤</strong>. </p><p>ë™ì¼ ë„¤íŠ¸ì›Œí¬ ë‚´ì—ì„œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê³  ë§í¬ë¥¼ í†µí•´ì„œ ì—°ê²°ì„ ì„¤ì •í•˜ê³  ê´€ë¦¬í•˜ê³  ë¬¼ë¦¬ê³„ì¸µì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜¤ë¥˜ë¥¼ ê°ì§€í•˜ê³  ìˆ˜ì •í•©ë‹ˆë‹¤. ë‘ ì¥ì¹˜ ê°„ì˜ ì‹ ë¢°ì„± ìˆëŠ” ì •ë³´ ì „ì†¡ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. ì „ì†¡ ë‹¨ìœ„ëŠ” Frameì´ë©° ë°ì´í„° ë§í¬ ê³„ì¸µì€ MACê³¼ LLCë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. ìº¡ìŠí™”í•˜ëŠ” í”„ë ˆì´ë°ê³¼ íë¦„ì œì–´, ì—ëŸ¬ì œì–´ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤. </p><ul><li>MAC(Media Access Control) ì¥ë¹„ë“¤ì´ í†µì‹ í•˜ê¸° ìœ„í•œ ê°ê°ì˜ ì¼ë ¨ë²ˆí˜¸</li><li>LLC(Logical Link Control)</li></ul><p>ëª¨ë€, ìŠ¤ìœ„ì¹˜, ë¸Œë¦¿ì§€ê°€ ëŒ€í‘œì ì¸ ì¥ë¹„ì…ë‹ˆë‹¤.</p><hr><h3 id="Layer-3"><a href="#Layer-3" class="headerlink" title="Layer 3"></a>Layer 3</h3><p><strong>Network. IPí†µì‹ ê³¼ ë¼ìš°íŒ…ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.</strong></p><p>ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê³  IP ì£¼ì†Œë¡œ í†µì‹  ì¶œë°œì§€ IPì—ì„œ ëª©ì ì§€ IPë¡œ ë°ì´í„° í†µì‹  ì‹œ ì¤‘ê°„ì—ì„œ ì–´ë–»ê²Œ ì¤‘ê³„í•  ê²ƒ ì¸ê°€ë¥¼ ì •í•©ë‹ˆë‹¤. ì „ì†¡ë‹¨ìœ„ëŠ” íŒ¨í‚·ì´ê³  ëª©ì ì§€ê¹Œì§€ ê²½ë¡œ ì„¤ì •ì„ í•©ë‹ˆë‹¤. ì²˜ë¦¬ ë°ì´í„°ê°€ í° ê²½ìš°ì—ëŠ” ë¶„í• (íŒ¨í‚·í™”)í•˜ê³  ì „ì†¡ í›„ì— ëª©ì ì§€ì—ì„œ ì¬ ì¡°ë¦½í•˜ì—¬ ë¶™ì—¬ì§„ sequence ë„˜ë²„ëŒ€ë¡œ ë©”ì‹œì§€ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. ëŒ€í‘œì ì¸ ì¥ë¹„ë¡œëŠ” L3 ìŠ¤ìœ„ì¹˜, ë¼ìš°í„°ê°€ ìˆìŠµë‹ˆë‹¤.</p><h3 id="Layer-4"><a href="#Layer-4" class="headerlink" title="Layer 4"></a>Layer 4</h3><p><strong>Transport. TCP / UDP í†µì‹  í›„ ì–´ë–¤ ì„œë¹„ìŠ¤ë¥¼ í• ì§€ ê²°ì •í•©ë‹ˆë‹¤.</strong></p><p>í˜¸ìŠ¤íŠ¸ ê°„ì˜ ë°ì´í„°(ì„œë¹„ìŠ¤) ì „ì†¡ì„ í¬íŠ¸ë¡œ ì •ì˜í•´ì£¼ëŠ” ë ˆì´ì–´ë¡œ ì˜¤ë¥˜ ë³µêµ¬ ë° íë¦„ ì œì–´, ì™„ë²½í•œ ë°ì´í„° ì „ì†¡ì„ ë³´ì¥í•©ë‹ˆë‹¤. TCP/UDP ë°©ì‹ì´ ì¡´ì¬í•˜ê³  ì „ì†¡ë‹¨ìœ„ëŠ” ì„¸ê·¸ë¨¼íŠ¸ì´ë©° ì´ ë ˆì´ì–´ ë¶€í„° ì†Œí”„íŠ¸ì›¨ì–´ ë ˆë²¨ì— í•´ë‹¹í•©ë‹ˆë‹¤<strong>.</strong> í¬íŠ¸ë¥¼ ì œì–´í•œë‹¤ëŠ” ì˜ë¯¸ë¡œ L4 ë¡œë“œë°¸ëŸ°ì„œê°€ ìˆìŠµë‹ˆë‹¤. L4ìŠ¤ìœ„ì¹˜ëŠ” 3ê³„ì¸µì—ì„œ ì˜¨ íŠ¸ë˜í”½ì„ ë¶„ì„í•˜ì—¬ ì„œë¹„ìŠ¤ ì¢…ë¥˜ë¥¼ êµ¬ë¶„í•´ ì¤ë‹ˆë‹¤.</p><h4 id="ë¡œë“œë°¸ëŸ°ì„œì˜-ì—­í• "><a href="#ë¡œë“œë°¸ëŸ°ì„œì˜-ì—­í• " class="headerlink" title="ë¡œë“œë°¸ëŸ°ì„œì˜ ì—­í• ?"></a>ë¡œë“œë°¸ëŸ°ì„œì˜ ì—­í• ?</h4><p>EC2ì—ì„œ ë¡œë“œ ë°¸ëŸ°ì„œë¥¼ ë³´ì…¨ì„ ê²ë‹ˆë‹¤. L4ì¥ë¹„ì¸ ë¡œë“œë°¸ëŸ°ì„œì˜ ì—­í• ì„ ê±°ì˜ ê·¸ëŒ€ë¡œ í•˜ê³  ìˆë‹¤ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. ë¡œë“œë°¸ëŸ°ì„œëŠ” ë‚ ë¼ì˜¤ëŠ” ìš”ì²­ë“¤ì„ ë°›ì•„ì„œ ì˜ ë‚˜ëˆ„ì–´ ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ë¡œë“œë°¸ëŸ°ì„œê°€ ì—†ë‹¤ë©´, ìš”ì²­ì´ í•œ ê³³ìœ¼ë¡œ ëª°ë ¤ì„œ ë¹„íš¨ìœ¨ì ìœ¼ë¡œ ì‘ì—…ì„ ì²˜ë¦¬í•˜ê²Œ ë˜ê±°ë‚˜ ì‹¬í•  ê²½ìš°, ì„œë²„ì— ì¥ì• ê°€ ìƒê²¨ ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ë¥¼ í•˜ê¸° í˜ë“¤ì–´ì§‘ë‹ˆë‹¤. </p><h3 id="Layer-5"><a href="#Layer-5" class="headerlink" title="Layer 5"></a>Layer 5</h3><p>Session. TCP/IP í†µì‹  ì—°ê²°ì„ ìˆ˜ë¦½ ìœ ì§€ ì¤‘ë‹¨í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.</p><p>ë¡œì»¬ ë° ì›ê²© ì• í”Œë¦¬ì¼€ì´ì…˜ ê°„ì˜ IP/ Port ì—°ê²°ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.</p><p>Session Tableì— êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©° ë°ì´í„°ëŠ” í…Œì´ë¸”ì— ì í˜€ìˆëŠ” IP/Portë¡œ ì—°ê²°ë©ë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -an <span class="comment">#ëª…ë ¹ì–´ë¡œ Session Table í™•ì¸ê°€ëŠ¥</span></span><br></pre></td></tr></table></figure><h3 id="Layer-6"><a href="#Layer-6" class="headerlink" title="Layer 6"></a>Layer 6</h3><p>Presentation. ì¸ì½”ë”©, ì•”í˜¸í™” ì••ì¶•ì„ ë‹´ë‹¹í•˜ê³  ë°ì´í„°ë¥¼ ì‚¬ëŒì´ ì´í•´í•˜ë„ë¡ ì¸ì½”ë”©í•©ë‹ˆë‹¤.</p><p>ì‚¬ìš©ì í”„ë¡œê·¸ë¨ê³¼ ë„¤íŠ¸ì›Œí¬ í˜•ì‹ê°„ì— ë°ì´í„°ë¥¼ ë³€í™˜í•´ í‘œí˜„ê³¼ ë…ë¦½ì„±ì„ ì œê³µí•©ë‹ˆë‹¤. ì¸ì½”ë”©, ë””ì½”ë”©, ì•”í˜¸í™”, ì••ì¶•ì´ ì´ ë ˆì´ì–´ì— ì†í•˜ê²Œ ë©ë‹ˆë‹¤. ASCII, JPG, MPEG ë“±ì˜ ë²ˆì—­ì„ í•©ë‹ˆë‹¤.</p><h3 id="Layer-7"><a href="#Layer-7" class="headerlink" title="Layer 7"></a>Layer 7</h3><p>Application. ë‹¤ì–‘í•œ ì‘ìš© ì„œë¹„ìŠ¤ ê³„ì¸µì…ë‹ˆë‹¤. HTTP, SMTP, ëª¨ë°”ì¼ ì„œë¹„ìŠ¤ ë“±ì´ ì—¬ê¸°ì— í•´ë‹¹ë©ë‹ˆë‹¤. </p><p>ì‘ìš© í”„ë¡œì„¸ìŠ¤ ê°„ì˜ ì •ë³´ êµí™˜ì„ ë‹´ë‹¹í•˜ë©°, ì‚¬ìš©ìì™€ ê°€ì¥ ë°€ì ‘í•œ ì†Œí”„íŠ¸ì›¨ì–´ ë‹¨ì…ë‹ˆë‹¤. ì´ë©”ì¼ ì„œë¹„ìŠ¤(SMTP), íŒŒì¼ì „ì†¡(FTP)</p><h2 id="ê·¼ë°-ë°ì´í„°ë¥¼-ì–´ë–»ê²Œ-ì „ì†¡í•˜ê³ -ë°›ëŠ”ê±°ì§€â€¦"><a href="#ê·¼ë°-ë°ì´í„°ë¥¼-ì–´ë–»ê²Œ-ì „ì†¡í•˜ê³ -ë°›ëŠ”ê±°ì§€â€¦" class="headerlink" title="ê·¼ë° ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì „ì†¡í•˜ê³  ë°›ëŠ”ê±°ì§€â€¦"></a>ê·¼ë° ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì „ì†¡í•˜ê³  ë°›ëŠ”ê±°ì§€â€¦</h2><p>OSI 7 Layerë¥¼ ê³µë¶€í•´ë„ ë°ì´í„°ê°€ ì–´ë–»ê²Œ ì™”ë‹¤ê°”ë‹¤ í•˜ëŠ”ì§€ ì˜ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤. ì´ì œ ì´ë¡ ì„ ë°°ì› ìœ¼ë‹ˆ íë¦„ì´ ì–´ë–»ê²Œ ë˜ëŠ” ê±´ì§€ ì•Œì•„ë³´ë„ë¡ í•©ì‹œë‹¤. </p><p>ë°ì´í„°ëŠ” ì¸ìº¡ìŠë ˆì´ì…˜ê³¼ ë””ìº¡ìŠë ˆì´ì…˜ì„ í†µí•´ì„œ Layer ìœ„ë¡œ ì˜¬ë¼ê°€ê¸°ë„ í•˜ê³  ë‚´ë ¤ê°€ê¸°ë„ í•©ë‹ˆë‹¤. ì¸ìº¡ìŠë ˆì´ì…˜ì€ ì‰½ê²Œ ë§í•´ì„œ í—¤ë”ë¥¼ ë¶™ì´ëŠ” ê²ƒì„ ë§í•˜ê³ , ë””ìº¡ìŠë ˆì´ì…˜ì´ë€ í—¤ë”ë¥¼ ë–¼ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. </p><p><strong>ì¸ìº¡ìŠë ˆì´ì…˜ê³¼ ë””ìº¡ìŠë ˆì´ì…˜ì´ ì™œ í•„ìš”í•œë°ìš”?</strong> ë¼ê³  ë¬¼ì–´ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™œëƒë©´ ë°ì´í„° ìì²´ë¡œëŠ” ìƒëŒ€ë°©ì—ê²Œ ì „ë‹¬ì´ ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ìš°ë¦¬ê°€ ì–´ë–¤ ë¬¼ê±´ì„ ìƒëŒ€ë°©ì—ê²Œ ë³´ë‚´ë ¤ê³  í• ë•Œ íƒë°°íšŒì‚¬ë¥¼ ì´ìš©í•˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•˜ë‹¤ê³  ë³´ë©´ ì´í•´ê°€ ë˜ì‹¤ ê²ë‹ˆë‹¤. ë¬¼ë¡  ìƒëŒ€ë°©ì—ê²Œ ë¬¼ê±´ì„ ê°–ë‹¤ê°€ ì£¼ê±°ë‚˜ ì•ì—ì„œ ë§¤ëª°ì°¨ê²Œ ë˜ì§€ëŠ” ê²½ìš°ë„ ìˆê¸´ í•˜ì§€ë§Œ, í’ˆê²©ìˆëŠ” ì‚¬íšŒì¸ì¸ ìš°ë¦¬ëŠ” íƒë°°íšŒì‚¬ë¥¼ ì´ìš©í•œë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><p>ìš°ë¦¬ê°€ ë¬¼ê±´ì„ ë°›ìœ¼ë©´ ë¬¼ê±´ì€ í¬ì¥ì— ì•„ë¦„ë‹µê²Œ ìŒ“ì—¬ì ¸ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì†Œì¤‘í•œ ì¡´ì¬ì´ê¸°ì— ì˜ˆìœ í¬ì¥ì§€ë¡œ ìŒ“ì—¬ì ¸ ìˆë‹¤ê³  ìƒê°í•´ë³´ê² ìŠµë‹ˆë‹¤. ê²‰ ë¦¬ë³¸ì„ í’€ê³  ì˜ˆìœ í¬ì¥ì§€ë¥¼ í’€ê³ , ë¾±ë¾±ì´ë¥¼ ì œê±°í•˜ê³  ì¢…ì´í¬ì¥ì„ ì œê±°í•˜ê³  â€¦ í•´ì„œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ë¬¼ê±´ì„ ë°›ê²Œ ë©ë‹ˆë‹¤. </p><p><img src="/images/network_part1/present.png" alt="ë°ì´í„° ë°›ì•„ë¼!"></p><p>ë°ì´í„° ì—­ì‹œ ì´ì™€ ê°™ìŠµë‹ˆë‹¤. ë°ì´í„° ë˜í•œ í—¤ë”ë¡œ ìŒ“ì—¬ì ¸ ìˆëŠ” í¬ì¥ì§€ë¥¼ ë””ìº¡ìŠë ˆì´ì…˜ í•´ë‚˜ê°€ì„œ ìµœì¢…ë‹¨ê³„ì¸ Application ë ˆì´ì–´ì— ë„ë‹¬í•´ ìš°ë¦¬ê°€ ì´í•´í•  ìˆ˜ ìˆê²Œ ë˜ì–´ ìˆëŠ” ë°ì´í„°ë¥¼ ë§ˆì£¼í•˜ê²Œ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p><p>ë‹¤ë¥¸ ìƒëŒ€ë°©ì—ê²Œ ë³´ë‚¼ ë•ŒëŠ”? ë˜‘ê°™ì´ ì—­ìœ¼ë¡œ ì˜ˆì˜ê²Œ í¬ì¥ì„ í•´ì„œ ìƒëŒ€ë°©ì—ê²Œ ë³´ë‚´ë©´ ë©ë‹ˆë‹¤. </p><p>ìš°ë¦¬ê°€ ìƒëŒ€ë°©ì—ê²Œ ë°ì´í„°ë¥¼ ì „ì†¡í•œë‹¤ê³  í•´ë´…ì‹œë‹¤. íë¦„ì€ ë‹¤ìŒ ê°™ìŠµë‹ˆë‹¤.</p><p>ë°ì´í„°(ì¸ì½”ë”©) â†’ ì„¸ê·¸ë¨¼íŠ¸(Layer4) â†’ íŒ¨í‚·(Layer3) â†’ í”„ë ˆì„(Layer2) â†’ ë¹„íŠ¸(Layer1)</p><p>ì¸ê°„ì´ ì´í•´í•˜ê¸° ì‰¬ìš´ í˜•íƒœë¡œ ë˜ì–´ìˆëŠ” ë°ì´í„°ê°€ ê¸°ê³„ê°€ ì´í•´í•  ìˆ˜ ìˆê²Œ ì¸ì½”ë”©ë˜ê³  í—¤ë”ë¥¼ ë¶™ì—¬ë‚˜ê°€ë©´ì„œ, ìµœì¢…ì ìœ¼ë¡œëŠ” ë¹„íŠ¸ë¡œ í‘œí˜„ë˜ì–´ ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ë³´ë‚´ì–´ì§ˆ ì¤€ë¹„ë¥¼ ë§ˆì¹˜ê²Œ ë©ë‹ˆë‹¤. </p><h4 id="OSI-7-Layer-ìš”ì•½"><a href="#OSI-7-Layer-ìš”ì•½" class="headerlink" title="OSI 7 Layer ìš”ì•½"></a>OSI 7 Layer ìš”ì•½</h4><table><thead><tr><th>Layer</th><th>PUD</th><th>Protocol</th><th>Device</th><th>Function</th></tr></thead><tbody><tr><td>7 (Application)</td><td>Data</td><td>HTTP, FTP, DNS, DHCP, SMTP, NFS, RTSP</td><td></td><td>ì‚¬ìš©ìê°€ ë„¤íŠ¸ì›Œí¬ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ê³„ì¸µì´ë‹¤.ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤, ì „ììš°í¸, ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ ë“± ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•œë‹¤.</td></tr><tr><td>6 (Presentation)</td><td>Data</td><td>JPEG, MPEG, SMB, AFP</td><td></td><td>ë°ì´í„°ë¥¼ í•˜ë‚˜ì˜ í‘œí˜„ í˜•íƒœë¡œ ë³€í™˜í•œë‹¤.í•„ìš”í•œ ë²ˆì—­ì„ ìˆ˜í–‰í•˜ì—¬ ë‘ ì¥ì¹˜ê°€ ì¼ê³¼ë˜ê²Œ ì „ì†¡ ë°ì´í„°ë¥¼ ì´í•´í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.</td></tr><tr><td>5 (Session)</td><td>Data(Payload)</td><td>SSH, TLS, ISO8327, Apple talk, NetBIOS</td><td></td><td>í†µì‹  ì„¸ì…˜ì„ êµ¬ì„±í•˜ëŠ” ê³„ì¸µìœ¼ë¡œ í¬íŠ¸(port) ì—°ê²°ì´ë¼ê³ ë„ í•  ìˆ˜ ìˆë‹¤. í†µì‹  ì¥ì¹˜ ê°„ì˜ ìƒí˜¸ ì‘ìš©ì„ ì„¤ì •í•˜ê³  ìœ ì§€í•˜ë©° ë™ê¸°í™”í•œë‹¤. ì‚¬ìš©ì ê°„ì˜ í¬íŠ¸ ì—°ê²°(ì„¸ì…˜) ì´ ìœ íš¨í•œì§€ í™•ì¸í•˜ê³  ì„¤ì •í•œë‹¤.</td></tr><tr><td>4 (Transport)</td><td>Segments</td><td>TCP, UDP, RTP, SCTP, SPX</td><td>Gateway</td><td>End to End Commnicationì „ì²´ë©”ì‹œì§€ë¥¼ ë°œì‹ ì§€ ëŒ€ ëª©ì ì§€ ê°„ ì œì–´ì™€ ì—ëŸ¬ë¥¼ ê´€ë¦¬í•œë‹¤. íŒ¨í‚·ë“¤ì˜ ì „ì†¡ì´ ìœ íš¨í•œì§€ í™•ì¸í•˜ê³  ì‹¤íŒ¨í•œ íŒ¨í‚·ì€ ë‹¤ì‹œ ë³´ë‚´ëŠ” ë“± ì‹ ë¢°ì„± ìˆëŠ” í†µì‹ ì„ ë³´ì¥í•˜ë©° ë¨¸ë¦¬ ë§ì—ëŠ” Segment ê°€ í¬í•¨ëœë‹¤.</td></tr><tr><td>3 (Network)</td><td>Packets</td><td>IP, ARP, ICMP, IGMP, RIP, IPX, DDP,OSPF, IS-IS, BGP</td><td>Router</td><td>ë‹¤ì¤‘ ë„¤íŠ¸ì›Œí¬ ë§í¬ì—ì„œ íŒ¨í‚·ì„ ë°œì‹ ì§€ë¡œë¶€í„° ëª©ì ì§€ë¡œ ìµœë‹¨ ê±°ë¦¬ë¡œ ì „ë‹¬í•  ì±…ì„ì„ ê°–ëŠ”ë‹¤. ê° íŒ¨í‚·ì´ ì‹œì‘ì§€ì ì—ì„œ ìµœì¢…ëª©ì ì§€ê¹Œì§€ ì„±ê³µì ìœ¼ë¡œ ì „ë‹¬ ë˜ë„ë¡ í•œë‹¤.</td></tr><tr><td>2 (Data Link)</td><td>Frames</td><td>Ethernet, PPP, Wireless Len</td><td>Bridge, Switch</td><td>ì˜¤ë¥˜ì—†ì´ í•œ ì¥ì¹˜ì—ì„œ ë‹¤ë¥¸ ì¥ì¹˜ë¡œ í”„ë ˆì„(ë¹„íŠ¸ì˜ ëª¨ìŒ)ì„ ì „ë‹¬í•˜ëŠ” ì—­í• ë¡œ ìŠ¤ìœ„ì¹˜ ê°™ì€ ì¥ë¹„ì˜ ê²½ìš° MAC ì£¼ì†Œë¥¼ ì´ìš©í•˜ì—¬ ì •í™•í•œ ì¥ì¹˜ë¡œ ì •ë³´ë¥¼ ì „ë‹¬í•œë‹¤.</td></tr><tr><td>1 (Physical)</td><td>Bits</td><td>Ethernet, RS-232C,Modem</td><td>Hub, Reafiter</td><td>ë¬¼ë¦¬ì  ë§¤ì²´ë¥¼ í†µí•´ ë¹„íŠ¸ íë¦„ì„ ì „ì†¡í•˜ê¸° ìœ„í•´ ìš”êµ¬ë˜ëŠ” ê¸°ëŠ¥ë“¤ì„ ì¡°ì •í•œë‹¤.ì¼€ì´ë¸”, ì—°ê²° ì¥ì¹˜ ë“±ê³¼ ê°™ì€ ê¸°ë³¸ì ì¸ ë¬¼ë¦¬ì  ì—°ê²°ê¸°ì˜ ì „ê¸°ì  ëª…ì„¸ë¥¼ ì •í•˜ê³ ë„¤íŠ¸ì›Œí¬ì˜ ë‘ ë…¸ë“œë¥¼ ë¬¼ë¦¬ì ìœ¼ë¡œ ì—°ê²°ì‹œì¼œì¤€ë‹¤.</td></tr></tbody></table><p>ì¶œì²˜ : <a href="https://kin3303.tistory.com/247">https://kin3303.tistory.com/247</a></p><hr><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p><a href="https://ko.wikipedia.org/wiki/OSI_%EB%AA%A8%ED%98%95">https://ko.wikipedia.org/wiki/OSI_ëª¨í˜•</a></p><p><a href="http://blog.naver.com/PostView.nhn?blogId=pst8627&logNo=221670903384">http://blog.naver.com/PostView.nhn?blogId=pst8627&amp;logNo=221670903384</a></p><p><a href="https://jhnyang.tistory.com/194">https://jhnyang.tistory.com/194</a></p><p><a href="https://kin3303.tistory.com/247">https://kin3303.tistory.com/247</a></p>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2020/11/29/network-part1/#disqus_thread</comments>
    </item>
    
    <item>
      <title>ê¸€ë˜  5ê¸° ë‹¤ì§í•˜ê¸°</title>
      <link>http://tkdguq05.github.io/2020/11/15/geultto5/</link>
      <guid>http://tkdguq05.github.io/2020/11/15/geultto5/</guid>
      <pubDate>Sun, 15 Nov 2020 08:41:03 GMT</pubDate>
      <description>
      
        &lt;p&gt;ê¸€ë˜ 5ê¸°ë¥¼ ì‹œì‘í•˜ë©°, ë‹¤ì§í•˜ê¸°.&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>ê¸€ë˜ 5ê¸°ë¥¼ ì‹œì‘í•˜ë©°, ë‹¤ì§í•˜ê¸°.</p><a id="more"></a><h1 id="ê¸€ë˜-5ê¸°ë¥¼-ì‹œì‘í•˜ë©°"><a href="#ê¸€ë˜-5ê¸°ë¥¼-ì‹œì‘í•˜ë©°" class="headerlink" title="ê¸€ë˜ 5ê¸°ë¥¼ ì‹œì‘í•˜ë©°"></a>ê¸€ë˜ 5ê¸°ë¥¼ ì‹œì‘í•˜ë©°</h1><p>ë§‰ìƒ ì´ ê¸€ì„ ì ìœ¼ë ¤ë‹ˆ ì–´ë–»ê²Œ ì‹œì‘í•´ì•¼ ê°ì´ ì¡íˆì§€ ì•Šì•˜ë‹¤. ê·¸ë˜ì„œ ì§€ë‚œ ê¸°ìˆ˜ì— ì¼ë˜ ë‚´ ë‹¤ì§ê¸€ì„ í™•ì¸í–ˆë‹¤. <a href="https://tkdguq05.github.io/2020/02/24/geultto4/">ê¸€ë˜ 4ê¸° ë‹¤ì§ê¸€</a><br>ì§€ë‚œ ë²ˆ ê¸€ì„ ë³´ë‹ˆ ê½¤ ë“¤ëœ¬ ë§ˆìŒì— ê¸€ì„ ì‘ì„±í•œ ëŠë‚Œì´ ë“ ë‹¤. ìƒê°í•´ë³´ë‹ˆ, 9ê°œì›” ì „ì— ë¹„í•´ ìš”ì¦˜ì€ ë“¤ëœ° ì¼ì´ ë§ì´ ì—†ëŠ” ê²ƒ ê°™ë‹¤. ì‹œê°„ì´ ì§€ë‚˜ë©´ì„œ ë¬´ëŒì§€ê³  íšŒì‚¬ìƒí™œì— ê²¬ë””ëŠ” ê²ƒìœ¼ë¡œ ì„¸ì›”ì„ ë³´ë‚´ëŠ” ëŠë‚Œì´ë‹¤. ê¸€ë˜ 4ê¸°ê°€ ëë‚œ í›„ì— í•œë™ì•ˆ ê¸€ë„ ì“°ì§€ ì•Šê³  ë’¹êµ´ ë’¹êµ´ ê±°ë¦¬ë©° ì—´ì‹¬íˆ ì³‡ë°”í€´ ë„ëŠ” ì‚¶ì„ ì§€ì†í–ˆì—ˆë‹¤. ìµœê·¼ë“¤ì–´ ì´ë ‡ê²Œ ì˜ë¯¸ì—†ì´ ì‚´ê³  ì‹¶ì§€ ì•Šë‹¤ê³  ë‹¤ì§í–ˆëŠ”ë°, ë§ˆì¹¨ ê¸€ë˜ 5ê¸°ê°€ ì‹œì‘ëê³  ì´ì „ì— ë¹„í•´ ì¢€ ë” ë‚˜ì€ ê¸€ì„ ì“°ë©´ì„œ í•˜ë£¨ í•˜ë£¨ë¥¼ ë‹¤ì‹œ ê¸°ë¡í•´ë´ì•¼ê² ë‹¤ê³  ë§ˆìŒë¨¹ì—ˆë‹¤.</p><p>ì§€ë‚˜ê³ ë³´ë‹ˆ, ê·¸ë ‡ê²Œ ì§€ë‚˜ê°„ ì‹œê°„ì´ ë„ˆë¬´ë‚˜ ì•„ê¹Œì› ê¸° ë•Œë¬¸ì´ë‹¤.</p><h2 id="ì–´ë–¤-ê¸€ì„-ì“¸ê¹Œ-í˜¹ì€-ì–´ë–»ê²Œ-ì„±ì¥í• ê¹Œ"><a href="#ì–´ë–¤-ê¸€ì„-ì“¸ê¹Œ-í˜¹ì€-ì–´ë–»ê²Œ-ì„±ì¥í• ê¹Œ" class="headerlink" title="ì–´ë–¤ ê¸€ì„ ì“¸ê¹Œ, í˜¹ì€ ì–´ë–»ê²Œ ì„±ì¥í• ê¹Œ"></a>ì–´ë–¤ ê¸€ì„ ì“¸ê¹Œ, í˜¹ì€ ì–´ë–»ê²Œ ì„±ì¥í• ê¹Œ</h2><p>ê°œë°œ ê´€ë ¨ ê¸€ì€ ë‹¤ë¥¸ ê¸€ê³¼ëŠ” ë‹¤ë¥´ê²Œ ë‚´ê°€ ê²½í—˜í•˜ê±°ë‚˜ ê³µë¶€í•œ ë‚´ìš©ë“¤ì´ ì£¼ì´ê¸° ë•Œë¬¸ì—, ê¸€ë˜ í™œë™ì„ í•˜ë©° ì–´ë–¤ ê¸€ì„ ì“¸ì§€ ê²°ì •í•˜ëŠ” ê²ƒì€ ì–´ë–»ê²Œ ì„±ì¥í• ì§€, ë°©í–¥ì„ ê²°ì •í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤ê³  ìƒê°í•œë‹¤. 4ê¸°ì—ì„œ ì¼ì—ˆë˜ ê¸€ì„ ì­‰ ë³´ë©´, ë…¼ë¬¸ ë¦¬ë·°, pyspark, airflow ë“± ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ì™€ ì—”ì§€ë‹ˆì–´ë§ ê·¸ ì‚¬ì´ì¸ ê²ƒ ê°™ë‹¤. ì‚¬ì‹¤ ì—…ë¬´ì ìœ¼ë¡œëŠ” ì¶”ì²œì‹œìŠ¤í…œì´ë‚˜ ëª¨ë¸ë§ ê´€ë ¨ ì¼ì„ ë” ë§ì´ í–ˆëŠ”ë°, ìƒˆë¡œ ë°°ìš´ ê°œë…ë“¤ì´ ì£¼ë¡œ ì—”ì§€ë‹ˆì–´ë§ íŒŒíŠ¸ë¼ ìƒˆë¡œ ì–»ì€ ë‚´ìš©ì„ ì£¼ë¡œ ê¸€ë¡œ ì‘ì„±í–ˆë˜ ê²ƒ ê°™ë‹¤. (ê·¼ë° ì§€ë‚˜ê³  ë³´ë‹ˆ ìƒê°ë³´ë‹¤ ê¸€ì„ ì•ˆì“´ ê²ƒ ê°™ì•„ì„œ ë¯¼ë§í•˜ë‹¤.) ì´ë²ˆ 5ê¸°ì—ì„œë„ ì—”ì§€ë‹ˆì–´ë§ ê¸€ë“¤ê³¼ ì¸í”„ë¼ ê´€ë ¨ ê¸€ë“¤ì„ ì‘ì„±í•´ ë‚˜ê°ˆ ê²ƒ ê°™ë‹¤. íšŒì‚¬ì—ì„œì˜ ë‹´ë‹¹ ì—…ë¬´ê°€ ë°ì´í„° ì—”ì§€ë‹ˆì–´ë§ ìª½ìœ¼ë¡œ ì˜®ê²¨ì¡Œê¸° ë•Œë¬¸ì´ë‹¤. ì˜®ê²¨ì¡Œë‹¤ê³  í•˜ë‹ˆ ê°•ì œì ìœ¼ë¡œ ë°°ì¹˜ëœ ëŠë‚Œì´ê¸´ í•˜ì§€ë§Œ, ì‚¬ì‹¤ ê·¸ë ‡ì§€ëŠ” ì•Šê³  ì—”ì§€ë‹ˆì–´ë§ ì—…ë¬´ì— í¥ë¯¸ê°€ ìƒê²¼ë‹¤. ê·¸ë˜ì„œ ê±°ì˜ ìì›í•˜ë‹¤ì‹œí”¼ ëœ ê²ƒì´ê³  ê´€ë ¨ ì—…ë¬´ë¥¼ ë§¡ê²Œ ë˜ì—ˆë‹¤. ì—”ì§€ë‹ˆì–´ë§ ì—…ë¬´ë¥¼ í†µí•´ ì‹¤ì œë¡œ ì„œë¹„ìŠ¤ê°€ ì–´ë–»ê²Œ ëŒì•„ê°€ê³  ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ í˜ë ¤ë³´ë‚´ê³  ê´€ë¦¬í•´ì•¼ í•˜ëŠ” ì§€ì— ì•Œê²Œ ë˜ì–´ ì¬ë¯¸ë¥¼ ëŠë¼ê³  ìˆë‹¤. ëª©í‘œí•˜ëŠ” ë°”ëŠ” ë°ì´í„° ì—”ì§€ë‹ˆì–´ë§ì— ë” ë‚˜ì•„ê°€ ë¨¸ì‹ ëŸ¬ë‹ ì—”ì§€ë‹ˆì–´ë§ì´ì§€ë§Œ, ì¼ë‹¨ ë°”ë‹¥ì„ ì˜ ë‹¦ì•„ë³¼ ìƒê°ì´ë‹¤.</p><h2 id="ê¸€ì“°ê¸°-ì™¸ì—-ë‚´ë…„ì—ëŠ”"><a href="#ê¸€ì“°ê¸°-ì™¸ì—-ë‚´ë…„ì—ëŠ”" class="headerlink" title="ê¸€ì“°ê¸° ì™¸ì—, ë‚´ë…„ì—ëŠ”"></a>ê¸€ì“°ê¸° ì™¸ì—, ë‚´ë…„ì—ëŠ”</h2><p>ê¸€ë˜ 5ê¸°ëŠ” ì•½ 6ê°œì›” ì •ë„ ì§„í–‰ë  ì˜ˆì •ì´ë‹¤. ê·¸ëŸ¬ë‹ˆê¹Œ ë‚´ë…„ 5ì›”ê¹Œì§€ì¸ë°, ì—°ë§ë„ ë˜ì—ˆê³  ì•ìœ¼ë¡œ ì–´ë–¤ ê±¸ í•´ë³¼ê¹Œì— ëŒ€í•´ì„œ ì²˜ìŒìœ¼ë¡œ ìƒê°ì„ í•´ë³´ê²Œ ë˜ì—ˆë‹¤. </p><p>ì‚¬ì‹¤ í•˜ê³  ì‹¶ì€ ê±´ ë§ë‹¤. ì˜ˆì „ë¶€í„° í”¼ì•„ë…¸ë¥¼ ë°°ì›Œë³´ê³  ì‹¶ì—ˆê³ , ì˜ìƒì„ ì§ì ‘ ì°ê³  í¸ì§‘í•´ë³´ê³  ì‹¶ê¸°ë„ í–ˆë‹¤. í•˜ì§€ë§Œ ê³µë¶€í•˜ê³  ìš´ë™í•˜ê³  ë‚˜ë©´, ì‰¬ëŠë¼ ì •ì‹ ì´ ì—†ì—ˆë˜ ê²ƒ ê°™ë‹¤. ì‹¤ì œë¡œ ì •ì‹ ì„ ì“¸ ì—¬ìœ ê°€ ì—†ì—ˆê¸°ë„ í–ˆê³ , ì—°ë§ ì¯¤ ë˜ë‹ˆ ì•„í™‰ìˆ˜ ê¸°ìš´ì´ ëª°ë ¤ì™€ ì•ˆì¢‹ì€ ë³€í™”ë“¤ì„ ë§ˆì£¼í•˜ê²Œ ëë‹¤. </p><p>ë§ì´ ê´´ë¡­ê³  í˜ë“  ì‹œê¸°ì˜€ì§€ë§Œ, ì–´ë–»ê²Œ í•˜ê² ëŠ”ê°€? ì´ë¯¸ ë§ë‹¥ëœ¨ë¦° ìƒí™©ì— ì¢Œì ˆë§Œ í•˜ê³  ìˆì„ ìˆ˜ëŠ” ì—†ë‹¤. ìµœê·¼ì— MMAì— ì¡°ê¸ˆ ë¹ ì§€ê²Œ ë˜ë©´ì„œ ì•Œê²Œëœ ë§ì´ ìˆëŠ”ë°, ë§¥ìŠ¤ í• ëŸ¬ì›¨ì´ì˜ <strong>â€œIt is what it isâ€</strong>ë€ ë§ì´ë‹¤. ë§¥ìŠ¤ëŠ” ì±”í”¼ì–¸ì „ì—ì„œ ì•„ì£¼ í›Œë¥­í•˜ê²Œ ì‹¸ìš°ê³  íŒì •ì—ì„œ íŒ¨ë°°í•œ ì¼ì´ ìˆë‹¤. SNSì—ì„œë„ ë§ì€ íŒ¬ë“¤ê³¼ ì„ ìˆ˜ë“¤ì´ ë§ë„ ì•ˆë˜ëŠ” ì¼ì´ë¼ëŠ” ê²Œì‹œë¬¼ì„ ë‚¨ê²¼ë‹¤. í•˜ì§€ë§Œ ë§¥ìŠ¤ëŠ”  â€œIt is what it wasâ€ ë¼ë©° íŒ¨ë°°ë¥¼ ë°›ì•„ë“¤ì˜€ê³  íŒŒì´í„°ë¡œì„œ ë°”ë€ ê²ƒì€ ì—†ë‹¤ê³  ë§í–ˆë‹¤.<br><img src="/images/max.png" alt="it is what it is"></p><p>ê·¸ë˜ì„œ ë‚˜ë„ ì¢Œì ˆí•˜ì§€ ì•Šê³  ë‚˜ì•„ê°€ê¸°ë¡œ í–ˆë‹¤. ì•ì„œ ë§í•œ ê²ƒì²˜ëŸ¼ ì¢Œì ˆí•˜ë©´ì„œ ë³´ë‚´ë²„ë¦° ì‹œê°„ì´ ë„ˆë¬´ë‚˜ ì•„ê¹ê¸° ë•Œë¬¸ì´ì—ˆë‹¤. íŒ¨ë°°ê°ì— ë¹ ì ¸ ë‚´ê°€ í•  ì¼ì„ ëª»í•˜ê²Œ ë˜ëŠ” ê²Œ ë” ë¹„ì°¸í•´ ë³´ì˜€ë‹¤. ê·¸ë˜ì„œ ì˜¬í•´ì˜ ë§ˆì§€ë§‰ê³¼ ë‚´ë…„ì€ ë” íŠ¼íŠ¼í•˜ê²Œ ì‚´ ì˜ˆì •ì´ê³  ì£¼ë³€ ì‚¬ëŒë“¤ê³¼ ì§ì¥ ë™ë£Œë“¤ì„ ì˜ ì±™ê¸°ë©´ì„œ ì•ìœ¼ë¡œ ì­‰ ê°€ë³¼ ìƒê°ì´ë‹¤. í˜¼ìë§Œ ì˜ ì‚´ê¸° ë³´ë‹¤ëŠ” ë™ë£Œë“¤ê³¼ ê°™ì´ ì„±ì¥í•˜ëŠ” ê²ƒì„ ë” ì„ í˜¸í•˜ê¸° ë•Œë¬¸ì—, ê°™ì´ ë„ì™€ì£¼ê³  ëŒì–´ì£¼ë©´ì„œ ë°œì „í•´ ë‚˜ê°€ê³  ì‹¶ë‹¤.  </p><p>ê¸€ì´ ì¡°ê¸ˆ ë‹¤ë¥¸ ìª½ìœ¼ë¡œ ë§ì´ ê°”ëŠ”ë°, ë‹¤ì‹œ ëŒì•„ì™€ì„œ ë‚´ë…„ì— ë‚´ê°€ í•˜ê³  ì‹¶ì€ ê²ƒì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  </p><h3 id="ìš´ë™"><a href="#ìš´ë™" class="headerlink" title="ìš´ë™"></a>ìš´ë™</h3><ul><li>ê¾¸ì¤€íˆ í•˜ê¸°, ì£¼ 3íšŒ ì´ìƒ</li><li>ì‡ ì§ˆ ëª©í‘œëŠ” 3ëŒ€ 350</li><li>ë‹¬ë¦¬ê¸° ëª©í‘œëŠ” 5km 25ë¶„ ì•ˆì— ë“¤ì–´ì˜¤ê¸°</li></ul><h3 id="í•™ìŠµ"><a href="#í•™ìŠµ" class="headerlink" title="í•™ìŠµ"></a>í•™ìŠµ</h3><ul><li>ë°ì´í„° íŒŒì´í”„ë¼ì¸ íë¦„ ì™„ë²½í•˜ê²Œ íŒŒì•…í•˜ê¸°</li><li>ì‚¬ìš©í•˜ê³  ìˆëŠ” ìŠ¤íƒì˜ ê¸°ëŠ¥ ì œëŒ€ë¡œ íŒŒì•…í•˜ê¸°</li><li>Kubernetes kubeflowë‚˜ airflowì— ì ìš©í•˜ê¸°</li><li>ì‹¤ì‹œê°„ ì²˜ë¦¬ ëª¨ë¸ ì„œë¹„ìŠ¤ í•˜ê¸°</li><li>ë°ì´í„° ì—”ì§€ë‹ˆì–´ë§ íë¦„ì´ ë‹¤ ë³´ì¸ë‹¤ë©´ ë…¼ë¬¸ ë³´ê¸°</li><li>ìˆ˜í•™ ê³µë¶€ ë‹¤ì‹œí•˜ê¸°</li></ul><h3 id="ì‚¶"><a href="#ì‚¶" class="headerlink" title="ì‚¶"></a>ì‚¶</h3><ul><li>ê¸°ìˆ  ë¶„ì•¼ ì™¸ì— ë‹¤ë¥¸ ì±…, ë‘ ë‹¬ì— í•œ ê¶Œì€ ì½ê¸°</li><li>í•¸ë“œí° ì‚¬ìš©ì‹œê°„ ì¤„ì´ê¸°</li><li>ìíˆ¬ë¦¬ ì‹œê°„ì´ë‚˜ ì´ë™ì‹œê°„ í™œìš©í•˜ê¸°</li><li>ì†Œì¤‘í•œ ì‚¬ëŒë“¤ì„ ì˜ ì‚´í”¼ê¸°</li></ul><p>ëŒ€ëµì ì¸, ê¸€ë¡œ ê³µê°œí•  ìˆ˜ ìˆëŠ” ëª©í‘œëŠ” ì´ ì •ë„ì¸ ê²ƒ ê°™ë‹¤. ì–¸ì œ ë‹¤ ì´ë£° ìˆ˜ ìˆì„ê¹Œ í–ˆì§€ë§Œ, ê¾¸ì¤€íˆ í•˜ë‹¤ë³´ë©´ ì´ë£¨ì–´ì§€ê² ì§€. ì´ë²ˆ 6ê°œì›”ë„ ì—´ì‹¬íˆ ì‚´ì•„ë³´ì!</p>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2020/11/15/geultto5/#disqus_thread</comments>
    </item>
    
    <item>
      <title>SISGë¥¼ í™œìš©í•œ Fasttextì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì</title>
      <link>http://tkdguq05.github.io/2020/08/14/Fasttext/</link>
      <guid>http://tkdguq05.github.io/2020/08/14/Fasttext/</guid>
      <pubDate>Fri, 14 Aug 2020 13:09:06 GMT</pubDate>
      <description>
      
        &lt;p&gt;ìì—°ì–´ ì²˜ë¦¬ ëª¨ë¸ì— ìì£¼ ì‚¬ìš©ë˜ëŠ” FastTextë¥¼ ë½€ê°œë³´ê³  skipgram ëª¨ë¸ê³¼ì˜ ì°¨ì´ë¥¼ ì•Œì•„ë³´ì.&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>ìì—°ì–´ ì²˜ë¦¬ ëª¨ë¸ì— ìì£¼ ì‚¬ìš©ë˜ëŠ” FastTextë¥¼ ë½€ê°œë³´ê³  skipgram ëª¨ë¸ê³¼ì˜ ì°¨ì´ë¥¼ ì•Œì•„ë³´ì.</p><a id="more"></a><h1 id="Fasttext"><a href="#Fasttext" class="headerlink" title="Fasttext"></a>Fasttext</h1><p>ì¶œì²˜ : <a href="https://en.wikipedia.org/wiki/FastText">Wikipedia</a><br>fastTextëŠ” Facebookì˜ AI Research labì—ì„œ ë§Œë“  ë‹¨ì–´ ì„ë² ë”© ë° í…ìŠ¤íŠ¸ ë¶„ë¥˜ í•™ìŠµì„ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. ì´ ëª¨ë¸ì„ ì‚¬ìš©í•˜ë©´ ë‹¨ì–´ì— ëŒ€í•œ ë²¡í„° í‘œí˜„ì„ ì–»ê¸° ìœ„í•´ ë¹„ì§€ë„ í•™ìŠµ ë˜ëŠ” ì§€ë„ í•™ìŠµ ì•Œê³ ë¦¬ì¦˜ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.   </p><p>FasttextëŠ” ìœ„í‚¤í”¼ë””ì•„ ì„¤ëª…ì—ì„œ ë³´ë“¯ì´ Facebookì—ì„œ ë§Œë“¤ì—ˆê³  ê·¸ì— ê±¸ë§ê²Œ ì„ë² ë”©ë„ ì˜ë˜ê³  ì„±ëŠ¥ë„ ìš°ìˆ˜í•œ í¸ì¸ ëª¨ë¸ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì§€ê¸ˆ ìˆëŠ” íšŒì‚¬ì—ì„œë„ ìì—°ì–´ ì²˜ë¦¬ë¥¼ í•  ë•Œ Word2Vecì´ë‚˜ Fasttextì˜ ë„ì›€ì„ ë°›ê³  ìˆìŠµë‹ˆë‹¤.  </p><p>ì˜¤ëŠ˜ ì‚´í´ë³¼ ë‚´ìš©ì€ Fasttextê°€ ì–´ë–»ê²Œ í•™ìŠµì„ í•˜ëŠ”ì§€, ê·¸ë¦¬ê³  Skip gram ëª¨ë¸ê³¼ ì–´ë–¤ ì°¨ì´ì ì´ ìˆëŠ”ì§€ ì…ë‹ˆë‹¤.<br>ìì—°ì–´ ëª¨ë¸ì´ë‚˜ Sequential ë”¥ëŸ¬ë‹ ëª¨ë¸ì„ í•œë²ˆ ì­‰ ì‚´í´ë³´ì‹  ë¶„ë“¤ì€ ì´í•´ê°€ ë¹ ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê¸€ì€ ì–´ë µì§€ ì•Šìœ¼ë‹ˆ ì²œì²œíˆ ë”°ë¼ì˜¤ë©´ ì˜ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ìˆì„ ê²ƒì´ë¼ê³  ë¯¿ìŠµë‹ˆë‹¤.    </p><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>ê¸°ì¡´ì˜ embedding modelì€ unique wordë¥¼ í•˜ë‚˜ì˜ vectorì— í• ë‹¹í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ì™€ ê°™ì€ ë°©ì‹ì€ vocabularyì˜ í¬ê¸°ê°€ ì»¤ì§€ê±°ë‚˜ rare word(ëª» ë´¤ì—ˆë˜ ë‹¨ì–´)ê°€ ë§ì„ìˆ˜ë¡ í•œê³„ì ì„ ë‚´í¬í•˜ê²Œ ë©ë‹ˆë‹¤. í•œê³„ì ì´ë€ ì´ëŸ¬í•œ wordë“¤ì€ good word representationì„ ì–»ê¸° í˜ë“¤ë‹¤ëŠ” ì ì…ë‹ˆë‹¤. íŠ¹íˆ í˜„ì¬ê¹Œì§€ì˜ word representation ê¸°ë²•ë“¤ì€ ë¬¸ìì˜ internal structureë¥¼ ê³ ë ¤í•˜ì§€ ì•Šê³  ìˆê¸° ë•Œë¬¸ì— í•™ìŠµì´ ë”ìš± í˜ë“¤ì—ˆìŠµë‹ˆë‹¤. ë” ë‚˜ì•„ê°€ ìŠ¤í˜ì¸ì–´ë‚˜ í”„ë‘ìŠ¤ì–´ì˜ ê²½ìš° ëŒ€ë¶€ë¶„ì˜ ë™ì‚¬ê°€ 40ê°œ ì´ìƒì˜ ë³€í˜•ëœ í˜•íƒœë¥¼ ì§€ë‹ˆê³  ìˆëŠ” ë³µì¡í•œ ì–¸ì–´ì´ê¸° ë•Œë¬¸ì—, ì´ëŸ¬í•œ ì–¸ì–´ì—ì„œëŠ” rare word ë¬¸ì œê°€ ë”ìš± ë¶€ê° ë©ë‹ˆë‹¤. ì´ëŸ° ì´ìœ ë¡œ ì´ì²˜ëŸ¼ í˜•íƒœí•™ì ì¸ íŠ¹ì§•ì´ í’ë¶€í•œ ì–¸ì–´ì˜ ê²½ìš°ì—ëŠ” subword ì •ë³´ë¥¼ í™œìš©í•˜ì—¬ rare wordì— ëŒ€í•œ í•œê³„ì ì„ ê·¹ë³µí•˜ê³ ì í•©ë‹ˆë‹¤. subwordë¥¼ ì´ìš©í•´ì„œ vector representationì„ ê°œì„ ì‹œí‚¤ê³ ì í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. </p><h2 id="General-Model-Skip-gram"><a href="#General-Model-Skip-gram" class="headerlink" title="General Model, Skip-gram"></a>General Model, Skip-gram</h2><p>ë¨¼ì € ì¼ë°˜ì ì¸ ëª¨ë¸ì¸ skip-gramì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì•Œì•„ì•¼ fasttextì— ëŒ€í•´ ì˜ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><img src="/images/fasttext/model_explain.png" alt="skip-gram"><br>ìŠ¤í‚µ ê·¸ë¨ì€ ê·¸ë¦¼ì—ì„œì²˜ëŸ¼ window sizeì˜ ë‹¨ì–´ë“¤ì„ ìŠ¬ë¼ì´ë”© í•´ ê°€ë©´ì„œ íƒ€ê²Ÿ ë‹¨ì–´ì— ëŒ€í•´ì„œ ì£¼ë³€ ë‹¨ì–´ë“¤ì´ ì˜¬ í™•ë¥ ì„ êµ¬í•´ ë‚˜ê°‘ë‹ˆë‹¤. íŒŒë€ìƒ‰ìœ¼ë¡œ í‘œì‹œëœ ê²ƒì´ íƒ€ê²Ÿ ë‹¨ì–´ì´ë©° ì£¼ìœ„ ë‹¨ì–´ë“¤ì´ context word, ì¦‰ ì£¼ë³€ ë‹¨ì–´ì…ë‹ˆë‹¤. $w_t$ì™€ $w_c$ë¡œ í‘œí˜„ë©ë‹ˆë‹¤. ì—¬ê¸°ì— ê°€ì •ì´ í•˜ë‚˜ ì¶”ê°€ë˜ëŠ”ë°, context wordëŠ” ì¡°ê±´ë¶€ ë…ë¦½(conditionally independent)ì´ë¼ëŠ” ê°€ì •ì…ë‹ˆë‹¤. </p><p><img src="/images/fasttext/skip-gram1.png" alt="skip-gram ëª¨ë¸"><br>ìœ„ì˜ ê·¸ë¦¼ì€ ì•„ê¹Œ ì‚´í´ë´¤ì—ˆë˜ ê³¼ì •ì„ ëª¨ë¸ì˜ ê´€ì ì—ì„œ ìì„¸íˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ë ˆì´ì–´ì˜ êµ¬ì„±ì€ ì¸í’‹ ë ˆì´ì–´, íˆë“  ë ˆì´ì–´, ì•„ì›ƒí’‹ ë ˆì´ì–´ë¡œ ë˜ì–´ìˆìŠµë‹ˆë‹¤. ì¸í’‹ ë ˆì´ì–´ì—ëŠ” ë‹¨ì–´ë“¤ì´ ë“¤ì–´ê°€ê³  íˆë“  ë ˆì´ì–´ì—ëŠ” íƒ€ê²Ÿ ë‹¨ì–´ì— ëŒ€í•œ ë²¡í„°ê°’ì´ ë‚¨ìŠµë‹ˆë‹¤. ì•„ì›ƒí’‹ ë ˆì´ì–´ ê¹Œì§€ ê±°ì¹˜ê²Œ ë˜ë©´ ê°€ì¤‘ì¹˜ ë²¡í„°ë“¤ê³¼ ì˜ˆì¸¡í•œ ê°’ì´ ë‚˜ì˜¤ê²Œ ë˜ê³  ê°€ì¤‘ì¹˜ ë²¡í„°ì—ëŠ” íƒ€ê²Ÿë‹¨ì–´ì™€ ì£¼ë³€ë‹¨ì–´ë“¤ì— ëŒ€í•œ ê°€ì¤‘ì¹˜ë“¤ì´ ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì˜ˆì¸¡ëœ ê²°ê³¼ë¥¼ ì‹¤ì œ ê°’ê³¼ ë¹„êµí•´ì„œ ê° ë‹¨ì–´ë“¤ì— ëŒ€í•œ lossê°’ì„ ë½‘ì•„ë‚´ê²Œ ë˜ê³  ì´ê²ƒì„ ë”í•˜ë©´ ì „ì²´ lossê°’ì´ ë©ë‹ˆë‹¤. </p><p>ìˆ«ìë¥¼ í†µí•´ì„œ ì´ë¥¼ ë” êµ¬ì²´í™” í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.<br><img src="/images/fasttext/skip-gram2.png" alt="skip-gram ê³„ì‚° ê³¼ì •"></p><p>ì´ë ‡ê²Œ ê³„ì‚°ë˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³´ë‹¤ ë³´ë©´, ë¹„íš¨ìœ¨ì ì¸ ë¶€ë¶„ë“¤ì´ ë°œê²¬ë©ë‹ˆë‹¤. ì–´ë””ì¼ê¹Œìš”? ë¬¸ì œì ì„ ë°œê²¬í•˜ê³  ê°œì„ ì‹œì¼œë‚˜ê°€ ë³´ê² ìŠµë‹ˆë‹¤.</p><h2 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h2><h3 id="1-Row-Indexing"><a href="#1-Row-Indexing" class="headerlink" title="1. Row Indexing"></a>1. Row Indexing</h3><p><img src="/images/fasttext/row_indexing.png" alt="Row Indexing"><br>ë§¨ ì²˜ìŒ ì¸í’‹ì´ ë“¤ì–´ê°„ ë¶€ë¶„ê³¼ $W_{input}$ì„ í†µí•´ì„œ íƒ€ê²Ÿì— ëŒ€í•œ ë²¡í„°ê°’ì„ ì–»ê²Œ ë©ë‹ˆë‹¤. ë§Œì•½ ë“¤ì–´ê°€ëŠ” ì¸í’‹ ë‹¨ì–´ê°€ ì—„ì²­ë‚˜ê²Œ ë§ë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? ìˆ˜ ë§ì€ ê³„ì‚°ì„ ì¼ì¼ì´ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ìƒê°ì„ í•œë²ˆ ë°”ê¿”ë³´ë©´ ì–´ë–¨ê¹Œìš”? ì¸í’‹ ë‹¨ì–´ë“¤ì€ one-hot indexë¡œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ $W_{inpit}$ì˜ row indexë¥¼ ê·¸ëƒ¥ ê°€ì ¸ì˜¤ê¸°ë§Œ í•˜ë©´ ë˜ì§€ ì•Šì„ê¹Œìš”? </p><p>ì´ë ‡ê²Œ row indexë¥¼ ê°€ì ¸ì˜¤ë©´ ê³„ì‚°ì„ íš¨ê³¼ì ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œëŠ” ê°™ì§€ë§Œ ì²˜ë¦¬í•´ì•¼í•  ì—°ì‚°ì´ íšê¸°ì ìœ¼ë¡œ ì¤„ê²Œ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p><h3 id="2-Negative-Sampling"><a href="#2-Negative-Sampling" class="headerlink" title="2. Negative Sampling"></a>2. Negative Sampling</h3><p><img src="/images/fasttext/negative_sampling.png" alt="Negative Sampling"><br>ì´ë²ˆì—” ë‹¤ìŒë¶€ë¶„ìœ¼ë¡œ ë„˜ì–´ê°€ ë´…ì‹œë‹¤. ì–´ë–¤ ë¶€ë¶„ì´ ë¹„íš¨ìœ¨ì ì¼ê¹Œìš”?<br>íˆë“  ë ˆì´ì–´ì¸ $h$ì™€ $W_{output}$ì˜ ê³±í•˜ëŠ” ë¶€ë¶„ê³¼ softmax ê³„ì¸µì˜ ë³‘ëª©ì´ ë³´ì…ë‹ˆë‹¤. ìƒê°í•´ë´…ì‹œë‹¤. latent vector $h$ì™€ $W_{output}$ë„ ì—­ì‹œ ë‹¨ì–´ë“¤ì´ ë§ì•„ì§€ë©´ ì—°ì‚°ì„ ë§ì´ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤. softmax ê³„ì¸µë„ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ í•˜ë‚˜ì˜ target wordì™€ ê´€ë ¨ëœ context wordë“¤ì€ window sizeë‚´ì˜ ì‘ì€ word ì •ë„ë°–ì— ì•ˆë©ë‹ˆë‹¤. ì „ì²´ ë‹¨ì–´ë¥¼ êµ³ì´ ë‹¤ ì²˜ë¦¬í•´ì•¼ í•  í•„ìš”ê°€ ì—†ëŠ” ê²ƒì…ë‹ˆë‹¤. ì¦‰, $h$ì™€ $W_{output}$ì˜ í–‰ë ¬ ê³± ì—°ì‚°ì€ ì¸í’‹ê³¼ ê´€ë ¨ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì—…ë°ì´íŠ¸ ë˜ì–´ì•¼ í•  ë‹¨ì–´ëŠ” ëª‡ ê°œ ì•ˆë˜ëŠ”ë°ë„ ë¶ˆêµ¬í•˜ê³ , vocabularyì— ìˆëŠ” ëª¨ë“  ë‹¨ì–´ë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ë¹„êµí•´ì•¼í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ ë¹„íš¨ìœ¨ì„±ì´ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤. </p><p>ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ <strong>Negative Sampling</strong>ì´ ì œì•ˆë©ë‹ˆë‹¤. Negative Samplingì˜ í•µì‹¬ì€ ì§€ê¸ˆì˜ multi-clas classification ë¬¸ì œë¥¼ ê°„ë‹¨í•œ binary classification ë¬¸ì œë¡œ ë°”ê¾¸ëŠ” ê²ƒì…ë‹ˆë‹¤. ì–´ë–»ê²Œ ë°”ê¿€ê¹Œìš”?  </p><h4 id="How-to-Negative-Sampling"><a href="#How-to-Negative-Sampling" class="headerlink" title="How to Negative Sampling"></a>How to Negative Sampling</h4><p>ë¨¼ì € ì•Œì•„ì•¼í•  ê°œë…ì´ ìˆìŠµë‹ˆë‹¤.   </p><ul><li>positive example: target wordì˜ context word</li><li>negative example: target wordì˜ context wordê°€ ì•„ë‹Œ word<br>ìš°ë¦¬ëŠ” context wordë¥¼ 1ë¡œ ì²˜ë¦¬í•  ê²ƒì´ê³ , ì•„ë‹Œ ë‹¨ì–´ë“¤ì€ 0ìœ¼ë¡œ ì²˜ë¦¬í•  ê²ƒì…ë‹ˆë‹¤. ì—°ì‚°ì„ ì¤„ì´ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.  </li></ul><p><img src="/images/fasttext/negative_sampling_ex.png" alt="negative sampling example"><br>ì˜ˆë¥¼ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. ìœ„ì˜ ê·¸ë¦¼ì—ì„œ dot productëœ ê²°ê³¼ê°€ ë‚˜ì˜¤ê³  ìˆìŠµë‹ˆë‹¤. (ìˆ«ìëŠ” ì„ì˜ë¡œ ì…ë ¥í•œ ê°’ì…ë‹ˆë‹¤) positive exampleë“¤ì€ ì´ˆë¡ìƒ‰ìœ¼ë¡œ í‘œì‹œë˜ì–´ labelì„ 1ë¡œ ì²˜ë¦¬í•˜ê³ , negative exampleë“¤ì€ ì£¼í™©ìƒ‰ìœ¼ë¡œ í‘œì‹œë˜ì–´ labelì„ 0ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ì—°ì‚°ì„ ì¤„ì—¬ì„œ ì²˜ë¦¬í•œ ë’¤ì— ë¡œìŠ¤ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤. ë‹¨ì–´ê°€ ë§ìœ¼ë©´ ë§ì•„ì§ˆìˆ˜ë¡ ì¤„ì–´ë“œëŠ” ì—°ì‚°ì˜ ì–‘ì´ ì»¤ì§ˆ ê²ƒì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ì˜ë¬¸ì ì´ ë˜ ìƒê¹ë‹ˆë‹¤. negative samplingì„ í•˜ëŠ” ë‹¨ì–´ë¥¼ ì–´ë–»ê²Œ ì •í• ê¹Œìš”?  </p><p>Negative Samplingì€ Corpus ë‚´ì—ì„œ ìì£¼ ë“±ì¥í•˜ëŠ” ë‹¨ì–´ë¥¼ ë” ë§ì´ ì¶”ì¶œí•˜ê³  ë“œë¬¼ê²Œ ë“±ì¥í•˜ëŠ” ë‹¨ì–´ëŠ” ì ê²Œ ì¶”ì¶œí•˜ê³ ì í•©ë‹ˆë‹¤. ì´ ëª©ì ì„ ë‹¬ì„±í•˜ê¸° ìœ„í•´ì„œ Probability distributionì„ ì´ìš©í•˜ëŠ”ë° ìˆ˜ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. </p><p><img src="/images/fasttext/ns_formula.png" alt="formula"><br>$f(w_i)$ëŠ” ëª¨ë“  corpusì˜ ë‹¨ì–´ ì¤‘ì—ì„œ íŠ¹ì • ë‹¨ì–´ $w_i$ê°€ ì–¼ë§ˆë‚˜ ë“¤ì–´ìˆëŠ”ì§€ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ìœ„ì˜ ì‹ì—ì„œ $P(w_i$ì€ ì „ì²´ ì½”í¼ìŠ¤ì—ì„œ íŠ¹ì •ë‹¨ì–´ $w_i$ê°€ ì–¼ë§ˆë‚˜ ìˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì‹ì…ë‹ˆë‹¤. ë¹ˆë„ ìˆ˜ì™€ ê´€ê³„ê°€ ìˆë‹¤ê³  í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ì™œ $3\over4$ ë¼ëŠ” ìˆ«ìë¥¼ ì‚¬ìš©í• ê¹Œìš”? ì¦ëª…ëœ ê²ƒì€ ì—†ìŠµë‹ˆë‹¤. ë…¼ë¬¸ì—ì„œ ì´ ìˆ«ìë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ ì˜ ë˜ì—ˆë˜ ê²ƒì…ë‹ˆë‹¤. ì´ íŒŒë¼ë¯¸í„°ëŠ” ìˆ˜ì •ì´ ê°€ëŠ¥í•˜ë‹ˆ ë°ì´í„°ì— ë§ê²Œ ì¡°ì •í•˜ë©´ ë©ë‹ˆë‹¤. </p><hr><p><img src="/images/fasttext/notation.png" alt="notation">  </p><p>ìš°ë¦¬ê°€ ì§€ê¸ˆê¹Œì§€ í–ˆì—ˆë˜ ê²ƒì„ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•´ ë³´ê² ìŠµë‹ˆë‹¤.<br><img src="/images/fasttext/skip_formula1.png" alt="skip gram formula1"><br>ìš°ë¦¬ëŠ” ì´ ê°€ì •ì—ì„œ ì¶œë°œí–ˆìŠµë‹ˆë‹¤. ê°€ì •ì„ ì´ìš©í•´ì„œ skip-gram ëª¨ë¸ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ skipê·¸ë¨ì— Row indexingì„ ì‚¬ìš©í–ˆê³  Negative samplingì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ìš°ë¦¬ê°€ ì–»ê³ ì í•œ ê²ƒì€ ë‹¤ìŒì˜ ìˆ˜ì‹ì…ë‹ˆë‹¤.</p><p><img src="/images/fasttext/skip_formula2.png" alt="skip gram formula2"><br>ì›ë˜ëŠ” ì™¼ìª½ì˜ ìˆ˜ì‹ì˜ ê°’ì„ ìµœëŒ€í™” í•˜ëŠ” ê²ƒì´ì—ˆì§€ë§Œ, ë‹¨ì–´ì˜ ìˆ˜ê°€ ë§ì•„ì§€ë©´ ì˜¤ë¥¸ìª½ì˜ ìˆ˜ì‹ìœ¼ë¡œ ë³€ê²½í•´ log-likielihoodë¥¼ ìµœëŒ€í™” í•©ë‹ˆë‹¤. </p><p>context wordê°€ ì˜¬ í™•ë¥ ì— ëŒ€í•´ì„œëŠ” ë‹¤ì–‘í•œ ì„ íƒì´ ìˆê² ì§€ë§Œ  ì—°ì‚° í›„ì˜ softmax ê²°ê³¼ ê°’ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.<br><img src="/images/fasttext/softmax.png" alt="softmax"></p><p>í•˜ì§€ë§Œ ìš°ë¦¬ëŠ” negative samplingì„ í†µí•´ Multiclass Classification ë¬¸ì œë¥¼ Binary Classificationë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤. ê²°êµ­ ìœ„ì˜ softmaxëŠ” context ë‹¨ì–´ë“¤ì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ì–˜ì¸¡ì— ëŒ€í•œ í™•ë¥ ì´ ë©ë‹ˆë‹¤. </p><p>negative samplingì— ì˜í•´ì„œ ê³¨ë¼ì§„ contex wordì— ëŒ€í•œ í¬ì§€ì…˜ì€ $c$ë¡œ í‘œí˜„ë©ë‹ˆë‹¤. Binary Logistic lossì— ì˜í•´ì„œ, ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ negative log likelihood ê°’ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><img src="/images/fasttext/skip_formula3.png" alt="negative log likelihood">  </p><p>ë°‘ ë¶€ë¶„ì˜ scoreê°’ì¸ $s(w_t,w_c)$ë¥¼ ì£¼ì˜í•´ì„œ ë´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.   </p><p>ì´ì œ ëª¨ë“  íƒ€ê²Ÿ ë‹¨ì–´ì— ëŒ€í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ìˆ˜ì‹ìœ¼ë¡œ ì •ë¦¬ê°€ ë˜ë©´, skip gram modelì— ëŒ€í•œ ì„¤ëª…ì€ ëë‚©ë‹ˆë‹¤.<br><img src="/images/fasttext/skip_objective.png" alt="skip gram objective"></p><hr><h2 id="Fasttext-SISG"><a href="#Fasttext-SISG" class="headerlink" title="Fasttext, SISG"></a>Fasttext, SISG</h2><p>FasttextëŠ” skip gramëª¨ë¸ì„ ê°œì„ í•œ ëª¨ë¸ì…ë‹ˆë‹¤. SISG(Subword Information Skip Gram)ë¥¼ ì´ìš©í•´ Skip gramëª¨ë¸ì˜ ì„±ëŠ¥ì„ ê°œì„ í•©ë‹ˆë‹¤. SISGë€ ë¬´ì—‡ì¼ê¹Œìš”?</p><h3 id="SISG-Subword-Information-Skip-Gram"><a href="#SISG-Subword-Information-Skip-Gram" class="headerlink" title="SISG(Subword Information Skip Gram)"></a>SISG(Subword Information Skip Gram)</h3><p>SISGëŠ” ê°„ë‹¨í•œ ê°œë…ì…ë‹ˆë‹¤. ê° ë‹¨ì–´ $w$ëŠ” n-gramì˜ bagì„ ë‹´ê³  ìˆë‹¤ê³  í•´ë´…ì‹œë‹¤. ì´ì œ ì—¬ê¸°ì— <code>&lt;</code>ì™€ <code>&gt;</code>ë¥¼ ì´ìš©í•´ì„œ ë‹¨ì–´ì˜ ì‹œì‘ê³¼ ëì„ ì•Œë ¤ì¤„ ê²ƒì…ë‹ˆë‹¤. í•œ ê°€ì§€ ë” <strong>ë‹¨ì–´ ê·¸ ìì²´ë¥¼ ë„£ì–´ ì¤„ ê²ƒì…ë‹ˆë‹¤.</strong> ê° ë‹¨ì–´ ìì²´ì˜ í‘œí˜„ì„ í•™ìŠµì‹œí‚¤ê¸° ìœ„í•¨ì…ë‹ˆë‹¤. <code>where</code>ì´ë¼ëŠ” ë‹¨ì–´ì˜ ì²˜ë¦¬ì— ê´€í•œ ì˜ˆë¥¼ ë“¤ì–´ë´…ì‹œë‹¤.</p><p><img src="/images/fasttext/where.png" alt="how to process where"><br>n=3ì¼ ë•Œì˜ ì˜ˆì‹œì…ë‹ˆë‹¤. ìœ„ì˜ ì˜ˆì‹œì²˜ëŸ¼ <code>&lt;</code>,<code>&gt;</code>ë¥¼ í•œ ê¸€ìì”© ì²˜ë¦¬í•´ì„œ ë‚˜ëˆ„ë©´ <code>re&gt;</code>ë¡œ ëë‚˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ°ë° ì—¬ê¸°ì— <code>&lt;where&gt;</code>ë„ ê°™ì´ ë„£ì–´ì£¼ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤. ì´ìœ ë¥¼ ìƒê°í•´ë´…ì‹œë‹¤. ì¤‘ê°„ì— <code>her</code>ì´ë€ ë‹¨ì–´ê°€ ëˆˆì— ë„ì—ˆì„ ê²ë‹ˆë‹¤. herëŠ” ë‹¨ì–´ë¡œ ì²˜ë¦¬ë˜ì–´ì•¼ í• ê¹Œìš”? ì•„ë‹™ë‹ˆë‹¤. herì€ ê·¸ëƒ¥ ë‹¨ì–´ì˜ ì¡°ê°ì¼ ë¿ì´ë©° subwordì— í•´ë‹¹ë©ë‹ˆë‹¤. ì§„ì§œ ë‹¨ì–´ì˜€ë‹¤ë©´ <code>&lt;her&gt;</code>ë¡œ í‘œí˜„ì´ ë˜ì–´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤. </p><p>ì´ë ‡ê²Œ ë§Œë“  í›„ì— n-gramì˜ ë²¡í„°í‘œí˜„ì„ ëª¨ë‘ ë”í•œ score ê°’ì„ êµ¬í•˜ë©´, ê·¸ê²ƒì´ ë°”ë¡œ SISGì˜ ëª©ì  í•¨ìˆ˜ê°€ ë©ë‹ˆë‹¤. ì•„ê¹Œ ë´¤ë˜ scoreí•¨ìˆ˜ê°€ ë°”ë€Œì—ˆìŠµë‹ˆë‹¤. scoreí•¨ìˆ˜ë§Œ ë°”ê¿”ì£¼ë©´ fasttextì˜ ëª©ì í•©ìˆ˜ ì…ë‹ˆë‹¤.<br><img src="/images/fasttext/sisg.png" alt="SISG Score">  </p><p>ì´ë¥¼  pseudo codeë¡œ ë‚˜íƒ€ë‚´ë©´.<br><img src="/images/fasttext/pseudo_code.png" alt="pseudo code for computing loss"><br>(ë’·ë¶€ë¶„ì— negê°€ ì•„ë‹ˆë¼ neg_sampleì¸ë° ì˜¤íƒ€ê°€ ìˆìŠµë‹ˆë‹¤.) ì°¸ê³ ë°”ëë‹ˆë‹¤.</p><p>ë§ˆì§€ë§‰ìœ¼ë¡œ í‰ê°€ì— ëŒ€í•´ì„œ ì…ë‹ˆë‹¤. ì„ë² ë”©ì˜ ê° ë²„ì „ì— ëŒ€í•´, ì„ë² ë”©ë§Œì„ ê¸°ë°˜ìœ¼ë¡œ ì£¼ì–´ì§„ account ì…‹ì˜ topicì„ ì˜ˆì¸¡í•˜ë„ë¡ ë¶„ë¥˜ê¸°ë¥¼ í›ˆë ¨í•©ë‹ˆë‹¤. hold out setì˜ accountì— ëŒ€í•´ ì˜ˆì¸¡ ëœ ì£¼ì œë¥¼ ì‚¬ëŒì´ ë¼ë²¨ë§ í•œ topicê³¼ ë¹„êµí•˜ì—¬ ì„ë² ë”©ì´ topicì˜ ìœ ì‚¬ì„±ì„ ì–¼ë§ˆë‚˜ ì˜ íŒŒì•…í•˜ëŠ”ì§€ í‰ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </p><hr><p>FasttextëŠ” Skip Gram ëª¨ë¸ì„ subwordë¥¼ í™œìš©í•˜ìëŠ” ê°„ë‹¨í•œ ì•„ì´ë””ì–´ë¡œ ë§Œë“¤ì–´ì§„ ëª¨ë¸ì…ë‹ˆë‹¤. ëª¨ë¸ì—ì„œ í™œìš©ë˜ëŠ” ì´ëŸ° ì„¼ìŠ¤ë“¤ì„ ì˜ ìµí˜€ë‘ë©´ ë‹¤ë¥¸ ëª¨ë¸ì— ì ìš©í•˜ê±°ë‚˜, ë‹¤ë¥¸ ë…¼ë¬¸ë“¤ì„ ì½ì„ ë•Œ í° ë„ì›€ì´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤. </p>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2020/08/14/Fasttext/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Kubernetes Beginning</title>
      <link>http://tkdguq05.github.io/2020/07/30/k8s-genesis/</link>
      <guid>http://tkdguq05.github.io/2020/07/30/k8s-genesis/</guid>
      <pubDate>Thu, 30 Jul 2020 00:35:47 GMT</pubDate>
      <description>
      
        &lt;p&gt;ì ì´ì œ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ëŒ€í•´ ê³µë¶€í•´ë³´ì. Docker in kubernetes, k8s architecture, cluster, and pods.&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>ì ì´ì œ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ëŒ€í•´ ê³µë¶€í•´ë³´ì. Docker in kubernetes, k8s architecture, cluster, and pods.</p><a id="more"></a><p>ì§€ë‚œ ê¸€ë“¤ë¡œë¶€í„° ê°€ìƒí™”ì— ëŒ€í•´ì„œ ê³µë¶€í–ˆê³ , ë„ì»¤ì— ëŒ€í•´ì„œ ì‚´í´ë´¤ìŠµë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ê°€ìƒí™”ì™€ ë„ì»¤ê°€ ê¸°ë³¸ì´ ë˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ê°€ìƒí™”ì™€ ë„ì»¤ì— ëŒ€í•´ì„œ ê¸°ì–µì´ ì˜ ë‚˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì ì‹œ ë³´ê³  ì™€ë„ ì¢‹ìŠµë‹ˆë‹¤.   </p><p><a href="https://tkdguq05.github.io/2020/07/03/docker/#more">ì¸í”„ë¼ì˜ ê¸°ì´ˆ, Dockerì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì</a>.<br><a href="https://tkdguq05.github.io/2020/06/07/virtualization/#more">í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ì˜ ê¸°ì´ˆ. Virtualization, ê°€ìƒí™”ì— ëŒ€í•´ì„œ</a>  </p><hr><h1 id="Kubernetes"><a href="#Kubernetes" class="headerlink" title="Kubernetes?"></a>Kubernetes?</h1><p>ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ìµœì´ˆë¡œ ë§Œë“¤ê³  ì‚¬ìš©í•œ ê³³ì€ êµ¬ê¸€ì…ë‹ˆë‹¤. ì‹œìŠ¤í…œì— ë°°í¬ ê°€ëŠ¥í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„± ìš”ì†Œì˜ ìˆ˜ê°€ ë§ì•„ì§€ë©´ì„œ ëª¨ë“  êµ¬ì„± ìš”ì†Œì˜ ê´€ë¦¬ê°€ ì–´ë ¤ì›Œì§ˆ ìˆ˜ ë°–ì— ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. êµ¬ê¸€ì€ ì „ ì„¸ê³„ì—ì„œ ì†Œí”„íŠ¸ì›¨ì–´ êµ¬ì„± ìš”ì†Œì™€ ì¸í”„ë¼ë¥¼ ì˜ ë°°ì¹˜í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì´ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ìµœì´ˆë¡œ ê¹¨ë‹¬ì€ íšŒì‚¬ì¼ ê²ƒì…ë‹ˆë‹¤. ìˆ˜ì‹­ë§Œ ëŒ€ì˜ ì„œë²„ë¥¼ ìš´ì˜í•˜ê³  ì—„ì²­ë‚œ ê·œëª¨ì˜ ë°°í¬ê´€ë¦¬ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê¸°ì—…ì…ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ êµ¬ê¸€ì€ ìˆ˜ì²œ ê°œì˜ ì†Œí”„íŠ¸ì›¨ì–´ êµ¬ì„± ìš”ì†Œë¥¼ ê´€ë¦¬í•˜ê³  ë¹„ìš© íš¨ìœ¨ì ìœ¼ë¡œ ê°œë°œ, ë°°í¬í•  ìˆ˜ ìˆëŠ” ì†”ë£¨ì…˜ì„ ê°œë°œí•´ì•¼ë§Œ í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ë“±ì¥í•œ ê²ƒì´ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì „ì‹ ì¸ ë³´ê·¸-ì˜¤ë©”ê°€ ì´ë©°, 2014ë…„ì— êµ¬ê¸€ì€ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì¶œì‹œí•˜ê²Œ ë©ë‹ˆë‹¤. êµ¬ê¸€ì´ ë§Œë“  ì‹œìŠ¤í…œë‹µê²Œ ì •ë§ ì˜ ë©ë‹ˆë‹¤!</p><p>ë§Œì•½ êµ¬ê¸€ì´ ëª¨ë†€ë¦¬ìŠ¤ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ê°œë°œì„ í–ˆë‹¤ë©´ ì–´ë• ì„ê¹Œìš”? ì•„ë§ˆ ì´ ì •ë„ì˜ í™•ì¥ì€ ë¶ˆê°€ëŠ¥ í–ˆì„ ê²ƒ ì…ë‹ˆë‹¤. ëª¨ë†€ë¦¬ìŠ¤ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ë€ í•œ ë©ì–´ë¦¬ì²˜ëŸ¼ ê°œë°œì„ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. í° ëŒë¡œ ì´ë£¨ì–´ì§„ ê±´ì¶•ë¬¼ì— ë¹„ìœ ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì™€ ë°˜ëŒ€ë˜ëŠ” ê°œë…ì€ ë§ˆì´í¬ë¡œìŠ¤ì„œë¹„ìŠ¤ ê¸°ë°˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. ì´ëŠ” ë‹¨ì¼ ì—­í• ì„ ì±…ì„ì§€ëŠ” ì—¬ëŸ¬ ì¡°ê°ìœ¼ë¡œ êµ¬ì„±ëœ ì†Œí”„ì›¨ì–´ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. êµ¬ê¸€ì€ ê° ë¶€ë¶„ì´ ì•Œì•„ì„œ ì˜ ëŒì•„ê°€ëŠ” MSAêµ¬ì¡°ë¡œ ì´ë£¨ì–´ì ¸ ìˆê¸° ë•Œë¬¸ì— ì´ë ‡ê²Œ í™•ì¥í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ê·¸ê²ƒì„ ê°€ëŠ¥í•˜ê²Œ í•´ì¤€ ê²ƒì´ ë°”ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ì…ë‹ˆë‹¤.   </p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆí™”ëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‰½ê²Œ ë°°í¬í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰ë˜ì–´ ë™ì¼í•œ ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ëŠ” ë‹¤ë¥¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šì•„ ë™ì¼í•œ í•˜ë“œì›¨ì–´ì˜ ë‹¤ë¥¸ ì¡°ì§ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë  ë•Œ ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.  ì´ë¥¼ í†µí•´ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´, ì œê³µëœ í•˜ë“œì›¨ì–´ë¥¼ ìµœëŒ€í•œìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í™œìš©í•˜ë©´ ëª¨ë“  ë…¸ë“œê°€ í•˜ë‚˜ì˜ ê±°ëŒ€í•œ ì»´í“¨í„° ì²˜ëŸ¼ ìˆ˜ì²œëŒ€ì˜ ë…¸ë“œì—ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><h2 id="Kubernetesì„-ì‚¬ìš©í•˜ë©´-ì¢‹ì€-ì "><a href="#Kubernetesì„-ì‚¬ìš©í•˜ë©´-ì¢‹ì€-ì " class="headerlink" title="Kubernetesì„ ì‚¬ìš©í•˜ë©´ ì¢‹ì€ ì "></a>Kubernetesì„ ì‚¬ìš©í•˜ë©´ ì¢‹ì€ ì </h2><h4 id="ë¨¼ì €-ê°œë°œìê°€-ì–´í”Œë¦¬ì¼€ì´ì…˜-í•µì‹¬-ê¸°ëŠ¥ì—-ì§‘ì¤‘í• -ìˆ˜-ìˆê²Œ-ë©ë‹ˆë‹¤"><a href="#ë¨¼ì €-ê°œë°œìê°€-ì–´í”Œë¦¬ì¼€ì´ì…˜-í•µì‹¬-ê¸°ëŠ¥ì—-ì§‘ì¤‘í• -ìˆ˜-ìˆê²Œ-ë©ë‹ˆë‹¤" class="headerlink" title="ë¨¼ì € ê°œë°œìê°€ ì–´í”Œë¦¬ì¼€ì´ì…˜ í•µì‹¬ ê¸°ëŠ¥ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤."></a>ë¨¼ì € ê°œë°œìê°€ ì–´í”Œë¦¬ì¼€ì´ì…˜ í•µì‹¬ ê¸°ëŠ¥ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</h4><p>ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í´ëŸ¬ìŠ¤í„°ì˜ ìš´ì˜ì²´ì œë¡œë„ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ë˜ë©´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œìê°€ íŠ¹ì • ì¸í”„ë¼ ê´€ë ¨ ì„œë¹„ìŠ¤ë¥¼ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í™œìš©í•˜ë©´ ë˜ë‹ˆê¹Œìš”. ì¿ ë²„ë„¤í‹°ìŠ¤ì—ëŠ” ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬, ìŠ¤ì¼€ì¼ë§, ë¡œë“œë°¸ëŸ°ì‹±, ìê°€ì¹˜ìœ , ë¦¬ë”ì„ ì¶œ ê°™ì€ ê²ƒë“¤ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤. ë”°ë¼ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œìëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ë° ì§‘ì¤‘ì„ í•˜ë©´ ë˜ê³ , ì¸í”„ë¼ì— ê´€ë ¨ëœ ê³ ë¯¼ì„ í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.</p><h4 id="ìš´ì˜-íŒ€ì´-íš¨ê³¼ì ìœ¼ë¡œ-ë¦¬ì†ŒìŠ¤ë¥¼-í™œìš©í• -ìˆ˜-ìˆìŠµë‹ˆë‹¤"><a href="#ìš´ì˜-íŒ€ì´-íš¨ê³¼ì ìœ¼ë¡œ-ë¦¬ì†ŒìŠ¤ë¥¼-í™œìš©í• -ìˆ˜-ìˆìŠµë‹ˆë‹¤" class="headerlink" title="ìš´ì˜ íŒ€ì´ íš¨ê³¼ì ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."></a>ìš´ì˜ íŒ€ì´ íš¨ê³¼ì ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</h4><p>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” í´ëŸ¬ìŠ¤í„°ì— ì»¨í…Œì´ë„ˆí™”ëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ê³  êµ¬ì„± ìš”ì†Œë“¤ ê°„ì— ì—°ê²°ë˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•˜ë©°, ì´ë¥¼ ì´ìš©í•´ ëª¨ë“  ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ê³„ì† ì‹¤í–‰ë˜ë„ë¡ í•©ë‹ˆë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ì–´ë–¤ ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ë“  ìƒê´€ì´ ì—†ê¸° ë•Œë¬¸ì— ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì–¸ì œë“ ì§€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì¬ë°°ì¹˜í•˜ê³  ì¡°í•©í•¨ìœ¼ë¡œì¨ ì£¼ì–´ì§„ ë¦¬ì†ŒìŠ¤ë¥¼ ì˜ í™œìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p><h2 id="Kubernetes-Architecture"><a href="#Kubernetes-Architecture" class="headerlink" title="Kubernetes Architecture"></a>Kubernetes Architecture</h2><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ê°€ ì–´ë–»ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ ì•Œì•„ë´…ì‹œë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë‘ ê°€ì§€ ìœ í˜•ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§ˆìŠ¤í„° ë…¸ë“œì™€ ì›Œì»¤ ë…¸ë“œì…ë‹ˆë‹¤.  </p><ul><li>ë§ˆìŠ¤í„° ë…¸ë“œëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì€ ì „ì²´ ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹œìŠ¤í…œì„ ì œì–´í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.</li><li>ì›Œì»¤ ë…¸ë“œëŠ” ì‹¤ì œ ë°°í¬ë˜ëŠ” ì»¨í…Œì´ë„ˆ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.<br><img src="/images/kube_arc.png" alt="Kubernetes Cluster Architecture"></li></ul><h3 id="Control-Plain"><a href="#Control-Plain" class="headerlink" title="Control Plain"></a>Control Plain</h3><p>ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì€ í´ëŸ¬ìŠ¤í„°ë¥¼ ì œì–´í•˜ê³  ì‘ë™ì‹œí‚¤ëŠ” ì—­í• ì…ë‹ˆë‹¤. í•˜ë‚˜ì˜ ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ ì‹¤í–‰í•˜ê±°ë‚˜ ì—¬ëŸ¬ ë…¸ë“œë¡œ ë¶„í• ë˜ê³  ë³µì œë˜ì–´ ê³ ê°€ìš©ì„±ì„ ë³´ì¥í•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ êµ¬ì„± ìš”ì†Œë¡œ êµ¬ì„± ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê·¸ êµ¬ì„±ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p><ul><li><p>Kubernetes API ì„œë²„ : ì‚¬ìš©ì , ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ êµ¬ì„± ìš”ì†Œì™€ í†µì‹ í•œë‹¤.</p></li><li><p>Scheduler : ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°°í¬ë¥¼ ë‹´ë‹¹í•œë‹¤.(ìŠ¤ì¼€ì¥´ë§ì´ë¼ëŠ” ìš©ì–´ëŠ” íŒŒë“œê°€ íŠ¹ì • ë…¸ë“œì— í• ë‹¹ë¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.) </p><ul><li><p>ë…¸ë“œê°€ ë°°ì •ë˜ì§€ ì•Šì€, ìƒˆë¡œ ìƒì„±ëœ íŒŒë“œë¥¼ ê°ì§€í•˜ê³  ì‹¤í–‰í•  ë…¸ë“œë¥¼ ì„ íƒí•˜ëŠ” ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ìŠ¤ì¼€ì¥´ë§ ê²°ì •ì„ ìœ„í•´ì„œ ê³ ë ¤ë˜ëŠ” ìš”ì†Œë“¤ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.  </p><ul><li>ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ê°œë³„ ë° ì´ì²´ì  ìš”êµ¬ ì‚¬í•­</li><li>í•˜ë“œì›¨ì–´/ì†Œí”„íŠ¸ì›¨ì–´/ì •ì±…ì  ì œì•½</li><li>ì–´í”¼ë‹ˆí‹°(affinity) ë° ì•ˆí‹°-ì–´í”¼ë‹ˆí‹°(anti-affinity) ëª…ì„¸</li><li>ë°ì´í„° ì§€ì—­ì„±</li><li>ì›Œí¬ë¡œë“œ-ê°„ ê°„ì„­</li><li>ë°ë“œë¼ì¸</li></ul></li></ul></li><li><p>Controller Manager : ì»¨íŠ¸ë¡¤ëŸ¬ ë§¤ë‹ˆì €ëŠ” êµ¬ì„±ìš”ì†Œ ë³µì œë³¸, ì›Œì»¤ ë…¸ë“œ ì¶”ì , ë…¸ë“œ ì¥ì•  ì²˜ë¦¬ ë“±ê³¼ ê°™ì€ í´ëŸ¬ìŠ¤í„° ë‹¨ì˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤.  </p></li><li><p><a href="https://github.com/etcd-io/etcd">etcd</a> : í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì„ ì§€ì†ì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë¶„ì‚° ë°ì´í„° ì €ì¥ì†Œì´ë‹¤. </p></li></ul><h3 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h3><p>ì›Œì»¤ ë…¸ë“œëŠ” ì»¨í…Œì´ë„ˆí™”ëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ê³  ê´€ë¦¬í•˜ë©° ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì‘ì—…ì€ ë‹¤ìŒ êµ¬ì„± ìš”ì†Œì— ì˜í•´ ìˆ˜í–‰ë©ë‹ˆë‹¤.</p><ul><li>Contianer Runtime : ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ë„ì»¤ë‚˜ rkt ë“±ë“±</li><li>kubelet : API ì„œë²„ì™€ í†µì‹ í•˜ê³  ë…¸ë“œì˜ ì»¨í…Œì´ë„ˆë¥¼ ê´€ë¦¬í•œë‹¤.<ul><li>kubeletì€ íŒŒë“œë¥¼ ê´€ë¦¬í•œë‹¤ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„°ì˜ ê° ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” ì—ì´ì „íŠ¸ë¡œ kubeletì€ íŒŒë“œì—ì„œ ì»¨í…Œì´ë„ˆê°€ í™•ì‹¤í•˜ê²Œ ë™ì‘í•˜ë„ë¡ ê´€ë¦¬í•©ë‹ˆë‹¤. kubeletì€ ë‹¤ì–‘í•œ ë©”ì»¤ë‹ˆì¦˜ì„ í†µí•´ ì œê³µëœ íŒŒë“œ ìŠ¤í™ì˜ ì§‘í•©ì„ ë°›ì•„ì„œ ì»¨í…Œì´ë„ˆê°€ í•´ë‹¹ íŒŒë“œ ìŠ¤í™ì— ë”°ë¼ ì›í• í•˜ê²Œ(Health) ë™ì‘í•˜ê²Œ í•©ë‹ˆë‹¤. kubeletì€ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í†µí•´ ìƒì„±ë˜ì§€ ì•Šì€ ì»¨í…Œì´ë„ˆëŠ” ê´€ë¦¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. </li></ul></li><li>kube-proxy : ì–´í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„± ìš”ì†Œ ê°„ì— ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ë¡œë“œë°¸ëŸ°ì‹±í•œë‹¤.<ul><li>kube-proxyëŠ” í´ëŸ¬ìŠ¤í„°ì˜ í†µì‹ ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„°ì˜ ê° ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ í”„ë¡ì‹œë¡œ, ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì„œë¹„ìŠ¤ ê°œë…ì˜ êµ¬í˜„ë¶€ì…ë‹ˆë‹¤. kube-proxyëŠ” ë…¸ë“œì˜ ë„¤íŠ¸ì›Œí¬ ê·œì¹™ì„ ìœ ì§€ ê´€ë¦¬í•©ë‹ˆë‹¤. ì´ ë„¤íŠ¸ì›Œí¬ ê·œì¹™ì´ ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ ì„¸ì…˜ì´ë‚˜ í´ëŸ¬ìŠ¤í„° ë°–ì—ì„œ íŒŒë“œë¡œ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ í•  ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤.<br>kube-proxyëŠ” ìš´ì˜ ì²´ì œì— ê°€ìš©í•œ íŒ¨í‚· í•„í„°ë§ ê³„ì¸µì´ ìˆëŠ” ê²½ìš°, ì´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ kube-proxyëŠ” íŠ¸ë˜í”½ ìì²´ë¥¼ forwardí•©ë‹ˆë‹¤.</li></ul></li></ul><h3 id="Kubernetes-clusterê°€-ìƒí˜¸ì‘ìš©í•˜ëŠ”-ë°©ë²•"><a href="#Kubernetes-clusterê°€-ìƒí˜¸ì‘ìš©í•˜ëŠ”-ë°©ë²•" class="headerlink" title="Kubernetes clusterê°€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë°©ë²•"></a>Kubernetes clusterê°€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë°©ë²•</h3><p>í´ëŸ¬ìŠ¤í„°ëŠ” ë§ˆìŠ¤í„°ì™€ ë…¸ë“œë“¤ë¡œ êµ¬ì„±ì´ ë˜ì–´ìˆê³  ê° ë…¸ë“œë“¤ì€ ë„ì»¤, kubelet, kube-proxy ë°ëª¬ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ìš°ë¦¬ê°€ ì„¤ì¹˜í•œ kubectl ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ë§ˆìŠ¤í„° ë…¸ë“œì— ì¿ ë²„ë„¤í‹°ìŠ¤ API ì„œë²„ë¡œ RESTìš”ì²­ì„ ë³´ë‚´ì„œ í´ëŸ¬ìŠ¤í„°ì™€ ìƒí˜¸ì‘ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.<br><img src="/images/kube_cluster.png" alt="ë…¸ë“œ ì„¸ ê°œì¸ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ëª¨ìŠµ"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get nodes</span><br></pre></td></tr></table></figure><p>ì´ì œ ëª…ë ¹ì–´ë¡œ nodeë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.   </p><p>ì´ë ‡ê²Œ ê°„ë‹¨í•˜ê²Œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì¡°ì— ëŒ€í•´ ì‚´í´ë´¤ìŠµë‹ˆë‹¤. </p><hr><h1 id="Docker-in-Kubernetes"><a href="#Docker-in-Kubernetes" class="headerlink" title="Docker in Kubernetes"></a>Docker in Kubernetes</h1><p>ì§€ë‚œ ë²ˆ ë„ì»¤ ê¸€ì„ ì—°ì¥í•´ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ë¡œ ì´ì–´ì§€ëŠ” íë¦„ì„ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. ì§€ë‚œ ë„ì»¤ ê¸€ì—ì„œëŠ” ê°„ëµí•œ ì†Œê°œë§Œ í–ˆê¸° ë•Œë¬¸ì— ì´ë¯¸ì§€ì™€ ì´ë¯¸ì§€ ë ˆì´ì–´ì— ëŒ€í•œ ì´ì•¼ê¸°ë¥¼ ê¹Šê²Œ ëª»í•´ì„œ ì¡°ê¸ˆ ë” ì„¤ëª…ì„ í•´ë³´ê² ìŠµë‹ˆë‹¤. </p><h2 id="Docker-Image"><a href="#Docker-Image" class="headerlink" title="Docker Image"></a>Docker Image</h2><p>ìš°ë¦¬ê°€ ì–´ë–¤ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì—ˆë‹¤ê³  ê°€ì •í•©ì‹œë‹¤. ì´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì´ë¯¸ì§€ë¡œ êµ¬ì„±í•´ì„œ ë‚´ í™˜ê²½ê³¼ ê°™ì´ ë§Œë“¤ì–´, ì–´ë–¤ í™˜ê²½ì—ì„œ ëˆ„êµ¬ë‚˜ ì‘ì—…í•˜ê²Œ ë§Œë“¤ê³  ì‹¶ìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ì´ë¯¸ì§€ë¡œ íŒ¨í‚¤ì§•í•˜ê¸° ìœ„í•´ì„œëŠ” Dockerfileì„ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ íŒŒì¼ì—ëŠ” ë„ì»¤ê°€ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ìˆ˜í–‰í•´ì•¼ í•  ì§€ì‹œ ì‚¬í•­ë“¤ì´ ë‹´ê²¨ì ¸ ìˆìŠµë‹ˆë‹¤. ì´ Dockerfileì€ .pyì™€ ê°™ì€ íŒŒì¼ê³¼ ê°™ì€ ìœ„ì¹˜ì— ìˆì–´ì•¼ í•©ë‹ˆë‹¤. Dockerfileì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.  </p><p>ì±… Kubernetes in Actionì˜ ì˜ˆì œë¥¼ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤.  </p><figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:<span class="number">7</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> app.js /app.js</span></span><br><span class="line"><span class="bash">ENTRYPOINT [<span class="string">"node"</span>, <span class="string">"app.js"</span>]</span></span><br></pre></td></tr></table></figure><p>FROMì€ ê¸°ë³¸ ì´ë¯¸ì§€ë¡œ ì‚¬ìš©í•  ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ADDëŠ” ë¡œì»¬ ë””ë ‰í† ë¦¬ì˜ app.js íŒŒì¼ì„ ì´ë¯¸ì§€ì˜ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— ë™ì¼í•œ ì´ë¦„ìœ¼ë¡œ ì¶”ê°€í•œë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.  ENTRYPOINTëŠ” ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ ìˆ˜í–‰ë¼ì•¼ í•  ëª…ë ¹ì–´ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t &lt;name&gt; .</span><br><span class="line"></span><br><span class="line"><span class="comment">#ì‹¤ì œ ì‚¬ìš©</span></span><br><span class="line">$ docker build -t kubia .</span><br></pre></td></tr></table></figure><p>ì´ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ë©´ ì´ë¦„ëŒ€ë¡œ ì´ë¯¸ì§€ê°€ ë¹Œë“œë©ë‹ˆë‹¤. ë„ì»¤ì—ê²Œ í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ ì»¨í…ì¸ ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì´ë¦„ìœ¼ë¡œ ì íŒ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ë¼ê³  ìš”ì²­í•©ë‹ˆë‹¤. ë„ì»¤ëŠ” Dockerfileì„ ë³´ê³  ëª…ë ¹ì— ê¸°ë°˜í•´ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤. ì´ë¯¸ì§€ê°€ ì»´í“¨í„°ì— ì €ì¥ë¼ ìˆì§€ ì•Šìœ¼ë©´, ë„ì»¤ëŠ” Docker Hubì—ì„œ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ ë°›ìŠµë‹ˆë‹¤. ë„ì»¤ì˜ ì´ë¯¸ì§€ëŠ” í•˜ë‚˜ì˜ í° ë©ì–´ë¦¬ íŒŒì¼ì´ ì•„ë‹ˆë¼ ì—¬ëŸ¬ê°œì˜ ë ˆì´ì–´ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ë¹Œë“œë¥¼ í•  ë•Œ í•„ìš”í•œ ì´ë¯¸ì§€ê°€ ìˆë‹¤ë©´ í•„ìš”í•œ ì´ë¯¸ì§€ ë ˆì´ì–´ë§Œ ë‹¤ìš´ë¡œë“œ í•˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤. </p><p>ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë°°í¬í•˜ëŠ” ê²ƒì€ ì €ë²ˆ ê¸€ì—ì„œ ì„¤ëª…ì„ í–ˆìŠµë‹ˆë‹¤. ì´ì œ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì— ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ íŒ¨í‚¤ì§•í•˜ê³  ë„ì»¤ í—ˆë¸Œë¥¼ í†µí•´ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëìŠµë‹ˆë‹¤. </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ docker tag kubia luksa/kubia</span><br><span class="line"></span><br><span class="line">$ docker push luksa/kubia <span class="comment"># ë²„ì „ ëª…ì„ ì ì§€ ì•Šìœ¼ë©´ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì•Œì•„ì„œ ì‘ì„±í•´ ì£¼ì§€ë§Œ ì‹œê°„ì´ ë” ê±¸ë¦½ë‹ˆë‹¤.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ë‹¤ë¥¸ ë¨¸ì‹ ì—ì„œ ì´ë¯¸ì§€ ì‹¤í–‰í•˜ê¸°</span></span><br><span class="line">$ docker run -p 8080:8080 -d luksa/kubia</span><br></pre></td></tr></table></figure><p>ì´ì œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•  ìˆ˜ ìˆê²Œ ëìŠµë‹ˆë‹¤. ë°°í¬ë¥¼ ìœ„í•´ì„œëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤.  </p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ” ë²•ì€ ë‹¤ì–‘í•©ë‹ˆë‹¤. mini kubeë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ë„ ìˆê³ , AWSì— EKSë‚˜ GCPë¥¼ ì´ìš©í•´ì„œ nodeë¥¼ ë§Œë“¤ê³  ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ìì˜ í™˜ê²½ì´ êµ¬ì„±ë˜ì—ˆë‹¤ê³  ê°€ì •í•˜ê³  ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.  </p><h2 id="Kubernetes-client-ì„¤ì¹˜"><a href="#Kubernetes-client-ì„¤ì¹˜" class="headerlink" title="Kubernetes client ì„¤ì¹˜"></a>Kubernetes client ì„¤ì¹˜</h2><p>kubectl CLI í´ë¼ì´ì–¸íŠ¸ê°€ ìˆì–´ì•¼ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ë‹¤ë£° ìˆ˜ ìˆìŠµë‹ˆë‹¤.   </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* ë¦¬ëˆ…ìŠ¤ ê¸°ì¤€</span><br><span class="line"><span class="comment">#íŒŒì¼ ë‹¤ìš´ë¡œë“œ</span></span><br><span class="line">curl -LO https://storage.googleapis.com/kubernetes-release/release/`curl -s \</span><br><span class="line">   https://storage.googleapis.com/kubernetes-release/release/stable.txt`/bin/linux/amd64/kubectl</span><br><span class="line"><span class="comment">#íŒŒì¼ ê¶Œí•œ ë³€ê²½</span></span><br><span class="line">chmod +x ./kubectl</span><br><span class="line"><span class="comment">#íŒŒì¼ì„ PATHê°€ ì„¤ì •ëœ í´ë”ë¡œ ì˜®ê¸´ë‹¤(alias ëª…ë ¹ì–´ë¡œ ì‹¤í–‰í•˜ê¸° ìœ„í•´)</span></span><br><span class="line">sudo mv ./kubectl /usr/<span class="built_in">local</span>/bin/kubectl</span><br><span class="line"><span class="comment">#ì„¤ì¹˜ í™•ì¸</span></span><br><span class="line">kubectl version --client</span><br></pre></td></tr></table></figure><p>kubectl ì •ë³´ê°€ ë‚˜ì˜¤ë©´ ì„±ê³µì…ë‹ˆë‹¤.<br>ì´ì œ ì•„ê¹Œ ì „ì— ë§Œë“  node.js ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl run kubia --image=luksa/kubia --port=8080 --generator=run/v1</span><br><span class="line">&gt; replicationcontroller <span class="string">'"kubia" created</span></span><br></pre></td></tr></table></figure><p>â€“image=luksa/kubia ë¶€ë¶„ì€ ì‹¤í–‰í•˜ëŠ” ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ëª…ì‹œí•˜ëŠ” ê²ƒì´ë©°, -port=8080ì€ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ 8080í¬íŠ¸ë¥¼ ìˆ˜ì‹  ëŒ€ê¸°í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì¤ë‹ˆë‹¤.  â€“generatorë¶€ë¶„ì€ ë””í”Œë¡œì´ë¨¼íŠ¸ ëŒ€ì‹  ë ˆí”Œë¦¬ì¼€ì´ì…˜ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì¡°ê¸ˆ ì´ë”° ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.  </p><h3 id="ë°±ê·¸ë¼ìš´ë“œì—ì„œ-ë¬´ìŠ¨-ì¼ì´-ì¼ì–´ë‚˜ê³ -ìˆëŠ”-ê²ƒì¼ê¹Œ"><a href="#ë°±ê·¸ë¼ìš´ë“œì—ì„œ-ë¬´ìŠ¨-ì¼ì´-ì¼ì–´ë‚˜ê³ -ìˆëŠ”-ê²ƒì¼ê¹Œ" class="headerlink" title="ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆëŠ” ê²ƒì¼ê¹Œ?"></a>ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆëŠ” ê²ƒì¼ê¹Œ?</h3><p>ì¼ë‹¨ ì§€ê¸ˆ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚œ ê²ƒì¸ì§€ ì„¤ëª…í•´ë³´ê² ìŠµë‹ˆë‹¤. í˜„ì¬ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ í‘¸ì‹œí•´ì„œ ë„ì»¤ í—ˆë¸Œì— ê³µìœ í•´ë†“ì•˜ê³  ê³µìœ ëœ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™€ì„œ kubectlì„ ì´ìš©í•´ êµ¬ë™í–ˆìŠµë‹ˆë‹¤. kubectl ëª…ë ¹ì€ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ APIì„œë²„ë¡œ REST httpìš”ì²­ì„ ì „ë‹¬í•˜ê³  í´ëŸ¬ìŠ¤í„°ì— ìƒˆ ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ìƒˆ íŒŒë“œë¥¼ ë§Œë“¤ê³  ìŠ¤ì¼€ì¥´ëŸ¬ì— ì˜í•´ ì›Œì»¤ ë…¸ë“œ ì¤‘ í•˜ë‚˜ì— ìŠ¤ì¼€ì¤„ë§ì„ ì™„ë£Œí•©ë‹ˆë‹¤. kubeletì€ íŒŒë“œê°€ í• ë‹¹ëœ ê²ƒì„ ë³´ê³  ì´ë¯¸ì§€ê°€ ë¡œì»¬ì— ì—†ëŠ” ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤. ì´ë¯¸ì§€ë¥¼ ë°›ê¸° ìœ„í•´ ë„ì»¤ì—ê²Œ íŠ¹ì • ì´ë¯¸ì§€ë¥¼ í’€í•˜ë„ë¡ ì§€ì‹œí•˜ê³  luksa/kubia ì´ë¯¸ì§€ë¥¼ ë°›ì€ í›„ ë„ì»¤ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì´ë¯¸ì§€ë¥¼ ì´ìš©í•´ ìƒì„±í•˜ê³  ì‹¤í–‰í•©ë‹ˆë‹¤.  </p><p>ê³¼ì •ì„ ì‚´í´ë´¤ë“¯ì´, ìš°ë¦¬ê°€ ì§ì ‘ ì»¨í…Œì´ë„ˆë¥¼ ì§ì ‘ ìƒì„±í•˜ê±°ë‚˜ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. íŒŒë“œë§Œì„ ì´ìš©í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ íŒŒë“œë„ ì§ì ‘ ë§Œë“¤ì§€ ì•Šì•˜ê³  ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì•Œì•„ì„œ ì˜ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. kubectl runì„ í•˜ë©´ ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ìƒì„±í•˜ê³  ì´ê²ƒì´ ì‹¤ì œ íŒŒë“œë¥¼ ë§Œë“¤ì–´ ëƒ…ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì—ì„œ íŒŒë“œì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ê²Œ ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì˜í•´ ê´€ë¦¬ë˜ëŠ” ëª¨ë“  íŒŒë“œë¥¼ ë‹¨ì¼ ì„œë¹„ìŠ¤ë¡œ ë…¸ì¶œí•˜ë„ë¡ ëª…ë ¹í•©ë‹ˆë‹¤. ê²°êµ­ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì‹œìŠ¤í…œì€ ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬, íŒŒë“œ, ì„œë¹„ìŠ¤ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. </p><h4 id="ê°€ì¥-ì¤‘ìš”í•œ-êµ¬ì„±ìš”ì†ŒëŠ”-íŒŒë“œì…ë‹ˆë‹¤"><a href="#ê°€ì¥-ì¤‘ìš”í•œ-êµ¬ì„±ìš”ì†ŒëŠ”-íŒŒë“œì…ë‹ˆë‹¤" class="headerlink" title="ê°€ì¥ ì¤‘ìš”í•œ êµ¬ì„±ìš”ì†ŒëŠ” íŒŒë“œì…ë‹ˆë‹¤."></a>ê°€ì¥ ì¤‘ìš”í•œ êµ¬ì„±ìš”ì†ŒëŠ” íŒŒë“œì…ë‹ˆë‹¤.</h4><p>ì—¬ê¸°ì„œ íŒŒë“œëŠ” í•˜ë‚˜ì˜ ì»¨í…Œì´ë„ˆë¥¼ ê°–ê³  ìˆì§€ë§Œ, ë³´í†µ íŒŒë“œëŠ” ì›í•˜ëŠ” ê°¯ìˆ˜ì˜ ì»¨í…Œì´ë„ˆë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ëŠ” í˜„ì¬ Node.js í”„ë¡œì„¸ìŠ¤ê°€ ìˆê³  í¬íŠ¸ 8080ì— ë°”ì¸ë”© ë˜ì–´ httpìš”ì²­ì„ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤. íŒŒë“œëŠ” ìì²´ì˜ ê³ ìœ í•œ private ipì™€ host nameì„ ê°–ìŠµë‹ˆë‹¤.</p><h4 id="ë ˆí”Œë¦¬ì¼€ì´ì…˜-ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼-ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤"><a href="#ë ˆí”Œë¦¬ì¼€ì´ì…˜-ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼-ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤" class="headerlink" title="ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤."></a>ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</h4><p>ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” í•­ìƒ ì •í™•íˆ í•˜ë‚˜ì˜ íŒŒë“œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•˜ë„ë¡ ì§€ì •í•©ë‹ˆë‹¤. ë³´í†µ íŒŒë“œë¥¼ ë³µì œí•˜ê³  í•­ìƒ ì‹¤í–‰ ìƒíƒœë¡œ ë§Œë“­ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” íŒŒë“œì˜ replicasë¥¼ ì§€ì •í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ íŒŒë“œë¥¼ í•˜ë‚˜ë§Œ ìƒì„±í–ˆìŠµë‹ˆë‹¤. ì–´ë–¤ ì¥ì•  ë“±ì˜ ì´ìœ ë¡œ íŒŒë“œê°€ ì£½ì–´ë²„ë¦¬ë©´ ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì§€ì •ëœ íŒŒë“œ ìˆ˜ë¥¼ ì±„ìš°ê¸° ìœ„í•´ ìƒˆë¡œìš´ íŒŒë“œë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. </p><h4 id="ì´ì œ-ì„œë¹„ìŠ¤ë¥¼-ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤"><a href="#ì´ì œ-ì„œë¹„ìŠ¤ë¥¼-ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤" class="headerlink" title="ì´ì œ ì„œë¹„ìŠ¤ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤."></a>ì´ì œ ì„œë¹„ìŠ¤ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</h4><p>kubia-http ì„œë¹„ìŠ¤ê°€ í•„ìš”í•œ ì´ìœ ë¥¼ ì•Œê¸°ìœ„í•´ íŒŒë“œì˜ ì£¼ìš” íŠ¹ì„±ì„ ë” ì´í•´í•´ ë³¼ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. íŒŒë“œëŠ” ì˜ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ephemeralí•˜ê¸° ë•Œë¬¸ì— ì‚¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŒŒë“œê°€ ì£½ì–´ë²„ë¦´ ìˆ˜ ìˆê³  ëˆ„êµ°ê°€ íŒŒë“œë¥¼ killí•  ìˆ˜ë„ ìˆìœ¼ë©°, ë¹„ì •ìƒ ë…¸ë“œì—ì„œ íŒŒë“œê°€ ì œê±°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¼ë¡  ì‚¬ë¼ì§€ë©´ ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì˜í•´ì„œ ë‹¤ì‹œ ìƒˆ íŒŒë“œë¡œ ëŒ€ì²´ë©ë‹ˆë‹¤. ì¤‘ìš”í•œ ê²ƒì€ ìƒˆ íŒŒë“œëŠ” ë‹¤ë¥¸ IPì£¼ì†Œë¥¼ í• ë‹¹ë°›ëŠ” ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì„œë¹„ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë©´, íŒŒë“œì˜ IPì£¼ì†Œê°€ ë°”ë€ŒëŠ” ë¬¸ì œì™€ ì—¬ëŸ¬ ê°œì˜ ë‹¨ì¼ íŒŒë“œë¥¼ ë‹¨ì¼ IPì™€ í¬íŠ¸ì˜ ìŒìœ¼ë¡œ ë…¸ì¶œí•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p>ì„œë¹„ìŠ¤ê°€ ìƒì„±ë˜ë©´ ì •ì  IPë¥¼ í• ë‹¹ë°›ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì„œë¹„ìŠ¤ê°€ ìˆëŠ”ë™ì•ˆ ë³€ê²½ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. íŒŒë“œì— ì§ì ‘ ì—°ê²°í•´ì•¼ í•˜ì§€ë§Œ í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë¹„ìŠ¤ì˜ IP ì£¼ì†Œë¥¼ í†µí•´ ì—°ê²°í•´ì•¼ í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ëŠ” ì–´ë–¤ íŒŒë“œê°€ ì–´ë–¤ IPë¥¼ ë°›ëŠ”ì§€ ìƒê´€ì—†ì´ íŒŒë“œ ì¤‘ í•˜ë‚˜ë¡œ ì—°ê²°í•´ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.<br>ì„œë¹„ìŠ¤ëŠ” ë™ì¼í•œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” í•˜ë‚˜ ì´ìƒì˜ íŒŒë“œ ê·¸ë£¹ì˜ ì •ì ì¸ ìœ„ì¹˜ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì„œë¹„ìŠ¤ì˜ IPì™€ í¬íŠ¸ë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ê·¸ ìˆœê°„ ì„œë¹„ìŠ¤ì— ì†í•´ ìˆëŠ” íŒŒë“œ ì¤‘ í•˜ë‚˜ë¡œ ìš”ì²­ì„ ì „ë‹¬í•˜ê²Œ ë©ë‹ˆë‹¤.</p><h2 id="Pod"><a href="#Pod" class="headerlink" title="Pod"></a>Pod</h2><p>ì¿ ë²„ë„¤í‹°ìŠ¤ì— ëŒ€í•´ì„œ ì¡°ê¸ˆì´ë¼ë„ ë³¸ ì‚¬ëŒì€ íŒŒë“œì— ëŒ€í•´ì„œë„ ë“¤ì–´ë³¸ ì ì´ ìˆì„ ê²ƒì…ë‹ˆë‹¤. íŒŒë“œëŠ” ë…¸ë“œ ì•ˆì— êµ¬ì„±ëœ ì—¬ëŸ¬ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ì»¨í…Œì´ë„ˆì˜ ê·¸ë£¹ì…ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ê°œë³„ ì»¨í…Œì´ë„ˆë¥¼ ì§ì ‘ ë‹¤ë£¨ì§€ ì•Šê³  íŒŒë“œë¥¼ ë‹¤ë£¹ë‹ˆë‹¤. ì´ íŒŒë“œë“¤ì€ kubectlë¡œ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get pods</span><br></pre></td></tr></table></figure><p>í˜¹ì‹œ íŒŒë“œì˜ ìƒíƒœê°€ Pendingìƒíƒœë¼ë©´ íŒŒë“œì˜ ë‹¨ì¼ ì»¨í…Œì´ë„ˆê°€ ì¤€ë¹„ê°€ ë˜ì§€ ì•Šì€ ê²ƒì´ë‹¤. í• ë‹¹ëœ ì›Œì»¤ ë…¸ë“œê°€ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì— ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ëŠ” ì¤‘ì´ê¸° ë•Œë¬¸ì¼ ìˆ˜ë„ ìˆê³ , ë¦¬ì†ŒìŠ¤ ë¶€ì¡±ì¼ ìˆ˜ë„ ìˆë‹¤. ì¡°ê¸ˆ ê¸°ë‹¤ë ¤ë³¸ í›„ ê³„ì† pendingìœ¼ë¡œ ë‚˜ì˜¨ë‹¤ë©´ ë¦¬ì†ŒìŠ¤ë¥¼ ëŠ˜ë ¤ì£¼ë©´ ëœë‹¤. ë‹¤ìš´ë¡œë“œê°€ ì™„ë£Œë˜ê³  íŒŒë“œì˜ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë˜ë©´ Runningìœ¼ë¡œ ë‚˜ì˜¨ë‹¤.  íŒŒë“œì— ëŒ€í•´ì„œëŠ” ê°„ë‹¨íˆ ì„¤ëª…í•˜ê³  ë‚˜ì¤‘ì— ë”°ë¡œ ê¹Šê²Œ ë‹¤ë¤„ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.<br><img src="/images/pods.png" alt="pods"> </p><hr><h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary."></a>Summary.</h1><p>ì¿ ë²„ë„¤í‹°ìŠ¤ì— ëŒ€í•´ì„œ ê³µë¶€í•œ ë‚´ìš©ì„ ê°„ë‹¨í•˜ê²Œ ìš”ì•½í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p><ul><li>ëª¨ë†€ë¦¬ìŠ¤ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ì²˜ìŒì— êµ¬ì¶•í•˜ê¸° ì‰½ì§€ë§Œ ê°€ë©´ ê°ˆìˆ˜ë¡ ìœ ì§€ ê´€ë¦¬í•˜ê¸°ê°€ í˜ë“¤ê³  í™•ì¥ì´ ë¶ˆê°€ëŠ¥í•´ ì§‘ë‹ˆë‹¤.</li><li>ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê¸°ë°˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì³ëŠ” ê° êµ¬ì„± ìš”ì†Œì˜ ê°œë°œì„ ìš”ì´í•˜ê²Œ í•˜ì§€ë§Œ í•˜ë‚˜ì˜ ì‹œìŠ¤í…œìœ¼ë¡œ ì‘ë™í•˜ë„ë¡ ë°°í¬í•˜ê³  êµ¬ì„±í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.</li><li>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì „ì²´ ë°ì´í„° ì„¼í„°ë¥¼ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì„ ìœ„í•œ ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ë¡œ ì œê³µí•˜ê²Œ í•©ë‹ˆë‹¤.</li><li>ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í†µí•´ì„œ ê°œë°œìëŠ” ì‹œìŠ¤í…œ ê´€ë¦¬ìì˜ ë„ì›€ ì—†ì´ë„ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</li><li>ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í†µí•´ì„œ ì‹œìŠ¤í…œ ê´€ë¦¬ìëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ê³ ì¥ ë‚œ ë…¸ë“œê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë˜ê²Œ í•¨ìœ¼ë¡œì¨ ë” í¸í•˜ê²Œ ì ì„ ì˜ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. </li><li>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë§ˆìŠ¤í„° ë…¸ë“œì™€ ì›Œì»¤ ë…¸ë“œë¡œ ì´ë£¨ì–´ì ¸ìˆìŠµë‹ˆë‹¤.</li><li>ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¡œ íŒ¨í‚¤ì§•í•˜ê³  ì›ê²©ì— í‘¸ì‹œí•´ ëˆ„êµ¬ë‚˜ ì‚¬ìš©í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li><li>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” íŒŒë“œë¥¼ ì´ìš©í•´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•©ë‹ˆë‹¤.</li></ul><p>ì—¬ëŸ¬ ë‚´ìš©ì„ ì „ë‹¬í•˜ë ¤ê³  í•˜ë‹¤ë³´ë‹ˆ ê¸€ì´ ì¥í™©í•´ì§„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë‹¤ìŒ ê¸€ì—ì„œëŠ” íŒŒë“œì— ëŒ€í•´ì„œ ë” ê¹Šê²Œ ì•Œì•„ë³´ê³  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¡œ íŒŒë“œë¥¼ ê²¹ì¹˜ì§€ ì•ŠëŠ” ê·¸ë£¹ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ë°©ë²•ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>]]></content:encoded>
      
      <comments>http://tkdguq05.github.io/2020/07/30/k8s-genesis/#disqus_thread</comments>
    </item>
    
  </channel>
</rss>
